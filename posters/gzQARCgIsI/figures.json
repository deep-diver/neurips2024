[{"figure_path": "gzQARCgIsI/figures/figures_1_1.jpg", "caption": "Figure 1: When compared to experimental and other observational studies, NATURAL has lower costs and provides greater diversity in cohort selection, for causal effect estimation. data is abundant but even when the necessary assumptions are satisfied, it must be structured (i.e., the outcomes, treatments, and relevant covariates must be defined, recorded, and tabulated) before it becomes amenable to computational analyses.", "description": "This figure compares three different types of studies used for causal effect estimation: completely randomized experiments, observational studies with structured data, and observational studies with natural language data. It highlights the decreasing cost and increasing diversity of cohorts in each approach, showing how natural language data can be mined cost effectively to obtain causal effect estimates. The figure also illustrates the type of data collected in each setting and the causal graphs representing the relationships between variables.", "section": "1 Introduction"}, {"figure_path": "gzQARCgIsI/figures/figures_5_1.jpg", "caption": "Figure 2: Our pipeline leverages LLMs to curate data that can be plugged into natural language conditioned estimators for average treatment effects.", "description": "This figure illustrates the steps involved in the NATURAL pipeline for estimating average treatment effects from unstructured natural language data.  The pipeline begins with observational language data, which is first filtered for relevance.  Then, initial covariate extraction is performed, followed by a second filtering step based on inclusion criteria.  Final covariate extraction is then done, after which the conditional distributions of the variables of interest (outcome, treatment, covariates) are inferred using a large language model (LLM).  The LLM is used at multiple stages to assist in filtering, extraction, and inference.", "section": "Implementing NATURAL estimators with Large Language Models"}, {"figure_path": "gzQARCgIsI/figures/figures_6_1.jpg", "caption": "Figure 3: For Hillstrom (left) and Retail Hero (right), the KL divergence between estimated joint and propensity distributions and their true counterparts reduces with increasing number of posts (top), as does the RMSE between the NATURAL Full estimate and true ATE (bottom).", "description": "This figure shows the impact of increasing the number of reports on the accuracy of NATURAL estimators. The top panels show the Kullback-Leibler (KL) divergence between the estimated and true joint distributions P(X,T,Y) and propensity scores P(T=1|X).  The bottom panels display the root mean squared error (RMSE) between the NATURAL Full estimator and the true average treatment effect (ATE).  Both metrics demonstrate improved accuracy with a larger number of reports, suggesting that more data leads to better estimation of both the joint distribution and the ATE.", "section": "4 Implementing NATURAL estimators with Large Language Models"}, {"figure_path": "gzQARCgIsI/figures/figures_9_1.jpg", "caption": "Figure 4: Ablation study on Semaglutide vs. Tirzepatide, to tease apart the effect of data filtering and imputation (left) as well as LLM scale for conditionals (right) on NATURAL performance. It shows that both inclusion-based filtering and imputations from a pretrained LLM are crucial for the performance of NATURAL. We also compared performance of our method when the conditional probabilities in eq. (6) are evaluated using models of different scales in fig. 4 (right), and found that performance improves at larger scales and with greater quantity of data.", "description": "This figure shows the results of ablation studies conducted to analyze the impact of data filtering and LLM imputation on the performance of the proposed NATURAL method. The left panel compares the root mean squared error (RMSE) between the estimated average treatment effect (ATE) and ground truth ATEs obtained using no filtering with LLM imputations, inclusion weighting with uniform imputations, and inclusion weighting with LLM imputations, respectively. The right panel shows the RMSE for different LLM scales, demonstrating that larger models generally yield better performance. These results highlight the critical roles of data filtering and LLM imputations in improving the accuracy of the method.", "section": "Empirical Evaluation"}, {"figure_path": "gzQARCgIsI/figures/figures_9_2.jpg", "caption": "Figure 5: NATURAL propensity scores balance the Semaglutide vs. Tirzepatide covariates better than uniform scores.", "description": "This figure displays a comparison of covariate balance across treatment groups using propensity scores estimated by various LLMs (LLAMA2-7B, LLAMA2-13B, LLAMA2-70B) against uniform scores.  Each point on the chart represents a covariate from the Semaglutide vs. Tirzepatide experiment. The x-axis indicates the balance (the smaller the value, the better the balance) of covariates across treatment groups, while the y-axis lists the covariates.  The figure demonstrates that LLMs, especially larger models, significantly improve covariate balance compared to a uniform distribution.", "section": "F.2 Balancing property of propensity scores"}, {"figure_path": "gzQARCgIsI/figures/figures_24_1.jpg", "caption": "Figure 3: For Hillstrom (left) and Retail Hero (right), the KL divergence between estimated joint and propensity distributions and their true counterparts reduces with increasing number of posts (top), as does the RMSE between the NATURAL Full estimate and true ATE (bottom).", "description": "This figure shows the impact of the number of posts on the performance of the NATURAL Full estimator. The top panels display the KL divergence between the estimated and true joint distributions (left: Hillstrom dataset, right: Retail Hero dataset), while the bottom panels present the RMSE between the estimated and true ATEs.  As the number of posts increases, both the KL divergence and the RMSE decrease, indicating improved estimation accuracy with more data.", "section": "4 Implementing NATURAL estimators with Large Language Models"}, {"figure_path": "gzQARCgIsI/figures/figures_24_2.jpg", "caption": "Figure 3: For Hillstrom (left) and Retail Hero (right), the KL divergence between estimated joint and propensity distributions and their true counterparts reduces with increasing number of posts (top), as does the RMSE between the NATURAL Full estimate and true ATE (bottom).", "description": "This figure shows the performance of NATURAL Full estimator in two semi-synthetic datasets, Hillstrom and Retail Hero. The top row displays the KL divergence between the estimated and true joint distributions, and the estimated and true propensity scores. The bottom row shows the RMSE between the NATURAL Full estimate and the true ATE. In both datasets, as the number of posts increases, both the KL divergence and the RMSE decrease, indicating that the NATURAL Full estimator performs better with more data.", "section": "4 Implementing NATURAL estimators with Large Language Models"}, {"figure_path": "gzQARCgIsI/figures/figures_25_1.jpg", "caption": "Figure 6: Distributions of \"known\" (top) vs \"unknown\" and imputed (bottom) covariates for Semaglutide vs. Tirzepatide.", "description": "This figure compares the distributions of covariates extracted by an LLM in its first extraction (top) and those imputed by the LLM in its second imputation (bottom), conditioned on inclusion criteria.  It provides a visual representation of the differences between directly extracted versus imputed covariate data for the Semaglutide vs. Tirzepatide experiment in the paper. The purpose is to show the similarity of the distributions, demonstrating the effectiveness of the imputation method.", "section": "Further Experimental Results"}, {"figure_path": "gzQARCgIsI/figures/figures_25_2.jpg", "caption": "Figure 6: Distributions of \"known\" (top) vs \"unknown\" and imputed (bottom) covariates for Semaglutide vs. Tirzepatide.", "description": "This figure shows the distributions of known and unknown covariates for the Semaglutide vs. Tirzepatide dataset.  The top row displays the distributions of covariates that were directly extracted from the text data by the LLM, while the bottom row shows the distributions of covariates that were imputed by the LLM based on the text data. This illustrates the LLM's ability to both extract and infer information from unstructured text.", "section": "F Further Experimental Results"}, {"figure_path": "gzQARCgIsI/figures/figures_25_3.jpg", "caption": "Figure 1: When compared to experimental and other observational studies, NATURAL has lower costs and provides greater diversity in cohort selection, for causal effect estimation. data is abundant but even when the necessary assumptions are satisfied, it must be structured (i.e., the outcomes, treatments, and relevant covariates must be defined, recorded, and tabulated) before it becomes amenable to computational analyses.", "description": "This figure compares the costs and data diversity of three different approaches to causal effect estimation: completely randomized experiments (CRE), observational studies with structured data, and NATURAL (using unstructured natural language data).  It highlights that NATURAL offers a cost-effective alternative, leveraging readily available diverse data while pointing out that even with appropriate causal assumptions, the observational data must be structured before use.", "section": "1 Introduction"}, {"figure_path": "gzQARCgIsI/figures/figures_26_1.jpg", "caption": "Figure 11: NATURAL IPW ATE estimates for different values of sensitivity parameters in each real setting. The orange (blue) region corresponds to ATEs with the same (flipped) sign as our estimates.", "description": "This figure shows the robustness of NATURAL IPW ATE estimates to unobserved confounding for four real-world clinical trial datasets. Each plot displays contour lines representing ATE estimates at different values of sensitivity parameters (\u03b5\u2080, \u03b5\u2081). The orange region indicates parameter values where the sign of the ATE estimate matches the estimate, while the blue region shows where the sign flips.  Stars mark the sensitivity parameter values for each covariate in the dataset.  This visualization helps assess the impact of unobserved confounders on the ATE estimates. This suggests that  for some datasets (Semaglutide vs. Tirzepatide), the ATE estimates are sensitive to the covariates, whereas for others, the estimates are robust to the presence of unobserved confounders.", "section": "F.3 Sensitivity Analysis"}, {"figure_path": "gzQARCgIsI/figures/figures_26_2.jpg", "caption": "Figure 10: Propensity scores estimated with LLAMA2-70B balance covariates of the real clinical datasets, far better than uniform scores do.", "description": "This figure visualizes the balancing property of propensity scores estimated using LLAMA2-70B across different real-world clinical datasets.  It demonstrates that propensity scores calculated using LLAMA2-70B effectively balance covariates across treatment groups, indicating their accuracy in adjusting for confounding biases. This contrasts with uniform propensity scores, which show a significant imbalance, highlighting the effectiveness of LLMs in causal inference.", "section": "F.2 Balancing property of propensity scores"}]