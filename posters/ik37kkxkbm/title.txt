In-Context Learning with Representations: Contextual Generalization of Trained Transformers