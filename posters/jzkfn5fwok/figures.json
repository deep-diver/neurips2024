[{"figure_path": "JzKFN5fWOk/figures/figures_1_1.jpg", "caption": "Figure 1: Illustration of the performance of D-CPT Law. (Left): The curves show the relationship between Lg and rg under different dataset sizes D for Qwen1.5-1.8B model. CPT data are a mixture of code-corpus and general-corpus. Here, Lg represents the loss on the general-corpus validation set, while rg indicates the percentage of the general corpus in the training data. The dashed curves denote the curves predicted by D-CPT Law, circular markers and star markers are fitting data points and unseen validation points, respectively. (Right): These curves are the corresponding results between the code-corpus validation loss La and the percentage of the code-corpus data ra.", "description": "This figure shows the performance of the D-CPT Law. The left panel shows the relationship between the general corpus validation loss (Lg) and the general corpus mixture ratio (rg) for different dataset sizes. The right panel shows the same relationship but for the domain-specific corpus validation loss (Ld) and domain-specific corpus mixture ratio (rd).  The dashed lines represent the predicted values from the D-CPT Law, showing its ability to accurately predict performance for unseen mixture ratios. Circular markers are fitting points, while star markers are unseen validation points.", "section": "3.1 D-CPT Law"}, {"figure_path": "JzKFN5fWOk/figures/figures_2_1.jpg", "caption": "Figure 2: Illustration of D-CPT Law and Cross-Domain CPT-Law pipeline. (Upper): In D-CPT Law, we first collect domain-corpus and general-corpus, and conduct experiments under a small-scale experimental setup to gather empirical data points to fit the D-CPT Law. After that, we can predict the model's performance in large-scale experimental settings. (Lower): In Cross-Domain CPT-Law, for an unseen downstream domain, like Physics, we can calculate its Domain-specific Learnable Coefficient value and incorporate it into the fitted Cross-Domain D-CPT Law to derive the D-CPT Law for this new domain. Based on the D-CPT Law, we introduce three application scenarios: optimal mixture on the trade-off between general and domain-specific abilities, optimal mixture for limited domain-specific data, and resource allocation in Section 4.3.", "description": "This figure illustrates the workflow of the proposed D-CPT Law and Cross-Domain D-CPT Law.  The upper part shows the in-domain setting where data from multiple domains are used to train a small-scale model and fit the D-CPT law. This allows prediction of model performance at larger scales. The lower part depicts the cross-domain setting.  The domain-specific learnable coefficient (DLC) is calculated for an unseen domain (e.g., Physics), integrated into the cross-domain D-CPT law, and then used to predict the performance in that domain. Three applications are highlighted: optimal mixture ratio for balancing general and domain-specific abilities, optimal mixture for limited domain data, and resource allocation.", "section": "3 Methods"}, {"figure_path": "JzKFN5fWOk/figures/figures_6_1.jpg", "caption": "Figure 1: Illustration of the performance of D-CPT Law. (Left): The curves show the relationship between Lg and rg under different dataset sizes D for Qwen1.5-1.8B model. CPT data are a mixture of code-corpus and general-corpus. Here, Lg represents the loss on the general-corpus validation set, while rg indicates the percentage of the general corpus in the training data. The dashed curves denote the curves predicted by D-CPT Law, circular markers and star markers are fitting data points and unseen validation points, respectively. (Right): These curves are the corresponding results between the code-corpus validation loss La and the percentage of the code-corpus data ra.", "description": "This figure demonstrates the effectiveness of the proposed D-CPT Law in predicting the performance of continual pre-training models with different dataset sizes, model sizes, and mixture ratios of general and domain-specific corpora.  The left panel shows the relationship between general corpus validation loss and the proportion of general corpus in training data, while the right panel shows the same relationship for the domain-specific corpus.", "section": "3 D-CPT Law"}, {"figure_path": "JzKFN5fWOk/figures/figures_6_2.jpg", "caption": "Figure 1: Illustration of the performance of D-CPT Law. (Left): The curves show the relationship between Lg and rg under different dataset sizes D for Qwen1.5-1.8B model. CPT data are a mixture of code-corpus and general-corpus. Here, Lg represents the loss on the general-corpus validation set, while rg indicates the percentage of the general corpus in the training data. The dashed curves denote the curves predicted by D-CPT Law, circular markers and star markers are fitting data points and unseen validation points, respectively. (Right): These curves are the corresponding results between the code-corpus validation loss La and the percentage of the code-corpus data ra.", "description": "This figure demonstrates the effectiveness of the D-CPT Law in predicting the performance of continual pre-training with varying mixture ratios of general and domain-specific corpora. The left panel shows the relationship between the general corpus validation loss and the percentage of general corpus in the training data for different dataset sizes, while the right panel shows the same for domain-specific corpus validation loss. The dashed lines represent predictions from the D-CPT Law, showing its accuracy in capturing the relationship between the loss and mixture ratio across various model sizes and dataset sizes.", "section": "3.1 D-CPT Law"}, {"figure_path": "JzKFN5fWOk/figures/figures_8_1.jpg", "caption": "Figure 1: Illustration of the performance of D-CPT Law. (Left): The curves show the relationship between Lg and rg under different dataset sizes D for Qwen1.5-1.8B model. CPT data are a mixture of code-corpus and general-corpus. Here, Lg represents the loss on the general-corpus validation set, while rg indicates the percentage of the general corpus in the training data. The dashed curves denote the curves predicted by D-CPT Law, circular markers and star markers are fitting data points and unseen validation points, respectively. (Right): These curves are the corresponding results between the code-corpus validation loss La and the percentage of the code-corpus data ra.", "description": "The figure illustrates the performance of the proposed D-CPT Law. The left panel shows the relationship between the general-corpus validation loss (Lg) and the general-corpus mixture ratio (rg) under various dataset sizes.  The right panel shows the analogous relationship between code-corpus validation loss (La) and the code-corpus mixture ratio (rd). Dashed lines represent the predictions made by the D-CPT Law, while markers represent actual training data and unseen validation data.", "section": "3.1 D-CPT Law"}, {"figure_path": "JzKFN5fWOk/figures/figures_15_1.jpg", "caption": "Figure 1: Illustration of the performance of D-CPT Law. (Left): The curves show the relationship between Lg and rg under different dataset sizes D for Qwen1.5-1.8B model. CPT data are a mixture of code-corpus and general-corpus. Here, Lg represents the loss on the general-corpus validation set, while rg indicates the percentage of the general corpus in the training data. The dashed curves denote the curves predicted by D-CPT Law, circular markers and star markers are fitting data points and unseen validation points, respectively. (Right): These curves are the corresponding results between the code-corpus validation loss La and the percentage of the code-corpus data ra.", "description": "This figure shows the performance of the proposed D-CPT Law in predicting the validation loss (Lg and La) on general and domain-specific corpora, respectively, under different dataset sizes (D) and mixture ratios (rg and rd) using the Qwen1.5-1.8B model. The left panel shows the relationship between the general corpus validation loss and the percentage of general corpus in the training data. The right panel shows the relationship between the domain-specific corpus validation loss and the percentage of domain-specific corpus in the training data. Dashed lines represent predictions from the D-CPT Law, while circular and star markers represent fitting and unseen validation data, respectively.", "section": "3.1 D-CPT Law"}, {"figure_path": "JzKFN5fWOk/figures/figures_15_2.jpg", "caption": "Figure 1: Illustration of the performance of D-CPT Law. (Left): The curves show the relationship between Lg and rg under different dataset sizes D for Qwen1.5-1.8B model. CPT data are a mixture of code-corpus and general-corpus. Here, Lg represents the loss on the general-corpus validation set, while rg indicates the percentage of the general corpus in the training data. The dashed curves denote the curves predicted by D-CPT Law, circular markers and star markers are fitting data points and unseen validation points, respectively. (Right): These curves are the corresponding results between the code-corpus validation loss La and the percentage of the code-corpus data ra.", "description": "This figure demonstrates the effectiveness of the D-CPT Law in predicting the performance of continual pre-training (CPT) on large language models (LLMs).  The left panel shows the relationship between general-corpus validation loss (Lg) and the proportion of general-corpus data (rg) for various dataset sizes.  The right panel shows a similar relationship between code-corpus validation loss (La) and the proportion of code-corpus data (ra).  Dashed lines represent the D-CPT Law predictions, while markers show the actual training results.  The close fit between predicted and actual values demonstrates the accuracy of the D-CPT Law.", "section": "3 D-CPT Law"}, {"figure_path": "JzKFN5fWOk/figures/figures_15_3.jpg", "caption": "Figure 1: Illustration of the performance of D-CPT Law. (Left): The curves show the relationship between Lg and rg under different dataset sizes D for Qwen1.5-1.8B model. CPT data are a mixture of code-corpus and general-corpus. Here, Lg represents the loss on the general-corpus validation set, while rg indicates the percentage of the general corpus in the training data. The dashed curves denote the curves predicted by D-CPT Law, circular markers and star markers are fitting data points and unseen validation points, respectively. (Right): These curves are the corresponding results between the code-corpus validation loss La and the percentage of the code-corpus data ra.", "description": "The figure demonstrates the performance of the proposed D-CPT Law for predicting the optimal mixture ratio in continual pre-training of large language models. The left panel shows the relationship between the general corpus validation loss (Lg) and the general corpus mixture ratio (rg) for different dataset sizes, while the right panel shows the corresponding relationship for the domain-specific corpus. The dashed lines represent the predictions of the D-CPT Law, which accurately predicts performance with small-scale training costs.", "section": "3.1 D-CPT Law"}, {"figure_path": "JzKFN5fWOk/figures/figures_16_1.jpg", "caption": "Figure 1: Illustration of the performance of D-CPT Law. (Left): The curves show the relationship between Lg and rg under different dataset sizes D for Qwen1.5-1.8B model. CPT data are a mixture of code-corpus and general-corpus. Here, Lg represents the loss on the general-corpus validation set, while rg indicates the percentage of the general corpus in the training data. The dashed curves denote the curves predicted by D-CPT Law, circular markers and star markers are fitting data points and unseen validation points, respectively. (Right): These curves are the corresponding results between the code-corpus validation loss La and the percentage of the code-corpus data ra.", "description": "This figure shows the performance of the proposed Domain-specific Continual Pre-Training Scaling Law (D-CPT Law). The left panel shows the relationship between the general corpus validation loss (Lg) and the general corpus mixture ratio (rg) for different dataset sizes. The right panel shows the same relationship but for the domain-specific corpus validation loss (La) and the domain-specific corpus mixture ratio (rd).  Dashed lines represent the predictions of the D-CPT Law, demonstrating its accuracy in predicting model performance under various dataset sizes and mixture ratios.", "section": "3.1 D-CPT Law"}, {"figure_path": "JzKFN5fWOk/figures/figures_17_1.jpg", "caption": "Figure 1: Illustration of the performance of D-CPT Law. (Left): The curves show the relationship between Lg and rg under different dataset sizes D for Qwen1.5-1.8B model. CPT data are a mixture of code-corpus and general-corpus. Here, Lg represents the loss on the general-corpus validation set, while rg indicates the percentage of the general corpus in the training data. The dashed curves denote the curves predicted by D-CPT Law, circular markers and star markers are fitting data points and unseen validation points, respectively. (Right): These curves are the corresponding results between the code-corpus validation loss La and the percentage of the code-corpus data ra.", "description": "This figure shows the performance of the proposed Domain-specific Continual Pre-Training Scaling Law (D-CPT Law). The left panel shows the relationship between the general corpus validation loss (Lg) and the general corpus mixture ratio (rg) for different dataset sizes.  The right panel shows a similar relationship but for the domain-specific corpus validation loss (La) and the domain-specific corpus mixture ratio (rd).  Dashed lines represent predictions from the D-CPT Law, while markers show actual training and validation results.", "section": "3 D-CPT Law"}, {"figure_path": "JzKFN5fWOk/figures/figures_24_1.jpg", "caption": "Figure 1: Illustration of the performance of D-CPT Law. (Left): The curves show the relationship between Lg and rg under different dataset sizes D for Qwen-1.5-1.8B model. CPT data are a mixture of code-corpus and general-corpus. Here, Lg represents the loss on the general-corpus validation set, while rg indicates the percentage of the general corpus in the training data. The dashed curves denote the curves predicted by D-CPT Law, circular markers and star markers are fitting data points and unseen validation points, respectively. (Right): These curves are the corresponding results between the code-corpus validation loss La and the percentage of the code-corpus data ra.", "description": "This figure demonstrates the performance of the proposed Domain-specific Continual Pre-training Scaling Law (D-CPT Law).  The left panel shows the relationship between the general corpus validation loss (Lg) and the percentage of general corpus in the training data (rg) for different dataset sizes. The right panel shows the corresponding relationship between the domain-specific corpus validation loss (La) and the percentage of domain-specific corpus in the training data (rd). Dashed lines represent the D-CPT Law predictions, while markers show the actual training data.", "section": "3.1 D-CPT Law"}, {"figure_path": "JzKFN5fWOk/figures/figures_24_2.jpg", "caption": "Figure 1: Illustration of the performance of D-CPT Law. (Left): The curves show the relationship between Lg and rg under different dataset sizes D for Qwen-1.5-1.8B model. CPT data are a mixture of code-corpus and general-corpus. Here, Lg represents the loss on the general-corpus validation set, while rg indicates the percentage of the general corpus in the training data. The dashed curves denote the curves predicted by D-CPT Law, circular markers and star markers are fitting data points and unseen validation points, respectively. (Right): These curves are the corresponding results between the code-corpus validation loss La and the percentage of the code-corpus data ra.", "description": "This figure demonstrates the effectiveness of the D-CPT Law in predicting the performance of continual pre-training on large language models.  The left panel shows the relationship between the general corpus validation loss (Lg) and the general corpus mixture ratio (rg) for various dataset sizes. The right panel shows the same relationship between code corpus validation loss (La) and the code corpus mixture ratio (ra). The dashed lines are predictions from the D-CPT Law, which closely match the observed data points.", "section": "3.1 D-CPT Law"}, {"figure_path": "JzKFN5fWOk/figures/figures_28_1.jpg", "caption": "Figure 1: Illustration of the performance of D-CPT Law. (Left): The curves show the relationship between Lg and rg under different dataset sizes D for Qwen1.5-1.8B model. CPT data are a mixture of code-corpus and general-corpus. Here, Lg represents the loss on the general-corpus validation set, while rg indicates the percentage of the general corpus in the training data. The dashed curves denote the curves predicted by D-CPT Law, circular markers and star markers are fitting data points and unseen validation points, respectively. (Right): These curves are the corresponding results between the code-corpus validation loss La and the percentage of the code-corpus data ra.", "description": "This figure shows the performance of the proposed D-CPT Law by plotting the general-corpus validation loss (Lg) against the general-corpus mixture ratio (rg) and the domain-specific validation loss (La) against the domain-corpus mixture ratio (rd) for different model sizes. The dashed lines represent the predicted values by the D-CPT Law, while the markers represent the actual experimental results. This visualization demonstrates how well the D-CPT Law can predict the performance for various model and data scales.", "section": "3 D-CPT Law"}, {"figure_path": "JzKFN5fWOk/figures/figures_28_2.jpg", "caption": "Figure 1: Illustration of the performance of D-CPT Law. (Left): The curves show the relationship between Lg and rg under different dataset sizes D for Qwen1.5-1.8B model. CPT data are a mixture of code-corpus and general-corpus. Here, Lg represents the loss on the general-corpus validation set, while rg indicates the percentage of the general corpus in the training data. The dashed curves denote the curves predicted by D-CPT Law, circular markers and star markers are fitting data points and unseen validation points, respectively. (Right): These curves are the corresponding results between the code-corpus validation loss La and the percentage of the code-corpus data ra.", "description": "This figure shows the performance of the D-CPT Law in predicting the optimal mixture ratio for continual pre-training. The left panel shows the relationship between the general corpus validation loss (Lg) and the percentage of general corpus in the training data (rg) for different dataset sizes.  The right panel shows the corresponding relationship between the domain-specific (code) corpus validation loss (La) and the percentage of domain-specific corpus (rd). The dashed lines represent the predictions from the D-CPT Law, demonstrating its accuracy in predicting performance across various conditions.", "section": "3.1 D-CPT Law"}, {"figure_path": "JzKFN5fWOk/figures/figures_29_1.jpg", "caption": "Figure 1: Illustration of the performance of D-CPT Law. (Left): The curves show the relationship between Lg and rg under different dataset sizes D for Qwen1.5-1.8B model. CPT data are a mixture of code-corpus and general-corpus. Here, Lg represents the loss on the general-corpus validation set, while rg indicates the percentage of the general corpus in the training data. The dashed curves denote the curves predicted by D-CPT Law, circular markers and star markers are fitting data points and unseen validation points, respectively. (Right): These curves are the corresponding results between the code-corpus validation loss La and the percentage of the code-corpus data ra.", "description": "This figure shows the performance of the proposed D-CPT Law in predicting the validation loss (Lg and La) on general and code-specific corpora, respectively, for different model sizes, dataset sizes, and mixture ratios of the training data.  The left panel illustrates the relationship between the general-corpus validation loss and the percentage of general corpus in the training data, and the right panel shows a similar relationship for the code-corpus validation loss. The dashed lines represent the predictions of the D-CPT Law, and the markers show the actual data points (fitting and unseen). The results demonstrate that the D-CPT Law accurately predicts the performance under various conditions.", "section": "3 D-CPT Law"}, {"figure_path": "JzKFN5fWOk/figures/figures_29_2.jpg", "caption": "Figure 1: Illustration of the performance of D-CPT Law. (Left): The curves show the relationship between Lg and rg under different dataset sizes D for Qwen1.5-1.8B model. CPT data are a mixture of code-corpus and general-corpus. Here, Lg represents the loss on the general-corpus validation set, while rg indicates the percentage of the general corpus in the training data. The dashed curves denote the curves predicted by D-CPT Law, circular markers and star markers are fitting data points and unseen validation points, respectively. (Right): These curves are the corresponding results between the code-corpus validation loss La and the percentage of the code-corpus data ra.", "description": "This figure shows the performance of the D-CPT Law in predicting the optimal mixture ratio for continual pre-training of large language models. The left panel shows the relationship between the general corpus validation loss (Lg) and the proportion of general corpus in the training data (rg) for different dataset sizes. The right panel shows the corresponding relationship between the domain-specific corpus validation loss (La) and the proportion of domain-specific corpus (rd).  The dashed lines represent the D-CPT Law's predictions, while the markers show the actual training results.  The figure demonstrates the D-CPT Law's ability to accurately predict performance across different mixture ratios and dataset sizes.", "section": "3 D-CPT Law"}, {"figure_path": "JzKFN5fWOk/figures/figures_29_3.jpg", "caption": "Figure 1: Illustration of the performance of D-CPT Law. (Left): The curves show the relationship between Lg and rg under different dataset sizes D for Qwen1.5-1.8B model. CPT data are a mixture of code-corpus and general-corpus. Here, Lg represents the loss on the general-corpus validation set, while rg indicates the percentage of the general corpus in the training data. The dashed curves denote the curves predicted by D-CPT Law, circular markers and star markers are fitting data points and unseen validation points, respectively. (Right): These curves are the corresponding results between the code-corpus validation loss La and the percentage of the code-corpus data ra.", "description": "The figure illustrates the performance of the proposed Domain-specific Continual Pre-Training Scaling Law (D-CPT Law).  The left panel shows the relationship between the general corpus validation loss (Lg) and the proportion of general corpus data (rg) in the training data, for different dataset sizes.  The right panel shows the corresponding relationship for the code-specific validation loss (La) and the proportion of code corpus data (rd).  Dashed lines represent the predictions made by the D-CPT Law, demonstrating its accuracy in predicting performance based on small-scale experiments.", "section": "3.1 D-CPT Law"}]