[{"type": "text", "text": "What Is Missing In Homophily? Disentangling Graph Homophily For Graph Neural Networks ", "text_level": 1, "page_idx": 0}, {"type": "text", "text": "Yilun Zheng1, Sitao Luan2, Lihui Chen1 ", "page_idx": 0}, {"type": "text", "text": "yilun001@e.ntu.edu.sg, sitao.luan@mail.mcgill.ca, elhchen@ntu.edu.sg 1Nanyang Technological University, Centre for Info. Sciences and Systems; 2Mila - Quebec Artificial Intelligence Institute; \u2020 Corresponding Author ", "page_idx": 0}, {"type": "text", "text": "Abstract ", "text_level": 1, "page_idx": 0}, {"type": "text", "text": "Graph homophily refers to the phenomenon that connected nodes tend to share similar characteristics. Understanding this concept and its related metrics is crucial for designing effective Graph Neural Networks (GNNs). The most widely used homophily metrics, such as edge or node homophily, quantify such \"similarity\" as label consistency across the graph topology. These metrics are believed to be able to reflect the performance of GNNs, especially on node-level tasks. However, many recent studies have empirically demonstrated that the performance of GNNs does not always align with homophily metrics, and how homophily influences GNNs still remains unclear and controversial. Then, a crucial question arises: What is missing in our current understanding of homophily? To figure out the missing part, in this paper, we disentangle the graph homophily into three aspects: label, structural, and feature homophily, which are derived from the three basic elements of graph data. We argue that the synergy of the three homophily can provide a more comprehensive understanding of GNN performance. Our new proposed structural and feature homophily consider the neighborhood consistency and feature dependencies among nodes, addressing the previously overlooked structural and feature aspects in graph homophily. To investigate their synergy, we propose a Contextual Stochastic Block Model with three types of Homophily (CSBM-3H), where the topology and feature generation are controlled by the three metrics. Based on the theoretical analysis of CSBM-3H, we derive a new composite metric, named Tri-Hom, that considers all three aspects and overcomes the limitations of conventional homophily metrics. The theoretical conclusions and the effectiveness of Tri-Hom have been verified through synthetic experiments on CSBM-3H. In addition, we conduct experiments on 31 real-world benchmark datasets and calculate the correlations between homophily metrics and model performance. Tri-Hom has significantly higher correlation values than 17 existing metrics that only focus on a single homophily aspect, demonstrating its superiority and the importance of homophily synergy. Our code is available at https://github.com/zylMozart/Disentangle_GraphHom. ", "page_idx": 0}, {"type": "text", "text": "1 Introduction ", "text_level": 1, "page_idx": 0}, {"type": "text", "text": "Graph Neural Networks (GNNs) have been widely used in processing non-Euclidean data due to their superiority in extracting topological relations [10, 13, 26, 41, 35]. They have achieved great success on numerous real-world applications, e.g., recommendation [49, 58], bio-informatics [21, 20] and telecommunication [34]. It is found that their success, especially on node-level tasks, is closely related to the homophily assumption [47, 72, 38, 43, 36, 71], i.e., similar nodes tend to be connected [17]. On the other hand, when dissimilar nodes are more likely to be connected, which is known as the non-homophily/heterophily scenario, GNNs fail to capture the useful neighbor information and even underperform Multilayer perceptrons (MLPs) [37]. Several homophily metrics, such as edge homophily [72, 1] and node homophily [50] were proposed, which were believed to be able to recognize the difficult datasets [43] and measure the performance of GNNs [39]. ", "page_idx": 0}, {"type": "text", "text": "However, recent studies [46, 39, 51, 40] show that the conventional homophily metrics [72, 1, 50] are insufficient to measure the performance of GNNs: Luan et al. [38] show that the homophily metrics cannot tell if GNNs work well under heterophily. Ma et al. [46] reveals that homophily is not a necessary assumption for effective GNNs and they propose to identify \"good\" and \"bad\" heterophily to explain why GNNs still work well under heterophily. Luan et al. [39] discovers a mid-homophily pitfall, showing the performance of GNNs reaches the worst in a medium level of homophily instead of the lowest. Then, a crucial question arises based on the above studies: What is missing in our current understanding of homophily? ", "page_idx": 1}, {"type": "text", "text": "In this paper, we fill the missing parts by investigating different perspectives of the \"node similarity\". Conventional homophily metrics quantify the \"similarity\" as an indicator function of whether connected nodes share the same label while ignoring the co-existence of three basic elements in graph data: label, structural, and node feature information. The ignorance of structural and feature information leads to insufficient understanding and unsatisfactory alignment between homophily metrics and GNN performance. ", "page_idx": 1}, {"type": "text", "text": "A complete understanding of graph homophily should include all the above three basic elements. To this end, we disentangle graph homophily into three corresponding aspects: label, structural, and feature homophily. Specifically, our new proposed structural homophily quantifies the \"similarity\" by considering the neighborhood structure consistency, and feature homophily measures the dependencies of node features across the topology. To investigate how their synergy affects GNN performance, we propose a Contextual Stochastic Block Model controlled with three types of Homophily (CSBM-3H). The node feature generation process in CSBM-3H breaks the i.i.d. assumption in previous studies [46, 39], which is closer to real-world scenarios [14, 59, 61]. With the three metrics, CSBM-3H enables a more comprehensive study on the impact of graph homophily than previous analysis [46, 39, 29, 60]. ", "page_idx": 1}, {"type": "text", "text": "From the theoretical study of CSBM-3H, we derive a new composite metric named Tri-Hom to measure the synergy, which includes all three homophily aspects. Through CSBM-3H, our theoretical analysis and simulation results both show that the performance of GNNs is highly influenced by Tri-Hom. It can help explain how the three types of homophily influence GNN behavior individually or collectively. In addition, our theoretical findings can explain some interesting phenomena observed in previous literature, such as \"good\" or \"bad\" heterophily [46, 38] and the impact of feature shuffilng on GNNs [29]. To verify the effectiveness of Tri-Hom, we conduct experiments on 31 real-world datasets. The results show that GNN performance is significantly better aligned with Tri-Hom than the other 17 existing metrics that focus only on a single homophily aspect. This implies that Tri-Hom can complete the absent parts in existing homophily metrics. ", "page_idx": 1}, {"type": "text", "text": "2 Preliminary ", "text_level": 1, "page_idx": 1}, {"type": "text", "text": "We denote $\\mathcal{G}=(\\mathcal{V},\\mathcal{E})$ as an undirected graph, where $\\mathcal{V}$ is the node set and $\\mathcal{E}$ is the edge set. The graph has $N$ nodes with $C$ classes. The adjacency matrix of the graph is denoted as $\\breve{A}\\in\\mathbb{R}^{N\\times N}$ . We use $A_{u v}=1$ or $e_{u v}\\in\\mathcal{E}$ to denote the existence of an edge between node $u$ and $v$ , otherwise $A_{u v}=0$ or $e_{u v}\\notin\\mathcal{E}$ . Node degree vector is denoted as $D\\in\\breve{\\mathbb{R}}^{N}$ where $D_{u}$ is the degree of node $u$ . Node label vector is denoted as $\\pmb{Y}\\in\\mathbb{R}^{N}$ and its one-hot encoding matrix is $Z\\in\\mathbf{\\bar{R}}^{N\\times C}$ . The number of nodes in class $c$ is denoted as $N_{c}=|\\{u|Y_{u}=c,u\\in\\nu\\}|$ . The neighbor set of node $u$ is denoted as $\\mathcal{N}_{u}=\\{v|e_{u v}\\in\\mathcal{E}\\}$ . The features of all the nodes is denoted as $\\breve{\\boldsymbol{X}}\\in\\mathbb{R}^{N\\times M}$ , where $X_{v,}$ : are the features of nod e $v$ with $M$ dimensions. We use ${\\pmb I}_{E}\\in\\mathbb{R}^{E\\times E}$ and $\\mathbf{1}_{E}\\in\\mathbb{R}^{E\\times E}$ to denote identify matrix and all-ones matrix with size $E$ , respectively. ", "page_idx": 1}, {"type": "text", "text": "Graph homophily metrics are used to measure the similarity between connected nodes. Edge [1, 72] and node homophily [50] are 2 most commonly used metrics and are defined as follows, ", "page_idx": 1}, {"type": "equation", "text": "$$\n\\begin{array}{r}{h_{\\mathrm{edge}}(\\mathcal{G},\\boldsymbol{Y})=\\frac{\\left|\\left\\{e_{u v}|e_{u v}\\in\\mathcal{E},Y_{u}=Y_{v}\\right\\}\\right|}{|\\mathcal{E}|},\\;h_{\\mathrm{node}}(\\mathcal{G},\\boldsymbol{Y})=\\frac{1}{|\\mathcal{V}|}\\sum_{v\\in\\mathcal{V}}\\frac{\\left|\\left\\{u|u\\in\\mathcal{N}_{v},Y_{u}=Y_{v}\\right\\}\\right|}{\\left|{\\mathcal{N}_{v}}\\right|}}\\end{array}\n$$", "text_format": "latex", "page_idx": 1}, {"type": "text", "text": "These metrics qualify the ratio of whether the labels of two connected nodes are the same in a graph. However, this definition of graph homophily only considers a label aspect and neglects structural and feature aspects, resulting in a partial understanding of graph homophily. Therefore, we propose to disentangle the graph homophily as label, structural, and feature homophily in the next section. ", "page_idx": 1}, {"type": "text", "text": "Graph-aware models $M^{\\mathcal{G}}$ and graph-agnostic models $\\mathcal{M}^{\\neg\\mathcal{G}}$ refer to the models that either utilize structure information or do not, respectively. For example, baseline graph-aware models ", "page_idx": 1}, {"type": "text", "text": "$M^{g}$ , such as Graph Convolutional Network (GCN) [26], Graph Attention Network (GAT) [57] and GraphSage [16], encode both graph structure and node feature information in each layer; the corresponding graph-agnostic models $\\mathcal{M}^{\\neg\\mathcal{G}}$ are the Multilayer Perceptrons (MLPs), which only encode node features [39]. ", "page_idx": 2}, {"type": "text", "text": "Structural-agnostic features refer to the node features $\\mathbf{\\deltaX}$ that are conditionally independent of graph topology $\\pmb{A}$ given $\\mathbf{Y}$ , i.e., $(X\\bot\\bot A|Y)$ ; structural-aware features indicate $(X\\,{\\overset{.}{\\not\\perp}}\\,A|Y)$ . ", "page_idx": 2}, {"type": "text", "text": "3 Disentangled Graph Homophily ", "text_level": 1, "page_idx": 2}, {"type": "text", "text": "In this section, we first introduce the definition of disentangled graph homophily from label, structural, and feature aspects to complete the missing part of the graph homophily. Then, in the next section, we will introduce how they collectively impact the performance of GNNs. ", "page_idx": 2}, {"type": "text", "text": "3.1 Label Homophily ", "text_level": 1, "page_idx": 2}, {"type": "text", "text": "Definition 1. Label homophily is defined as the consistency of node labels across the topology. ", "page_idx": 2}, {"type": "text", "text": "Label homophily is the most widely used conventional metric of graph homophily and it qualifies the similarity between connected nodes $u$ and $v$ using an indicator function $\\mathbb{1}(Y_{u}=Y_{v})$ . Most of the conventional homophily metrics focus on label homophily, including edge homophily [1, 72], node homophily [50], class homophily [33], adjusted homophily [51], densityaware homophily [30], 2-hop neighbor class homophily [5], and neighbor homophily [15]. ", "page_idx": 2}, {"type": "text", "text": "However, label homophily only focuses on the consistency of label information for connected nodes while neglecting structural and feature information, which are two indispensable components of graph data. Hence, it offers only a partial understanding of graph homophily, which cannot always align well with the performance of GNNs [46, 38, 39]. To capture the missing structural and feature information and better understand graph homophily, we give the definitions of structural and feature homophily in the following 2 subsections. ", "page_idx": 2}, {"type": "text", "text": "3.2 Structural homophily ", "text_level": 1, "page_idx": 2}, {"type": "image", "img_path": "GmdGEF8xxU/tmp/14c9f1ba7670eb3d4a6adaa51bee79a43af167a9e0dca59b14a497801548a00e.jpg", "img_caption": ["Figure 1: Visualization of synthetic graphs generated by CSBM-3H with varying levels of label homophily, structural homophily, and feature homophily. The node colors denote node classes in sub-figure (a-f) and node features in sub-figure (gi) "], "img_footnote": [], "page_idx": 2}, {"type": "text", "text": "For structural homophily, the \"atom\" information of a node is structural information instead of the label. It is meaningless to define the structural homophily using the consistency across the graph topology as in the label homophily because the structural information already contains the information from the graph topology. Therefore, we define the structural information as the consistency of structural information among the nodes from the same classes1, which better disentangles itself from the label homophily. ", "page_idx": 2}, {"type": "text", "text": "", "page_idx": 2}, {"type": "text", "text": "Definition 2. Structural homophily is defined as the consistency of structural information of nodes within the same class. The structural homophily in a graph is defined as: ", "page_idx": 2}, {"type": "equation", "text": "$$\nh_{S}(\\mathcal{G},S,\\pmb{Y})=\\frac{1}{C}\\sum_{c=1}^{C}h_{S,c},\\;\\;w h e r e\\;h_{S,c}(\\mathcal{G},S,\\pmb{Y})=1-\\frac{\\sigma(\\{S(u)|u\\in\\mathcal{V},Y_{u}=c\\})}{\\sigma_{m a x}}\n$$", "text_format": "latex", "page_idx": 2}, {"type": "text", "text": "where $h_{S,c}$ is the class-wise structural homophily for class c, function $\\mathcal S(\\cdot)$ measures structural information, $\\sigma$ denotes standard deviation of structural information, and $\\sigma_{m a x}$ denotes the maximum value of $\\sigma$ . ", "page_idx": 3}, {"type": "text", "text": "In this paper, we quantify the structural information for node $u$ through neighbor distribution (the class distribution of local neighbors) DuN = [pu,1, pu,2, . . . , pu,c], where pu,k = |{Yv=k|vu\u2208Nu}|is the proportion of neighbors of node $u$ that belong to class $c$ . A high structural homophily indicates that the graph-aware models leveraging structural encoding will have similar embeddings for intra-class nodes after aggregation, which are expected to outperform graph-agnostic models, irrespective of a low label homophily. There are also some homophily metrics that focus on the structural aspect in previous studies, including label informativeness [51], neighborhood similarity [46], and aggregation homophily [38], which is similar as the structural homophily defined there. ", "page_idx": 3}, {"type": "text", "text": "3.3 Feature Homophily ", "text_level": 1, "page_idx": 3}, {"type": "text", "text": "Previous feature-based graph homophily metrics, such as generalized edge homophily [23], local similarity [7], attribute homophily [67], and class-controlled feature homophily [29], mainly focus on the consistency of node features across the graph topology, which is similar as the definition of Dirichlet energy in graphs. However, these homophily metrics on feature consistency cannot fully disentangle itself from label homophily: Since the features of nodes in a graph are supposed to depend on their classes, when the graph shows a high/low label homophily, the connected nodes are more likely to share the same/different labels, resulting in a high/low feature similarity. Therefore, these feature-based homophily metrics are dependent on label homophily. Such dependency contains redundancy, which decreases the useful information inside feature-based homophily and impedes our understanding of the relationship between node features and GNN performance. ", "page_idx": 3}, {"type": "text", "text": "To disentangle the feature effect from label and graph structure, we define the feature homophily as the dependencies of node features across the graph topology, thereby dissociating it from label homophily and structural homophily. Inspired by graph diffusion [6] and interactive particle systems [55, 64], we have the structural-agnostic unobserved feature $X(0)$ and the observed structural-aware feature $\\mathbf{\\deltaX}$ that satisfy the following relation ", "page_idx": 3}, {"type": "equation", "text": "$$\n\\pmb{X}=\\Big[\\sum_{t=0}^{\\infty}(\\omega\\pmb{A})^{t}\\Big]\\pmb{X}(0)=(\\pmb{I}-\\omega\\pmb{A})^{-1}\\pmb{X}(0)\n$$", "text_format": "latex", "page_idx": 3}, {"type": "text", "text": "The detailed process of this relation is given in Appendix B. Here $\\omega\\in\\big(-\\frac{1}{\\rho(\\pmb{A})},\\frac{1}{\\rho(\\pmb{A})}\\big)$ is a parameter that controls the feature dependencies, where a positive, negative, or zero value corresponds to an attractive relation, repulsive relation, or independence of the nodes with their neighbors in graphs [55, 64]. The feature dependencies $(\\omega A)^{t}$ of $t$ -order neighbors are introduced to structuralagnostic features $X(0)$ . Finally, the state of all the nodes will converge to an equilibrium with structure-aware feature $\\mathbf{\\deltaX}$ . The $\\omega$ in Eq. (3) is independent of the graph topology because no matter how the label homophily or structural homophily changes, $\\omega$ will remain unaffected. To disentangle feature homophily from label homophily and structural homophily, we define the feature homophily based on $\\omega$ as follows. ", "page_idx": 3}, {"type": "text", "text": "Definition 3. Feature homophily is defined as the degree of feature dependencies of nodes across the topology. For the linear case of the graph diffusion process with feature dependencies, the feature homophily for feature $m$ satisfies ", "page_idx": 3}, {"type": "equation", "text": "$$\n\\overset{\\cdot\\sim}{\\mathbf{X}_{:,m}}=\\left(\\pmb{I}-\\frac{h_{F,m}}{\\rho(\\pmb{A})}\\pmb{A}\\right)^{-1}\\pmb{X}_{:,m}(0)\n$$", "text_format": "latex", "page_idx": 3}, {"type": "text", "text": "where $\\rho(A)$ is the spectral radius of $\\pmb{A}$ , $X(0)\\;\\sim\\;p(X|Y)$ are the unseen structural-agnostic node features, and $\\bar{X}\\sim p(X|Y,A)$ is the observed structural-aware node features. The feature homophily for the whole graph is the averaged feature homophily for all the features ", "page_idx": 3}, {"type": "equation", "text": "$$\nh_{F}(\\mathcal{G},\\pmb{X},\\pmb{Y})=\\frac{1}{M}\\sum_{m=1}^{M}h_{F,m}\n$$", "text_format": "latex", "page_idx": 3}, {"type": "text", "text": "Note that it is easy to control the feature homophily in the generation of synthetic graphs. However, since both $h_{F,m}$ and $X_{:,m}(0)$ are unknown in Eq. (4), one more condition is required to estimate feature homophily in real-world datasets. To address this issue, we consider the case where the intra-class distances of $X_{:,m}(0)$ are small. This case holds in lots of real-world scenarios [38, 39] and we can utilize this property to estimate $h_{F,m}$ without solving $X_{:,m}(0)$ . Specifically, the feature homophily $h_{F,m}$ for feature $m$ can be estimated with the following optimization process ", "page_idx": 3}, {"type": "text", "text": "", "page_idx": 4}, {"type": "equation", "text": "$$\n\\begin{array}{r}{h_{F,m}^{*}(\\mathcal{G},X_{:,m},Y)=\\arg\\operatorname*{min}_{h_{F,m}}\\sum_{\\stackrel{u,v\\in\\mathcal{V}}{Y_{u}=Y_{v}}}\\left\\|X_{u,m}(0)-X_{v,m}(0)\\right\\|^{2},\\;\\;\\mathrm{where}\\;X_{:,m}(0)=\\left(I-\\frac{h_{F,m}}{\\rho(A)}A\\right)X_{:,m}(0)\\;.}\\end{array}\n$$", "text_format": "latex", "page_idx": 4}, {"type": "text", "text": "The estimation of feature homophily is invariant to the operations of feature shifts, scaling, or changing variance, where the proof is shown in Appendix C. This estimation process will be used in Section 5.2 for calculation. ", "page_idx": 4}, {"type": "text", "text": "Remark To better understand the definitions of three types of graph homophily, Figure 1 visualizes examples of graphs under varying $h_{L}$ , $h_{S}$ , and $h_{F}$ : 1) Label homophily. As label homophily $h_{L}$ increases, as shown in Figures 1(a), (b), and (c), nodes are more likely to connect with others that share the same label. Particularly, a high $h_{L}$ (Figure 1(c)) results in several clusters with distinct class boundaries, while a low $h_{L}$ causes nodes to more likely connect to nodes with different classes. 2) ", "page_idx": 4}, {"type": "text", "text": "Structural homophily. As structural homophily $h_{S}$ increases, as shown in Figures 1(d), (e), and (f), the neighbor distributions of intra-class nodes become more consistent. Therefore, a high $h_{S}$ is expected to capture effective structural information with message aggregation. Interestingly, we also find that a higher $h_{S}$ makes a graph resemble planar graphs [3] and periodic graphs [9]. We hypothesize this phenomenon occurs because stable structural information leads to more regular and meaningful patterns, which would be interesting to explore the connection between $h_{S}$ and these geometric properties of graphs in the future. 3) Feature homophily. Figures 1(g), (h), and (i) illustrate different levels of feature homophily $(h_{F})$ within the same graph topology. Figure 1 (h) demonstrates that under a medium positive $h_{F}$ , features of some boundary nodes exhibit characteristics of both neighboring classes. For instance, a node on the boundary of the red class and the blue class appears purple, a mixture of these classes. A higher $h_{F}$ (Figure 1 (i)) increases feature dependencies, particularly affecting more nodes closer to class boundaries. In social networks, a positive $h_{F}$ indicates that people\u2019s opinions are influenced by their friends, resulting in similar characteristics. Conversely, a negative $h_{F}$ causes nodes to become more dissimilar from their neighbors. As shown in Figure 1 (g), a negative $h_{F}$ creates a distinct boundary between classes. Additionally, for the intra-class nodes in Figure 1 (g), the node colors differ in shades from their neighbors. This occurs because node features become more dissimilar due to the \"repulsive force\" rather than the \"attractive force\" induced by a negative $h_{F}$ . For example, in online social media, people are likely to argue with those holding different opinions on certain topics. After such interactions, individuals may reinforce their original opinions, a phenomenon resulting from the \"repulsive force\" associated with a negative $h_{F}$ . ", "page_idx": 4}, {"type": "text", "text": "4 Impact of Disentangled Graph Homophily ", "text_level": 1, "page_idx": 4}, {"type": "text", "text": "To study the model performance in a graph, the Contextual Stochastic Block Model (CSBM) has been widely used to study the performance of GNNs with controlled graph topology and node features. Previous studies [51, 29, 39, 46] on graph homophily generally adopt a modified CSBM to control the label homophily through assigning nodes with different probabilities that connect to the nodes from other classes. Then the node features are sampled solely based on the classes. However, this graph modeling, which only considers label homophily, has two drawbacks: First, the probabilities of nodes from the same class connecting to the nodes with different classes are uniform, which lacks diversity. Second, the sampled node features are independent with their structures $i.e.,(X\\perp A|Y)$ , which is uncommon in real-world scenarios where interactions influence the attributes of connected nodes [61, 14, 59]. Therefore, we propose a Contextual Stochastic Block Model with three types of Homophily (CSBM-3H), a random graph generative model that integrates the three types of homophily (Section 4.1), where the newly proposed structural homophily $h_{S}$ and feature homophily $h_{F}$ can well address the aforementioned two drawbacks and flils the missing part of graph homophily. Then, Based on CSBM-3H, we theoretically study how the graph-agnostic and graph-aware models are affected by label, structural, and feature homophily metrics to explore their relationship and verify the effectiveness of proposed metrics (Section 4.2). ", "page_idx": 4}, {"type": "text", "text": "4.1 CSBM-3H ", "text_level": 1, "page_idx": 4}, {"type": "text", "text": "Graph Topology Generation Following the topology generation process in existing studies [39, 60], we assume all the nodes are class-balanced and share the same node degree $d$ . We use node homophily $h_{L}$ to control the label consistency across the graph topology and $h_{S}$ to control the consistency of neighbor distribution $D^{N}$ of nodes within the same classes. Then, the neighbor distribution can be expressed as: ", "page_idx": 4}, {"type": "equation", "text": "$$\nD^{\\cal N}=\\mathbb{E}_{\\epsilon}[Z{\\cal S}],\\mathrm{~where~}{\\cal S}=\\frac{1-h_{L}}{c-1}{\\bf1}_{C}+(h_{L}-\\frac{1-h_{L}}{c-1})I_{C}+\\epsilon\n$$", "text_format": "latex", "page_idx": 5}, {"type": "text", "text": "where $D^{\\mathcal{N}}\\in\\mathbb{R}^{N\\times C}$ is the neighbor distribution for all the nodes, $\\b{S}\\in\\mathbb{R}^{C\\times C}$ is a class-sampling matrix, and $\\epsilon\\in\\mathbb{R}^{C\\times C}$ is a noise matrix. Each entry of $\\epsilon$ is a noise of neighbor sampling that follows a Gaussian distribution $\\begin{array}{r}{N(0,\\frac{(1-h_{S})^{2}}{c-1})}\\end{array}$ . The class-sampling matrix $\\boldsymbol{S}$ should be legal in practice [60] i.e., $S_{u,v}>0$ and $\\textstyle\\sum_{v}S_{u,v}=1$ . Then an adjacency matrix $\\pmb{A}$ can be sampled from a neighborhood sampling matrix $\\begin{array}{r}{A_{p}=\\frac{C d}{N}D^{\\mathcal{N}}Z^{T}}\\end{array}$ , where $\\mathbb{E}[A_{u v}=1]=(A_{p})_{u v}$ for each pair of nodes $u,v$ . In this way, we control the label homophily $h_{L}$ and structural homophily $h_{S}$ in a graph. ", "page_idx": 5}, {"type": "text", "text": "Node Feature Generation. For any node $u$ in a graph, we first sample its structural-agnostic features $\\boldsymbol{X}_{u}(0)\\in\\mathbb{R}^{F}$ from a class-wised Gaussian distribution $X_{u}(0)\\sim\\mathbf{\\dot{N}}_{Y_{u}}(\\pmb{\\mu}_{Y_{u}},\\pmb{\\Sigma}_{Y_{u}})$ with $\\pmb{\\mu}_{Y_{u}}\\in\\mathbb{R}^{F}$ and $\\dot{\\Sigma_{Y_{u}}}\\,\\in\\,\\mathbb{R}^{F\\times F}$ . We also assume each dimension of the feature vector is independent of each other, thereby $\\Sigma_{Y_{u}}\\in\\mathbb{R}^{F\\times F}$ is a diagonal matrix. Then the observed structural-aware features can be generated by the unseen structure-agnostic feature as described in Eq. (4). ", "page_idx": 5}, {"type": "text", "text": "4.2 Node distinguishability ", "text_level": 1, "page_idx": 5}, {"type": "text", "text": "Suppose we have the representations of node $u$ as $\\begin{array}{r}{H_{u:}=\\frac{1}{d}\\sum_{v\\in\\mathcal{N}_{u}}X_{v}}\\end{array}$ : for graph-aware models $M^{g}$ and $\\pmb{H}_{u:}=\\pmb{X}_{u}$ : for graph-agnostic models $\\mathcal{M}^{\\neg\\mathcal{G}}$ . Inspired by the principles of neural collapse [28, 27] and node distinguishability [39], we quantify the impact of the aforementioned homophily metrics on both the graph-aware models $\\mathcal{M}^{\\mathcal{G}}$ and graph-agnostic models $\\mathcal{M}^{\\neg\\mathcal{G}}$ by measuring the ratio of intra-class node distance to inter-class distance. To ideally distinguish nodes from different classes, a smaller intra-class distance $D_{\\mathrm{intra}}(H)$ and larger inter-class distance $D_{\\mathrm{intra}}(H)$ is preferred because this will reduce boundary nodes and increase the margins among classes. The metric is defined as follows, ", "page_idx": 5}, {"type": "equation", "text": "$$\n\\mathcal{I}=\\frac{D_{\\mathrm{intra}}(H)}{D_{\\mathrm{inter}}(H)}=\\frac{\\mathbb{E}_{y_{u}=y_{v},\\epsilon}\\left[\\left\\Vert H_{u}-H_{v}\\right\\Vert^{2}\\right]}{\\mathbb{E}_{y_{u}\\neq y_{v},\\epsilon}\\left[\\left\\Vert H_{u}-H_{v}\\right\\Vert^{2}\\right]}\n$$", "text_format": "latex", "page_idx": 5}, {"type": "text", "text": "A smaller $\\mathcal{I}$ indicates better node embeddings for the model performance and vice versa, which has been proved in [39]. With the proposed CSBM-3H, we can analyze the impacts of $h_{L},h_{S}$ , and $h_{F}$ on $\\mathcal{M}^{\\neg\\mathcal{G}}$ and $M^{\\mathcal{G}}$ by studying their relations with $\\mathcal{I}$ , which will be derived in the following theorems. ", "page_idx": 5}, {"type": "text", "text": "Theorem 1. In CSBM-3H, the ratio of the expectation of intra-class distance to the expectation of inter-class distance of node representations for graph-agnostic models $\\mathcal{M}^{\\neg\\mathcal{G}}$ and graph-aware models $M^{g}$ is: ", "page_idx": 5}, {"type": "equation", "text": "$$\n\\mathcal{J}^{\\neg\\mathcal{G}}=(1+\\mathcal{J}_{N}\\mathcal{J}_{h}^{\\neg\\mathcal{G}})^{-1}\\mathrm{~and~}\\mathcal{J}^{\\mathcal{G}}=(1+\\mathcal{J}_{N}\\mathcal{J}_{h}^{\\mathcal{G}})^{-1}\n$$", "text_format": "latex", "page_idx": 5}, {"type": "text", "text": "where $\\begin{array}{r l}&{\\mathcal{I}_{N}=\\frac{\\sum_{Y_{u}\\neq Y_{v}}[2C(C-1)]^{-1}\\|\\mu_{Y_{u}}-\\mu_{Y_{v}}\\|^{2}}{C^{-1}|\\sigma^{2}|},\\mathcal{I}_{h}^{-\\mathcal{G}}=\\frac{1-(\\frac{h_{F}}{\\rho(A)})^{2}(C(\\frac{1-h_{L}}{C-1})^{2}+C\\frac{(1-h_{S})^{2}}{C-1}+(\\frac{h_{L}C-1}{C-1})^{2})}{\\left[1-(\\frac{h_{F}}{\\rho(A)})(\\frac{h_{L}C-1}{C-1})\\right]^{2}},}\\end{array}$ and =C( 1C\u2212\u2212h1L )2+(C  (C1\u2212C\u22121h\u2212S1 ))2+( hLCC\u22121\u22121)2 J h\u00acG. (See the proof in Appendix G.1.) ", "page_idx": 5}, {"type": "text", "text": "From Theorem 1 we can see that, $\\mathcal{I}_{N}$ is a normalized distance term which is a constant given the distribution of structural-agnostic features and is irrelevant with graph information; $\\mathcal{I}_{h}^{\\neg\\mathcal{G}}$ and $\\mathcal{I}_{h}^{\\mathcal{G}}$ are controlled by the three types of homophily, which can reflect the influence of graph homophily on model performance. We name $\\mathcal{I}_{h}^{\\neg\\mathcal{G}}$ and $\\mathcal{I}_{h}^{\\mathcal{G}}$ as Tri-Hom for $\\mathcal{M}^{\\neg\\mathcal{G}}$ and $M^{\\mathcal{G}}$ . To study the effect of Tri-Hom in more detail, we take the partial derivative of $\\mathcal{I}_{h}^{\\mathcal{G}}$ with respect to $h_{S},h_{F}$ , and $h_{L}$ to show the analytical results of their influences2. (See calculation in Appendix G.5, G.6, and G.7.) ", "page_idx": 5}, {"type": "text", "text": "Theorem 2.1. The partial derivative of $\\mathcal{I}_{h}^{\\mathcal{G}}$ with respect to label homophily $h_{L}$ satisfies, ", "page_idx": 5}, {"type": "equation", "text": "$$\n\\left\\{\\begin{array}{l l}{\\frac{\\partial\\mathcal{I}_{h}^{\\mathcal{G}}}{\\partial h_{L}}<0,}&{\\mathrm{if}\\;h_{L}\\in[0,\\frac{1}{C})}\\\\ {\\frac{\\partial\\mathcal{I}_{h}^{\\mathcal{G}}}{\\partial h_{L}}\\geq0,}&{\\mathrm{if}\\;h_{L}\\in[\\frac{1}{C},1]}\\end{array}\\right.\n$$", "text_format": "latex", "page_idx": 5}, {"type": "text", "text": "From Theorem 2.1 we can see that, the worst performance of $M^{\\mathcal{G}}$ is reached when $\\begin{array}{r}{h_{L}=\\frac{1}{C}}\\end{array}$ , which corresponds to the scenario with the highest number of unpredictable boundary nodes among classes. This finding explains the misalignment between label homophily and GNN performance mentioned in previous studies [46, 38, 39]. ", "page_idx": 5}, {"type": "text", "text": "Theorem 2.2. The partial derivative of $\\mathcal{I}_{h}^{\\mathcal{G}}$ with respect to structural homophily $h_{S}$ satisfies, ", "page_idx": 6}, {"type": "equation", "text": "$$\n\\frac{\\partial\\mathcal{J}_{h}^{\\mathcal{G}}}{\\partial h_{S}}\\geq0\n$$", "text_format": "latex", "page_idx": 6}, {"type": "text", "text": "From Theorem 2.2 we can see that, a larger $h_{S}$ consistently improves the performance of $M^{\\mathcal{G}}$ . This is intuitive for $M^{g}$ because more consistent intra-class neighbor distributions will lead to closer intra-class node representations after feature aggregation. This conclusion is also shown in Wang et al. [60], where the topological noise (which is inversely proportional to $h_{S}$ ) has a detrimental impact on node separability. ", "page_idx": 6}, {"type": "text", "text": "Theorem 2.3. The partial derivative of $\\mathcal{I}_{h}^{\\mathcal{G}}$ with respect to feature homophily $h_{F}$ satisfies, ", "page_idx": 6}, {"type": "equation", "text": "$$\n\\left\\{\\begin{array}{l l}{\\frac{\\partial\\mathcal{I}_{h}^{g}}{\\partial h_{F}}<0,}&{\\mathrm{if}\\,h_{L}\\in(0,h_{L}^{-});\\,h_{L}\\in(h_{L}^{-},h_{L}^{+})\\,\\mathrm{~and~}\\,h_{F}\\in(\\hat{h}_{F},1)}\\\\ {\\frac{\\partial\\mathcal{I}_{h}^{g}}{\\partial h_{F}}>0,}&{\\mathrm{if}\\,h_{L}\\in(h_{L}^{+},1];\\,h_{L}\\in(h_{L}^{-},h_{L}^{+})\\,\\mathrm{~and~}\\,h_{F}\\in(-1,\\hat{h}_{F})}\\\\ {\\frac{\\partial\\mathcal{I}_{h}^{g}}{\\partial h_{F}}=0,}&{\\mathrm{if}\\,h_{L}=\\frac{1}{C};\\,h_{L}\\in(h_{L}^{-},h_{L}^{+})\\,\\mathrm{~and~}\\,h_{F}=\\hat{h}_{F}}\\end{array}\\right.\n$$", "text_format": "latex", "page_idx": 6}, {"type": "text", "text": "where $0<h_{L}^{-}<h_{L}^{+}<1$ and $-1<\\hat{h}_{F}<1$ . The expressions and detailed calculation of $h_{L}^{-},h_{L}^{+}$ , and $\\hat{h}_{F}$ are shown in Appendix G.7. ", "page_idx": 6}, {"type": "text", "text": "From Theorem 2.3 we can see that, when $h_{L}$ is high in a graph, nodes with the same labels tend to be connected, thereby a larger $h_{F}$ makes the intra-class nodes share more similar representations and positively affect ${\\dot{\\mathcal{M}}}^{\\mathcal{G}}$ ; when $h_{L}$ is low in a graph, nodes with the different labels tend to be connected, thereby a larger $h_{F}$ makes the inter-class nodes share more similar representations and negatively affect ${\\dot{M}}^{\\mathcal{G}}$ ; when $h_{L}$ is on a medium level i.e., $h_{L}\\in(h_{L}^{-},h_{L}^{+})$ , an increase of $h_{F}$ will first improve and then reduces the performance of $M^{\\mathcal{G}}$ with the cut-off point at $h_{F}=\\hat{h}_{F}$ . There the $\\hat{h}_{F}$ is influenced by $h_{L},h_{S},C$ , and $\\rho(A)$ , and the $h_{L}^{-}$ and $h_{L}^{+}$ are influenced by $h_{S}$ , $C$ , and $\\rho(A)$ . ", "page_idx": 6}, {"type": "text", "text": "Remark Apart from the new findings mentioned above, Tri-Hom can help explain other interesting but under-explored phenomena of the graph homophily in previous studies, e.g., 1) \"good\" or \"bad\" heterophily [46], which states that GNN can still perform well in some heterophily cases; and 2) feature shuffling [29], which states that shuffilng the node features randomly within the same class can improves the performance of GNNs on node classification. Our explanations with Tri-Hom are: 1) The occurrence of \"good\" or \"bad\" heterophily is due to the fact that the model performance is influenced by a combination of $h_{L},h_{F}$ , and $h_{S}$ , instead of $h_{L}$ alone. When the $h_{L}$ is low, the graph-aware models can still achieve good performance with a high $h_{S}$ or a low $h_{F}$ ; 2) feature shuffling is due to the existence of the structural-aware features of nodes. When $h_{F}>0$ , nodes are positively dependent on their neighbors. In this case, the nodes at the class boundaries or class centers are the hardest or easiest ones to predict because of the feature dependencies. If we randomly shuffle the nodes inside their classes, the nodes at the class boundaries will be easier to be classified because their features are more likely to be replaced by the nodes from the center, which are more distinguishable. For the nodes close to the class centers, it will be compensated by their neighbors. ", "page_idx": 6}, {"type": "text", "text": "5 Experimental Results ", "text_level": 1, "page_idx": 6}, {"type": "text", "text": "In Section 5.1, we conduct experiments on synthetic data generated by CSBM-3H to verify the conclusions from Theorem 2.1, 2.2, and 2.3, demonstrate the synergy of label $h_{L}$ , structural $h_{S}$ , and feature homophily $h_{F}$ and test whether Tri-Hom $\\mathcal{I}_{h}^{\\mathcal{G}}$ can reflect GNN performance. In Section 5.2, we evaluate the effectiveness of Tri-Hom on real-world benchmark datasets to test how well it can predict the model performance in real-world scenarios. In addition, we calculate the correlation between Tri-Hom value and model performance and compare them with the results of other 17 existing metrics. The results show that Tri-Hom has a significantly higher correlation with the model performance, demonstrating the necessity of fliling the missing part by disentangling graph homophily from three aspects. ", "page_idx": 6}, {"type": "text", "text": "5.1 Experiments on Synthetic Datasets ", "text_level": 1, "page_idx": 6}, {"type": "text", "text": "To verify our theoretical results in a more general case, we measure the performance of GCN on synthetic datasets, where we can easily control $h_{L},h_{S}$ , and $h_{F}$ . Specifically, ", "page_idx": 6}, {"type": "image", "img_path": "GmdGEF8xxU/tmp/d5b0da6dc9997495c973c4b996511fc68d139b428efae3585b9e1420cc462dfe.jpg", "img_caption": ["(b) Model Performance on synthetic datasets "], "img_footnote": [], "page_idx": 7}, {"type": "text", "text": "Figure 2: We measure the impact of label homophily $h_{L}$ , feature homophily $h_{F}$ , and structural homophily $h_{S}$ through numerical results of Tri-Hom $\\mathcal{I}_{h}^{\\mathcal{G}}$ and simulation results of the node classification accuracy with GCN on synthetic datasets. ", "page_idx": 7}, {"type": "text", "text": "Synthetic Data Generation We generate the synthetic graphs using CSBM-3H with a given tuple $\\left(h_{L},h_{S},h_{F}\\right)$ , where $h_{L}~\\in~\\bar{\\{0,0.1,...,0.9,1\\}}$ , $\\bar{h_{S}}\\;\\;\\in\\;\\;\\{0,0.1,\\ldots,0.9,1\\}$ and $h_{F}\\quad\\in$ $\\{-0.8,0.6,\\hdots,0.6,0.8\\}$ . For each $(h_{L},h_{S},h_{F})$ , we generate 1000 nodes with three balanced classes and the node degrees are sampled from a uniform distribution [1, 10]. For node features, we first sample the structural-agnostic features from class-specific Gaussian distributions, then we use Eq. (4) to propagate these features across the graph topology with feature homophily $h_{F}$ to generate the observed structural-aware features as the final node features. Then, we evaluate the node classification performance of GCN [26] on these synthetic graphs. To get a robust evaluation and mitigate the numerical instability, we generate 10 graphs with 10 random seeds for each $(h_{L},h_{S},h_{F})$ and report the average and standard deviation of classification accuracy on validation sets. The detailed process of topology and feature generation is shown in Appendix E.1.1. ", "page_idx": 7}, {"type": "text", "text": "Numerical Results of Tri-Hom To verify whether Tri-Hom $\\mathcal{I}_{h}^{\\mathcal{G}}$ can reflect the behavior of GCN, we calculate its numerical results with the same setting as the synthetic graphs and make a comparison. Specifically, we set $C=3$ and $\\rho(A)=10\\$ to mitigate the influences of varying numbers of classes and spectral radius. ", "page_idx": 7}, {"type": "text", "text": "Comparison and Analysis The results are shown in Figure 2. For a better demonstration, we only show the results for $h\\dot{s^{\\prime}}\\,{=}\\,\\{0.2,0.4,0.6,0.8\\}$ and each subfigure is a slice of $h_{S}$ that visualizes the impact of $h_{L}$ and $h_{F}$ on GCN and Tri-Hom. From the comparison of Figure 2a and 2b, we have two main observations: 1) Overall, the impact of $h_{L},h_{S}$ , and $h_{F}$ on synthetic datasets aligns well with the numerical results of Tri-Hom $\\mathcal{I}_{h}^{\\mathcal{G}}$ . The only difference is that $h_{F}$ seems to have less impact on GCN. We speculate that this is because the parameters in the graph filter in GCN are optimized during the training process, while these parameters are simplified as a fixed value in the theoretical analysis, leading to the difference3. 2) Our theoretical analysis of the impact of $h_{L},h_{F}$ and $h_{S}$ on Tri-Hom is consistent with GCN\u2019s behavior in Figure 2b: Theorem 2.1 shows the worst performance of $M^{\\mathcal{G}}$ is reached when $\\begin{array}{r}{h_{L}=\\frac{1}{C}}\\end{array}$ , corresponding to the ravine in Figure 2b for $h_{L}$ ; Theorem 2.2 shows an increase of $h_{S}$ consistently improves the performance of $M^{g}$ , corresponding to the overall increases of the accuracy in Figure 2b from the left to the right; Theorem 2.3 shows the influences of $h_{F}$ to $M^{\\mathcal{G}}$ is determined by the $h_{L}$ . Even if this is not obvious in Figure 2b, we show more detailed figures of the individual impact of $h_{L},h_{S}$ , and $h_{F}$ in Appendix E.6, confirming the impact of $h_{F}$ in Theorem 2.3. ", "page_idx": 7}, {"type": "text", "text": "5.2 Experiments on Real-world Datasets ", "text_level": 1, "page_idx": 8}, {"type": "text", "text": "In this subsection, we show the superiority of our proposed Tri-Hom over the existing metrics by studying the correlation between the estimated metric values and model performance on real-world graph data. ", "page_idx": 8}, {"type": "text", "text": "Experimental Settings To verify the effectiveness of our proposed Tri-Hom and compare with existing metrics, we train baseline models, $\\mathtt{M L P^{4}}$ , GCN [26], GraphSage [16], GAT [57] and estimate metrics, $\\mathcal{I}_{h}^{\\neg\\mathcal{G}}$ , $\\mathcal{I}_{h}^{\\mathcal{G}}$ , $h_{F}$ , $h_{S}$ , and $h_{L}$ (we use $h_{n o d e}$ in our experiments), on 31 real-world heterophilic and homophilic datasets. These datasets include Roman-Empire, Amazon-Ratings, Mineweeper, Tolokers, and Questions from [52]; Squirrel, Chameleon, Actor, Texas, Cornell, Wisconsin originally from [50, 53] and refined by [52]; Cora, PubMed, and CiteSeer from [69]; CoraFull, Amazon-Photo, Amazon-Computer, Coauthor-CS, and Coauther-Physics from [54]; Flickr from [70]; WikiCS from [48]; Blog-Catalog from [68]; Ogbn-Arxiv from [19]; Genius, Twitch-DE, Twitch-ENGB, Twitch-ES, Twitch-FR, Twitch-PTBR, Twitch-RU, and Twitch-TW from [32] 5. Besides, we also calculate other graph homophily and performance metrics on the benchmark datasets, the metrics include label-based homophily: $h_{\\mathrm{edge}}$ [72], $h_{\\mathrm{node}}$ [50], $h_{\\mathrm{class}}$ [33], $h_{\\mathrm{adj}}$ [51], $h_{\\mathrm{den}}$ [30], $h_{2\\mathrm{hop}}$ [5], $h_{\\mathrm{nei}}$ [15]; structuralbased homophily: $L I$ [51], $h_{\\mathrm{NS}}$ [46], $h_{\\mathrm{agg}}$ [38]; feature-based homophily: $h_{\\mathrm{GE}}$ [23], $h_{\\mathrm{LS-COS}}$ [7], $h_{\\mathrm{LS}}$ -euc [7], $h_{\\mathrm{attr}}$ [67], $h_{\\mathrm{CF}}$ [29]; and classifier-based homophily metrics [39]: $h_{\\mathrm{KR}}$ , $h_{\\mathrm{GNB}}$ , $h_{\\mathrm{SVM}}$ on these datasets. The detailed definitions of these metrics are summarized in Appendix A and the details of all estimations are shown in Appendix E.1.2. ", "page_idx": 8}, {"type": "table", "img_path": "GmdGEF8xxU/tmp/88fa2c01971da564cf25562a4c5831ab74a5faeeeebc78a39ba544130859af6c.jpg", "table_caption": [], "table_footnote": [], "page_idx": 8}, {"type": "text", "text": "Table 1: Pearson correlation with p-value of all the metrics with model performance of node classification on 31 real-world datasets. ", "page_idx": 8}, {"type": "text", "text": "Correlations with Model Performance To find out which metric can better align with the performance of GNNs on graphs with different properties, in Table 1, we show Pearson correlation between all the metrics and model performance on the 31 real-world datasets6. For example, to show how well $h_{e d g e}$ align with the performance of GCN, we measure the values of $h_{e d g e}$ (in Table 3) and GCN performance (in Table 4) on node classification tasks across 31 datasets then calculate their correlation. For each model, the homophily metrics with the best, second, and third highest correlation values are highlighted in red, blue and purple, respectively. To get more robust comparison results, we rank the metrics for each model and report the average rank in the last column. ", "page_idx": 8}, {"type": "text", "text": "", "page_idx": 9}, {"type": "text", "text": "Comparison and Analysis The results show that: 1) $\\mathcal{I}_{h}^{\\mathcal{G}}$ achieves the highest correlation values with all models, much better than the other metrics that only consider a single aspect of graph data. This confirms the effectiveness of Tri-Hom in fliling the missing part of graph homophily by taking all the three types of homophily $h_{L},h_{S},h_{F}$ into account, providing a comprehensive understanding of graph homophily; 2) $\\mathcal{I}_{h}^{\\neg\\mathcal{G}}$ , the Tri-Hom for $\\mathcal{M}^{\\neg\\mathcal{G}}$ , also shows high correlation values. This indicates the existence of structural-aware features of nodes in graphs, which justifies our modeling of feature homophily in CSBM-3H. Compared with other variants of CSBM [46, 39], which assume node features are conditionally independent of graph topology given node labels, the setting of CSBM-3H is closer to real-world scenarios. This is one of the important reasons that the metrics derived from CSBM-3H are better than the existing metrics. ", "page_idx": 9}, {"type": "text", "text": "6 Conclusions ", "text_level": 1, "page_idx": 9}, {"type": "text", "text": "In this paper, we study the missing components of graph homophily by disentangling it from label, structural, and feature perspectives. Compared with previous homophily metrics, the combination of the three homophily metrics provides a unique and comprehensive understanding of graph homophily. Notably, our proposed feature homophily can measure the feature dependencies among nodes, fully disentangling itself from the label and structural homophily, which helps us analyze the disentangled impact. The theoretical study on CSBM-3H leads us to Tri-Hom, a combination of the three types of homophily. By investigating how each type influences Tri-Hom, we gain deeper insights into the effect of graph homophily on model performance and elucidate intriguing phenomena observed in previous studies [29, 60]. The synthetic experiments on CSBM-3H verify the theoretical results and the effectiveness of Tri-Hom. The high correlation with GNN behaviors on 31 real-world benchmark datasets confirms the superiority of Tri-Hom over 17 existing metrics. ", "page_idx": 9}, {"type": "text", "text": "7 Future Directions ", "text_level": 1, "page_idx": 9}, {"type": "text", "text": "In the future, it will be interesting to investigate the disentangled graph homophily in more general CSBM settings without some assumptions, e.g., uniform node degrees, balanced class, and linear feature dependencies. Additionally, the estimation of three types of homophily in unsupervised or weak-supervised scenarios would be important for label-scarcity cases. Since the theoretical results in the paper reveal a nuanced understanding of graph homophily, we briefly introduce future studies on model designs or applications as follows. ", "page_idx": 9}, {"type": "text", "text": "For the model designs, previous studies [38, 50, 42] of heterophily-oriented GNNs mostly focus on label homophily, neglecting structural homophily $h_{S}$ and feature homophily $h_{F}$ , that also influence GNN performance. For $h_{S}$ , the proposed structural information function $S(\\cdot)$ could be replaced by any of the measurements regarding the task. Besides, the consistency of structural information could be different in the different classes, leading to the class-specific designs for each class. For $h_{F}$ , it will be interesting to propose new approaches to identify how node features are influenced by their neighbors from both the global and local perspectives and then design new methods to treat the graphs or nodes differently according to $h_{F}$ . Please refer to Appendix F.1 for more detailed explanations of the future directions on model designs ", "page_idx": 9}, {"type": "text", "text": "For the applications, such as social networks, recommendation systems, or urban computing, our proposed disentangled graph homophily could provide new insights. For example, in recommendation systems, the preferences of each user could be influenced by their neighbors. When people recognize or reject others\u2019 suggestions, it leads to a high $h_{F}$ or low $h_{F}$ , causing them more likely or less likely to buy specific items. Please refer to Appendix F.2 for more details on the applications of the disentangled graph homophily. ", "page_idx": 9}, {"type": "text", "text": "8 Acknowledgements ", "text_level": 1, "page_idx": 9}, {"type": "text", "text": "Thanks to all the reviewers for their insightful comments. We also thank the organizers of NeurIPS for honoring us with the Scholar Award. ", "page_idx": 9}, {"type": "text", "text": "References ", "text_level": 1, "page_idx": 10}, {"type": "text", "text": "[1] S. Abu-El-Haija, B. Perozzi, A. Kapoor, N. Alipourfard, K. Lerman, H. Harutyunyan, G. Ver Steeg, and A. Galstyan. Mixhop: Higher-order graph convolutional architectures via sparsified neighborhood mixing. In international conference on machine learning, pages 21\u201329. PMLR, 2019.   \n[2] J. L. Ba, J. R. Kiros, and G. E. Hinton. Layer normalization. arXiv preprint arXiv:1607.06450, 2016.   \n[3] M. Barthelemy. Morphogenesis of spatial networks. Springer, 2018.   \n[4] D. J. Best and P. G. Gipps. Algorithm as 71: The upper tail probabilities of kendall\u2019s tau. Journal of the Royal Statistical Society. Series C (Applied Statistics), 23(1):98\u2013100, 1974.   \n[5] A. Cavallo, C. Grohnfeldt, M. Russo, G. Lovisotto, and L. Vassio. 2-hop neighbor class similarity (2ncs): A graph structural metric indicative of graph neural network performance. arXiv preprint arXiv:2212.13202, 2022.   \n[6] B. Chamberlain, J. Rowbottom, M. I. Gorinova, M. Bronstein, S. Webb, and E. Rossi. Grand: Graph neural diffusion. In International Conference on Machine Learning, pages 1407\u20131418. PMLR, 2021.   \n[7] Y. Chen, Y. Luo, J. Tang, L. Yang, S. Qiu, C. Wang, and X. Cao. Lsgnn: towards general graph neural network in node classification by local similarity. arXiv preprint arXiv:2305.04225, 2023.   \n[8] E. Chien, J. Peng, P. Li, and O. Milenkovic. Adaptive universal generalized pagerank graph neural network. arXiv preprint arXiv:2006.07988, 2020.   \n[9] E. Cohen and N. Megiddo. Recognizing properties of periodic graphs. In Applied geometry and discrete mathematics, pages 135\u2013146. Citeseer, 1990.   \n[10] M. Defferrard, X. Bresson, and P. Vandergheynst. Convolutional neural networks on graphs with fast localized spectral filtering. arXiv, abs/1606.09375, 2016.   \n[11] B. Finkelshtein, X. Huang, M. Bronstein, and I. I. Ceylan. Cooperative graph neural networks. arXiv preprint arXiv:2310.01267, 2023.   \n[12] N. Gholinejad and M. H. Chehreghani. Heterophily-aware fair recommendation using graph convolutional networks. arXiv preprint arXiv:2402.03365, 2024.   \n[13] J. Gilmer, S. S. Schoenholz, P. F. Riley, O. Vinyals, and G. E. Dahl. Neural message passing for quantum chemistry. In Proceedings of the 34th International Conference on Machine Learning-Volume 70, pages 1263\u20131272. JMLR. org, 2017.   \n[14] P. Goldsmith-Pinkham and G. W. Imbens. Social networks and the identification of peer effects. Journal of Business & Economic Statistics, 31(3):253\u2013264, 2013.   \n[15] S. Gong, J. Zhou, C. Xie, and Q. Xuan. Neighborhood homophily-based graph convolutional network. In Proceedings of the 32nd ACM International Conference on Information and Knowledge Management, pages 3908\u20133912, 2023.   \n[16] W. Hamilton, Z. Ying, and J. Leskovec. Inductive representation learning on large graphs. Advances in neural information processing systems, 30, 2017.   \n[17] W. L. Hamilton. Graph representation learning. Morgan & Claypool Publishers, 2020.   \n[18] K. He, X. Zhang, S. Ren, and J. Sun. Deep residual learning for image recognition. In Proceedings of the IEEE conference on computer vision and pattern recognition, pages 770\u2013 778, 2016.   \n[19] W. Hu, M. Fey, M. Zitnik, Y. Dong, H. Ren, B. Liu, M. Catasta, and J. Leskovec. Open graph benchmark: Datasets for machine learning on graphs. Advances in neural information processing systems, 33:22118\u201322133, 2020.   \n[20] C. Hua, Y. Liu, D. Zhang, O. Zhang, S. Luan, K. K. Yang, G. Wolf, D. Precup, and S. Zheng. Enzymeflow: Generating reaction-specific enzyme catalytic pockets through flow matching and co-evolutionary dynamics. arXiv preprint arXiv:2410.00327, 2024.   \n[21] C. Hua, S. Luan, M. Xu, Z. Ying, J. Fu, S. Ermon, and D. Precup. Mudiff: Unified diffusion for complete molecule generation. In Learning on Graphs Conference, pages 33\u20131. PMLR, 2024.   \n[22] W. Jiang, X. Gao, G. Xu, T. Chen, and H. Yin. Challenging low homophily in social recommendation. In Proceedings of the ACM on Web Conference 2024, pages 3476\u20133484, 2024.   \n[23] D. Jin, R. Wang, M. Ge, D. He, X. Li, W. Lin, and W. Zhang. Raw-gnn: Random walk aggregation based graph neural network. arXiv preprint arXiv:2206.13953, 2022.   \n[24] K. Z. Khanam, G. Srivastava, and V. Mago. The homophily principle in social network analysis: A survey. Multimedia Tools and Applications, 82(6):8811\u20138854, 2023.   \n[25] D. P. Kingma and J. Ba. Adam: A method for stochastic optimization. arXiv preprint arXiv:1412.6980, 2014.   \n[26] T. N. Kipf and M. Welling. Semi-supervised classification with graph convolutional networks. arXiv preprint arXiv:1609.02907, 2016.   \n[27] V. Kothapalli. Neural collapse: A review on modelling principles and generalization. arXiv preprint arXiv:2206.04041, 2022.   \n[28] V. Kothapalli, T. Tirer, and J. Bruna. A neural collapse perspective on feature evolution in graph neural networks. Advances in Neural Information Processing Systems, 36, 2024.   \n[29] S. Y. Lee, S. Kim, F. Bu, J. Yoo, J. Tang, and K. Shin. Feature distribution on graph topology mediates the effect of graph convolution: Homophily perspective. International Conference on Machine Learning, 2024.   \n[30] S. Li, D. Kim, and Q. Wang. Restructuring graph for higher homophily via adaptive spectral clustering. In Proceedings of the AAAI Conference on Artificial Intelligence, volume 37, pages 8622\u20138630, 2023.   \n[31] X. Li, R. Zhu, Y. Cheng, C. Shan, S. Luo, D. Li, and W. Qian. Finding global homophily in graph neural networks when meeting heterophily. In International Conference on Machine Learning, pages 13242\u201313256. PMLR, 2022.   \n[32] D. Lim, F. Hohne, X. Li, S. L. Huang, V. Gupta, O. Bhalerao, and S. N. Lim. Large scale learning on non-homophilous graphs: New benchmarks and strong simple methods. Advances in Neural Information Processing Systems, 34:20887\u201320902, 2021.   \n[33] D. Lim, X. Li, F. Hohne, and S.-N. Lim. New benchmarks for learning on non-homophilous graphs. arXiv preprint arXiv:2104.01404, 2021.   \n[34] Q. Lu, S. Luan, and X.-W. Chang. Gcepnet: Graph convolution-enhanced expectation propagation for massive mimo detection. arXiv preprint arXiv:2404.14886, 2024.   \n[35] Q. Lu, J. Zhu, S. Luan, and X.-W. Chang. Flexible diffusion scopes with parameterized laplacian for heterophilic graph learning. arXiv preprint arXiv:2409.09888, 2024.   \n[36] S. Luan, C. Hua, Q. Lu, L. Ma, L. Wu, X. Wang, M. Xu, X.-W. Chang, D. Precup, R. Ying, et al. The heterophilic graph learning handbook: Benchmarks, models, theoretical analysis, applications and challenges. arXiv preprint arXiv:2407.09618, 2024.   \n[37] S. Luan, C. Hua, Q. Lu, J. Zhu, X.-W. Chang, and D. Precup. When do we need graph neural networks for node classification? In International Conference on Complex Networks and Their Applications, pages 37\u201348. Springer, 2023.   \n[38] S. Luan, C. Hua, Q. Lu, J. Zhu, M. Zhao, S. Zhang, X.-W. Chang, and D. Precup. Revisiting heterophily for graph neural networks. Advances in neural information processing systems, 35:1362\u20131375, 2022.   \n[39] S. Luan, C. Hua, M. Xu, Q. Lu, J. Zhu, X.-W. Chang, J. Fu, J. Leskovec, and D. Precup. When do graph neural networks help with node classification? investigating the homophily principle on node distinguishability. Advances in Neural Information Processing Systems, 36, 2024.   \n[40] S. Luan, Q. Lu, C. Hua, X. Wang, J. Zhu, X.-W. Chang, G. Wolf, and J. Tang. Are heterophilyspecific gnns and homophily metrics really effective? evaluation pitfalls and new benchmarks. arXiv preprint arXiv:2409.05755, 2024.   \n[41] S. Luan, M. Zhao, X.-W. Chang, and D. Precup. Break the ceiling: Stronger multi-scale deep graph convolutional networks. Advances in neural information processing systems, 32, 2019.   \n[42] S. Luan, M. Zhao, C. Hua, X.-W. Chang, and D. Precup. Complete the missing half: Augmenting aggregation filtering with diversification for graph convolutional networks. arXiv preprint arXiv:2008.08844, 2020.   \n[43] S. Luan, M. Zhao, C. Hua, X.-W. Chang, and D. Precup. Complete the missing half: Augmenting aggregation filtering with diversification for graph convolutional networks. In NeurIPS 2022 Workshop: New Frontiers in Graph Learning, 2022.   \n[44] M. Luenendonk. Niche to discount: 12 major types of retail stores & retailers. In FounderJar, 2023.   \n[45] Y. Luo, L. Shi, and X.-M. Wu. Classic gnns are strong baselines: Reassessing gnns for node classification. arXiv preprint arXiv:2406.08993, 2024.   \n[46] Y. Ma, X. Liu, N. Shah, and J. Tang. Is homophily a necessity for graph neural networks? arXiv preprint arXiv:2106.06134, 2021.   \n[47] M. McPherson, L. Smith-Lovin, and J. M. Cook. Birds of a feather: Homophily in social networks. Annual review of sociology, 27(1):415\u2013444, 2001.   \n[48] P. Mernyei and C. Cangea. Wiki-cs: A wikipedia-based benchmark for graph neural networks. arXiv preprint arXiv:2007.02901, 2020.   \n[49] R. K. Ong, W. Qiu, and A. W. Khong. Quad-tier entity fusion contrastive representation learning for knowledge aware recommendation system. In Proceedings of the 32nd ACM International Conference on Information and Knowledge Management, CIKM \u201923, page 1949\u20131959, New York, NY, USA, 2023. Association for Computing Machinery.   \n[50] H. Pei, B. Wei, K. C.-C. Chang, Y. Lei, and B. Yang. Geom-gcn: Geometric graph convolutional networks. arXiv preprint arXiv:2002.05287, 2020.   \n[51] O. Platonov, D. Kuznedelev, A. Babenko, and L. Prokhorenkova. Characterizing graph datasets for node classification: Homophily-heterophily dichotomy and beyond. Advances in Neural Information Processing Systems, 36, 2024.   \n[52] O. Platonov, D. Kuznedelev, M. Diskin, A. Babenko, and L. Prokhorenkova. A critical look at the evaluation of gnns under heterophily: Are we really making progress? arXiv preprint arXiv:2302.11640, 2023.   \n[53] B. Rozemberczki, C. Allen, and R. Sarkar. Multi-Scale Attributed Node Embedding. Journal of Complex Networks, 9(2), 2021.   \n[54] O. Shchur, M. Mumme, A. Bojchevski, and S. G\u00fcnnemann. Pitfalls of graph neural network evaluation. arXiv preprint arXiv:1811.05868, 2018.   \n[55] D. Shi, A. Han, L. Lin, Y. Guo, Z. Wang, and J. Gao. Design your own universe: A physics-informed agnostic method for enhancing graph neural networks. arXiv preprint arXiv:2401.14580, 2024.   \n[56] S. Suresh, V. Budde, J. Neville, P. Li, and J. Ma. Breaking the limit of graph neural networks by improving the assortativity of graphs with local mixing patterns. In Proceedings of the 27th ACM SIGKDD Conference on Knowledge Discovery & Data Mining, pages 1541\u20131551, 2021.   \n[57] P. Velickovi\u00b4c, G. Cucurull, A. Casanova, A. Romero, P. Lio, and Y. Bengio. Graph attention networks. arXiv preprint arXiv:1710.10903, 2017.   \n[58] B. Wang, J. Chen, C. Li, S. Zhou, Q. Shi, Y. Gao, Y. Feng, C. Chen, and C. Wang. Distributionally robust graph-based recommendation system. In Proceedings of the ACM on Web Conference 2024, pages 3777\u20133788, 2024.   \n[59] G.-N. Wang, H. Gao, L. Chen, D. N. Mensah, and Y. Fu. Predicting positive and negative relationships in large social networks. PloS one, 10(6):e0129530, 2015.   \n[60] J. Wang, Y. Guo, L. Yang, and Y. Wang. Understanding heterophily for graph neural networks. arXiv preprint arXiv:2401.09125, 2024.   \n[61] J. Wang, H. Xie, F. L. Wang, L.-K. Lee, and M. Wei. Jointly modeling intra-and inter-session dependencies with graph neural networks for session-based recommendations. Information Processing & Management, 60(2):103209, 2023.   \n[62] K. Wang, G. Li, S. Wang, G. Zhang, K. Wang, Y. You, J. Fang, X. Peng, Y. Liang, and Y. Wang. The snowflake hypothesis: Training and powering gnn with one node one receptive field. In Proceedings of the 30th ACM SIGKDD Conference on Knowledge Discovery and Data Mining, pages 3152\u20133163, 2024.   \n[63] Y. Wang, S. Xiang, and C. Pan. Improving the homophily of heterophilic graphs for semisupervised node classification. In 2023 IEEE International Conference on Multimedia and Expo (ICME), pages 1865\u20131870. IEEE, 2023.   \n[64] Y. Wang, K. Yi, X. Liu, Y. G. Wang, and S. Jin. Acmp: Allen-cahn message passing for graph neural networks with particle phase transition. arXiv preprint arXiv:2206.05437, 2022.   \n[65] C. Xiao, J. Zhou, J. Huang, T. Xu, and H. Xiong. Spatial heterophily aware graph neural networks. In Proceedings of the 29th ACM SIGKDD Conference on Knowledge Discovery and Data Mining, pages 2752\u20132763, 2023.   \n[66] K. Xu, W. Hu, J. Leskovec, and S. Jegelka. How powerful are graph neural networks? arXiv preprint arXiv:1810.00826, 2018.   \n[67] L. Yang, M. Li, L. Liu, C. Wang, X. Cao, Y. Guo, et al. Diverse message passing for attribute with heterophily. Advances in Neural Information Processing Systems, 34:4751\u20134763, 2021.   \n[68] R. Yang, J. Shi, X. Xiao, Y. Yang, S. S. Bhowmick, and J. Liu. Pane: scalable and effective attributed network embedding. The VLDB Journal, 32(6):1237\u20131262, 2023.   \n[69] Z. Yang, W. Cohen, and R. Salakhudinov. Revisiting semi-supervised learning with graph embeddings. In International conference on machine learning, pages 40\u201348. PMLR, 2016.   \n[70] H. Zeng, H. Zhou, A. Srivastava, R. Kannan, and V. Prasanna. Graphsaint: Graph sampling based inductive learning method. arXiv preprint arXiv:1907.04931, 2019.   \n[71] Y. Zheng, J. Xu, and L. Chen. Learn from heterophily: Heterophilous information-enhanced graph neural network. arXiv preprint arXiv:2403.17351, 2024.   \n[72] J. Zhu, Y. Yan, L. Zhao, M. Heimann, L. Akoglu, and D. Koutra. Beyond homophily in graph neural networks: Current limitations and effective designs. Advances in Neural Information Processing Systems, 33, 2020. ", "page_idx": 10}, {"type": "text", "text": "", "page_idx": 11}, {"type": "text", "text": "", "page_idx": 12}, {"type": "text", "text": "", "page_idx": 13}, {"type": "text", "text": "A Related Work on Homophily Measurements ", "text_level": 1, "page_idx": 14}, {"type": "text", "text": "In general, graph homophily metrics can be categorized as either statistic-based metrics or classifierbased metrics. The former can be further classified into the homophily on label, structural, or feature aspect. The definitions of these metrics are introduced as follows. ", "page_idx": 14}, {"type": "text", "text": "A.1 Homophily on Label Aspect ", "text_level": 1, "page_idx": 14}, {"type": "text", "text": "Edge homophily [72] measures the graph homophily at the edge level, which is defined as the fraction of edges in a graph that connects nodes with the same labels: ", "page_idx": 14}, {"type": "equation", "text": "$$\nh_{e d g e}(\\mathscr{G},Y)=\\frac{\\left|\\{e_{u v}\\mid e_{u v}\\in\\mathscr{E},Y_{u}=Y_{v}\\}\\right|}{\\left|\\mathscr{E}\\right|}\n$$", "text_format": "latex", "page_idx": 14}, {"type": "text", "text": "Node homophily [50] measures the graph homophily at the node level, where the homophily degree for each node is computed as the proportion of the neighbors sharing the same class. Then the node homophily for the whole graph is defined as the average homophily degree for all the nodes: ", "page_idx": 14}, {"type": "equation", "text": "$$\nh_{n o d e}(\\mathcal{G},\\pmb{Y})=\\frac{1}{|\\mathcal{V}|}\\sum_{u\\in\\mathcal{V}}\\frac{\\big|\\{v\\mid v\\in\\mathcal{N}_{u},Y_{u}=Y_{v}\\}\\big|}{d_{u}},\n$$", "text_format": "latex", "page_idx": 14}, {"type": "text", "text": "Class homophily [33] addresses class imbalance by treating all classes equally. This metric mitigates the sensitivity of edge homophily and node homophily to the number of classes and nodes in each class. The definition of class homophily is given by: ", "page_idx": 14}, {"type": "equation", "text": "$$\nh_{c l a s s}(g,\\pmb{Y})=\\frac{1}{C-1}\\sum_{c=1}^{C}\\left[\\frac{\\sum_{u\\in\\mathcal{V},Y_{u}=c}\\left|\\left\\{v\\ \\middle|\\ v\\in\\mathcal{N}_{u},Y_{u}=Y_{v}\\right\\}\\right|}{\\sum_{u\\in\\{u|Y_{u}=c\\}}d_{u}}-\\frac{N_{c}}{N}\\right]_{+}\n$$", "text_format": "latex", "page_idx": 14}, {"type": "text", "text": "Adjusted homophily [51] considers the probability of an edge endpoint connecting to a node with a particular class and adjusts the edge homophily using node degrees, which is defined as: ", "page_idx": 14}, {"type": "equation", "text": "$$\nh_{a d j}(\\mathcal{G},\\boldsymbol{Y})=\\frac{h_{e d g e}(\\mathcal{G},\\boldsymbol{Y})-\\sum_{c=1}^{C}\\frac{D_{c}^{2}}{(2|\\mathcal{E}|)^{2}}}{1-\\sum_{c=1}^{C}\\frac{D_{c}^{2}}{(2|\\mathcal{E}|)^{2}}}\n$$", "text_format": "latex", "page_idx": 14}, {"type": "text", "text": "where $D_{c}$ represents the total degree of class $c,i.e.,D_{k}=\\big|\\{e_{u v}|Y_{u}=c$ or $Y_{v}=c,e_{u v}\\in\\mathcal{E}\\}\\vert$ . ", "page_idx": 14}, {"type": "text", "text": "Density-aware homophily [30] is introduced as an improvement over class homophily, which only captures relative edge proportions and disregards graph connectivity. This limitation results in inflated homophily scores for highly disconnected graphs [51]. The proposed density-aware homophily aims to provide a more accurate measurement of edge density and is defined as: ", "page_idx": 14}, {"type": "equation", "text": "$$\nh_{d e n}(\\mathcal{G},\\pmb{Y})=\\frac{1+\\operatorname*{min}\\left\\{\\zeta_{c}-\\hat{\\zeta}_{c}\\right\\}_{c=1}^{C}}{2}\n$$", "text_format": "latex", "page_idx": 14}, {"type": "text", "text": "where $\\zeta_{k}$ is the edge density of the subgraph formed by intra-class edges of class $k$ and $\\hat{\\zeta}_{k}$ is the maximum intra-class edge density of class $k$ . ", "page_idx": 14}, {"type": "text", "text": "2-hop Neighbor Class Similarity [5]. Since the information of 1-hop neighbors might be less representative or even misleading [5], 2-hop Neighbor Class Similarity extends the concept of \"neighbors\" from 1-hop to 2-hop, which is defined as: ", "page_idx": 14}, {"type": "equation", "text": "$$\nh_{2h o p}(\\mathcal{G},\\pmb{Y})=\\frac{1}{|\\mathcal{V}|}\\sum_{u\\in\\mathcal{V}}\\frac{\\left|\\{u\\mid u\\in\\mathcal{N}_{u}^{(2)},Y_{u}=Y_{v}\\}\\right|}{d_{u}},\n$$", "text_format": "latex", "page_idx": 14}, {"type": "text", "text": "where N u(2)= {   Nv}\\{u} represents the two-hop neighbors of node u. ", "page_idx": 14}, {"type": "text", "text": "Neighbor Homophily [15] is proposed to address the \"good\" and \"bad\" heterophily issue by considering the dominant neighbors. The homophily score for any given node $u$ is based on the number ", "page_idx": 14}, {"type": "text", "text": "of nodes in which its class holds dominance among its $\\boldsymbol{\\mathrm{k}}$ -hop neighbors. The definition of neighbor homophily in a graph is defined as: ", "page_idx": 15}, {"type": "equation", "text": "$$\nh_{D N}(\\mathcal{G},\\boldsymbol{Y},k)=\\frac{1}{|\\mathcal{V}|}\\sum_{u\\in\\mathcal{V}}\\frac{\\operatorname*{max}\\left\\{\\left|v\\right|v\\in\\mathcal{N}_{u}^{(k)}\\right|\\right\\}_{c=1}^{C}}{\\left|\\mathcal{N}_{u}^{(k)}\\right|}\n$$", "text_format": "latex", "page_idx": 15}, {"type": "text", "text": "where $\\mathcal{N}_{v}^{(k)}$ represents the $\\boldsymbol{\\mathrm{k}}$ -hop neighbors of node $u$ ", "page_idx": 15}, {"type": "text", "text": "A.2 Homophily on Structure Aspect ", "text_level": 1, "page_idx": 15}, {"type": "text", "text": "Label informativeness [51] measures the informativeness of a neighbor\u2019s label for a node\u2019s label using condition entropy: ", "page_idx": 15}, {"type": "equation", "text": "$$\nL I(\\mathcal{G},Y)=-\\frac{\\sum_{c_{1},c_{2}}p(c_{1},c_{2})\\log\\frac{p(c_{1},c_{2})}{\\bar{p}(c_{1})\\bar{,}\\bar{p}(c_{2})}}{\\sum_{c}\\bar{p}(c)\\log\\bar{p}(c)}=2-\\frac{\\sum_{c_{1},c_{2}}p(c_{1},c_{2})\\log p(c_{1},c_{2})}{\\sum_{c}\\bar{p}(c)\\log\\bar{p}(c)},\n$$", "text_format": "latex", "page_idx": 15}, {"type": "text", "text": "$\\begin{array}{r}{p(c_{1},c_{2})=\\sum_{(u,v)\\in\\mathcal{E}}\\frac{\\mathbb{1}\\{Y_{u}=c_{1},Y_{v}=c_{2}\\}}{2|\\mathcal{E}|}}\\end{array}$ 1{Yu=2c1,Yv=c2}represents mutual distribution for a randomly sampled edge from class $c_{1}$ to class $c_{2}$ and $\\begin{array}{r}{\\bar{p}_{c}=\\frac{D_{c}}{2|\\mathcal{E}|}}\\end{array}$ represents the distribution of the node degree for class $c$ . ", "page_idx": 15}, {"type": "text", "text": "Neighborhood Similarity [46] measures the similarity of the neighbor distributions between two classes. A high similarity of intra-class neighbor distributions and a low similarity of inter-class neighbor distributions ensure the neighborhood patterns for nodes with different labels are distinguishable [46]. Therefore, the ratio of inter-class to intra-class neighborhood similarity could reflect the performance of GNNs7 ", "page_idx": 15}, {"type": "equation", "text": "$$\nh_{N S}(\\boldsymbol{\\mathcal{G}},\\pmb{D}^{\\boldsymbol{N}},\\pmb{Y})=\\frac{\\mathbb{E}_{Y_{u}=Y_{v}}[D_{u}^{\\boldsymbol{N}}(D_{v}^{\\boldsymbol{N}})^{T}]}{\\mathbb{E}_{Y_{u}\\neq Y_{v}}[D_{u}^{\\boldsymbol{N}}(D_{v}^{\\boldsymbol{N}})^{T}]}\n$$", "text_format": "latex", "page_idx": 15}, {"type": "text", "text": "where $\\mathcal{N}_{v}^{(k)}$ is the $\\boldsymbol{\\mathrm{k}}$ -hop neighbors of node $u$ . ", "page_idx": 15}, {"type": "text", "text": "Aggregation homophily [38] measures the ratio of nodes in a graph that has a higher intra-class   \naangdg gias ttihoen  smiumlitliaprliitcya ttihoann  oifn tthere-icr lnaseis gahgbgorre gdiasttiroinb ustiimoinl ai.rei.t g. gTrehgea tdieofnin sitiimoinl aorfi tayg ogfr engoadtieo $u$ $u$ $\\mathbf{\\chi}_{D_{u}^{N}D_{v}^{N}}$   \nhomophily is given as: ", "page_idx": 15}, {"type": "equation", "text": "$$\nh_{a g g}(\\boldsymbol{\\mathcal{G}},\\boldsymbol{D}^{\\boldsymbol{N}},\\boldsymbol{Y})=\\frac{1}{|\\boldsymbol{\\mathcal{V}}|}\\left|\\left\\{u\\middle|\\frac{\\sum_{Y_{u}=Y_{v}}D_{u}^{\\boldsymbol{N}}(D_{v}^{\\boldsymbol{N}})^{T}}{|\\{v|Y_{u}=Y_{v}\\}|}\\geq\\frac{\\sum_{Y_{u}\\neq Y_{v}}D_{u}^{\\boldsymbol{N}}(D_{v}^{\\boldsymbol{N}})^{T}}{|\\{v|Y_{u}\\neq Y_{v}\\}|},v\\in\\mathcal{V},u\\in\\mathcal{V}\\right\\}\\right|\n$$", "text_format": "latex", "page_idx": 15}, {"type": "text", "text": "A.3 Homophily on Feature Aspect ", "text_level": 1, "page_idx": 15}, {"type": "text", "text": "Generalized edge homophily [23] defines the feature homophily in graphs as the feature consistency across the graph topology: ", "page_idx": 15}, {"type": "equation", "text": "$$\nh_{G E}({\\boldsymbol{\\mathcal{G}}},{\\boldsymbol{X}})=\\frac{1}{|{\\boldsymbol{\\mathcal{E}}}|}\\sum_{e_{u v}\\in{\\boldsymbol{\\mathcal{E}}}}\\frac{X_{u}X_{v}^{T}}{\\|X_{u}\\|\\,\\|X_{v}\\|}\n$$", "text_format": "latex", "page_idx": 15}, {"type": "text", "text": "The difference between this homophily with edge homophily is that generalized edge homophily replaced the indicator function of two connected nodes in edge homophily, i.e., $\\mathbb{1}\\{\\bar{Y_{u}}=Y_{v}\\}$ , to a similarity measurement of node features, i.e., $\\mathrm{sim}(X_{u},X_{v})$ . ", "page_idx": 15}, {"type": "text", "text": "Local Similarity [7] measures feature homophily at the node level based on the hypothesis that nodes with similar features are likely to belong to the same class. The definition is given based on either cosine similarity ", "page_idx": 15}, {"type": "equation", "text": "$$\nh_{L S-c o s}(\\boldsymbol{\\mathcal{G}},\\boldsymbol{X})=\\frac{1}{|\\mathcal{V}|}\\sum_{u\\in\\mathcal{V}}\\frac{1}{d_{u}}\\sum_{v\\in\\mathcal{N}_{u}}\\frac{X_{u}X_{v}^{T}}{\\|X_{u}\\|\\,\\|X_{v}\\|}\n$$", "text_format": "latex", "page_idx": 15}, {"type": "text", "text": "7This definition is not directly given in the original paper [46]. We define this ratio based on the proposition [46] that a high intra-class neighborhood similarity and a low inter-class neighborhood similarity improves GNN performance. ", "page_idx": 15}, {"type": "text", "text": "or Euclidean similarity. ", "page_idx": 16}, {"type": "equation", "text": "$$\nh_{L S-e u c}(\\pmb{\\mathscr{G}},\\pmb{X})=\\frac{1}{|\\mathscr{V}|}\\sum_{u\\in\\mathscr{V}}\\frac{1}{d_{u}}\\sum_{v\\in\\mathcal{N}_{u}}(-\\,\\|\\pmb{X}_{u}-\\pmb{X}_{v}\\|_{2})\n$$", "text_format": "latex", "page_idx": 16}, {"type": "text", "text": "Attribute homophily [67] considers the homophily with respect to each feature, which is defined as: ", "page_idx": 16}, {"type": "equation", "text": "$$\n\\begin{array}{c}{{\\displaystyle\\boldsymbol{\\mathrm{b}}_{a t t r,m}(\\mathcal{G},\\boldsymbol{X}_{:,m})=\\frac{1}{\\sum_{u\\in\\mathcal{V}}X_{u,m}}\\sum_{u\\in\\mathcal{V}}\\left(X_{u,m}\\frac{\\sum_{v\\in\\mathcal{N}_{u}}X_{v,m}}{d_{u}}\\right)}}\\\\ {{\\displaystyle h_{a t t r}(\\mathcal{G},\\boldsymbol{X})=\\frac{1}{M}\\sum_{m=1}^{M}h_{a t t r,m}(\\mathcal{G},\\boldsymbol{X}_{:,m}),}}\\end{array}\n$$", "text_format": "latex", "page_idx": 16}, {"type": "text", "text": "where $h_{a t t r}$ represents the attribute homophily for the whole graph and $h_{a t t r,m}$ represents the attribute homophily for feature $m$ . ", "page_idx": 16}, {"type": "text", "text": "Class-controlled feature homophily [29] considers the interplay between graph topology and feature dependence through the disparity of nodes\u2019 expected distances to random nodes with their neighbors, which is defined as: ", "page_idx": 16}, {"type": "equation", "text": "$$\n\\begin{array}{r l}&{h_{C F}(\\boldsymbol{\\mathcal{G}},\\boldsymbol{X},\\boldsymbol{Y})=\\frac{1}{|\\mathcal{V}|}\\displaystyle\\sum_{u\\in\\mathcal{V}}\\frac{1}{d_{u}}\\sum_{v\\in\\mathcal{N}_{u}}\\Big(d(v,\\boldsymbol{\\mathcal{V}}\\backslash\\{u\\})-d(v,\\{u\\})\\Big)}\\\\ &{\\qquad d(u,\\boldsymbol{\\mathcal{V}}^{\\prime})=\\frac{1}{|\\mathcal{V}^{\\prime}|}\\displaystyle\\sum_{v\\in\\mathcal{V}^{\\prime}}\\|(\\boldsymbol{X}_{u}|\\boldsymbol{Y})-(\\boldsymbol{X}_{v}|\\boldsymbol{Y})\\|}\\\\ &{\\qquad\\quad\\boldsymbol{X}_{u}|\\boldsymbol{Y}=\\boldsymbol{X}_{u}-\\left(\\frac{\\sum_{\\boldsymbol{Y}_{u}=\\boldsymbol{Y}_{v}}\\boldsymbol{X}_{v}}{|\\{\\boldsymbol{\\mathcal{V}}|\\boldsymbol{Y}_{u}=\\boldsymbol{Y}_{v},v\\in\\boldsymbol{\\mathcal{V}}\\}|}\\right)}\\end{array}\n$$", "text_format": "latex", "page_idx": 16}, {"type": "text", "text": "where $X_{u}|Y$ represents class-controlled features and $d(\\cdot)$ denotes a distance function. ", "page_idx": 16}, {"type": "text", "text": "A.4 Classifier-based homophily ", "text_level": 1, "page_idx": 16}, {"type": "text", "text": "Classifier-based homophily [39] uses a classifier to capture the feature-based linear or non-linear information without iterative training. To determine when graph-aware models perform better than graph-agnostic models, a hypothesis test is conducted on the original feature $\\mathbf{\\deltaX}$ and the aggregated features $\\pmb{H}$ , as shown below: ", "page_idx": 16}, {"type": "text", "text": "$\\mathrm{H_{0}:P r o p(G-a w a r e\\;m o d e l)}\\geq\\mathrm{Prop(G-agnostic\\;model)};\\;\\mathrm{H_{1}:P r o p(G-a w a r e\\;m o d e l)}<\\mathrm{Prop(G-agnostic\\;model)}.\\;\\mathrm{~}$ ) The resulting p-value from this hypothesis test can indicate whether the performance of $\\pmb{H}$ is superior to that of $\\mathbf{\\deltaX}$ . Three types of classifier, Gaussian Naive Bayes, Kernel Regression, and Support Vector Machine are used in [39], which correspond to the metrics $h_{G N B}$ , $h_{K R}$ , and $h_{S V M}$ in this paper. ", "page_idx": 16}, {"type": "text", "text": "B Structural-Aware Node Features ", "text_level": 1, "page_idx": 16}, {"type": "text", "text": "This section explores the impact of graph topology on node features. Unlike the data in Euclidean space, where samples are i.i.d., the data sampled from a graph for each node are structural-aware $i.e.,(X\\not\\simeq A|Y)$ . To model the feature dependencies of nodes in graphs, we follow [55] and adopt a graph diffusion process [6], which is shown as follows ", "page_idx": 16}, {"type": "equation", "text": "$$\nX(t)=X(0)+\\int_{0}^{T}{\\frac{\\partial\\mathbf{X}(t)}{\\partial t}}\\,d t,\n$$", "text_format": "latex", "page_idx": 16}, {"type": "equation", "text": "$$\n\\frac{\\partial\\pmb{X}(t)}{\\partial t}=(\\mathcal{F}(\\pmb{A})-\\pmb{I})\\pmb{X}(t-1)+\\pmb{X}(0)\n$$", "text_format": "latex", "page_idx": 16}, {"type": "text", "text": "Here the structural-agnostic node features $X(0)\\sim\\mathit{p}(X|Y)$ are sampled from the distributions with respect to each class, while the structural-aware node features $\\pmb{X}\\pmb{\\mathcal{(}t>0)}\\sim p(\\pmb{X}|\\pmb{Y},\\pmb{A})$ are generated through the diffusion process. I n \u2202X\u2202t(t), the first term describes how the dependencies are introduced with a feature dependency function $\\mathcal{F}:(\\pmb{A})\\mapsto\\mathbb{R}^{N\\times N}$ and the second term $X(0)$ preserves the node distinguishability. Then, based on the Eq. (28), we have ", "page_idx": 16}, {"type": "equation", "text": "$$\nX(t)=X(0)+{\\mathcal{F}}(A)X(t-1)=X(0)+({\\mathcal{F}}(A))^{1}X(0)+\\cdots+({\\mathcal{F}}(A))^{t}X(0)\n$$", "text_format": "latex", "page_idx": 16}, {"type": "text", "text": "We can also interpret the process as an interactive particle system [55] where all node features collapse into an equilibrium eventually. The equilibrium requires Eq. (29) to have a closed form when $t\\to\\infty$ , implying the spectral radius of the adjacency matrix $\\rho(\\mathcal{F}(A))<1$ . This constraint also implies that $\\left|{\\mathcal{F}}(A)\\right|^{k}\\geq\\left|{\\mathcal{F}}(A)\\right|^{k-1}$ for $k>0$ , which aligns with the common relations in graphs that nodes are likely to have higher dependencies with their closer neighbors than with farther neighbors. ", "page_idx": 17}, {"type": "text", "text": "For simplicity and a better understanding of feature dependencies, we consider a linear case as in [6, 55] and use a parameter $\\omega$ to control the feature dependencies $i.e.,{\\mathcal{F}}(A)=\\omega A$ with a range of (\u2212\u03c1(1A),\u03c1(1A)). Then we can represent the structural-aware features as ", "page_idx": 17}, {"type": "equation", "text": "$$\nX=\\Bigl[\\sum_{t=0}^{\\infty}(\\omega A)^{t}\\Bigr]X=({\\cal I}-\\omega A)^{-1}X(0)\n$$", "text_format": "latex", "page_idx": 17}, {"type": "text", "text": "C Properties of Feature Homophily ", "text_level": 1, "page_idx": 17}, {"type": "text", "text": "We further investigate properties of the estimation of feature homophily under specific feature transformations, including shifts, scaling, and changes in variance. The problem is defined as follows: In a graph $\\mathcal{G}=\\{\\mathcal{V},\\mathcal{E}\\}$ with $N$ nodes, there are node labels $\\mathbf{\\deltaY}$ and node features $X_{:,m}$ in dimension $m$ . We can estimate the feature homophily $h_{F,m}^{*}$ for feature $X_{:,m}$ in dimension $m$ as: ", "page_idx": 17}, {"type": "equation", "text": "$$\ni_{F,m}^{*}(\\boldsymbol{\\mathcal{G}},X_{:,m},Y)=\\arg\\operatorname*{min}_{h_{F,m}}\\sum_{\\boldsymbol{u},\\boldsymbol{v}\\in\\boldsymbol{\\mathcal{V}}_{v}\\atop Y_{u}=Y_{v}}\\left[X_{u,m}(0)-X_{v,m}(0)\\right]^{2},\\;\\;\\mathrm{where}\\;X_{:,m}(0)=\\left(I-\\frac{h_{F,m}}{\\rho(A)}A\\right)X_{v}\\in\\mathbb{R}.\n$$", "text_format": "latex", "page_idx": 17}, {"type": "text", "text": "Then we prove the estimation of feature homophily is invariant to the operations of feature shifts, scaling, or changing variance. ", "page_idx": 17}, {"type": "text", "text": "A. Shifts ", "text_level": 1, "page_idx": 17}, {"type": "text", "text": "Let\u2019s consider a shift of node features $X_{:,m}$ by a constant vector $_{C}$ : ", "page_idx": 17}, {"type": "equation", "text": "$$\nX_{:,m}^{\\prime}=X_{:,m}+C\n$$", "text_format": "latex", "page_idx": 17}, {"type": "text", "text": "Then we have structural-agnostic features as ", "page_idx": 17}, {"type": "equation", "text": "$$\n\\begin{array}{r l}&{X_{:,m}^{\\prime}(0)=\\left(I-\\frac{h_{F,m}}{\\rho(A)}A\\right)X_{:,m}^{\\prime}}\\\\ &{\\qquad\\qquad=\\left(I-\\frac{h_{F,m}}{\\rho(A)}A\\right)(X_{:,m}+C)}\\\\ &{\\qquad\\qquad=X_{:,m}(0)+\\left(I-\\frac{h_{F,m}}{\\rho(A)}A\\right)C}\\end{array}\n$$", "text_format": "latex", "page_idx": 17}, {"type": "text", "text": "Then a new estimation of $h_{F,m}^{\\prime}$ under this feature shift can be expressed as ", "page_idx": 17}, {"type": "equation", "text": "$$\n\\begin{array}{r l}&{h_{F,m}^{\\prime}(Q,X_{:,m}^{\\prime},Y)=\\underset{h_{F,m}^{\\prime},u_{N}\\in V_{V}^{\\prime}}{\\operatorname*{min}}\\,\\big[X_{u,m}^{\\prime}(0)-X_{v,m}^{\\prime}(0)\\big]^{2}}\\\\ &{\\qquad\\qquad\\qquad\\quad\\quad\\frac{Y_{v}-Y_{v}}{h_{F,m}^{\\prime}\\mathbf{\\eta}_{u,v}\\in V_{V}}}\\\\ &{\\qquad\\qquad\\qquad\\quad=\\underset{h_{F,m}^{\\prime}\\sim Y_{v}}{\\operatorname*{arg\\,min}}\\,\\bigg[\\bigg(X_{u,m}(0)+\\bigg(I-\\frac{h_{F,m}}{\\rho(A)}A\\bigg)\\,C_{u}\\bigg)}\\\\ &{\\qquad\\qquad\\quad-\\left(X_{v,m}(0)+\\bigg(I-\\frac{h_{F,m}}{\\rho(A)}A\\bigg)\\,C_{v}\\bigg)\\bigg]^{2}}\\\\ &{\\qquad\\qquad\\quad=\\underset{h_{F,m}^{\\prime}\\sim V_{v}}{\\operatorname*{arg\\,min}}\\,\\bigg[(X_{u,m}(0)-X_{v,m}(0))+\\bigg(I-\\frac{h_{F,m}}{\\rho(A)}A\\bigg)\\,(C_{u}-C_{v})\\bigg]^{2}}\\\\ &{\\qquad\\qquad\\qquad\\quad\\frac{Y_{v}\\in Y_{v}}{h_{F,m}^{\\prime}\\mathbf{\\eta}_{u,v}\\in V_{V}}}\\end{array}\n$$", "text_format": "latex", "page_idx": 17}, {"type": "text", "text": "Since $_{C}$ is a constant vector, we have $C_{u}-C_{v}=0$ . Next, we have ", "page_idx": 18}, {"type": "equation", "text": "$$\n\\begin{array}{r l}{~h_{F,m}^{\\prime}(\\mathcal{G},X_{:,m}^{\\prime},Y)=\\arg\\underset{h_{F,m}}{\\operatorname*{min}}\\displaystyle\\sum_{u,v\\in\\mathcal{V},}\\left[\\left(X_{u,m}(0)-X_{v,m}(0)\\right)\\right]^{2}}&{}\\\\ {~~~~~~~~~~~~~~~~~~~~~~~~~~~\\frac{Y_{u}-Y_{v}}{Y_{u}=Y_{v}}}&{}\\\\ {=h_{F,m}^{*}(\\mathcal{G},X_{:,m},Y)}&{}\\end{array}\n$$", "text_format": "latex", "page_idx": 18}, {"type": "text", "text": "Therefore, we proved the estimation of feature homophily is invariant to the operation of feature shifts. ", "page_idx": 18}, {"type": "text", "text": "B. Scaling ", "text_level": 1, "page_idx": 18}, {"type": "text", "text": "Let\u2019s consider scaling node features $X_{:,m}$ by a constant $\\alpha$ : ", "page_idx": 18}, {"type": "equation", "text": "$$\nX_{:,m}^{\\prime}=\\alpha X_{:,m}\n$$", "text_format": "latex", "page_idx": 18}, {"type": "text", "text": "Then we have structural-agnostic features as ", "page_idx": 18}, {"type": "equation", "text": "$$\n\\begin{array}{r l}&{X_{:,m}^{\\prime}(0)=\\left(I-\\displaystyle\\frac{h_{F,m}}{\\rho(A)}A\\right)(\\alpha X_{:,m}^{\\prime})}\\\\ &{\\qquad\\qquad=\\alpha\\left(I-\\displaystyle\\frac{h_{F,m}}{\\rho(A)}A\\right)X_{:,m}^{\\prime}}\\\\ &{\\qquad\\qquad=\\alpha X_{:,m}(0)}\\end{array}\n$$", "text_format": "latex", "page_idx": 18}, {"type": "text", "text": "Then a new estimation of $h_{F,m}^{\\prime}$ under this feature shift can be expressed as ", "page_idx": 18}, {"type": "equation", "text": "$$\n\\begin{array}{r l}&{h_{F,m}^{\\prime}(\\mathcal{G},X_{:,m}^{\\prime},Y)=\\underset{M_{F,m}}{\\mathrm{arg}\\,\\mathrm{min}}\\displaystyle\\sum_{u,v\\in\\mathcal{V}_{s}}\\left[X_{u,m}^{\\prime}(0)-X_{v,m}^{\\prime}(0)\\right]^{2}}\\\\ &{\\qquad\\qquad\\qquad\\qquad\\qquad=\\underset{M_{F,m}}{\\mathrm{arg}\\,\\mathrm{min}}\\displaystyle\\sum_{u,v\\in\\mathcal{V}_{s}}\\alpha^{2}\\left[X_{u,m}(0)-X_{v,m}(0)\\right]^{2}}\\\\ &{\\qquad\\qquad\\qquad\\qquad\\quad Y_{u=Y_{v}}}\\\\ &{\\qquad=\\underset{h_{F,m}}{\\mathrm{arg}\\,\\mathrm{min}}\\displaystyle\\alpha^{2}\\sum_{u,v\\in\\mathcal{V}_{s}}\\left[X_{u,m}(0)-X_{v,m}(0)\\right]^{2}}\\end{array}\n$$", "text_format": "latex", "page_idx": 18}, {"type": "text", "text": "Since arg $\\operatorname*{min}_{x}(\\cdot)$ is invariant to the scaling, e.g. arg $\\mathrm{min}_{x}(c f(x))=\\mathrm{arg\\,min}_{x}(f(x))$ , we have ", "page_idx": 18}, {"type": "equation", "text": "$$\n\\begin{array}{r l}{~h_{F,m}^{\\prime}(\\mathcal{G},X_{:,m}^{\\prime},Y)=\\arg\\underset{h_{F,m}}{\\operatorname*{min}}\\displaystyle\\sum_{u,v\\in\\mathcal{V},}\\left[\\left(X_{u,m}(0)-X_{v,m}(0)\\right)\\right]^{2}}&{}\\\\ {~~~~~~~~~~~~~~~~~~~~~~~~~~~\\frac{Y_{u}-Y_{v}}{Y_{u}=Y_{v}}}&{}\\\\ {=h_{F,m}^{*}(\\mathcal{G},X_{:,m},Y)}&{}\\end{array}\n$$", "text_format": "latex", "page_idx": 18}, {"type": "text", "text": "Therefore, we proved the estimation of feature homophily is invariant to the operation of feature scaling. ", "page_idx": 18}, {"type": "text", "text": "C. Variance Changing ", "text_level": 1, "page_idx": 18}, {"type": "text", "text": "Changing the variance of $X{;}_{m}$ can be seen as the combination of scaling and shifts. Assume node features follow a Gaussian distribution $N(\\mu,\\sigma^{2})$ , after the operation of changing the variance from $\\sigma^{2}$ to $\\beta\\sigma^{2}$ , we have new node features as ", "page_idx": 18}, {"type": "equation", "text": "$$\nX_{:,m}^{\\prime}=\\sqrt{\\beta}(X_{:,m}-\\mu)+\\mu\n$$", "text_format": "latex", "page_idx": 18}, {"type": "text", "text": "where $X_{:,m}^{\\prime}$ is calculated by deducing $\\mu$ , multiplying $\\sqrt{\\beta}$ , and adding $\\mu$ . We already show the estimation of feature homophily is invariant to the operations of feature shifts and scaling. Since the operation of variance changing is a combination of scaling and shifts, we can conclude that the estimation of feature homophily is invariant to the variance changing. ", "page_idx": 18}, {"type": "text", "text": "D Impact of Graph Homophily on Graph-agnostic Models ", "text_level": 1, "page_idx": 19}, {"type": "text", "text": "In addition to the impact of label homophily $h_{L}$ , structural homophily $h_{S}$ , and feature homophily $h_{F}$ on Graph-aware models as discussed in Section 4.2, we further discuss the impact on Graph-agnostic models through $\\mathcal{I}_{h}^{\\neg\\mathcal{G}}$ in this section. Specifically, we compute the partial derivative of $\\mathcal{J}_{h}^{\\neg\\bar{\\mathcal{G}}}$ with respect to $h_{S},h_{F}$ , and $h_{L}$ to reveal the analytical influences. (See calculation in Appendix G.2, G.3, and G.4.) ", "page_idx": 19}, {"type": "text", "text": "Theorem 3.1. The partial derivative of $\\mathcal{I}_{h}^{\\neg\\mathcal{G}}$ with respect to label homophily $h_{L}$ satisfies, ", "page_idx": 19}, {"type": "equation", "text": "$$\n\\frac{\\partial\\mathcal{T}_{h}^{\\neg\\mathcal{G}}}{\\partial h_{L}}\\left\\{\\Sigma\\right._{\\negmedspace0,\\ \\mathrm{~if~}h_{F}}\\in(-1,0)\\ \\mathrm{~}\n$$", "text_format": "latex", "page_idx": 19}, {"type": "text", "text": "From Theorem 3.1 we can see that, under a positive $h_{F}$ i.e.,the features of connected nodes become similar, the increase of $h_{L}$ makes the features of intra-class nodes more distinguishable, thereby improving the performance of $\\mathcal{M}^{\\neg\\mathcal{G}}$ . Conversely, under a negative $h_{F}$ i.e.,the features of connected nodes become dissimilar, the increase of $h_{L}$ makes the features of intra-class nodes more indistinguishable, resulting in a degradation of the performance of $\\mathcal{M}^{\\neg\\mathcal{G}}$ . ", "page_idx": 19}, {"type": "text", "text": "Theorem 3.2. The partial derivative of $\\mathcal{I}_{h}^{\\neg\\mathcal{G}}$ with respect to structural homophily $h_{S}$ satisfies, ", "page_idx": 19}, {"type": "equation", "text": "$$\n\\frac{\\partial\\mathcal{J}_{h}^{\\rightarrow\\mathcal{G}}}{\\partial h_{S}}\\geq0\n$$", "text_format": "latex", "page_idx": 19}, {"type": "text", "text": "From Theorem 3.2 we can see that, since the existence of feature dependencies, a larger $h_{S}$ makes the structural-aware features more distinguishable among different classes, improving the performance of $\\mathcal{M}^{\\neg\\mathcal{G}}$ . ", "page_idx": 19}, {"type": "text", "text": "Theorem 3.3. The partial derivative of $\\mathcal{I}_{h}^{\\neg\\mathcal{G}}$ with respect to feature homophily $h_{F}$ satisfies, ", "page_idx": 19}, {"type": "equation", "text": "$$\n\\frac{\\partial\\mathcal{T}_{h}^{\\cdot\\cdot\\mathcal{G}}}{\\partial h_{F}}\\left\\{\\begin{array}{l l}{<0,}&{\\mathrm{if}\\;h_{L}\\in(0,h_{L}^{-});h_{L}\\in(h_{L}^{-},h_{L}^{+})\\;\\mathrm{and}\\;h_{F}\\in(\\hat{h}_{F},1)}\\\\ {>0,}&{\\mathrm{if}\\;h_{L}\\in(h_{L}^{+},1];h_{L}\\in(h_{L}^{-},h_{L}^{+})\\;\\mathrm{and}\\;h_{F}\\in(-1,\\hat{h}_{F})}\\\\ {=0,}&{\\mathrm{if}\\;h_{L}\\in(h_{L}^{-},h_{L}^{+})\\;\\mathrm{and}\\;h_{F}=\\hat{h}_{F}}\\end{array}\\right.\n$$", "text_format": "latex", "page_idx": 19}, {"type": "text", "text": "where $0<h_{L}^{*,-}<h_{L}^{*,+}<1$ and $-1<h_{F}^{*}<1$ . ", "page_idx": 19}, {"type": "text", "text": "From Theorem 3.3 we can see, how the impact of $h_{F}$ on $\\mathcal{M}^{\\neg\\mathcal{G}}$ is determined by $h_{L}$ . This result is similar to the Theorem 2.3 in the case of $\\mathcal{M}^{\\bar{\\mathcal{G}}}$ . The increase of $h_{F}$ makes node features more similar to their neighbors. As a result, under a high $h_{L}$ , features of intra-class nodes become more similar, thereby improving the performance of $\\bar{\\mathcal{M}}^{\\bar{\\mathcal{G}}}$ ; under a low $h_{L}$ , features of intra-class nodes becomes more similar, thereby reducing the performance of $\\mathcal{M}^{\\neg\\mathcal{G}}$ . ", "page_idx": 19}, {"type": "text", "text": "E Experimental Details ", "text_level": 1, "page_idx": 19}, {"type": "text", "text": "E.1 Datasets ", "text_level": 1, "page_idx": 19}, {"type": "text", "text": "E.1.1 Synthetic Datasets ", "text_level": 1, "page_idx": 19}, {"type": "text", "text": "We show the detailed process of constructing CSBM-3H in Algorithm 1. First, graph topology is constructed with label homophily $h_{L}$ and structural homophily $h_{S}$ . Then, structural-aware node features are constructed with feature homophily $h_{F}$ . To investigate how three types of homophily influence the model performance, we generate graphs with $h_{L}\\in[0,0.1,.\\ldots,1]$ , $\\dot{h_{S}}\\in[0,0.1,\\bar{\\dots},1]$ , and $h_{F}\\in[-0.8,-0.6,\\ldots,0.8]$ . For each given $h_{L},h_{S}$ , and $h_{F}$ , we generate the graphs with 10 seeds from $[0,1,\\ldots,9]$ to mitigate random deviations. Each graph contains 1000 nodes distributed across 3 classes, with node degrees sampled from a uniform distribution in the range ", "page_idx": 19}, {"type": "text", "text": "For the random graph generative models with homophily, current studies [51, 29, 39, 46] generally adopt a Contextual Stochastic Block Model with Homophily(CSBM-H) to control the label homophily $h_{L}$ through assigning nodes with different probabilities that connect to the nodes from other classes. ", "page_idx": 19}, {"type": "text", "text": "Input: Label homophily $h_{L}$ , structural homophily $h_{S}$ , and feature homophily $h_{F}$ , number of nodes $N$ , number of classes $C$ , node degree $_{D}$ , dimension of node features $M$ , random seed $\\phi$ , class-wised Gaussian mean $\\pmb{\\mu}=[\\pmb{\\mu}_{1},\\dots,\\pmb{\\mu}_{C}]^{T}$ , covariance $\\Sigma=[\\Sigma_{1},\\hdots,\\Sigma_{C}]^{T}$ with $\\pmb{\\mu}_{c}\\in\\mathcal{R}^{M}$ and $\\Sigma_{c}\\in\\mathcal{R}^{M\\times M}$ for class $c$ .   \nOutput: Adjacency matrix $\\pmb{A}$ , node features $\\mathbf{\\deltaX}$ and node labels $\\mathbf{Y}$ of a synthetic graph. Initialize node features $\\mathbf{\\deltaX}$ , node labels $\\mathbf{Y}$ , with $X\\in\\mathbb{R}^{N\\times M}$ , $\\ensuremath{\\boldsymbol{Y}}\\in\\mathbb{R}^{N}$ . Set random seed $\\phi$ . for $n=0$ to $N$ do $\\triangleright$ Sample node labels $\\begin{array}{l}{k\\sim\\lfloor\\operatorname{Uniform}(0,C)\\rfloor}\\\\ {Y_{n}\\gets k}\\end{array}$ end for $\\begin{array}{r l}&{Z\\gets\\mathrm{One-hot}(Y)}\\\\ &{S\\gets h_{L}I_{C}+\\frac{1-h_{L}}{C-1}(\\mathbf{1}_{C}-I_{C})}\\\\ &{D^{N}\\gets Z S}\\\\ &{\\mathbf{for}\\,D_{u,c}^{N}\\in D^{N}\\,\\mathbf{do}}\\\\ &{\\quad\\epsilon\\sim\\mathrm{Normal}(0,\\frac{(1-h_{S})^{2}}{C-1})}\\\\ &{\\quad D_{u,c}^{N}\\gets D_{u,c}^{N}+\\epsilon}\\end{array}$ \u25b7One-hot encoding of node labels $\\triangleright$ Introduce label homophily $h_{L}$ $\\triangleright$ Construct neighbor distribution \u25b7Introduce structural homophily $h_{S}$ end for $\\hat{D}\\gets\\mathrm{diag}(D)$ $\\begin{array}{r}{A_{p}\\sim\\frac{C}{N}\\hat{D}^{-\\frac{1}{2}}D^{\\mathcal{N}}\\hat{D}^{-\\frac{1}{2}}Z^{T}}\\end{array}$ $\\triangleright$ Construct neighbor sampling matrix with node degrees $A_{p}\\gets\\operatorname*{inax}(0,\\operatorname*{min}(1,A_{p}))$ $\\triangleright$ Bound with [0, 1] before sampling A \u2190< Sym \u25e6Binarize > (Ap) \u25b7Binarization sampling and symmetrize adjacency matrix for $n=0$ to $N$ do \u25b7Sample Structural-agnostic node features $X_{n,:}\\sim\\mathrm{Normal}(\\mu_{Y_{n}},\\Sigma_{Y_{n}})$ end for $\\begin{array}{r l}&{\\overline{{X}}\\leftarrow(I_{C}-\\frac{h_{F}}{\\sigma(A)}A)^{-2}X}\\\\ &{\\mathrm{return}\\;A,X,Y}\\end{array}$ \u25b7Introduce feature homophily $h_{F}$ ", "page_idx": 20}, {"type": "text", "text": "Then the node features are sampled solely based on the classes. However, these random graph generative models have two drawbacks: First, the probabilities of nodes connecting to the nodes with different classes are uniform, which lacks diversity. Second, the sampled node features are independent with their structures $i.e.,(X\\perp\\!\\!\\!\\perp A|Y)$ , which is uncommon in real-world scenarios where interactions influence the attributes of connected nodes [61, 14, 59]. Our proposed CSBM-3H well address these drawbacks by considering $h_{S}$ and $h_{F}$ , thereby providing a more comprehensive and realistic model. ", "page_idx": 20}, {"type": "text", "text": "E.1.2 Real-World Datasets ", "text_level": 1, "page_idx": 20}, {"type": "text", "text": "We conduct our experiments on 31 real-world datasets: Roman-Empire, Amazon-Ratings, Mineweeper, Tolokers, and Questions from [52]; Squirrel, Chameleon, Actor, Texas, Cornell, Wisconsin originally from [50] and refined by [52]; Cora, PubMed, and CiteSeer from [69]; CoraFull, AmazonPhoto, Amazon-Computer, Coauthor-CS, and Coauther-Physics from [54]; Flickr from [70]; WikiCS from [48]; Blog-Catalog from [68]; Ogbn-Arxiv from [19]; Genius, Twitch-DE, Twitch-ENGB, Twitch-ES, Twitch-FR, Twitch-PTBR, Twitch-RU, and Twitch-TW from [32]. These datasets contain both the homophilic and heterophilic graphs that come from citation networks, webpage networks, purchase networks, image description networks, coauthor networks, actor networks, and social networks. The diversity of these datasets enables us to evaluate the model performance in a general case. For these datasets, we show basic statistics in Table 2 and the graph homophily metrics or model performance metrics in Table 3. ", "page_idx": 20}, {"type": "text", "text": "E.2 Training Detail ", "text_level": 1, "page_idx": 20}, {"type": "text", "text": "For all the datasets, we randomly split the train, validation, and test set as $50\\%{:}25\\%{:}25\\%$ for 10 runs. We use the Adam optimizer [25] with a learning rate of 0.001. The maximum training epoch is set to 1000 with a patience of 40 for early stopping. To enhance performance, we incorporated skip connections [18] and layer normalization [2] in each layer. All models are trained on a single NVIDIA RTX A5000 GPU with 24GB memory. For hyperparameter tuning, we perform a grid search on the validation set. The search space included the following hyperparameters: ", "page_idx": 20}, {"type": "table", "img_path": "GmdGEF8xxU/tmp/701a9d947bd92ce9bbf8034ecbf9d5281fb55166342678cfdd8f4747146f0c05.jpg", "table_caption": [], "table_footnote": ["Table 2: Statistics on real-world datasets "], "page_idx": 21}, {"type": "text", "text": "", "page_idx": 21}, {"type": "text", "text": "\u2022 Number of layers: {1, 2}, \u2022 Hidden dimension: {64, 128, 256}, \u2022 Dropout rate: {0.2, 0.4, 0.6, 0.8}, \u2022 Weight decay: {1e-3, 1e-4, 1e-5}. ", "page_idx": 21}, {"type": "text", "text": "E.3 Node Classification Performance ", "text_level": 1, "page_idx": 21}, {"type": "text", "text": "Table 4 shows the averaged mean and stand deviation accuracy of node classification performance for MLP, GCN, GraphSage, and GAT across 10 runs. Notably, graph-aware models ${\\dot{\\mathcal{M}}}^{\\mathcal{G}}$ outperform graph-agnostic models $\\mathcal{M}^{\\neg\\mathcal{G}}$ in most datasets. This phenomenon holds true for both homophilic datasets, such as Cora, Citeseer, and PubMed, and heterophilic datasets, such as Roman-empire, Chameleon-filtered, and Flickr. Consequently, relying solely on label homophily is insufficient to determine the performance of $M^{g}$ , which aligns with previous studies [46, 39] ", "page_idx": 21}, {"type": "text", "text": "E.4 Tri-Hom for Graph-agnostic Models ", "text_level": 1, "page_idx": 21}, {"type": "text", "text": "We show the numerical results of Tri-Hom $\\mathcal{I}_{h}^{\\neg\\mathcal{G}}$ for graph-agnostic models $\\mathcal{M}^{\\neg\\mathcal{G}}$ in Figure 3a, where each subfigure is a slicer of $h_{S}$ that visualizes the influences of $h_{L}$ and $h_{F}$ on $\\mathcal{I}_{h}^{\\mathcal{G}}$ . For the impact of $h_{L},h_{F}$ , and $h_{S}$ individually, we can get the same conclusions as in Theorem 3.1, 3.2, and 3.3. To validate our theoretical results of $\\mathcal{M}^{\\breve{\\neg}\\breve{\\mathcal{G}}}$ in a more general case, we further show the impact of three types of homophily with MLP on synthetic datasets in Figure 3b. The results correlate well with our numerical results, showing the effectiveness of $\\mathcal{I}_{h}^{\\neg\\mathcal{G}}$ in measuring the performance of $\\mathcal{M}^{\\neg\\mathcal{G}}$ under the influences of three types of homophily. ", "page_idx": 21}, {"type": "table", "img_path": "GmdGEF8xxU/tmp/405fab004a1b7500d5da7d7bedc1f4dcce9a9150ab3de9ca3eaac015a013d51a.jpg", "table_caption": ["Table 3: Graph homophily metrics and graph performance metrics on real-world datasets "], "table_footnote": [], "page_idx": 22}, {"type": "table", "img_path": "GmdGEF8xxU/tmp/e100ff2e48492c19c7bafe32024386da17cb338b67defb9d2076120601b8baae.jpg", "table_caption": [], "table_footnote": ["Table 4: Node classification performance on real-world datasets. "], "page_idx": 23}, {"type": "text", "text": "", "page_idx": 23}, {"type": "text", "text": "E.5 Numerical Results of Tri-Hom with Three types of Homophily ", "text_level": 1, "page_idx": 23}, {"type": "text", "text": "We show how the label homophily $h_{L}$ , structural homophily $h_{S}$ , and feature homophily $h_{F}$ collectively influence the $\\mathcal{I}_{h}^{\\neg\\mathcal{G}}$ and $\\mathcal{I}_{h}^{\\mathcal{G}}$ in Figure 4 in a more general case, where the $\\mathbf{X}$ -axis, y-axis, and $\\mathbf{Z}$ -axis denotes $h_{L},h_{F}$ , and $h_{N}$ . A lighter color (close to yellow) indicates a larger $\\mathcal{I}_{h}^{\\neg\\mathcal{G}}$ or $\\mathcal{I}_{h}^{\\mathcal{G}}$ , which also implies a better model performance. These numerical results align well with our theoretical results of the individual impact on $\\mathcal{I}_{h}^{\\neg\\mathcal{G}}$ or $\\mathcal{I}_{h}^{\\mathcal{G}}$ with respect to $h_{L},\\,h_{S}$ , or $h_{F}$ . Furthermore, by observing the gradients in Figure 4, we can know how these three homophily metrics influence the model performance collectively. ", "page_idx": 23}, {"type": "text", "text": "E.6 Influences of A Single Type of Homophily on Synthetic Datasets ", "text_level": 1, "page_idx": 23}, {"type": "text", "text": "To verify our theoretical results, we show how the performances of GCN and MLP are affected by three types of homophily individually in Figure 5, which shows the influences of label homophily $h_{L}$ , structural homophily $h_{S}$ , and feature homophily $h_{F}$ on the node classification accuracy of GCN and MLP on synthetic datasets. First, the top 3 subfigures show the influences of $h_{L}$ under different $h_{F}$ and $h_{S}$ . With the increase of $h_{L}$ , the accuracy of GCN first decreases and then increases with a pitfall on a medium-level of homophily, and the accuracy of MLP is dependent on the sign of $h_{F}$ , leading to ", "page_idx": 23}, {"type": "image", "img_path": "GmdGEF8xxU/tmp/145b7a0c651e93d047fa62c8bd8b49554e2023c33497325c1fd6a078961b823c.jpg", "img_caption": ["(b) Model Performance on synthetic datasets "], "img_footnote": [], "page_idx": 24}, {"type": "text", "text": "Figure 3: We measure the impact of label homophily $h_{L}$ , feature homophily $h_{F}$ , and structural homophily $h_{S}$ through numerical results of Tri-Hom $\\mathcal{I}_{h}^{\\neg\\mathcal{G}}$ and simulation results of the node classification accuracy with MLP on synthetic datasets. ", "page_idx": 24}, {"type": "image", "img_path": "GmdGEF8xxU/tmp/ec4a0200c081b3225508c495c1da914ac9af417b510cb8fe7cc62f7192e6c40c.jpg", "img_caption": ["Figure 4: The Influences of label homophily $h_{L}$ , structural homophily $h_{S}$ , and feature homophily $h_{F}$ to graph-agnostic models and graph-aware models "], "img_footnote": [], "page_idx": 24}, {"type": "text", "text": "the same results as in Theorem 2.1 and 3.1. Second, the medium 3 subfigures show the influences of $h_{F}$ . With the increases of $h_{F}$ , the accuracy of both of the GCN and MLP will decreases with a low $h_{L}$ , increases with a high $h_{L}$ , and increases first and then decreases with a medium $h_{L}$ . The result also aligns well with Theorem 2.3 and 3.3. Last, the bottom 3 subfigures show the influences of $h_{S}$ . Even if the influences under different $h_{L}$ or $h_{F}$ would slightly vary, an increase of $h_{S}$ generally improves the performance of both the GCN and MLP, aligning well with Theorem 2.2 and 3.2. ", "page_idx": 24}, {"type": "text", "text": "E.7 Visualization of Real-world Dataset with Three Types of Homophily ", "text_level": 1, "page_idx": 24}, {"type": "text", "text": "To better visualize the impact of $h_{L},h_{S}$ , and $h_{F}$ to graph-aware models $M^{\\mathcal{G}}$ on real-world datasets, we show the performance of GCN on all the datasets with these homophily metrics in Figure 6, where $h_{L},h_{F}$ , and $h_{S}$ are shown as the $\\mathbf{X}$ -axis, y-axis, and the size of the scatter respectively. Generally, the correlation of three homophily metrics with the performance of GCN is similar to our theoretical results in Figure 2a. With the increase of $h_{L}$ , the performance of GCN decreases first and then increases, with a pitfall (as shown by datasets of Actor, Squirrel, and Chameleon). We also see that a higher $h_{S}$ leads to a better performance when we fix $h_{F}$ and $h_{L}$ (as shown by datasets of Question with Amazon-photo, and Cora with Coauthor-CS). As for the $h_{F}$ , since its influence is not so obvious compared with $h_{L}$ and $h_{S}$ as shown in Figure 5 and the scarcity of real-world datasets, it is hard to see its influence in real-world datasets. ", "page_idx": 24}, {"type": "image", "img_path": "GmdGEF8xxU/tmp/f6eebc80865fc5436053ee042e60b6271f253f404433e8e4b4d16ddd5ac78e63.jpg", "img_caption": ["Figure 5: The impact of label homophily $h_{L}$ , feature homophily $h_{F}$ , and structural homophily $h_{S}$ on the accuracy of node classification using MLP and GCN. "], "img_footnote": [], "page_idx": 25}, {"type": "text", "text": "", "page_idx": 25}, {"type": "text", "text": "E.8 Influences of Class-wised Structural Homophily on Real-world Datasets ", "text_level": 1, "page_idx": 25}, {"type": "text", "text": "As shown in Figure 7, we investigate more nuanced influences of structural homophily $h_{S}$ without the interference of $h_{L}$ and $h_{F}$ on real-world datasets with respect to each class. Specifically, we calculate node classification accuracy with respect to each class inside one dataset and show the alignment of the class-wised accuracy and class-wised structural homophily $h_{S}$ . The results show for some of the datasets such as Citeseer, Amazon-ratings, and Coauthor-physics, we can clearly observe the accuracy increases with $h_{S}$ while for datasets such as Corafull and Coauthor-CS, we can only see the general tendency of alignment with noises. We speculate that for Corafull and Coauthor-CS, the $h_{S}$ is not as uniform as other datasets for the nodes in one class, leading to the noises. ", "page_idx": 25}, {"type": "text", "text": "E.9 Correlation of Metrics with Performance Gap of GNNs and MLP ", "text_level": 1, "page_idx": 25}, {"type": "text", "text": "To investigate when GNNs are better than MLP, we show the differences in the performance between GNNs and MLP in Figure 5. The results indicate that, among the statistic-based homophily metrics, the structural homophily $h_{S}$ shows a strong correlation with the differences in the performance between GNNs and MLP. This is because $h_{S}$ measure the consistency of the structural information of nodes within the same class, thereby reflecting the differences in the performance between GNNs and MLP. We also observe that the $h_{K R}$ has the highest correlation with differences, confirming the effectiveness of the classifier-based metrics in measuring the differences in the performance between GNNs and MLP [39]. ", "page_idx": 25}, {"type": "image", "img_path": "GmdGEF8xxU/tmp/faa70ba30fe0a1f3e0624e628c8101c69688068005fb97ac480cc54cb82c48ab.jpg", "img_caption": ["Figure 6: Label, feature, and structural homophily metrics on real-world datasets are shown as the ${\\bf X}$ -axis, y-axis, and the size of the scatter respectively. The classification performance of GCN is denoted by the color of the scatters. "], "img_footnote": [], "page_idx": 26}, {"type": "image", "img_path": "GmdGEF8xxU/tmp/f047361110a783ca15b66d615bcccaeff5377ea3018f50d6909e61c2c796e771.jpg", "img_caption": ["Figure 7: The influences of structural homophily to both the GCN and MLP for each class on real-world datasets. "], "img_footnote": [], "page_idx": 26}, {"type": "table", "img_path": "GmdGEF8xxU/tmp/d0d50b83c48321affb4469e08cadcfe59a2b0a21561eb8e122b6e95545f7428d.jpg", "table_caption": ["Table 5: Pearson correlation with p-value of all the metrics with the performance differences of GNNs with MLP of node classification on real-world datasets. "], "table_footnote": [], "page_idx": 27}, {"type": "text", "text": "", "page_idx": 27}, {"type": "text", "text": "E.10 Other Types of Correlation ", "text_level": 1, "page_idx": 27}, {"type": "text", "text": "In our experiments on real-world datasets, we explore the correlation between all the metrics and model performance. In addition to the widely used Pearson correlation, we employ Kendall\u2019s Tau rank correlation to assess these relationships. Let $\\textbf{\\em x}$ and $\\textit{\\textbf{y}}$ be two observed variables with $\\mathbf{x},\\mathbf{y}\\in\\mathbb{R}^{N}$ , the Pearson correlation $\\rho$ can be calculated as ", "page_idx": 27}, {"type": "equation", "text": "$$\n\\rho=\\frac{\\sum_{i=1}^{N}(x_{i}-\\bar{x})(y_{i}-\\bar{y})}{\\sqrt{\\sum_{i=1}^{N}(x_{i}-\\bar{x})^{2}\\sum_{i=1}^{N}(y_{i}-\\bar{y})^{2}}}\n$$", "text_format": "latex", "page_idx": 27}, {"type": "text", "text": "where $\\bar{x}$ and $\\bar{y}$ are the means of $\\textbf{\\em x}$ and $\\textit{\\textbf{y}}$ respectively. ", "page_idx": 27}, {"type": "text", "text": "Kendall\u2019s Tau rank correlation [4] $\\tau$ can be calculated as ", "page_idx": 27}, {"type": "equation", "text": "$$\n\\tau={\\frac{|\\mathrm{concordant}\\,\\mathrm{pairs}|-|\\mathrm{discordant}\\,\\mathrm{pairs}|}{{\\frac{1}{2}}N(N-1)}}\n$$", "text_format": "latex", "page_idx": 27}, {"type": "text", "text": "where concordant pairs occur when the ranks of both variables agree, while discordant pairs occur when they disagree. ", "page_idx": 27}, {"type": "text", "text": "Pearson correlation measures linear correlation between two variables, which is widely used and easy to interpret. Kendall\u2019s Tau rank correlation measures the similarity ranking between two variables, which has no assumptions of the data distribution and are robust to outliers. ", "page_idx": 27}, {"type": "table", "img_path": "GmdGEF8xxU/tmp/efff497e186406a84fc476004f026f66a4eaa2c847bc08560a5f029bd29e59e5.jpg", "table_caption": [], "table_footnote": ["Table 6: Kendall\u2019s Tau rank correlation of all the metrics with model performance of node classification on real-world datasets "], "page_idx": 28}, {"type": "text", "text": "The correlation of all the metrics with model performance measured by Kendall\u2019s Tau rank correlation is shown in Table 6, which is similar as the results in Pearson correlation. Our Tri-Hom $\\mathcal{I}_{h}^{\\mathcal{G}}$ still shows the highest correlation with GNNs performance compared with other types of metrics, which confirms the necessity of disentangling graph homophily. ", "page_idx": 28}, {"type": "text", "text": "E.11 Correlation of Homophily Metrics ", "text_level": 1, "page_idx": 28}, {"type": "text", "text": "To investigate the similarity of the information contained in graph homophily metrics and GNNs performance metrics, we show the Pearson correlation of these metrics on real-world datasets in Figure 8. We can see a high correlation among the homophily on label aspect (including $h_{e d g e},h_{n o d e}$ , $h_{c l a s s}$ , $h_{a d j}$ , $h_{d e n}$ , $h_{2h o p}$ , and $h_{n e i}$ ). These metrics measure the label consistency across the graph topology, sharing a similar characteristic. This also holds for the homophily on the structural aspect (including $L I,h_{N C},h_{a g g}$ , and $h_{S}$ ), since these metrics measure how informative the neighbors are for the node labels. However, the Pearson correlation among the homophily on feature aspect $(h_{G E}$ , $h_{L S-c o s}$ , $h_{L S-c o s}$ , $h_{a t t r}$ , $h_{C F}$ , and $h_{F}$ ) is low. We speculate that this is because different types of feature aspect $(h_{G E},\\,h_{C F}$ , and $h_{F}$ ) or different similarity measurements $(h_{L S-c o s}$ and $h_{L S-c o s},$ could vary a lot for real-world datasets. ", "page_idx": 28}, {"type": "text", "text": "F Future Directions ", "text_level": 1, "page_idx": 28}, {"type": "text", "text": "Each of the disentangled graph homophily, including label homophily, structural homophily, or feature homophily, derives many interesting directions for future research. In this section, we introduce these potential future directions from the perspective of model design and applications. ", "page_idx": 28}, {"type": "text", "text": "F.1 Model Design ", "text_level": 1, "page_idx": 28}, {"type": "text", "text": "A. Label homophily ", "text_level": 1, "page_idx": 28}, {"type": "text", "text": "We discussed how label homophily influences GCN and MLP, providing both theoretical proof and empirical experiments. Our results show that GCN performs better than MLP in conditions of extremely low homophily (good heterophily [46]), but significantly worse than MLP in medium levels of homophily (mid-homophily pitfall [39]). This suggests that GCNs sometimes fail to extract effective topological information. To mitigate this weakness, it is preferable to add a residual connection to GNNs or introduce a learnable parameter that allows the model to balance graph-aware and graph-agnostic information. The necessity of residual connections has been verified in previous studies [66, 45, 52]. ", "page_idx": 28}, {"type": "text", "text": "In addition to model design at the graph level, we can also consider a fine-grained approach at the node level. Our results indicate that GCN does not always outperform MLP, suggesting that different models could be applied to nodes with varying levels of label homophily. This type of personalized design has been explored in current GNN research on heterophilic graphs [62, 11], yet it holds significant potential for improving overall model performance. ", "page_idx": 28}, {"type": "image", "img_path": "GmdGEF8xxU/tmp/54e9803b8a12673665bfce39fcc8fceec62c3bc85b30ef05b552d03620295ccd.jpg", "img_caption": ["Figure 8: Pearson correlation between all the metrics. Each cell refers to the correlation between two metrics measured on 31 real-world datasets. "], "img_footnote": [], "page_idx": 29}, {"type": "text", "text": "", "page_idx": 29}, {"type": "text", "text": "B. Structural homophily ", "text_level": 1, "page_idx": 29}, {"type": "text", "text": "As mentioned in Theorem 2.2, the performance of graph-aware models improves with an increase in structural homophily. This leads to a crucial question: how can we deal with graphs exhibiting varying levels of structural homophily? To address this issue, we can enhance current GNNs using message-passing calibration and graph rewiring. ", "page_idx": 29}, {"type": "text", "text": "For the message passing calibration, several methods, such as GPRGNN [8], FB-GNNs [43], and ACM-GNNs [38], propose adding an additional high-pass filter to capture local variations and details in the graph structure. When structural homophily is low, the high-pass filter captures the diversification of individual nodes. Along with a low-pass filter, these methods perform well on graphs with varying levels of homophily. However, the high-pass fliters used in these methods cannot capture more complicated structural information. Since $S(\\cdot)$ in structural homophily can be any measurement of structural homophily, this metric can evaluate more complex graph structures. In the future, it is promising to design novel fliters based on structural homophily to capture more intricate structural information and improve model performance. ", "page_idx": 29}, {"type": "text", "text": "", "page_idx": 30}, {"type": "text", "text": "For the graph rewiring, many methods (MVGCN [63], GloGNN [31], WRGNN [56]) propose deriving a new graph topology based on node features or embeddings. This operation improves the connectivity of nodes with similar semantic contexts, thereby enhancing model performance. However, this rewiring could connect nodes from different classes, which impedes GNN performance. To resolve this, we can measure class-wise structural homophily as shown in Eq. (2) and design adaptations for different classes, which will be particularly beneficial for class-imbalanced graphs, such as in bot detection and fraud detection. Furthermore, we can adapt the structural measurement function $S(\\cdot)$ . Since most current rewiring methods do not evaluate the informativeness of their rewiring basis (node embeddings with structural information), the proposed structural homophily can serve as a metric to evaluate which types of rewiring basis to select. For example, Geom-GNN [50] uses structural node embeddings to construct new neighbors of nodes and empirically determines the best approach. Our structural homophily could identify the most effective embedding approach before training GNNs. Therefore, structural homophily provides a guideline for graph rewiring methods. ", "page_idx": 30}, {"type": "text", "text": "C. Feature homophily ", "text_level": 1, "page_idx": 30}, {"type": "text", "text": "The feature homophily proposed in this paper measures how node features are influenced by their neighbors. To our knowledge, only a few GNNs [55] consider these feature dependencies in their design. There is significant potential to explore how feature dependencies function in graphs. For instance, in social networks, people\u2019s opinions are affected by those around them. Identifying different user types while filtering out the noise introduced by their neighbors remains an open question. Both our theoretical results (Theorem 2.3) and empirical results (Figure 4) demonstrate the synergy between feature homophily and label homophily in enhancing model performance. Based on these findings, future work could focus on designing various graph filters to optimize the objective in Eq. (8) by considering both label and feature homophily. Furthermore, feature homophily can explain the presence of node features, making it worthwhile to investigate how much features are influenced by their neighbors, particularly in temporal graphs. ", "page_idx": 30}, {"type": "text", "text": "F.2 Applications ", "text_level": 1, "page_idx": 30}, {"type": "text", "text": "Current real-world applications of graph homophily only focus on label homophily, which cannot align well with GNNs performance as shown in this paper and other studies [46, 39]. To address this weakness, our findings provide a comprehensive view of 3 types of homophily, which could be applied in many real-world applications, such as social networks, recommendation, and urban computing. ", "page_idx": 30}, {"type": "text", "text": "A. Social Networks ", "text_level": 1, "page_idx": 30}, {"type": "text", "text": "In social networks, homophily is defined as the tendency for people to seek out or be drawn to others who are similar to themselves [24]. This definition primarily explains the consistency of certain characteristics of people within the network topology. Our proposed concepts of structural homophily and feature homophily offer additional insights into social networks. ", "page_idx": 30}, {"type": "text", "text": "Structural homophily refers to the similarity of the local neighbors of individuals of the same type, which can be used to analyze the friend circles of specific user groups. For instance, in fraud detection on social media, fraudsters often target older individuals who are more vulnerable to scams, resulting in a high level of structural homophily. Therefore, we can identify potential fraudsters based on their structural connections. However, structural information can vary and may not always be informative. If fraudsters randomly select users to contact, identifying them through their neighbors becomes challenging, leading to a low level of structural homophily. Future research could focus on measuring the level of structural homophily in social networks to better understand user behaviors. ", "page_idx": 30}, {"type": "text", "text": "Feature homophily, on the other hand, describes how individuals are influenced by their neighbors. Different types of networks exhibit varying levels of feature homophily. When people discuss similar events online, their opinions may be influenced by those they follow, leading to a higher similarity in features with their neighbors, indicating a high level of feature homophily. Conversely, during online arguments, individuals connect with those holding different opinions. After such interactions, they may reinforce their original viewpoints, resulting in greater dissimilarity with their neighbors, indicating a low level of feature homophily. Investigating user behavior through feature homophily can reveal underlying intentions and improve model performance. Furthermore, feature homophily provides valuable insights into the extent to which users are influenced by their neighbors. ", "page_idx": 30}, {"type": "text", "text": "", "page_idx": 31}, {"type": "text", "text": "B. Recommendation ", "text_level": 1, "page_idx": 31}, {"type": "text", "text": "Previous studies [22, 12] on recommendation systems using graph homophily have primarily focused on label homophily, which may result in misalignment with model performance, similar to what occurs in purely homogeneous graphs. To address this issue, it would be beneficial to define structural homophily within recommendation systems. For instance, we can measure the structural information of users within the same community by assessing the consistency of the items they have purchased. This approach allows us to determine whether this topological information can effectively predict links between users and specific items. ", "page_idx": 31}, {"type": "text", "text": "C. Urban Computing ", "text_level": 1, "page_idx": 31}, {"type": "text", "text": "A recent study [65] proposes a method to measure spatial graph homophily in urban computing using a spatial diversity score with direction-aware and distance-aware partitions. However, this metric focuses solely on label homophily, leaving a significant opportunity to explore structural homophily. Structural homophily involves measuring the consistency of geographic information among similar types of locations. For example, bookstores are often surrounded by coffee shops, where customers can enjoy coffee while reading books [44], indicating a high level of structural homophily. Conversely, convenience stores might be located near a high-end fashion boutique, a fast-food restaurant, or an office building. Since the geographic information does not reliably indicate the presence of a convenience store, it exhibits a low level of structural homophily. Future research could explore structural homophily in urban graphs to analyze the behaviors of various urban objects, aiding in better city planning. ", "page_idx": 31}, {"type": "text", "text": "G Proof of Theorems ", "text_level": 1, "page_idx": 31}, {"type": "text", "text": "We first specify the ranges of three types of homophily and spectral radius8 of an adjacency matrix, which are used for the approximation in partial derivative process: ", "page_idx": 31}, {"type": "equation", "text": "$$\nh_{L}\\in[0,1],\\ h_{S}\\in[0,1],\\ |h_{F}|\\in(-1,1),\\ \\mathrm{and}\\ \\rho(A)\\gg1\n$$", "text_format": "latex", "page_idx": 31}, {"type": "text", "text": "G.1 Proof of Theorem 1 ", "text_level": 1, "page_idx": 31}, {"type": "text", "text": "Theorem 1. In CSBM-3H, the ratio of the expectation of intra-class distance to the expectation of inter-class distance of node representations for graph-agnostic models $\\mathcal{M}^{\\neg\\mathcal{G}}$ and graph-aware models $M^{g}$ is: ", "page_idx": 31}, {"type": "equation", "text": "$$\n\\begin{array}{r l}&{\\mathfrak{I}_{N}=\\frac{\\sum_{Y_{u}\\notin Y_{v}}[2C(C-1)]^{-1}\\|\\mu_{Y_{u}}-\\mu_{Y_{v}}\\|^{2}}{C^{-1}|\\sigma^{2}|},\\mathcal{I}_{h}^{-\\mathcal{G}}=\\frac{\\left[1-(\\frac{h_{F}}{\\rho(A)})^{2}(C(\\frac{1-h_{L}}{C-1})^{2}+C\\frac{(1-h_{S})^{2}}{C-1}+(\\frac{h_{L}C-1}{C-1})^{2})\\right]}{\\left[1-(\\frac{h_{F}}{\\rho(A)})(\\frac{h_{L}C-1}{C-1})\\right]^{2}},}\\\\ &{\\mathcal{I}_{h}^{\\mathcal{G}}=\\frac{(\\frac{h_{L}C-1}{C-1})^{2}}{(C(\\frac{1-h_{L}}{C-1})^{2}+\\frac{(1-h_{S})^{2}}{C-1}+(\\frac{h_{L}C-1}{C-1})^{2})}\\mathcal{I}_{h}^{-\\mathcal{G}}.}\\end{array}\n$$", "text_format": "latex", "page_idx": 31}, {"type": "text", "text": "Proof. We have the objective ", "page_idx": 31}, {"type": "equation", "text": "$$\n\\mathcal{I}=\\frac{D_{i n t r a}(\\pmb{H})}{D_{i n t e r}(\\pmb{H})}=\\frac{\\mathbb{E}_{Y_{u}=Y_{v},\\epsilon}\\left[\\|\\pmb{H}_{u}-\\pmb{H}_{v}\\|^{2}\\right]}{\\mathbb{E}_{Y_{u}\\neq Y_{v},\\epsilon}\\left[\\|\\pmb{H}_{u}-\\pmb{H}_{v}\\|^{2}\\right]}\n$$", "text_format": "latex", "page_idx": 31}, {"type": "text", "text": "Then, we derive the objective for graph-agnostic models $\\mathcal{M}^{\\neg\\mathcal{G}}$ and graph-aware models $M^{\\mathcal{G}}$ respectively as follows ", "page_idx": 31}, {"type": "text", "text": "G.1.1 Graph-agnostic Models ", "text_level": 1, "page_idx": 32}, {"type": "text", "text": "For the graph-agnostic models, we let $\\textstyle H_{u}\\,=\\,X_{u}$ . The structural-agnostic feature $m$ in class $c$ is sampled from a Gaussian distribution $N_{c,m}(\\mu_{c,m},\\sigma_{c,m}^{2})$ . We use $\\mathbf{\\bar{\\boldsymbol{N}}}\\in\\mathbb{R}^{C\\times M}$ to denote the distributions of structural-aware for all the classes with mean ${\\pmb{\\mu}}\\in\\mathbb{R}^{C\\times M}$ and standard deviation $\\sigma^{2}\\in\\mathbb{R}^{C\\times M}$ in the matrix form. ", "page_idx": 32}, {"type": "text", "text": "For the structural-aware feature $m$ of node $u$ , we have9 ", "page_idx": 32}, {"type": "equation", "text": "$$\n\\begin{array}{l}{{\\displaystyle{X_{u,m}}\\sim\\left[\\left(I_{C}-\\omega{\\cal S}\\right)^{-1}{\\cal N}_{:,m}\\right]_{Y_{u}}}}\\\\ {{\\displaystyle\\qquad=\\left[\\sum_{k=0}^{\\infty}(\\omega{\\cal S})^{k}{\\cal N}_{:,m}\\right]_{Y_{u}}}}\\\\ {{\\displaystyle\\qquad=\\left[\\sum_{k=0}^{\\infty}\\omega^{k}\\left[(\\frac{1-h_{L}}{C-1}+\\epsilon){\\bf1}_{C}+(h_{L}-\\frac{1-h_{L}}{C-1})I_{C}\\right]^{k}{\\cal N}_{:,m}\\right]_{Y_{u}}}}\\end{array}\n$$", "text_format": "latex", "page_idx": 32}, {"type": "text", "text": "Next, to simplify the expression, we let $\\begin{array}{r}{p_{1}=\\frac{1-h_{L}}{C-1}+\\epsilon}\\end{array}$ and $\\begin{array}{r}{p_{0}=h_{L}-\\frac{1-h_{L}}{C-1}}\\end{array}$ , ", "page_idx": 32}, {"type": "equation", "text": "$$\n\\begin{array}{r l}{\\mathbf{X}_{u,n}\\sim\\left[\\displaystyle\\sum_{k=0}^{\\infty}\\alpha^{k}\\left|p_{1}\\mathbf{1}_{C}+p_{0}p_{C}\\right|^{k}N_{*,n}\\right]_{Y_{n}}}&{}\\\\ {=}&{\\displaystyle\\left[\\sum_{k=0}^{\\infty}\\alpha^{k}\\sum_{i=0}^{k}\\binom{k}{i}(p_{1}\\mathbf{1}_{C})^{k-i}(p_{0}I_{0})^{i}N_{*,n}\\right]_{Y_{n}}}\\\\ &{=\\left[\\displaystyle\\sum_{k=0}^{\\infty}\\alpha^{k}\\sum_{i=0}^{k}\\binom{k}{i}(p_{1})^{k-i}(p_{0})^{i}\\mathbf{1}_{C}^{k-i}p_{C}N_{*,n}\\right]_{Y_{n}}}\\\\ &{=\\displaystyle\\left[\\sum_{k=0}^{\\infty}\\alpha^{k}\\left[p_{1}^{k}E_{C}-p_{0}^{k}C^{-1}\\mathbf{1}_{C}+\\displaystyle\\sum_{i=0}^{k}\\binom{k}{i}(p_{1})^{k-i}(p_{0})^{i}C^{k-i-1}\\mathbf{1}_{C}\\right]N_{*,n}\\right]_{Y_{n}}}\\\\ &{=\\displaystyle\\left[\\sum_{k=0}^{\\infty}\\alpha^{k}\\left[p_{0}^{k}E_{C}-p_{0}^{k}C^{-1}\\mathbf{1}_{C}+(C p_{1}+p_{0})^{k}C^{-1}\\mathbf{1}_{C}\\right]N_{*,n}\\right]_{Y_{n}}}\\\\ &{=\\displaystyle\\left[(1-\\omega p_{0})^{-1}T_{E}N_{*,n}+\\left[(1-\\omega(C p_{1}+p_{0}))^{-1}-(1-\\omega p_{0})^{-1}\\right]C^{-1}\\mathbf{1}_{C}N_{*,n}\\right]_{Y_{n}}}\\end{array}\n$$", "text_format": "latex", "page_idx": 32}, {"type": "text", "text": "Then we have the feature distribution of node $u$ ", "page_idx": 32}, {"type": "equation", "text": "$$\nX_{u,m}\\sim N(\\hat{\\mu}_{u,m},\\hat{\\sigma}_{u,m}^{2})\n$$", "text_format": "latex", "page_idx": 32}, {"type": "text", "text": "where ", "page_idx": 32}, {"type": "equation", "text": "$$\n\\begin{array}{r l}&{\\hat{\\mu}_{Y_{u},m}=(1-\\omega p_{0})^{-1}\\mu_{Y_{u},m}+C^{-1}\\left[(1-\\omega(C p_{1}+p_{0}))^{-1}-(1-\\omega p_{0})^{-1}\\right]|\\mu_{:,m}|}\\\\ &{\\hat{\\sigma}_{Y_{u},m}^{2}=(1-\\omega^{2}p_{0}^{2})^{-1}\\sigma_{Y_{u},m}^{2}+C^{-1}\\left[(1-\\omega^{2}(C p_{1}^{2}+p_{0}^{2}))^{-1}-(1-\\omega^{2}p_{0}^{2})^{-1}\\right]|\\sigma_{:,m}^{2}|}\\end{array}\n$$", "text_format": "latex", "page_idx": 32}, {"type": "text", "text": "When two nodes $u$ and $v$ share same labels, $i.e.,Y_{u}=Y_{v}$ , we have ", "page_idx": 32}, {"type": "equation", "text": "$$\nX_{u,m}-X_{v,m}\\sim N(0,\\hat{\\sigma}_{Y_{u},m}^{2}+\\hat{\\sigma}_{Y_{v},m}^{2})\n$$", "text_format": "latex", "page_idx": 32}, {"type": "text", "text": "Then the expectation of intra-class distance of $\\mathbf{\\deltaX}$ can be expressed as ", "page_idx": 32}, {"type": "equation", "text": "$$\n\\begin{array}{r l}{\\mathbb{E}_{Y_{u}=Y_{v},\\epsilon}\\left[\\|\\boldsymbol{X}_{u}-\\boldsymbol{X}_{v}\\|^{2}\\right]=\\mathbb{E}_{Y_{u}=Y_{v},\\epsilon}\\left[\\displaystyle\\sum_{m=0}^{M}(X_{u,m}-X_{v,m})^{2}\\right]}&{}\\\\ {=\\displaystyle\\sum_{m=0}^{M}\\mathbb{E}_{Y_{u}=Y_{v},\\epsilon}\\left[(X_{u,m}-X_{v,m})^{2}\\right]}&{}\\\\ {=2C^{-1}(1-\\omega^{2}(C\\mathbb{E}_{\\epsilon}[p_{1}^{2}]+p_{0}^{2}))^{-1}\\left|\\sigma^{2}\\right|}\\end{array}\n$$", "text_format": "latex", "page_idx": 32}, {"type": "text", "text": "When two nodes $u$ and $v$ share different labels, $i.e.,Y_{u}\\neq Y_{v}$ , we have ", "page_idx": 33}, {"type": "equation", "text": "$$\nX_{u,m}-X_{v,m}\\sim N(\\hat{\\mu}_{Y_{u},m}-\\hat{\\mu}_{Y_{v},m},\\hat{\\sigma}_{Y_{u},m}^{2}+\\hat{\\sigma}_{Y_{v},m}^{2})\n$$", "text_format": "latex", "page_idx": 33}, {"type": "text", "text": "Then the expectation of inter-class distance of $\\mathbf{\\deltaX}$ can be expressed as ", "page_idx": 33}, {"type": "equation", "text": "$$\n\\begin{array}{r l l}{\\lefteqn{\\mathbb{E}_{Y_{u}\\not=Y_{v},\\epsilon}\\left[\\|X_{u}-X_{v}\\|^{2}\\right]=\\mathbb{E}_{Y_{u}\\not=Y_{v},\\epsilon}\\left[\\sum_{m=0}^{M}(X_{u,m}-X_{v,m})^{2}\\right]}\\qquad}&{}\\\\ &{=\\displaystyle\\sum_{m=0}^{M}\\mathbb{E}_{Y_{u}\\not=Y_{v},\\epsilon}\\left[(X_{u,m}-X_{v,m})^{2}\\right]}\\\\ &{=2C^{-1}(1-\\omega^{2}(C\\mathbb{E}_{\\epsilon}[p_{1}^{2}]+p_{0}^{2}))^{-1}\\left|\\sigma^{2}\\right|}\\\\ &{+\\left[C(C-1)\\right]^{-1}(1-\\omega p_{0})^{-2}\\displaystyle\\sum_{Y_{u}\\not=Y_{v}}\\left\\|\\mu_{Y_{u};}-\\mu_{Y_{v},\\cdot}\\right\\|^{2}}\\end{array}\n$$", "text_format": "latex", "page_idx": 33}, {"type": "text", "text": "Then, we come back to the objective by combining Eq. (54) and Eq. (56) ", "page_idx": 33}, {"type": "equation", "text": "$$\n\\begin{array}{r l}&{\\mathcal{T}^{-\\mathcal{Q}}=\\frac{\\mathbb{E}_{Y_{u}=Y_{v},\\epsilon}\\left[\\left\\Vert H_{u}-H_{v}\\right\\Vert^{2}\\right]}{\\mathbb{E}_{Y_{u}\\neq Y_{v},\\epsilon}\\left[\\left\\Vert H_{u}-H_{v}\\right\\Vert^{2}\\right]}}\\\\ &{\\quad=\\frac{\\mathbb{E}_{Y_{u}=Y_{v},\\epsilon}\\left[\\left\\Vert X_{u}-X_{v}\\right\\Vert^{2}\\right]}{\\mathbb{E}_{Y_{u}\\neq Y_{v},\\epsilon}\\left[\\left\\Vert X_{u}-X_{v}\\right\\Vert^{2}\\right]}}\\\\ &{\\quad=\\left(1+\\frac{\\sum_{Y_{u}\\neq Y_{v}}\\left[\\mathcal{C}(C-1)\\right]^{-1}\\left\\Vert\\mu_{Y_{u};}-\\mu_{Y_{u};}\\right\\Vert^{2}}{C^{-1}|\\sigma^{2}|}\\frac{\\left(1-\\omega^{2}(C\\mathbb{E}_{\\epsilon}\\left[p_{1}^{2}\\right]+p_{0}^{2})\\right)}{(1-\\omega p_{0})^{2}}\\right)^{-1}}\\end{array}\n$$", "text_format": "latex", "page_idx": 33}, {"type": "text", "text": "Then we take back $p_{0},p_{1}$ , and $\\omega$ with $h_{L},h_{S}$ , and $h_{F}$ ", "page_idx": 33}, {"type": "equation", "text": "$$\n\\begin{array}{c}{\\displaystyle p_{0}^{2}=\\left(\\frac{h_{L}C-1}{C-1}\\right)^{2}}\\\\ {\\displaystyle\\mathbb{E}_{\\epsilon}[p_{1}^{2}]=\\left(\\frac{1-h_{L}}{C-1}\\right)^{2}+\\frac{(1-h_{S})^{2}}{C-1}}\\\\ {\\displaystyle\\omega=\\frac{h_{F}}{\\rho(A)}}\\end{array}\n$$", "text_format": "latex", "page_idx": 33}, {"type": "text", "text": "So we have ", "page_idx": 33}, {"type": "equation", "text": "$$\n\\frac{(1-\\omega^{2}(C\\mathbb{E}_{\\epsilon}[p_{1}^{2}]+p_{0}^{2}))}{(1-\\omega p_{0})^{2}}=\\frac{\\left[1-(\\frac{h_{F}}{\\rho(A)})^{2}(C(\\frac{1-h_{L}}{C-1})^{2}+C\\frac{(1-h_{S})^{2}}{C-1}+(\\frac{h_{L}C-1}{C-1})^{2})\\right]}{\\left[1-(\\frac{h_{F}}{\\rho(A)})(\\frac{h_{L}C-1}{C-1})\\right]^{2}}\n$$", "text_format": "latex", "page_idx": 33}, {"type": "text", "text": "Then, we can rewrite the objective as ", "page_idx": 33}, {"type": "equation", "text": "$$\n\\mathcal{J}^{\\neg\\mathcal{G}}=(1+\\mathcal{J}_{N}\\mathcal{J}_{h}^{\\neg\\mathcal{G}})^{-1}\n$$", "text_format": "latex", "page_idx": 33}, {"type": "text", "text": "where ", "page_idx": 33}, {"type": "equation", "text": "$$\n\\begin{array}{r l}&{\\mathcal{I}_{N}=\\frac{\\sum_{Y_{u}\\neq Y_{v}}[2C(C-1)]^{-1}\\,\\|\\mu_{Y_{u};:}-\\mu_{Y_{u};:}\\|^{2}}{C^{-1}\\,|\\sigma^{2}|},}\\\\ &{\\mathcal{I}_{h}^{\\neg\\mathcal{G}}=\\frac{\\left[1-(\\frac{h_{F}}{\\rho(A)})^{2}(C(\\frac{1-h_{L}}{C-1})^{2}+C\\frac{(1-h_{S})^{2}}{C-1}+(\\frac{h_{L}C-1}{C-1})^{2})\\right]}{\\left[1-(\\frac{h_{F}}{\\rho(A)})(\\frac{h_{L}C-1}{C-1})\\right]^{2}}}\\end{array}\n$$", "text_format": "latex", "page_idx": 33}, {"type": "text", "text": "G.1.2 Graph-aware Models ", "text_level": 1, "page_idx": 34}, {"type": "text", "text": "For graph-aware models, we have $\\begin{array}{r}{H_{u}=\\frac{1}{D_{u}}\\sum_{v\\in\\mathcal{N}(u)}X_{v}}\\end{array}$ , where $\\mathbf{\\deltaX}$ is the structural-aware features as in Section G.1.1. For the representation $m$ in node $u$ , we have ", "page_idx": 34}, {"type": "equation", "text": "$$\n\\begin{array}{r l}{\\lefteqn{H_{u,m}\\sim\\left[\\frac{S}{I_{C}-\\omega S}{\\cal N}_{:,m}\\right]_{Y_{u}}}}\\\\ &{=\\omega^{-1}\\left[\\frac{\\omega S-I_{C}+I_{C}}{I_{C}-\\omega S}{\\cal N}_{:,m}\\right]_{Y_{u}}}\\\\ &{=\\omega^{-1}\\left[(I_{C}-\\omega S)^{-1}{\\cal N}_{:,m}-{\\cal N}_{:,m}\\right]_{Y_{u}}}\\end{array}\n$$", "text_format": "latex", "page_idx": 34}, {"type": "text", "text": "We take the result of $(I_{C}-\\omega\\pmb{S})^{-1}N_{:,m}$ as shown in Eq. (50). Then we have ", "page_idx": 34}, {"type": "equation", "text": "$$\n\\begin{array}{r}{\\pmb{\\mathbb{I}}_{u,m}\\sim\\left[((1-\\omega p_{0})^{-1}-1)\\omega^{-1}I_{C}N_{:,m}+\\left[(1-\\omega(C p_{1}+p_{0}))^{-1}-(1-\\omega p_{0})^{-1}\\right]C^{-1}\\omega^{-1}\\pmb{1}_{C}N_{:,m}\\right]_{Y_{*}}}\\end{array}\n$$", "text_format": "latex", "page_idx": 34}, {"type": "text", "text": "Then we have the distribution of the representation of node $u$ ", "page_idx": 34}, {"type": "equation", "text": "$$\nH_{u,m}\\sim N(\\hat{\\mu}_{u,m},\\hat{\\sigma}_{u,m}^{2})\n$$", "text_format": "latex", "page_idx": 34}, {"type": "text", "text": "where ", "text_level": 1, "page_idx": 34}, {"type": "equation", "text": "$$\n\\begin{array}{r l}&{i\\gamma_{u,m}=\\omega^{-1}(1-\\omega p_{0})^{-1}-1)\\mu_{Y_{u},m}+C^{-1}\\omega^{-1}\\left[(1-\\omega(C p_{1}+p_{0}))^{-1}-(1-\\omega p_{0})^{-1}\\right]|\\mu_{:,m}|}\\\\ &{\\dot{\\gamma}_{Y_{u},m}^{2}=\\omega^{-2}(1-\\omega^{2}p_{0}^{2})^{-1}-1)\\sigma_{Y_{u},m}^{2}+C^{-1}\\omega^{-2}\\left[(1-\\omega^{2}(C p_{1}^{2}+p_{0}^{2}))^{-1}-(1-\\omega^{2}p_{0}^{2})^{-1}\\right]\\left|\\sigma_{:,m}^{2}\\right|}\\end{array}\n$$", "text_format": "latex", "page_idx": 34}, {"type": "text", "text": "When two nodes $u$ and $v$ share same labels, $i.e.,Y_{u}=Y_{v}$ , we have ", "page_idx": 34}, {"type": "equation", "text": "$$\nH_{u,m}-H_{v,m}\\sim N(0,\\hat{\\sigma}_{Y_{u},m}^{2}+\\hat{\\sigma}_{Y_{v},m}^{2})\n$$", "text_format": "latex", "page_idx": 34}, {"type": "text", "text": "Then the expectation of intra-class distance of $\\pmb{H}$ can be expressed as ", "page_idx": 34}, {"type": "equation", "text": "$$\n\\begin{array}{r l}&{\\mathbb{E}_{Y_{u}=Y_{v},\\epsilon}\\left[\\|\\pmb{H}_{u}-\\pmb{H}_{v}\\|^{2}\\right]=\\mathbb{E}_{Y_{u}=Y_{v},\\epsilon}\\left[\\sum_{m=0}^{M}\\|\\pmb{H}_{u,m}-\\pmb{H}_{v,m}\\|^{2}\\right]}\\\\ &{~~~~~~~~~~~~~~~~~~~~~~~~~~~~=2\\omega^{-2}C^{-1}[(1-\\omega^{2}(C\\mathbb{E}[p_{1}^{2}]+p_{0}^{2}))^{-1}-1]\\left|\\sigma_{:m}^{2}\\right|}\\end{array}\n$$", "text_format": "latex", "page_idx": 34}, {"type": "text", "text": "When two nodes $u$ and $v$ share different labels, $i.e.,Y_{u}\\neq Y_{v}$ , we have ", "page_idx": 34}, {"type": "equation", "text": "$$\nH_{u,m}-H_{v,m}\\sim N(\\hat{\\mu}_{Y_{u},m}-\\hat{\\mu}_{Y_{v},m},\\hat{\\sigma}_{Y_{u},m}^{2}+\\hat{\\sigma}_{Y_{v},m}^{2})\n$$", "text_format": "latex", "page_idx": 34}, {"type": "text", "text": "Then the expectation of inter-class distance of $\\pmb{H}$ can be expressed as ", "page_idx": 34}, {"type": "equation", "text": "$$\n\\begin{array}{r l}&{\\mathbb{E}_{Y_{u}\\neq Y_{v},\\epsilon}\\left[\\|H_{u}-H_{v}\\|^{2}\\right]=\\mathbb{E}_{Y_{u}\\neq Y_{v},\\epsilon}\\left[\\displaystyle\\sum_{m=0}^{M}\\|H_{u,m}-H_{v,m}\\|^{2}\\right]}\\\\ &{\\qquad\\qquad\\qquad\\qquad=2\\omega^{-2}C^{-1}[(1-\\omega^{2}(C\\mathbb{E}[p_{1}^{2}]+p_{0}^{2}))^{-1}-1]\\left|\\sigma_{:,m}^{2}\\right|}\\\\ &{\\qquad\\qquad\\qquad\\qquad+\\omega^{-2}[C(C-1)]^{-1}[(1-\\omega p_{0})^{-1}-1]^{2}\\displaystyle\\sum_{Y_{u}\\neq Y_{v}}\\|\\mu_{Y_{u};}-\\mu_{Y_{v};}\\|^{2}}\\end{array}\n$$", "text_format": "latex", "page_idx": 34}, {"type": "text", "text": "Then, we come back to the objective ", "page_idx": 34}, {"type": "equation", "text": "$$\n\\begin{array}{r l}&{\\mathcal{I}=\\frac{\\mathbb{E}_{Y_{u}=Y_{v},\\epsilon}\\left[\\left\\|H_{u}-H_{v}\\right\\|^{2}\\right]}{\\mathbb{E}_{Y_{u}\\neq Y_{v},\\epsilon}\\left[\\left\\|H_{u}-H_{v}\\right\\|^{2}\\right]}}\\\\ &{\\quad=\\left(1+\\frac{\\sum_{Y_{u}\\neq Y_{v}}[2C(C-1)]^{-1}\\left\\|\\mu_{Y_{u},:}-\\mu_{Y_{u},:}\\right\\|^{2}}{C^{-1}\\left|\\sigma^{2}\\right|}\\frac{\\left[\\left(1-\\omega p_{0}\\right)^{-1}-1\\right]^{2}}{[\\left(1-\\omega^{2}(C\\mathbb{E}[p_{1}^{2}]+p_{0}^{2})\\right)^{-1}-1]}\\right)^{-1}}\\end{array}\n$$", "text_format": "latex", "page_idx": 34}, {"type": "text", "text": "Let\u2019s consider the term ", "page_idx": 35}, {"type": "equation", "text": "$$\n\\frac{[(1-\\omega p_{0})^{-1}-1]^{2}}{[(1-\\omega^{2}(C\\mathbb{E}[p_{1}^{2}]+p_{0}^{2}))^{-1}-1]}=\\frac{p_{0}^{2}}{(C\\mathbb{E}[p_{1}^{2}]+p_{0}^{2})}\\frac{(1-\\omega^{2}(C\\mathbb{E}[p_{1}^{2}]+p_{0}^{2}))}{(1-\\omega p_{0})^{2}}\n$$", "text_format": "latex", "page_idx": 35}, {"type": "text", "text": "We notice the second term $\\begin{array}{r}{\\frac{(1-\\omega^{2}(C\\mathbb{E}[p_{1}^{2}]+p_{0}^{2}))}{(1-\\omega p_{0})^{2}}=\\mathcal{J}_{h}^{-\\mathcal{G}}}\\end{array}$ , thereby we simplify the expression as ", "page_idx": 35}, {"type": "equation", "text": "$$\n\\frac{[(1-\\omega p_{0})^{-1}-1]^{2}}{[(1-\\omega^{2}(C\\mathbb{E}[p_{1}^{2}]+p_{0}^{2}))^{-1}-1]}=\\frac{p_{0}^{2}}{(C\\mathbb{E}[p_{1}^{2}]+p_{0}^{2})}\\mathcal{J}_{h}^{-\\mathcal{G}}\n$$", "text_format": "latex", "page_idx": 35}, {"type": "text", "text": "Then we take back $p_{0},p_{1}$ , and $\\omega$ with $h_{L},h_{S}$ , and $h_{F}$ as in Eq. (58) ", "page_idx": 35}, {"type": "equation", "text": "$$\n\\frac{[(1-\\omega p_{0})^{-1}-1]^{2}}{[(1-\\omega^{2}(C\\mathbb{E}[p_{1}^{2}]+p_{0}^{2}))^{-1}-1]}=\\frac{(\\frac{h_{L}C-1}{C-1})^{2}}{(C(\\frac{1-h_{L}}{C-1})^{2}+C\\frac{(1-h_{S})^{2}}{C-1}+(\\frac{h_{L}C-1}{C-1})^{2})}\\mathcal{I}_{h}^{-g}\n$$", "text_format": "latex", "page_idx": 35}, {"type": "text", "text": "Then, we can rewrite the objective as ", "page_idx": 35}, {"type": "equation", "text": "$$\n\\mathcal{J}^{\\mathcal{G}}=(1+\\mathcal{J}_{N}\\mathcal{J}_{h}^{\\mathcal{G}})^{-1}\n$$", "text_format": "latex", "page_idx": 35}, {"type": "text", "text": "where ", "page_idx": 35}, {"type": "equation", "text": "$$\n\\begin{array}{r l}&{\\mathcal{I}_{N}=\\frac{\\sum_{Y_{u}\\neq Y_{v}}[2C(C-1)]^{-1}\\,\\|\\pmb{\\mu}_{Y_{u},:}-\\pmb{\\mu}_{Y_{u},:}\\|^{2}}{C^{-1}\\,\\vert\\pmb{\\sigma}^{2}\\vert},}\\\\ &{\\mathcal{I}_{h}^{\\mathcal{G}}=\\frac{(\\frac{h_{L}C-1}{C-1})^{2}}{(C(\\frac{1-h_{L}}{C-1})^{2}+C\\frac{(1-h_{S})^{2}}{C-1}+(\\frac{h_{L}C-1}{C-1})^{2})}\\mathcal{I}_{h}^{\\neg\\mathcal{G}}}\\end{array}\n$$", "text_format": "latex", "page_idx": 35}, {"type": "text", "text": "G.2 Proof of Theorem 3.1 ", "text_level": 1, "page_idx": 35}, {"type": "text", "text": "Theorem 3.1. The partial derivative of $\\mathcal{I}_{h}^{\\neg\\mathcal{G}}$ with respect to label homophily $h_{L}$ satisfies, ", "page_idx": 35}, {"type": "equation", "text": "$$\n\\frac{\\partial\\mathcal{T}_{h}^{\\neg\\mathcal{G}}}{\\partial h_{L}}\\left\\{\\Sigma\\circ0,\\ \\mathrm{~if~}h_{F}\\in(-1,0)\\right.\n$$", "text_format": "latex", "page_idx": 35}, {"type": "text", "text": "Proof. For the graph-agnostic models, we take the partial derivative of $\\mathcal{I}_{h}^{\\neg\\mathcal{G}}$ with respect to $h_{L}$ ", "page_idx": 35}, {"type": "equation", "text": "$$\n\\frac{\\partial\\mathcal{I}_{h}^{-\\varsigma}}{\\partial h_{L}}=\\frac{-h_{F}^{2}\\Big(2C(1-h_{L})(-1)+2C(h_{L}C-1)\\Big)\\mathcal{T}_{h,\\mathrm{DOWN}}^{2}-(-h_{F}C)2\\mathcal{T}_{h,\\mathrm{DOWN}}\\mathcal{T}_{h,\\mathrm{UPN}}}{\\mathcal{T}_{h,\\mathrm{DOWN}}^{4}}\n$$", "text_format": "latex", "page_idx": 35}, {"type": "text", "text": "Take the approximations of $\\mathcal{T}_{h,\\mathrm{UP}}$ and $\\mathcal{T}_{h,\\mathrm{DOWN}}$ are given in Eq. (87) back to \u2202JhhL , we have ", "page_idx": 35}, {"type": "equation", "text": "$$\n\\begin{array}{r l}&{\\frac{\\partial\\mathcal{I}_{h}^{-\\mathcal{G}}}{\\partial h_{L}}\\approx\\frac{-2C h_{F}^{2}[(1-h_{L})(-1)+(h_{L}C-1)]+2C h_{F}[\\rho(A)(C-1)]}{[\\rho(A)(C-1)]^{2}}}\\\\ &{\\qquad\\approx\\frac{2C}{[\\rho(A)(C-1)]}h_{F}}\\end{array}\n$$", "text_format": "latex", "page_idx": 35}, {"type": "text", "text": "It is easy to see [\u03c1(A)2(CC\u22121)] > 0, so the sign of $\\frac{\\partial{\\mathcal{I}}_{h}^{-\\mathcal{G}}}{\\partial h_{L}}$ is solely depend on $h_{F}$ . Therefore, we have ", "page_idx": 35}, {"type": "equation", "text": "$$\n\\frac{\\partial\\mathcal{T}_{h}^{\\neg\\mathcal{G}}}{\\partial h_{L}}\\left\\{\\Sigma\\circ0,\\ \\mathrm{~if~}h_{F}\\in(-1,0)\\right.\n$$", "text_format": "latex", "page_idx": 35}, {"type": "text", "text": "G.3 Proof of Theorem 3.2 ", "text_level": 1, "page_idx": 36}, {"type": "text", "text": "Theorem 3.2. The partial derivative of $\\mathcal{I}_{h}^{\\neg\\mathcal{G}}$ with respect to structural homophily $h_{S}$ satisfies, ", "page_idx": 36}, {"type": "equation", "text": "$$\n\\frac{\\partial\\mathcal{J}_{h}^{\\rightarrow\\mathcal{G}}}{\\partial h_{S}}\\geq0\n$$", "text_format": "latex", "page_idx": 36}, {"type": "text", "text": "Proof. We take the partial derivative of $\\mathcal{I}_{h}^{\\neg\\mathcal{G}}$ with respect to $h_{S}$ ", "page_idx": 36}, {"type": "equation", "text": "$$\n\\frac{\\partial\\mathcal{T}_{h}^{\\rightarrow\\mathcal{G}}}{\\partial h_{S}}=\\frac{\\frac{2C}{\\rho^{2}(A)(C-1)}}{\\left[1-(\\frac{h_{F}}{\\rho(A)})(\\frac{h_{L}C-1}{C-1})\\right]^{2}}h_{F}^{2}(1-h_{S})\n$$", "text_format": "latex", "page_idx": 36}, {"type": "text", "text": "From Eq. (46), we have ", "page_idx": 36}, {"type": "equation", "text": "$$\n\\begin{array}{r}{\\frac{2C}{\\rho^{2}(A)(C-1)}\\qquad\\qquad\\qquad\\qquad\\qquad\\quad}\\\\ {\\left[1-(\\frac{h_{F}}{\\rho(A)})\\big(\\frac{h_{L}C-1}{C-1}\\big)\\right]^{2}}\\end{array}\n$$", "text_format": "latex", "page_idx": 36}, {"type": "text", "text": "Therefore, we can approximate $\\frac{\\partial{\\mathcal{J}}_{h}^{-\\mathcal{G}}}{\\partial h_{S}}$ that satisfies ", "page_idx": 36}, {"type": "equation", "text": "$$\n\\frac{\\partial\\mathcal{J}_{h}^{\\rightarrow\\mathcal{G}}}{\\partial h_{S}}\\geq0\n$$", "text_format": "latex", "page_idx": 36}, {"type": "text", "text": "G.4 Proof of Theorem 3.3 ", "text_level": 1, "page_idx": 36}, {"type": "text", "text": "Theorem 3.3. The partial derivative of $\\mathcal{I}_{h}^{\\neg\\mathcal{G}}$ with respect to feature homophily $h_{F}$ satisfies, ", "page_idx": 36}, {"type": "equation", "text": "$$\n\\frac{\\partial\\mathcal{T}_{h}^{\\rightarrow\\mathcal{G}}}{\\partial h_{F}}\\left\\{\\begin{array}{l l}{<0,}&{\\mathrm{if~}h_{L}\\in(0,h_{L}^{-});h_{L}\\in(h_{L}^{-},h_{L}^{+})}\\\\ {>0,}&{\\mathrm{if~}h_{L}\\in(h_{L}^{+},1];h_{L}\\in(h_{L}^{-},h_{L}^{+})}\\\\ {=0,}&{\\mathrm{if~}h_{L}\\in(h_{L}^{-},h_{L}^{+})\\mathrm{~and~}h_{F}=\\hat{h}_{F}}\\end{array}\\right.\n$$", "text_format": "latex", "page_idx": 36}, {"type": "text", "text": "where $0<h_{L}^{-}<h_{L}^{+}<1$ and $-1<\\hat{h}_{F}<1$ . ", "page_idx": 36}, {"type": "text", "text": "Proof. We take the partial derivative of $\\mathcal{I}_{h}^{\\neg\\mathcal{G}}$ with respect to $h_{F}$ ", "page_idx": 36}, {"type": "equation", "text": "$$\n\\begin{array}{r}{\\frac{\\partial\\mathcal{I}_{h}^{\\rightarrow\\sigma}}{\\partial h_{F}}=\\frac{-2h_{F}\\Big(C(1-h_{L})^{2}+C(C-1)(1-h_{S})^{2}+(h_{L}C-1)^{2}\\Big)\\mathcal{T}_{h,\\mathrm{DOWN}}^{2}+2(h_{L}C-1)\\mathcal{T}_{h,\\mathrm{DOWN}}\\mathcal{T}_{h,\\mathrm{UP}}}{\\mathcal{T}_{h,\\mathrm{DOWN}}^{4}}}\\end{array}\n$$", "text_format": "latex", "page_idx": 36}, {"type": "text", "text": "where ", "page_idx": 36}, {"type": "equation", "text": "$$\n\\begin{array}{r l}&{\\quad\\mathcal{T}_{h,\\mathrm{UP}}=\\Bigl[\\rho(A)^{2}(C-1)^{2}-h_{F}^{2}\\Bigl(C(1-h_{L})^{2}+C(C-1)(1-h_{S})^{2}+(h_{L}C-1)^{2}\\Bigr)\\Bigr]}\\\\ &{\\mathcal{T}_{h,\\mathrm{DOWN}}=\\Bigl[\\rho(A)(C-1)-h_{F}(h_{L}C-1)\\Bigr]}\\end{array}\n$$", "text_format": "latex", "page_idx": 36}, {"type": "text", "text": "Next, we approximate $\\mathcal{T}_{h,\\mathrm{UP}}$ and $\\tau_{h,\\mathrm{DOWN}}$ with Eq. (46) ", "page_idx": 36}, {"type": "equation", "text": "$$\n\\begin{array}{r}{\\begin{array}{r}{T_{h,\\mathrm{UP}}\\approx[\\rho(\\mathbf{A})(C-1)]^{2}}\\\\ {T_{h,\\mathrm{DOWN}}\\approx\\rho(\\mathbf{A})(C-1)}\\end{array}}\\end{array}\n$$", "text_format": "latex", "page_idx": 36}, {"type": "text", "text": "Then take back to Eq. (86) ", "page_idx": 36}, {"type": "equation", "text": "$$\n\\begin{array}{r l}&{\\frac{\\partial\\mathcal{J}_{h}^{-\\mathcal{G}}}{\\partial h_{F}}\\approx\\frac{-2h_{F}\\left(C(\\frac{1-h_{L}}{C-1})^{2}+\\frac{C}{C-1}(1-h_{S})^{2}+(\\frac{h_{L}C-1}{C-1})^{2}\\right)+2\\frac{h_{L}C-1}{C-1}\\rho(A)}{\\rho^{2}(A)}}\\\\ &{\\qquad\\qquad\\approx\\frac{2(\\hat{h}_{F}-h_{F})}{\\left(C(\\frac{1-h_{L}}{C-1})^{2}+\\frac{C}{C-1}(1-h_{S})^{2}+(\\frac{h_{L}C-1}{C-1})^{2}\\right)^{-1}\\rho^{2}(A)}}\\end{array}\n$$", "text_format": "latex", "page_idx": 36}, {"type": "text", "text": "where ", "page_idx": 37}, {"type": "equation", "text": "$$\n\\hat{h}_{F}=\\frac{\\frac{h_{L}C-1}{C-1}\\rho(\\pmb{A})}{C(\\frac{1-h_{L}}{C-1})^{2}+\\frac{C}{C-1}(1-h_{S})^{2}+(\\frac{h_{L}C-1}{C-1})^{2}}\n$$", "text_format": "latex", "page_idx": 37}, {"type": "text", "text": "As a result, the sign of $\\frac{\\partial{\\mathcal{J}}_{h}^{-\\mathcal{G}}}{\\partial h_{F}}$ satisfies the following conditions: ", "page_idx": 37}, {"type": "equation", "text": "$$\n\\frac{\\partial\\mathcal{J}_{h}^{-\\mathcal{G}}}{\\partial h_{F}}\\left\\{\\rule{0.3cm}{0cm}\\right.\\left\\{\\begin{array}{l l}{>0,}&{\\mathrm{if}\\;h_{F}<\\hat{h}_{F}}\\\\ {<0,}&{\\mathrm{if}\\;h_{F}>\\hat{h}_{F}}\\end{array}\\right.}\\\\ {=0,}&{\\mathrm{if}\\;h_{F}=\\hat{h}_{F}}\\end{array}\n$$", "text_format": "latex", "page_idx": 37}, {"type": "text", "text": "Then we discuss the influence of $h_{L}$ to $\\frac{\\partial\\mathcal{J}_{h}^{-\\mathcal{G}}}{\\partial h_{F}}$ . If $\\hat{h}_{F}\\geq1$ , then $\\frac{\\partial\\mathcal{I}_{h}^{\\rightarrow\\mathcal{G}}}{\\partial h_{F}}>0$ holds $\\forall h_{F}\\in(-1,1)$ . In this case, we have ", "page_idx": 37}, {"type": "equation", "text": "$$\n-\\Big(C(\\frac{1-h_{L}}{C-1})^{2}+\\frac{C}{C-1}(1-h_{S})^{2}+(\\frac{h_{L}C-1}{C-1})^{2}\\Big)+\\frac{h_{L}C-1}{C-1}\\rho(\\pmb{A})>0\n$$", "text_format": "latex", "page_idx": 37}, {"type": "text", "text": "The solution of this condition for $h_{L}\\in[0,1]$ is $h_{L}>h_{L}^{+}$ , where ", "page_idx": 37}, {"type": "equation", "text": "$$\n\\begin{array}{r}{\\iota_{L}^{+}=\\frac{4C+C(C-1)\\rho(A)-\\sqrt{[4C+C(C-1)\\rho(A)]^{2}-4C(C+1)[C+1+(C-1)\\rho(A)+C(C-1)(1-h_{S})^{2}]}}{2C(C+1)}}\\end{array}\n$$", "text_format": "latex", "page_idx": 37}, {"type": "text", "text": "Conversely, If $\\hat{h}_{F}\\leq-1$ , then $\\begin{array}{r}{\\frac{\\partial\\mathcal{I}_{h}^{\\rightarrow\\mathcal{G}}}{\\partial h_{F}}<0}\\end{array}$ holds $\\forall h_{F}\\in(-1,1)$ . In this case, we have ", "page_idx": 37}, {"type": "equation", "text": "$$\n\\Big(C(\\frac{1-h_{L}}{C-1})^{2}+\\frac{C}{C-1}(1-h_{S})^{2}+(\\frac{h_{L}C-1}{C-1})^{2}\\Big)+\\frac{h_{L}C-1}{C-1}\\rho({\\bf A})>0\n$$", "text_format": "latex", "page_idx": 37}, {"type": "text", "text": "The solution of this condition for $h_{L}\\in[0,1]$ is $h_{L}<h_{L}^{-}$ , where ", "page_idx": 37}, {"type": "equation", "text": "$$\n\\begin{array}{r}{\\iota_{L}^{-}=\\frac{4C-C(C-1)\\rho(A)+\\sqrt{[4C-C(C-1)\\rho(A)]^{2}-4C(C+1)[C+1-(C-1)\\rho(A)+C(C-1)(1-h_{S})^{2}]}}{2C(C+1)}}\\end{array}\n$$", "text_format": "latex", "page_idx": 37}, {"type": "text", "text": "It is easy to show that $0<h_{L}^{-}<h_{L}^{+}<1$ . So far, we already know that $\\frac{\\partial\\mathcal{I}_{h}^{\\rightarrow\\mathcal{G}}}{\\partial h_{F}}>0$ when $h_{L}>h_{L}^{+}$ and $\\frac{\\partial\\mathcal{I}_{h}^{\\rightarrow\\mathcal{G}}}{\\partial h_{F}}<0$ when $h_{L}<h_{L}^{-}$ for all $h_{F}\\in\\left(-1,1\\right)$ . Then, for $h_{L}^{-}<h_{L}<h_{L}^{+}$ , the sign of $\\frac{\\partial\\mathcal{J}_{h}^{-\\varsigma}}{\\partial h_{F}}$ is dependent on $h_{F}$ as shown in Eq. (88). In conclusion, we have ", "page_idx": 37}, {"type": "equation", "text": "$$\n\\frac{\\partial\\mathcal{T}_{h}^{\\mathcal{C}}}{\\partial h_{F}}\\left\\{\\begin{array}{l l}{<0,}&{\\mathrm{if}\\;h_{L}\\in(0,h_{L}^{-});h_{L}\\in(h_{L}^{-},h_{L}^{+})\\;\\mathrm{and}\\;h_{F}\\in(\\hat{h}_{F},1)}\\\\ {>0,}&{\\mathrm{if}\\;h_{L}\\in(h_{L}^{+},1];h_{L}\\in(h_{L}^{-},h_{L}^{+})\\;\\mathrm{and}\\;h_{F}\\in(-1,\\hat{h}_{F})}\\\\ {=0,}&{\\mathrm{if}\\;h_{L}\\in(h_{L}^{-},h_{L}^{+})\\;\\mathrm{and}\\;h_{F}=\\hat{h}_{F}}\\end{array}\\right.\n$$", "text_format": "latex", "page_idx": 37}, {"type": "text", "text": "G.5 Proof of Theorem 2.1 ", "text_level": 1, "page_idx": 37}, {"type": "text", "text": "Theorem 2.1. The partial derivative of $\\mathcal{I}_{h}^{\\mathcal{G}}$ with respect to label homophily $h_{L}$ satisfies, ", "page_idx": 37}, {"type": "equation", "text": "$$\n\\frac{\\partial\\mathcal{J}_{h}^{\\mathcal{G}}}{\\partial h_{L}}\\left\\{\\stackrel{<}{\\geq}0,\\begin{array}{l l}{\\mathrm{if}~h_{L}\\in[0,\\frac{1}{C})}\\\\ {\\mathrm{if}~h_{L}\\in[\\frac{1}{C},1]}\\end{array}\\right.\n$$", "text_format": "latex", "page_idx": 37}, {"type": "text", "text": "Proof. For the graph-aware models, we approximate the $\\mathcal{I}_{h}^{\\mathcal{G}}$ with Eq. (46) ", "page_idx": 37}, {"type": "equation", "text": "$$\n\\begin{array}{r l}&{\\mathcal{I}_{h}^{\\mathcal{G}}=\\frac{(\\frac{h_{L}C-1}{C-1})^{2}\\left[1-(\\frac{h_{F}}{\\rho(A)})^{2}(C(\\frac{1-h_{L}}{C-1})^{2}+C\\frac{(1-h_{S})^{2}}{C-1}+(\\frac{h_{L}C-1}{C-1})^{2})\\right]}{(C(\\frac{1-h_{L}}{C-1})^{2}+C\\frac{(1-h_{S})^{2}}{C-1}+(\\frac{h_{L}C-1}{C-1})^{2})\\left[1-(\\frac{h_{F}}{\\rho(A)})(\\frac{h_{L}C-1}{C-1})\\right]^{2}}}\\\\ &{\\quad\\approx\\frac{\\left(\\frac{h_{L}C-1}{C-1}\\right)^{2}}{(C(\\frac{1-h_{L}}{C-1})^{2}+C\\frac{(1-h_{S})^{2}}{C-1}+(\\frac{h_{L}C-1}{C-1})^{2})}}\\end{array}\n$$", "text_format": "latex", "page_idx": 37}, {"type": "text", "text": "Then we take the partial derivative with respect to $h_{L}$ ", "page_idx": 38}, {"type": "equation", "text": "$$\n\\begin{array}{c}{{\\displaystyle\\frac{\\partial\\mathcal{T}_{h}^{\\mathcal{G}}}{\\partial h_{L}}=(h_{L}C-1)\\Big[\\frac{2C^{2}(C-1)(C+1)h_{L}^{2}}{(C-1)^{4}}+\\frac{8C^{2}(C-1)+2C(3C+1)}{(C-1)^{4}}h_{L}}}\\\\ {{+\\;\\frac{2C(C+1)(C-1)-4C+2C^{2}(C-1)^{2}(1-h_{S})^{2}}{(C-1)^{4}}\\Big]}}\\end{array}\n$$", "text_format": "latex", "page_idx": 38}, {"type": "text", "text": "We can see that the first term monotonically increases with respect to $h_{L}$ and the second term is always positive for $h_{L}\\in[0,1]$ . So we have ", "page_idx": 38}, {"type": "equation", "text": "$$\n\\frac{\\partial\\mathcal{J}_{h}^{\\mathcal{G}}}{\\partial h_{L}}\\left\\{\\overset{<}{\\geq}0,\\ \\ \\mathrm{if}\\ h_{L}\\in[0,\\frac{1}{C})\\right.\n$$", "text_format": "latex", "page_idx": 38}, {"type": "text", "text": "G.6 Proof of Theorem 2.2 ", "text_level": 1, "page_idx": 38}, {"type": "text", "text": "Theorem 2.2. The partial derivative of $\\mathcal{I}_{h}^{\\mathcal{G}}$ with respect to structural homophily $h_{S}$ satisfies, ", "page_idx": 38}, {"type": "equation", "text": "$$\n\\frac{\\partial\\mathcal{J}_{h}^{\\mathcal{G}}}{\\partial h_{S}}\\geq0\n$$", "text_format": "latex", "page_idx": 38}, {"type": "text", "text": "Proof. We take the partial derivative of $\\mathcal{I}_{h}^{\\mathcal{G}}$ with respect to $h_{F}$ ", "page_idx": 38}, {"type": "equation", "text": "$$\n\\begin{array}{r}{\\frac{\\partial\\mathcal{J}_{h}^{\\mathcal{G}}}{\\partial h_{S}}=\\frac{\\left(\\frac{h_{L}C-1}{C-1}\\right)^{2}\\frac{2C}{C-1}(1-h_{S})}{(C(\\frac{1-h_{L}}{C-1})^{2}+C\\frac{(1-h_{S})^{2}}{C-1}+(\\frac{h_{L}C-1}{C-1})^{2})^{2}}\\mathcal{J}_{h}^{-\\mathcal{G}}}\\\\ {+\\,\\frac{(\\frac{h_{L}C-1}{C-1})^{2}}{(C(\\frac{1-h_{L}}{C-1})^{2}+C\\frac{(1-h_{S})^{2}}{C-1}+(\\frac{h_{L}C-1}{C-1})^{2})}\\frac{\\partial\\mathcal{J}_{h}^{-\\mathcal{G}}}{\\partial h_{S}}}\\end{array}\n$$", "text_format": "latex", "page_idx": 38}, {"type": "text", "text": "From Eq. (46), we have ", "page_idx": 38}, {"type": "equation", "text": "$$\n\\frac{\\left(\\frac{h_{L}C-1}{C-1}\\right)^{2}\\frac{2C}{C-1}(1-h_{S})}{(C(\\frac{1-h_{L}}{C-1})^{2}+C\\frac{(1-h_{S})^{2}}{C-1}+(\\frac{h_{L}C-1}{C-1})^{2})^{2}}\\ge0\\mathrm{~and~}\\frac{(\\frac{h_{L}C-1}{C-1})^{2}}{(C(\\frac{1-h_{L}}{C-1})^{2}+C\\frac{(1-h_{S})^{2}}{C-1}+(\\frac{h_{L}C-1}{C-1})^{2})}\\ge0.\n$$", "text_format": "latex", "page_idx": 38}, {"type": "text", "text": "Together with $\\mathcal{I}_{h}^{\\neg\\mathcal{G}}>0$ and $\\begin{array}{r}{\\frac{\\partial\\mathcal{I}_{h}^{\\rightarrow\\mathcal{G}}}{\\partial h_{S}}\\geq0}\\end{array}$ , we can approximate $\\frac{\\partial\\mathcal{J}_{h}^{\\mathcal{G}}}{\\partial h_{S}}$ as ", "page_idx": 38}, {"type": "equation", "text": "$$\n\\frac{\\partial\\mathcal{J}_{h}^{\\mathcal{G}}}{\\partial h_{S}}\\geq0\n$$", "text_format": "latex", "page_idx": 38}, {"type": "text", "text": "G.7 Proof of Theorem 2.3 ", "text_level": 1, "page_idx": 38}, {"type": "text", "text": "Theorem 2.3. The partial derivative of $\\mathcal{I}_{h}^{\\mathcal{G}}$ with respect to feature homophily $h_{F}$ satisfies, ", "page_idx": 38}, {"type": "equation", "text": "$$\n\\left\\{\\begin{array}{l l l l}{\\frac{\\partial\\mathcal{I}_{h}^{g}}{\\partial h_{F}}<0,}&{\\mathrm{if}\\:h_{L}\\in(0,h_{L}^{-});h_{L}\\in(h_{L}^{-},h_{L}^{+})\\mathrm{~and~}h_{F}\\in(\\hat{h}_{F},1)}\\\\ {\\frac{\\partial\\mathcal{I}_{h}^{g}}{\\partial h_{F}}>0,}&{\\mathrm{if}\\:h_{L}\\in(h_{L}^{+},1];h_{L}\\in(h_{L}^{-},h_{L}^{+})\\mathrm{~and~}h_{F}\\in(-1,\\hat{h}_{F})}\\\\ {\\frac{\\partial\\mathcal{I}_{h}^{g}}{\\partial h_{F}}=0,}&{\\mathrm{if}\\:h_{L}=\\frac{1}{C};h_{L}\\in(h_{L}^{-},h_{L}^{+})\\mathrm{~and~}h_{F}=\\hat{h}_{F}}\\end{array}\\right.\n$$", "text_format": "latex", "page_idx": 38}, {"type": "text", "text": "where $0<h_{L}^{-}<h_{L}^{+}<1$ and $-1<\\hat{h}_{F}<1$ . The expressions and detailed calculation of $h_{L}^{-},h_{L}^{+}$ , and $\\hat{h}_{F}$ are shown in Appendix G.4. ", "page_idx": 38}, {"type": "text", "text": "Proof. For the graph-aware models, we take the partial derivative of $\\mathcal{I}_{h}^{\\mathcal{G}}$ with respect to $h_{F}$ ", "page_idx": 38}, {"type": "equation", "text": "$$\n\\frac{\\partial\\mathcal{I}_{h}^{\\mathcal{G}}}{\\partial h_{F}}=\\frac{(\\frac{h_{L}C-1}{C-1})^{2}}{(C(\\frac{1-h_{L}}{C-1})^{2}+C\\frac{(1-h_{S})^{2}}{C-1}+(\\frac{h_{L}C-1}{C-1})^{2})}\\frac{\\partial\\mathcal{I}_{h}^{\\neg\\mathcal{G}}}{\\partial h_{F}}\n$$", "text_format": "latex", "page_idx": 38}, {"type": "text", "text": "Since the term $\\begin{array}{r}{\\frac{(\\frac{h_{L}C-1}{C-1})^{2}}{(C(\\frac{1-h_{L}}{C-1})^{2}+C\\frac{(1-h_{S})^{2}}{C-1}+(\\frac{h_{L}C-1}{C-1})^{2})}\\geq0}\\end{array}$ , the sign of $\\frac{\\partial\\mathcal{J}_{h}^{\\mathcal{G}}}{\\partial h_{F}}$ is the determined by $\\frac{\\partial{\\mathcal{I}}_{h}^{-\\mathcal{G}}}{\\partial h_{F}}$ except for $\\begin{array}{r}{h_{L}=\\frac{1}{C}}\\end{array}$ , which leads to the similar results as graph-aware models ", "page_idx": 39}, {"type": "equation", "text": "$$\n\\left\\{\\begin{array}{l l l l}{\\frac{\\partial\\mathcal{I}_{h}^{g}}{\\partial h_{F}}<0,}&{\\mathrm{if}\\:h_{L}\\in(0,h_{L}^{-});h_{L}\\in(h_{L}^{-},h_{L}^{+})\\mathrm{~and~}h_{F}\\in(\\hat{h}_{F},1)}\\\\ {\\frac{\\partial\\mathcal{I}_{h}^{g}}{\\partial h_{F}}>0,}&{\\mathrm{if}\\:h_{L}\\in(h_{L}^{+},1];h_{L}\\in(h_{L}^{-},h_{L}^{+})\\mathrm{~and~}h_{F}\\in(-1,\\hat{h}_{F})}\\\\ {\\frac{\\partial\\mathcal{I}_{h}^{g}}{\\partial h_{F}}=0,}&{\\mathrm{if}\\:h_{L}=\\frac{1}{C};h_{L}\\in(h_{L}^{-},h_{L}^{+})\\mathrm{~and~}h_{F}=\\hat{h}_{F}}\\end{array}\\right.\n$$", "text_format": "latex", "page_idx": 39}, {"type": "text", "text": "NeurIPS Paper Checklist ", "text_level": 1, "page_idx": 40}, {"type": "text", "text": "1. Claims ", "text_level": 1, "page_idx": 40}, {"type": "text", "text": "Question: Do the main claims made in the abstract and introduction accurately reflect the paper\u2019s contributions and scope? ", "page_idx": 40}, {"type": "text", "text": "Answer: [Yes] ", "page_idx": 40}, {"type": "text", "text": "Justification: We accurately answered the claims and contributions in the abstract and introduction, including why we shouldn\u2019t discard label homophily and the superiority of disentangled homophily. ", "page_idx": 40}, {"type": "text", "text": "Guidelines: ", "page_idx": 40}, {"type": "text", "text": "\u2022 The answer NA means that the abstract and introduction do not include the claims made in the paper.   \n\u2022 The abstract and/or introduction should clearly state the claims made, including the contributions made in the paper and important assumptions and limitations. A No or NA answer to this question will not be perceived well by the reviewers.   \n\u2022 The claims made should match theoretical and experimental results, and reflect how much the results can be expected to generalize to other settings.   \n\u2022 It is fine to include aspirational goals as motivation as long as it is clear that these goals are not attained by the paper. ", "page_idx": 40}, {"type": "text", "text": "2. Limitations ", "text_level": 1, "page_idx": 40}, {"type": "text", "text": "Question: Does the paper discuss the limitations of the work performed by the authors? ", "page_idx": 40}, {"type": "text", "text": "Answer: [Yes] ", "text_level": 1, "page_idx": 40}, {"type": "text", "text": "Justification: We discussed the limitations in Section 6 ", "page_idx": 40}, {"type": "text", "text": "Guidelines: ", "text_level": 1, "page_idx": 40}, {"type": "text", "text": "\u2022 The answer NA means that the paper has no limitation while the answer No means that the paper has limitations, but those are not discussed in the paper.   \n\u2022 The authors are encouraged to create a separate \"Limitations\" section in their paper.   \n\u2022 The paper should point out any strong assumptions and how robust the results are to violations of these assumptions (e.g., independence assumptions, noiseless settings, model well-specification, asymptotic approximations only holding locally). The authors should reflect on how these assumptions might be violated in practice and what the implications would be.   \n\u2022 The authors should reflect on the scope of the claims made, e.g., if the approach was only tested on a few datasets or with a few runs. In general, empirical results often depend on implicit assumptions, which should be articulated.   \n\u2022 The authors should reflect on the factors that influence the performance of the approach. For example, a facial recognition algorithm may perform poorly when image resolution is low or images are taken in low lighting. Or a speech-to-text system might not be used reliably to provide closed captions for online lectures because it fails to handle technical jargon.   \n\u2022 The authors should discuss the computational efficiency of the proposed algorithms and how they scale with dataset size.   \n\u2022 If applicable, the authors should discuss possible limitations of their approach to address problems of privacy and fairness.   \n\u2022 While the authors might fear that complete honesty about limitations might be used by reviewers as grounds for rejection, a worse outcome might be that reviewers discover limitations that aren\u2019t acknowledged in the paper. The authors should use their best judgment and recognize that individual actions in favor of transparency play an important role in developing norms that preserve the integrity of the community. Reviewers will be specifically instructed to not penalize honesty concerning limitations. ", "page_idx": 40}, {"type": "text", "text": "3. Theory Assumptions and Proofs ", "text_level": 1, "page_idx": 40}, {"type": "text", "text": "Question: For each theoretical result, does the paper provide the full set of assumptions and a complete (and correct) proof? ", "page_idx": 40}, {"type": "text", "text": "Answer: [Yes] ", "text_level": 1, "page_idx": 41}, {"type": "text", "text": "Justification: We provided the necessary assumptions for our proofs. ", "page_idx": 41}, {"type": "text", "text": "Guidelines: ", "page_idx": 41}, {"type": "text", "text": "\u2022 The answer NA means that the paper does not include theoretical results.   \n\u2022 All the theorems, formulas, and proofs in the paper should be numbered and crossreferenced.   \n\u2022 All assumptions should be clearly stated or referenced in the statement of any theorems.   \n\u2022 The proofs can either appear in the main paper or the supplemental material, but if they appear in the supplemental material, the authors are encouraged to provide a short proof sketch to provide intuition.   \n\u2022 Inversely, any informal proof provided in the core of the paper should be complemented by formal proofs provided in appendix or supplemental material.   \n\u2022 Theorems and Lemmas that the proof relies upon should be properly referenced. ", "page_idx": 41}, {"type": "text", "text": "4. Experimental Result Reproducibility ", "text_level": 1, "page_idx": 41}, {"type": "text", "text": "Question: Does the paper fully disclose all the information needed to reproduce the main experimental results of the paper to the extent that it affects the main claims and/or conclusions of the paper (regardless of whether the code and data are provided or not)? ", "page_idx": 41}, {"type": "text", "text": "Answer: [Yes] ", "page_idx": 41}, {"type": "text", "text": "Justification: We provide the reproducible code of our experiments, including node classification and homophily metrics. ", "page_idx": 41}, {"type": "text", "text": "Guidelines: ", "page_idx": 41}, {"type": "text", "text": "\u2022 The answer NA means that the paper does not include experiments.   \n\u2022 If the paper includes experiments, a No answer to this question will not be perceived well by the reviewers: Making the paper reproducible is important, regardless of whether the code and data are provided or not.   \n\u2022 If the contribution is a dataset and/or model, the authors should describe the steps taken to make their results reproducible or verifiable.   \n\u2022 Depending on the contribution, reproducibility can be accomplished in various ways. For example, if the contribution is a novel architecture, describing the architecture fully might suffice, or if the contribution is a specific model and empirical evaluation, it may be necessary to either make it possible for others to replicate the model with the same dataset, or provide access to the model. In general. releasing code and data is often one good way to accomplish this, but reproducibility can also be provided via detailed instructions for how to replicate the results, access to a hosted model (e.g., in the case of a large language model), releasing of a model checkpoint, or other means that are appropriate to the research performed.   \n\u2022 While NeurIPS does not require releasing code, the conference does require all submissions to provide some reasonable avenue for reproducibility, which may depend on the nature of the contribution. For example (a) If the contribution is primarily a new algorithm, the paper should make it clear how to reproduce that algorithm. (b) If the contribution is primarily a new model architecture, the paper should describe the architecture clearly and fully. (c) If the contribution is a new model (e.g., a large language model), then there should either be a way to access this model for reproducing the results or a way to reproduce the model (e.g., with an open-source dataset or instructions for how to construct the dataset). (d) We recognize that reproducibility may be tricky in some cases, in which case authors are welcome to describe the particular way they provide for reproducibility. In the case of closed-source models, it may be that access to the model is limited in some way (e.g., to registered users), but it should be possible for other researchers to have some path to reproducing or verifying the results. ", "page_idx": 41}, {"type": "text", "text": "5. Open access to data and code ", "text_level": 1, "page_idx": 41}, {"type": "text", "text": "Question: Does the paper provide open access to the data and code, with sufficient instructions to faithfully reproduce the main experimental results, as described in supplemental material? ", "page_idx": 42}, {"type": "text", "text": "Answer: [Yes] ", "page_idx": 42}, {"type": "text", "text": "Justification: All the datasets used in this paper are public. Our provided codes well reproduce the main experimental results. ", "page_idx": 42}, {"type": "text", "text": "Guidelines: ", "page_idx": 42}, {"type": "text", "text": "\u2022 The answer NA means that paper does not include experiments requiring code.   \n\u2022 Please see the NeurIPS code and data submission guidelines (https://nips.cc/ public/guides/CodeSubmissionPolicy) for more details.   \n\u2022 While we encourage the release of code and data, we understand that this might not be possible, so \u201cNo\u201d is an acceptable answer. Papers cannot be rejected simply for not including code, unless this is central to the contribution (e.g., for a new open-source benchmark).   \n\u2022 The instructions should contain the exact command and environment needed to run to reproduce the results. See the NeurIPS code and data submission guidelines (https: //nips.cc/public/guides/CodeSubmissionPolicy) for more details.   \n\u2022 The authors should provide instructions on data access and preparation, including how to access the raw data, preprocessed data, intermediate data, and generated data, etc.   \n\u2022 The authors should provide scripts to reproduce all experimental results for the new proposed method and baselines. If only a subset of experiments are reproducible, they should state which ones are omitted from the script and why.   \n\u2022 At submission time, to preserve anonymity, the authors should release anonymized versions (if applicable).   \n\u2022 Providing as much information as possible in supplemental material (appended to the paper) is recommended, but including URLs to data and code is permitted. ", "page_idx": 42}, {"type": "text", "text": "6. Experimental Setting/Details ", "text_level": 1, "page_idx": 42}, {"type": "text", "text": "Question: Does the paper specify all the training and test details (e.g., data splits, hyperparameters, how they were chosen, type of optimizer, etc.) necessary to understand the results? ", "page_idx": 42}, {"type": "text", "text": "Answer: [Yes] ", "page_idx": 42}, {"type": "text", "text": "Justification: The experimental settings are shown in Appendix E. ", "page_idx": 42}, {"type": "text", "text": "Guidelines: ", "page_idx": 42}, {"type": "text", "text": "\u2022 The answer NA means that the paper does not include experiments. \u2022 The experimental setting should be presented in the core of the paper to a level of detail that is necessary to appreciate the results and make sense of them. \u2022 The full details can be provided either with the code, in appendix, or as supplemental material. ", "page_idx": 42}, {"type": "text", "text": "7. Experiment Statistical Significance ", "text_level": 1, "page_idx": 42}, {"type": "text", "text": "Question: Does the paper report error bars suitably and correctly defined or other appropriate information about the statistical significance of the experiments? ", "page_idx": 42}, {"type": "text", "text": "Answer: [Yes] ", "page_idx": 42}, {"type": "text", "text": "Justification: We report the accuracy and standard deviation of the node classification performance with 10 runs with random splits. We report the p-value for the Pearson correlation. ", "page_idx": 42}, {"type": "text", "text": "Guidelines: ", "page_idx": 42}, {"type": "text", "text": "\u2022 The answer NA means that the paper does not include experiments. \u2022 The authors should answer \"Yes\" if the results are accompanied by error bars, confidence intervals, or statistical significance tests, at least for the experiments that support the main claims of the paper. ", "page_idx": 42}, {"type": "text", "text": "\u2022 The factors of variability that the error bars are capturing should be clearly stated (for example, train/test split, initialization, random drawing of some parameter, or overall run with given experimental conditions).   \n\u2022 The method for calculating the error bars should be explained (closed form formula, call to a library function, bootstrap, etc.)   \n\u2022 The assumptions made should be given (e.g., Normally distributed errors).   \n\u2022 It should be clear whether the error bar is the standard deviation or the standard error of the mean.   \n\u2022 It is OK to report 1-sigma error bars, but one should state it. The authors should preferably report a 2-sigma error bar than state that they have a $96\\%$ CI, if the hypothesis of Normality of errors is not verified.   \n\u2022 For asymmetric distributions, the authors should be careful not to show in tables or figures symmetric error bars that would yield results that are out of range (e.g. negative error rates).   \n\u2022 If error bars are reported in tables or plots, The authors should explain in the text how they were calculated and reference the corresponding figures or tables in the text. ", "page_idx": 43}, {"type": "text", "text": "8. Experiments Compute Resources ", "text_level": 1, "page_idx": 43}, {"type": "text", "text": "Question: For each experiment, does the paper provide sufficient information on the computer resources (type of compute workers, memory, time of execution) needed to reproduce the experiments? ", "page_idx": 43}, {"type": "text", "text": "Answer: [No] ", "page_idx": 43}, {"type": "text", "text": "Justification: We only provide computer resources used in our experiments. We didn\u2019t report the memory and time of execution because the main focus of this paper is to disentangle graph homophily instead of proposing a new method. ", "page_idx": 43}, {"type": "text", "text": "Guidelines: ", "page_idx": 43}, {"type": "text", "text": "\u2022 The answer NA means that the paper does not include experiments.   \n\u2022 The paper should indicate the type of compute workers CPU or GPU, internal cluster, or cloud provider, including relevant memory and storage.   \n\u2022 The paper should provide the amount of compute required for each of the individual experimental runs as well as estimate the total compute.   \n\u2022 The paper should disclose whether the full research project required more compute than the experiments reported in the paper (e.g., preliminary or failed experiments that didn\u2019t make it into the paper). ", "page_idx": 43}, {"type": "text", "text": "9. Code Of Ethics ", "text_level": 1, "page_idx": 43}, {"type": "text", "text": "Question: Does the research conducted in the paper conform, in every respect, with the NeurIPS Code of Ethics https://neurips.cc/public/EthicsGuidelines? ", "page_idx": 43}, {"type": "text", "text": "Answer: [Yes] ", "page_idx": 43}, {"type": "text", "text": "Justification: All the data used in this paper is public and the research doesn\u2019t violate the NeurIPS Code of Ethics. ", "page_idx": 43}, {"type": "text", "text": "Guidelines: ", "page_idx": 43}, {"type": "text", "text": "\u2022 The answer NA means that the authors have not reviewed the NeurIPS Code of Ethics.   \n\u2022 If the authors answer No, they should explain the special circumstances that require a deviation from the Code of Ethics.   \n\u2022 The authors should make sure to preserve anonymity (e.g., if there is a special consideration due to laws or regulations in their jurisdiction). ", "page_idx": 43}, {"type": "text", "text": "10. Broader Impacts ", "text_level": 1, "page_idx": 43}, {"type": "text", "text": "Question: Does the paper discuss both potential positive societal impacts and negative societal impacts of the work performed? ", "page_idx": 43}, {"type": "text", "text": "Answer: [NA] ", "page_idx": 43}, {"type": "text", "text": "Justification: This paper focuses on improving homophily measurement, which is irrelevant to societal impacts. ", "page_idx": 43}, {"type": "text", "text": "Guidelines: ", "page_idx": 44}, {"type": "text", "text": "\u2022 The answer NA means that there is no societal impact of the work performed.   \n\u2022 If the authors answer NA or No, they should explain why their work has no societal impact or why the paper does not address societal impact.   \n\u2022 Examples of negative societal impacts include potential malicious or unintended uses (e.g., disinformation, generating fake profiles, surveillance), fairness considerations (e.g., deployment of technologies that could make decisions that unfairly impact specific groups), privacy considerations, and security considerations.   \n\u2022 The conference expects that many papers will be foundational research and not tied to particular applications, let alone deployments. However, if there is a direct path to any negative applications, the authors should point it out. For example, it is legitimate to point out that an improvement in the quality of generative models could be used to generate deepfakes for disinformation. On the other hand, it is not needed to point out that a generic algorithm for optimizing neural networks could enable people to train models that generate Deepfakes faster.   \n\u2022 The authors should consider possible harms that could arise when the technology is being used as intended and functioning correctly, harms that could arise when the technology is being used as intended but gives incorrect results, and harms following from (intentional or unintentional) misuse of the technology.   \n\u2022 If there are negative societal impacts, the authors could also discuss possible mitigation strategies (e.g., gated release of models, providing defenses in addition to attacks, mechanisms for monitoring misuse, mechanisms to monitor how a system learns from feedback over time, improving the efficiency and accessibility of ML). ", "page_idx": 44}, {"type": "text", "text": "11. Safeguards ", "text_level": 1, "page_idx": 44}, {"type": "text", "text": "Question: Does the paper describe safeguards that have been put in place for responsible release of data or models that have a high risk for misuse (e.g., pretrained language models, image generators, or scraped datasets)? ", "page_idx": 44}, {"type": "text", "text": "Answer: [NA] ", "page_idx": 44}, {"type": "text", "text": "Justification: This paper focuses on disentangling graph homophily, which is more conceptual and has no such risks. ", "page_idx": 44}, {"type": "text", "text": "Guidelines: ", "page_idx": 44}, {"type": "text", "text": "\u2022 The answer NA means that the paper poses no such risks.   \n\u2022 Released models that have a high risk for misuse or dual-use should be released with necessary safeguards to allow for controlled use of the model, for example by requiring that users adhere to usage guidelines or restrictions to access the model or implementing safety filters.   \n\u2022 Datasets that have been scraped from the Internet could pose safety risks. The authors should describe how they avoided releasing unsafe images.   \n\u2022 We recognize that providing effective safeguards is challenging, and many papers do not require this, but we encourage authors to take this into account and make a best faith effort. ", "page_idx": 44}, {"type": "text", "text": "12. Licenses for existing assets ", "text_level": 1, "page_idx": 44}, {"type": "text", "text": "Question: Are the creators or original owners of assets (e.g., code, data, models), used in the paper, properly credited and are the license and terms of use explicitly mentioned and properly respected? ", "page_idx": 44}, {"type": "text", "text": "Answer: [Yes] ", "page_idx": 44}, {"type": "text", "text": "Justification: We provided the necessary references for all the data used in this paper. Guidelines: ", "page_idx": 44}, {"type": "text", "text": "\u2022 The answer NA means that the paper does not use existing assets.   \n\u2022 The authors should cite the original paper that produced the code package or dataset.   \n\u2022 The authors should state which version of the asset is used and, if possible, include a URL.   \n\u2022 The name of the license (e.g., CC-BY 4.0) should be included for each asset.   \n\u2022 For scraped data from a particular source (e.g., website), the copyright and terms of service of that source should be provided.   \n\u2022 If assets are released, the license, copyright information, and terms of use in the package should be provided. For popular datasets, paperswithcode.com/datasets has curated licenses for some datasets. Their licensing guide can help determine the license of a dataset.   \n\u2022 For existing datasets that are re-packaged, both the original license and the license of the derived asset (if it has changed) should be provided.   \n\u2022 If this information is not available online, the authors are encouraged to reach out to the asset\u2019s creators. ", "page_idx": 44}, {"type": "text", "text": "", "page_idx": 45}, {"type": "text", "text": "13. New Assets ", "text_level": 1, "page_idx": 45}, {"type": "text", "text": "Question: Are new assets introduced in the paper well documented and is the documentation provided alongside the assets? ", "page_idx": 45}, {"type": "text", "text": "Answer: [NA] ", "page_idx": 45}, {"type": "text", "text": "Justification: We didn\u2019t release new assets ", "page_idx": 45}, {"type": "text", "text": "Guidelines: ", "page_idx": 45}, {"type": "text", "text": "\u2022 The answer NA means that the paper does not release new assets.   \n\u2022 Researchers should communicate the details of the dataset/code/model as part of their submissions via structured templates. This includes details about training, license, limitations, etc.   \n\u2022 The paper should discuss whether and how consent was obtained from people whose asset is used.   \n\u2022 At submission time, remember to anonymize your assets (if applicable). You can either create an anonymized URL or include an anonymized zip file. ", "page_idx": 45}, {"type": "text", "text": "14. Crowdsourcing and Research with Human Subjects ", "text_level": 1, "page_idx": 45}, {"type": "text", "text": "Question: For crowdsourcing experiments and research with human subjects, does the paper include the full text of instructions given to participants and screenshots, if applicable, as well as details about compensation (if any)? ", "page_idx": 45}, {"type": "text", "text": "Answer: [NA] ", "page_idx": 45}, {"type": "text", "text": "Justification: The paper doesn\u2019t involve crowdsourcing nor research with human subjects. Guidelines: ", "page_idx": 45}, {"type": "text", "text": "\u2022 The answer NA means that the paper does not involve crowdsourcing nor research with human subjects.   \n\u2022 Including this information in the supplemental material is fine, but if the main contribution of the paper involves human subjects, then as much detail as possible should be included in the main paper.   \n\u2022 According to the NeurIPS Code of Ethics, workers involved in data collection, curation, or other labor should be paid at least the minimum wage in the country of the data collector. ", "page_idx": 45}, {"type": "text", "text": "15. Institutional Review Board (IRB) Approvals or Equivalent for Research with Human Subjects ", "text_level": 1, "page_idx": 45}, {"type": "text", "text": "Question: Does the paper describe potential risks incurred by study participants, whether such risks were disclosed to the subjects, and whether Institutional Review Board (IRB) approvals (or an equivalent approval/review based on the requirements of your country or institution) were obtained? ", "page_idx": 45}, {"type": "text", "text": "Answer: [NA] ", "page_idx": 45}, {"type": "text", "text": "Justification: The paper doesn\u2019t involve crowdsourcing nor research with human subjects. Guidelines: ", "page_idx": 45}, {"type": "text", "text": "\u2022 The answer NA means that the paper does not involve crowdsourcing nor research with human subjects. ", "page_idx": 45}, {"type": "text", "text": "\u2022 Depending on the country in which research is conducted, IRB approval (or equivalent) may be required for any human subjects research. If you obtained IRB approval, you should clearly state this in the paper.   \n\u2022 We recognize that the procedures for this may vary significantly between institutions and locations, and we expect authors to adhere to the NeurIPS Code of Ethics and the guidelines for their institution.   \n\u2022 For initial submissions, do not include any information that would break anonymity (if applicable), such as the institution conducting the review. ", "page_idx": 46}]