[{"type": "text", "text": "Auditing Privacy Mechanisms via Label Inference Attacks ", "text_level": 1, "page_idx": 0}, {"type": "text", "text": "R\u00f3bert Istv\u00e1n Busa-Fekete Google Research NY busarobi@google.com ", "page_idx": 0}, {"type": "text", "text": "Travis Dick Google Research NY tdick@google.com ", "page_idx": 0}, {"type": "text", "text": "Claudio Gentile Google Research NY cgentile@google.com ", "page_idx": 0}, {"type": "text", "text": "Andr\u00e9s Mu\u00f1oz Medina Google Research NY ammedina@google.com ", "page_idx": 0}, {"type": "text", "text": "Adam Smith   \nBoston University   \n& Google DeepMind   \nads22@bu.edu   \nMarika Swanberg   \nBoston University   \n& Google Research NY   \nmarikas@bu.edu ", "page_idx": 0}, {"type": "text", "text": "", "page_idx": 0}, {"type": "text", "text": "Abstract ", "text_level": 1, "page_idx": 0}, {"type": "text", "text": "We propose reconstruction advantage measures to audit label privatization mechanisms. A reconstruction advantage measure quantifies the increase in an attacker\u2019s ability to infer the true label of an unlabeled example when provided with a private version of the labels in a dataset (e.g., aggregate of labels from different users or noisy labels output by randomized response), compared to an attacker that only observes the feature vectors, but may have prior knowledge of the correlation between features and labels. We consider two such auditing measures: one additive, and one multiplicative. These incorporate previous approaches taken in the literature on empirical auditing and differential privacy. The measures allow us to place a variety of proposed privatization schemes\u2014some differentially private, some not\u2014on the same footing. We analyze these measures theoretically under a distributional model which encapsulates reasonable adversarial settings. We also quantify their behavior empirically on real and simulated prediction tasks. Across a range of experimental settings, we find that differentially private schemes dominate or match the privacy-utility tradeoff of more heuristic approaches. ", "page_idx": 0}, {"type": "text", "text": "1 Introduction ", "text_level": 1, "page_idx": 0}, {"type": "text", "text": "Data sharing and processing provides an undeniable utility to individuals and the society at large. The modern data ecosystem has played a significant role in scientific advancement, economic growth, and technologies that benefit individuals in their daily lives. Yet, the collection, processing, and sharing of sensitive information can lead to real privacy harms. Understanding the theoretical and empirical risks associated with different types of data disclosure is a rich area of research and topic of discussion. The privacy community has studied a number of empirical measures of disclosure risks against several types of attacks, including: inference attacks [29], reconstruction attacks [5], re-identification attacks [14] and label inference attacks [13, 31]. ", "page_idx": 0}, {"type": "text", "text": "While differential privacy gives rigorous guarantees against these attacks by worst-case adversaries, it is natural to wonder whether non-DP (deterministic) mechanisms give any empirical privacy protections. This line of inquiry necessitates empirical measures of privacy that take adversarial uncertainty into account. At a fundamental level, whether one is studying reconstruction or membership inference, nearly every privacy disclosure metric comes down to quantifying the relationship between an adversary\u2019s prior and posterior knowledge before and after a data release. ", "page_idx": 0}, {"type": "text", "text": "In this work, we consider a number of ways to summarize this prior-posterior relationship, and we apply our proposed metrics to a few Privacy Enhancing Technologies (PETs). We consider two families of metrics: As a coarse measure, we consider the expected additive difference between the prior and posterior success rates; while this does not capture unlikely high-disclosure events, it gives a sense for the risk posed to an average individual. To better capture such events, we then consider the finer-grained multiplicative difference between the adversary\u2019s prior and posterior. These empirical measures of privacy risk allow us to relate and compare the risks of both aggregation-based and differential privacy-based PETs, and hence compare their privacy-accuracy trade-off curves: What accuracy does one get for a given level of privacy protection? Together, these metrics paint a more balanced and nuanced picture of the disclosure risks and accuracy trade-offs posed by aggregation and differentially private mechanisms. ", "page_idx": 0}, {"type": "text", "text": "", "page_idx": 1}, {"type": "text", "text": "We will focus on the simplest possible scenario for information sharing: the case where a user wishes to disclose a single bit of information (for instance a binary label in a classification problem). While this problem is simple to present, it already highlights a lot of the difficulties in providing measures of privacy that are meaningful for both noise-based and aggregate-based tools. Most notably, it already requires handling the correlations\u2014known to an attacker, but unknown to the mechanism\u2014between the visible features and the hidden, sensitive labels. Similar to [31], we incorporate adversarial knowledge by a prior, and measure the difference between the prior and the adversary\u2019s posterior distribution conditional on observed aggregates. ", "page_idx": 1}, {"type": "text", "text": "Understanding binary labels already has practical implications. For instance, with Chrome\u2019s proposed conversion reporting API [1], the event of a user converting after clicking on an online ad \u2014 buying a product, signing up for a newsletter, installing an app, etc. \u2014 or not is considered sensitive, and therefore is reported only with some noise. However, once reported, ad tech providers can use features associated with an ad click (impression information, publisher information, etc.) to train models that can predict future conversions. ", "page_idx": 1}, {"type": "text", "text": "Our contribution. We make several contributions: (i) We introduce additive reconstruction advantage measures as ways to quantify the amount of leakage associated with a generic (not necessarily differentially private) privacy mechanism. These are variants and extensions of the Expected Attack Utility (EAU) and advantage contained in [31]. (ii) We quantify such measures for randomized response and random label aggregation under different correlation assumptions with public data. (iii) We consider a more demanding multiplicative reconstruction advantage measure (in the spirit of predecessors of differential privacy [17, 10]), and again quantify this advantage for randomized response and random label aggregation. (iv) We conduct a series of experiments on benchmark and synthetic datasets measuring the privacy-utility tradeoff of a number of basic mechanisms, including randomized response, label aggregation and label aggregation plus Laplace or geometric noise. Remarkably, these experiments show that learning with aggregate labels tends to be strictly harder in practice than learning with randomly perturbed labels. That is, differentially private schemes dominate or match the privacy-utility tradeoff of label aggregate schemes for all or most privacy levels and for both types of advantage measure, a conclusion we have not seen clearly spelled out in prior work on privacy. Even measured \u201con their own turf\u201d, deterministic aggregation\u2014which lack provable guarantees like differential privacy\u2014do not provide a significant advantage. ", "page_idx": 1}, {"type": "text", "text": "Prior Work. Our measures of privacy risk relate closely to previous work on membership inference and auditing, as well as to variants of differential privacy that assume adversarial uncertainty. We discuss these in Section 3.3, after defining our measures. ", "page_idx": 1}, {"type": "text", "text": "Reproducibility. For the sake of full reproducibility of our experimental setting and results, our code is available at the link https://github.com/google-research/google-research/ tree/master/auditing_privacy_via_lia. ", "page_idx": 1}, {"type": "text", "text": "2 Preliminaries ", "text_level": 1, "page_idx": 1}, {"type": "text", "text": "For a natural number $n$ , let $[n]=\\{i\\in\\mathbb{N}\\colon i\\leq n\\}$ . Let $\\mathcal{X}$ denote a feature (or instance) space and $\\boldsymbol{\\wp}$ be a binary $(\\mathcal{D}=\\{0,1\\})$ ) or multiclass $(\\mathcal{Y}=[c])$ label space. We assume the existence of a joint distribution $\\mathcal{D}$ on $\\mathcal X\\times\\mathcal X$ , encoding the correlation between the input features and the labels. The marginal distribution over $\\mathcal{X}$ will be denoted by $\\mathcal{D}_{\\mathcal{X}}$ , and the conditional distribution of $y$ given $x$ will be denoted by $\\mathcal{D}_{\\mathcal{Y}\\mid x}$ . For distributions over binary labels, we denote by $\\eta(x)=\\mathbb{P}_{y\\sim\\mathcal{D}_{y\\mid x}}(y=1|x)$ the probability of drawing label 1 conditioned on feature vector $x$ . In the multiclass case, we will use $\\eta(\\bar{x^{,}}a)=\\mathbb{P}_{y\\sim\\mathcal{D}_{\\mathcal{V}|x}}^{\\bar{\\cdot}}(y=\\bar{a}|x)$ , for $a\\in\\mathcal{Y}=[c]$ . We define a dataset $S=\\langle(x_{1},y_{1}),\\dots,(x_{m},y_{m})\\rangle$ as a sequence of pairs $\\left({x_{i},y_{i}}\\right)$ , each one drawn i.i.d. from $\\mathcal{D}$ . We use $\\mathbf{x}=(x_{1},\\ldots,x_{m})$ to denote the features in $S$ and $\\mathbf{y}=(y_{1},\\dots,y_{m})$ to denote the corresponding labels. We will sometimes abuse the notation in the math, and write for brevity $(\\mathbf{x},\\mathbf{y})$ instead of $(x_{1},y_{1}),\\dotsc,(x_{m},y_{m})$ . Consistent with this notation abuse, we will often use ${\\mathcal{X}}^{m}\\times{\\mathcal{Y}}^{m}$ and $(\\mathcal{X}\\times\\mathcal{Y})^{m}$ interchangeably\u2014no ambiguity will arise. ", "page_idx": 1}, {"type": "text", "text": "", "page_idx": 2}, {"type": "text", "text": "In order to unify the study of privacy enhancing technologies, for the rest of the paper we model PETs as (possibly randomized) functions $\\mathcal{M}:(\\bar{\\mathcal{X}}\\times\\mathcal{Y})^{m}\\overset{}{\\rightarrow}\\mathcal{Z}$ . These functions map a collection of $m$ labeled examples to a privacy protected representation in the domain $\\mathcal{Z}$ . The domain $\\mathcal{Z}$ depends on the PET but, throughout the paper, it will be clear from the context. ", "page_idx": 2}, {"type": "text", "text": "In our setting, we consider PETs that protect labels and release features in the clear (so, strictly speaking, the output of a PET should also include $\\mathbf{x}$ itself; we leave implicit in our notation). Despite this, our reconstruction advantage measures can be applied to any PET, we recall below two standard (and very basic) PETs that have been proposed for various Ads metrics APIs: one which satisfies label differential privacy, and one which relies on random aggregation. These are the two PETs on which we will also be able to give theoretical guarantees. We formulate them for binary classification. ", "page_idx": 2}, {"type": "text", "text": "Definition 2.1. Given $\\epsilon\\geq0$ , we say that a (randomized) algorithm $A$ that takes as input $S$ is $\\epsilon$ -Label Differentially Private (\u03f5-Label $D P$ ) if for any two datasets $S$ and $S^{\\prime}$ that differ in the label of a single sample we have $\\mathbb{P}(A(S)\\in B)\\le e^{\\epsilon}\\;\\mathbb{P}(A(S^{\\prime})\\in B)$ , where $B$ is any subset of the output space of $A$ . ", "page_idx": 2}, {"type": "text", "text": "Randomized Response (RR) is a classical [30] way of achieving $\\epsilon$ -Label DP. In the binary classification case, RR with privacy parameter $\\pi=1/(1+e^{\\epsilon})$ simply works by randomly filpping each label $y_{j}$ in the dataset with independent probability $\\pi$ before revealing it to the learning algorithm. For a fixed $\\epsilon>0$ , RR corresponds to the function $\\mathcal{M}_{\\sf R R}(\\mathbf{x},\\mathbf{y})=\\tilde{\\mathbf{y}}\\,\\,\\overline{{=}}\\,(\\tilde{y}_{1},\\cdot\\,.\\,.\\,,\\tilde{y}_{m})\\in\\{0,1\\}^{m}$ , where $\\tilde{y}_{i}=1-y_{i}$ with probability $\\pi=1/(1+e^{\\epsilon})$ and equal to $y_{i}$ with probability $1-\\pi$ , independently for each $i\\in[m]$ . ", "page_idx": 2}, {"type": "text", "text": "A completely different label privacy mechanism, still very utilized in practice (see, e.g., the Privacy Sandbox API in Google [1] and the Apple SKAN initiative [2]) is one based on (random) label aggregation, whereby the dataset $S$ gets partitioned uniformly at random into bags of a given size $k$ , $S=\\langle(x_{11},y_{11}),\\ldots,(x_{1k},y_{1k}),\\ldots,(x_{n1},y_{n1}),\\ldots,(x_{n k},y_{n k})\\rangle$ , and only feature vectors and the fraction of positive labels in each bag are revealed to the attacker/learning algorithm. In other words, the attacker has access to $S$ via a collection $\\{(B_{i},\\alpha_{i}),\\,i\\,\\in\\,[n]\\}$ of $n$ labeled bags of size $k$ , with $m\\,=\\,n k$ , where $B_{i}\\,=\\,\\{x_{i j}\\colon j\\,\\in\\,[k]\\}$ , $\\begin{array}{r}{\\alpha_{i}\\,=\\,\\frac{1}{k}\\sum_{j=1}^{k}y_{i j}}\\end{array}$ is the label proportion (fraction of labels \u201c1\") in the $i$ -th bag, and all the involved samples $(x_{i j},y_{i j})$ are drawn i.i.d. from $\\mathcal{D}$ . Thus, the attacker receives information about the $m$ labels $y_{i j}$ of the $m$ instances $x_{i j}$ from dataset $S$ only in the aggregate form determined by the $n$ label proportions $\\alpha_{i}$ . Note, however, that the feature vectors $x_{i j}$ are individually observed. From an attacker viewpoint, this setting is sometimes called Learning from Label Proportions (LLP). Hence, LLP corresponds to the function $\\mathcal{M}_{\\mathrm{LLP}}(\\mathbf{x},\\mathbf{y})=(\\alpha_{1},\\hdots,\\bar{\\alpha_{n}})\\in[0,1]^{n}$ . ", "page_idx": 2}, {"type": "text", "text": "Learning from privatized labels. Randomized response is especially appealing from a practical point of view, since privatized data with label flipping can be handled by many prominent learning algorithms as is, with some tuning of their hyper-parameters. Often the theoretical guarantees of these learners in terms of sample complexity are only deteriorated by some constant that depends on the label noise level, see, for example [27]. To improve accuracy, we debias the gradients in a post-processing step similar to Equation (7) in [19]; we discuss the debiasing details in Appendix C. ", "page_idx": 2}, {"type": "text", "text": "On the other hand, a simple and very well-known method for learning from aggregate labels is the one that of [33] call Empirical Proportion Risk Minimization. In fact, different versions of this algorithm are discussed in the literature without a clear reference to its origin. In [12], the authors simply call this algorithm the Proportion Matching algorithm (PROPMATCH), and we shall adopt their terminology here. Given a loss function $\\ell:\\mathbb{R}\\times\\mathbb{R}\\to\\mathbb{R}^{+}$ , a hypothesis set of functions $\\mathcal{H}\\subset\\mathbb{R}^{\\mathcal{X}}$ , mapping $\\mathcal{X}$ to a (convex) prediction space $\\widehat{\\boldsymbol{y}}\\subseteq\\mathbb{R}$ , and a collection $\\{(B_{i},\\alpha_{i}),\\,i\\in[n]\\}$ of $n$ labeled bags of size $k$ , PROPMATCH minimizes the empirical proportion matching loss, i.e., it solves the following optimization problem: $\\begin{array}{r}{\\operatorname*{min}_{h\\in\\mathcal{H}}\\sum_{i=1}^{n}\\ell\\left(\\frac1k\\sum_{j=1}^{k}h(x_{i j}),\\alpha_{i}\\right)}\\end{array}$ . It is known that the above method is consistent (see for instance [12]). That is, training a model this way \u2013 under some mild conditions on $\\ell$ and $\\mathcal{H}$ and for a large enough sample \u2013 results in learning a model $h$ that minimizes the expected event level loss $\\mathbb{E}_{(x,y)\\sim\\mathcal{D}}[\\ell(h(x),y)]$ . Finally, for our baselines, it will be helpful to consider a PET that reveals no label information at all: $\\mathcal{M}_{\\perp}(\\mathbf{x},\\mathbf{y})=\\perp$ . ", "page_idx": 2}, {"type": "text", "text": "3 Auditing Large-Scale Label Inference ", "text_level": 1, "page_idx": 3}, {"type": "text", "text": "In this section, we propose a number of auditing metrics to measure the risk of large-scale label reconstruction. Unlike DP auditing techniques which focus on worst-case guarantees, we will focus here on distributional guarantees. In doing so, we extend the (additive) reconstruction advantage definition introduced in [31] to the LLP setting and propose meaningful variants of it. ", "page_idx": 3}, {"type": "text", "text": "Our reconstruction advantage measures can be applied to virtually any PET for auditing purposes. For concreteness, we will also provide analytical bounds on such measures when applied to PETs like RR and label aggregation. On one hand, these bounds help illustrate the precise dependence on the data distribution $\\mathcal{D}$ . On the other, they will pave the way for our experimental findings in Section 4. ", "page_idx": 3}, {"type": "text", "text": "A reconstruction advantage metric is grounded in the following natural privacy question: How much does releasing the output of a PET increase the risk of label inference compared to not releasing anything? This corresponds naturally to measuring an attacker\u2019s prior over a target person\u2019s label compared to the attacker\u2019s posterior after viewing the mechanism output. ", "page_idx": 3}, {"type": "text", "text": "We model the attacker (often called \u2018adversary\u2019 later on) as a function $A:\\mathcal{X}^{m}\\times\\mathcal{Z}\\to\\mathcal{Y}^{m}$ that maps the features $\\mathbf{x}$ and the output of a PET $\\mathcal{M}(\\mathbf{x},\\mathbf{y})$ to a vector of predicted labels, one for each example. We compare this attacker\u2019s success to the the uninformed or prior attacker that gets $\\mathbf{x}$ and the PET that reveals no label information $\\mathcal{M}_{\\perp}(\\mathbf{x},\\mathbf{y})=\\perp$ . To measure the efficacy of an attacker compared to its prior, we define a number of attack utility variants. ", "page_idx": 3}, {"type": "text", "text": "The Expected Attack Utility of adversary $\\boldsymbol{\\mathcal{A}}$ using information from PET $\\mathcal{M}$ on a collection of $m$ examples drawn i.i.d. from a distribution $\\mathcal{D}$ is defined as: ", "page_idx": 3}, {"type": "equation", "text": "$$\n\\operatorname{EAU}(A,\\mathcal{M},\\mathcal{D})=\\underset{(\\mathbf{x},\\mathbf{y})\\sim\\mathcal{D}^{m},\\,i\\sim\\operatorname{Uniform}([m]),\\,\\operatorname{coins}\\,\\operatorname{of}\\,\\mathcal{M}}{\\mathbb{A}}\\big(A(\\mathbf{x},\\mathcal{M}(\\mathbf{x},\\mathbf{y}))_{i}=y_{i}\\big)~,\n$$", "text_format": "latex", "page_idx": 3}, {"type": "text", "text": "where $A(\\cdot,\\cdot)_{i}$ is the $i$ -th component of vector $A(\\cdot,\\cdot)$ . In words, the expected attack utility of adversary $\\boldsymbol{\\mathcal{A}}$ is the probability that $\\boldsymbol{\\mathcal{A}}$ correctly guesses the label of a randomly chosen example when provided the features and the output of $\\mathcal{M}$ . Equivalently, this is the expected fraction of the $m$ examples that the adversary predicts the correct label for. The adversary\u2019s success rate may depend on the distribution over features and labels. For example, if labels are entirely determined by features, then our metric should reflect that privatized labels (for any mechanism $\\mathcal{M}$ ) reveal no additional information about the true labels. To control for the information that features inherently reveal about labels, we assume that the adversary has knowledge of the data distribution $\\mathcal{D}$ over $\\mathcal X\\times\\mathcal Y$ , either completely (e.g., Definition 3.1) or approximately through learning on disjoint data (as in our experiments in Section 4). ", "page_idx": 3}, {"type": "text", "text": "Further, we define the Individual Expected Attack Utility on input data $x_{i}$ as ", "page_idx": 3}, {"type": "equation", "text": "$$\n\\begin{array}{r}{\\mathrm{IEAU}_{i}(A,\\mathcal{M},\\mathcal{D},x_{i})\\ =\\ \\underset{y_{i}\\sim\\mathcal{D}_{\\mathcal{Y}\\mid x_{i}}(\\mathbf{x}^{(-i)},\\mathbf{y}^{(-i)})\\sim\\mathcal{D}^{m-1},\\,\\mathrm{coins\\,of}\\,\\mathcal{M}}{\\mathbb{P}}\\left(A(\\mathbf{x},\\mathcal{M}(\\mathbf{x},\\mathbf{y}))_{i}=y_{i}\\,\\bigg\\vert\\,x_{i}\\right)\\,,}\\end{array}\n$$", "text_format": "latex", "page_idx": 3}, {"type": "text", "text": "where $\\mathbf{x}^{(-i)}$ is $\\mathbf{x}$ with the $i$ -th item $x_{i}$ dropped, and likewise for $\\mathbf{y}^{(-i)}$ . The quantity $\\mathrm{IEAU}_{i}(A,\\mathcal{M},\\mathcal{D},x_{i})$ emphasizes the (expected) attack utility on a specific piece of data $x_{i}$ when the associated label $y_{i}$ is drawn from the conditional distribution $\\mathcal{D}_{\\mathcal{Y}\\mid x_{i}}$ . For instance, $\\mathrm{IEAU}_{i}(\\mathcal{A},\\mathcal{M}_{\\mathrm{LLP}},\\mathcal{D},x_{i})$ measures, for a given $x_{i}$ , the chance that an attacker is able to reconstruct the associated label $y_{i}$ , if $y_{i}$ generated from $\\mathcal{D}_{\\mathcal{Y}\\mid x_{i}}$ and, by virtue of mechanism $\\mathcal{M}_{\\mathrm{LLP}}$ , $y_{i}$ becomes part of a bag (of some size $k$ ), only the bag label proportion $\\alpha$ being revealed to the attacker. ", "page_idx": 3}, {"type": "text", "text": "In order to measure the increase in risk incurred by releasing the output of a PET, we consider the attack utility of an optimal adversary in two scenarios: one in which the adversary gets the features, $\\mathbf{x}$ , together with the output of the PET, $\\mathcal{M}(\\mathbf{x},\\mathbf{y})$ , and an alternate setting where the adversary gets only the features (which is equivalent to using $\\mathcal{M}_{\\perp})$ . We call the difference in attack utility between the informed and uninformed adversary the attack advantage. Intuitively, the attack advantage measures the label reidentification risk that can be attributed to the PET rather than to correlations between the features $\\mathbf{x}$ and labels y which are inherent in the distribution $\\mathcal{D}$ . Since we have given two notions of attack utility above, we have two corresponding notions of attack advantage. Below is an additive version, based on utility differences, later on (Section 3.2) we will also consider a multiplicative version, based on utility ratios. ", "page_idx": 3}, {"type": "text", "text": "Definition 3.1. Given a PET $\\mathcal{M}$ for a set of m examples drawn from a data distribution $\\mathcal{D}$ , the (additive) Expected attack Advantage is defined as ", "page_idx": 4}, {"type": "equation", "text": "$$\n\\operatorname{EAdv}(\\mathcal{M},\\mathcal{D})=\\operatorname*{sup}_{A_{i n f o m e d}}\\operatorname{EAU}(\\mathcal{A}_{i n f o r m e d},\\mathcal{M},\\mathcal{D})\\qquad-\\operatorname*{sup}_{A_{u n i f o r m e d}}\\operatorname{EAU}(\\mathcal{A}_{u n i n f o r m e d},\\mathcal{M}_{\\bot},\\mathcal{D})\\;.\n$$", "text_format": "latex", "page_idx": 4}, {"type": "text", "text": "Similarly, when the $i$ -th item $x_{i}$ is kept frozen, the Individual Expected attack Advantage is defined as $\\mathrm{UAdv}(\\mathcal{M},\\mathcal{D},x_{i})=\\operatorname*{sup}_{A\\omega\\in m e d}\\mathrm{IEAU}(\\mathcal{A}_{i n f o r m e d},\\mathcal{M},\\mathcal{D},x_{i})-\\operatorname*{sup}_{A,\\omega\\in m e d}\\mathrm{IEAU}(\\mathcal{A}_{u n i n f o r m e d},\\mathcal{M}_{\\perp},\\mathcal{D},x_{i}).$ ", "page_idx": 4}, {"type": "text", "text": "Note that RR is generally described in terms of its behavior on a single example $(x,y)$ , rather than a collection of $m$ i.i.d. samples. Likewise, label aggregation operates on each bag of size $k<<m$ independently. However, since the data is i.i.d., it is easy to see that the attack advantage for RR is independent of the number of examples $m$ , while the attack advantage for (random) label aggregation will only depend on $k$ , rather than $m$ . ", "page_idx": 4}, {"type": "text", "text": "Appendix A.5 contains further variants of attack advantage, like one that accounts for the tail of the attack advantage distribution, as well as associated bounds. These can be stretched to the point where the feature vector $\\mathbf{x}=(x_{1},\\ldots,x_{m})$ is arbitrary, and only the properties of the condition distribution $\\mathcal{D}_{\\mathcal{Y}\\mid x}$ is factored in. ", "page_idx": 4}, {"type": "text", "text": "3.1 Bounding the Additive Attack Advantage ", "text_level": 1, "page_idx": 4}, {"type": "text", "text": "As a warm up, we begin by studying the additive expected attack advantage for LLP when the labels are independent of the features. Note that, since the features $\\mathbf{x}$ do not play any role in this simplified setting, the notions of advantage coincide. We recall again that all results involving $\\mathcal{M}_{\\mathrm{LLP}}$ (Theorems 3.2, 3.3 and 3.4 below) deal with a single bag when computing advantage measures (hence we will write $\\alpha$ instead of $\\alpha_{i}$ ). This is because distribution $\\mathcal{D}$ is known to the adversary, and the bags the adversary observes are independent of one another, hence there is no extra advantage from operating on an entire dataset of bags at once. All proofs are given in the appendix. ", "page_idx": 4}, {"type": "text", "text": "Theorem 3.2. Fix a data distribution $\\mathcal{D}$ , let $p=\\mathbb{P}_{(x,y)\\sim{\\mathcal{D}}}(y=1).$ , and fix an arbitrary threshold $\\beta\\in[0,1/2]$ . If labels are independent of features (i.e., $\\mathcal{D}$ is a product of distributions over $\\mathcal{X}$ and $\\boldsymbol{\\wp}$ ), th ", "page_idx": 4}, {"type": "equation", "text": "$$\n\\begin{array}{r l}&{\\sqrt{n}\\,f o r\\,a l l\\,b a g\\,s i z e s\\ k\\ge1\\,w e\\ h a v e\\cdot}\\\\ &{\\mathrm{\\EAdv}({\\mathcal M}_{L L P},{\\mathcal D})=\\operatorname*{min}\\{p,1-p\\}-\\mathbb{E}_{\\alpha}[\\operatorname*{min}\\{\\alpha,1-\\alpha\\}]\\le\\left\\{\\sqrt{\\frac{p(1-p)}{k}}\\quad i f p\\in[0,1]\\right.}\\\\ &{\\left.t f|p-1/2|\\ge\\beta,\\right.}\\end{array}\n$$", "text_format": "latex", "page_idx": 4}, {"type": "text", "text": "where $\\Omega(\\cdot)$ hides constants independent of $\\beta$ and $k$ . ", "page_idx": 4}, {"type": "text", "text": "A couple of remarks are in order. First, observe that, as expected, the advantage $\\operatorname{EAdv}(\\mathcal{M}_{\\mathrm{LLP}},\\mathcal{D})$ is always non-negative. This can be easily derived by noting that $\\mathbb{E}[\\alpha]\\,=\\,p$ and then applying Jensen\u2019s inequality to the concave function $\\dot{x_{}}\\mapsto\\operatorname*{min}\\{x_{},\\dot{1}-x_{}\\}$ , for $x\\in[0,1]$ . Second, despite being non-negative, Theorem 3.2 also proves the desirable property that $\\mathrm{EAdv}(\\dot{\\mathcal{M}}_{\\mathrm{LLP}},\\mathcal{D})$ goes to zero as the bag size $k$ increases. The convergence rate is in general of the form $1/\\sqrt{k}$ , but it becomes negative exponential in $k$ when $p$ is bounded away from $1/2$ . ", "page_idx": 4}, {"type": "text", "text": "We now investigate general distributions over features and labels and consider in turn EAdv and IEAdv. ", "page_idx": 4}, {"type": "text", "text": "Theorem 3.3. Let $\\mathcal{D}$ be an arbitrary distribution on $\\mathcal X\\!\\times\\!\\mathcal Y$ , $p=\\mathbb{E}[\\eta(x)]$ , and $\\mu=\\mathbb{E}[\\eta(x)(1\\!-\\!\\eta(x))]$ . Then, for all bag sizes $k\\geq2$ we have: ", "page_idx": 4}, {"type": "equation", "text": "$$\n\\operatorname{EAdv}(\\mathcal{M}_{L L P},\\mathcal{D})=\\widetilde{O}\\bigg(\\frac{\\mu^{1/4}(p(1-p))^{1/4}}{\\sqrt{k}}+\\frac{\\mu^{1/4}}{k}\\bigg)\\;,\n$$", "text_format": "latex", "page_idx": 4}, {"type": "text", "text": "where $\\widetilde O$ hides logarithmic factors in $k$ . ", "page_idx": 4}, {"type": "text", "text": "Hence, also in this more general case of LLP, the advantage converges to zero as the bag size $k$ grows large. Compared to the rate in Theorem 3.2, we are only losing the $\\log k$ factors implicit in the $\\widetilde O$ notation. This is because, when applied to the scenario where labels and features are independe nt, $\\eta(x)=p$ is constant with $x$ , so that $\\mu=p(1-p)$ , and the first term becomes p(1k\u2212p), while the second one reads (p(1\u2212p))1/4, which is lower order when $k$ is large. We strongly believe that the tighter gap-dependent analysis we carried out for Theorem 3.2 extends to the more general scenario of Theorem 3.3, but we leave this as an open question. ", "page_idx": 4}, {"type": "text", "text": "The corresponding bound for the individual expected attack advantage is given next. ", "page_idx": 4}, {"type": "text", "text": "Theorem 3.4. Under the same assumptions and notation as in Theorem 3.3, we have, for $\\mu>0$ , and $\\begin{array}{r}{k\\ge\\frac{2}{\\mu}\\log(1/\\mu)}\\end{array}$ , ", "page_idx": 5}, {"type": "equation", "text": "$$\n\\operatorname{IEAdv}(\\mathcal{M}_{L L P},\\mathcal{D},x_{i})=\\mu_{i}\\,\\widetilde{O}\\left((p(1-p))^{1/4}\\sqrt{\\frac{\\mu}{k}+\\frac{1}{\\mu^{3/2}k}}+\\sqrt{\\frac{\\mu}{k^{2}}+\\frac{1}{\\mu^{3/2}k^{2}}}\\right),\n$$", "text_format": "latex", "page_idx": 5}, {"type": "text", "text": "where $\\mu_{i}=\\eta(x_{i})(1-\\eta(x_{i}))$ , and $\\widetilde O$ hides logarithmic factors in $k$ . ", "page_idx": 5}, {"type": "text", "text": "In the bounds of Theorems 3.2, 3.3 and 3.4 the dependence on the data distribution $\\mathcal{D}$ is encoded in $p(1-p)$ and $\\mu$ ; as $p(1-p)$ and/or $\\mu$ gets smaller we should naturally expect a smaller advantage, as the adversary is facing an easier label prediction problem. Appendix A.5 contains further distributionform k1 ik=1\u221a j\u00b5:ji\u0338=i \u00b5j , dependent results, like a bound on the advantage that, conditioned on where $\\mu_{i}=\\eta(x_{i})(1-\\eta(x_{i}))$ . $\\mathbf{x}=(x_{1},\\ldots,x_{m})$ , is of the ", "page_idx": 5}, {"type": "text", "text": "We now provide the corresponding expression for the additive attack advantage for RR (at a given level $\\epsilon\\geq0$ ). We recall that the results of [31] imply that every $\\epsilon$ -label-DP PET $\\mathcal{M}$ has advantage bounded as $\\begin{array}{r}{\\operatorname{EAdv}(\\mathcal{M},\\mathcal{D})\\leq1-\\frac{2}{1+e^{\\epsilon}}}\\end{array}$ . However, one drawback of this bound is that it is distribution independent (or, rather, worst case over distribution ). Yet, the attack advantage depends heavily on $\\mathcal{D}$ . For an extreme example, if we have $\\mathbb{P}_{(x,y)\\sim\\mathcal{D}}(y=1)=1$ , the attack advantage is zero for every PET, which is not directly captured by only relying on the properties of $\\epsilon$ -DP. ", "page_idx": 5}, {"type": "text", "text": "Recall that, since RR operates on each example independently, the advantage is independent of the number of examples $m$ (a formal proof is given in Appendix A.6). Hence we derive a bound for $\\operatorname{IEAdv}(\\mathcal{M}_{\\mathbb{R}\\mathbb{R}},\\mathcal{D},x_{1})$ , and an expression for the optimal adversary under RR (see Appendix A.7). ", "page_idx": 5}, {"type": "text", "text": "Theorem 3.5. For any data distribution $\\mathcal{D}$ , the individual expected attack advantage $\\operatorname{IEAdv}(\\mathcal{M}_{R R},\\mathcal{D},x_{1})$ for randomized response with privacy parameter $\\begin{array}{l l}{\\pi}&{={\\frac{1}{1+e^{\\epsilon}}}}\\end{array}$ is equal to $\\left(\\operatorname*{min}\\{\\eta(x_{1}),1-\\eta(x_{1})\\}-\\pi\\right)\\cdot\\mathbb{I}\\{\\eta(x_{1})\\in[\\pi,1-\\pi]\\}$ . ", "page_idx": 5}, {"type": "text", "text": "We use the above expression in our experiments (Section 4) to estimate the attack advantage of RR for various values of $\\epsilon$ . Being distribution dependent, this expression leads to much tighter bounds on the attack advantage. For example at \u03f5 = 1, the bound from [31] is 1 \u221212+\u03f5 \u22480.46, while for one dataset used in our experiments we see that the attack advantage for RR at $\\epsilon=1$ is only 0.00095. ", "page_idx": 5}, {"type": "text", "text": "3.2 Multiplicative Attack Advantage ", "text_level": 1, "page_idx": 5}, {"type": "text", "text": "The definitions of attack advantage given so far measure the absolute change in successful reconstruction, not the relative change. Moreover, they do not fully capture the different levels of confidence in the reconstruction, since they involve an expectation over either $(\\mathbf{x},\\mathbf{y})$ or $\\mathbf{y}$ given x. Next, we give an additional set of definitions that capture these important nuances. For the sake of brevity, in this section we directly instantiate the adversaries $\\mathcal{A}_{\\mathrm{informed}}$ and $\\mathcal{A}_{\\mathrm{uninformed}}$ to Bayes optimal predictors. ", "page_idx": 5}, {"type": "text", "text": "Definition 3.6. Given data distribution $\\mathcal{D}$ , mechanism $\\mathcal{M}$ , index $i$ , and pair of labels $a,b\\in\\mathcal{V}$ , the multiplicative advantage is the difference of log odds ratios: ", "page_idx": 5}, {"type": "equation", "text": "$$\nI_{a,b}(\\mathcal{M},\\mathcal{D},\\mathbf{x},z,i)=\\log\\frac{\\pi_{i}(\\mathbf{x},z,a)}{\\pi_{i}(\\mathbf{x},z,b)}-\\log\\frac{\\eta(x_{i},a)}{\\eta(x_{i},b)}\n$$", "text_format": "latex", "page_idx": 5}, {"type": "text", "text": "where $\\eta(x_{i},a)\\;=\\;\\mathbb{P}(y_{i}\\;=\\;a\\,|\\,x_{i})$ and $\\pi_{i}(\\mathbf{x},z,a)\\;=\\;\\mathbb{P}_{\\mathbf{y}\\sim\\mathcal{D}_{y|\\mathbf{x}}^{m}}\\left(y_{i}=a\\mid\\mathbf{x},\\mathcal{M}(\\mathbf{x},\\mathbf{y})=z\\right)$ is the probability of $y_{i}=a$ after observing the output $z$ of $\\mathcal{M}$ . We denote the binary case by $I_{1,0}(\\cdot)=I(\\cdot)$ and shorten $\\eta(\\boldsymbol{x}_{i}):=\\eta(\\boldsymbol{x}_{i},1)$ and $\\pi_{i}(\\mathbf{x},z):=\\pi_{i}(\\mathbf{x},z,1)$ . ", "page_idx": 5}, {"type": "text", "text": "This particular formulation has the advantage that $I_{a,b}(\\mathcal{M},\\mathcal{D},\\mathbf{x},z,i)$ is large in absolute value whenever there is a large relative change in either label probability. This also entails that a multiplicativestyle advantage metric is generally stronger than an additive one. ", "page_idx": 5}, {"type": "text", "text": "When $\\eta(\\boldsymbol{x}_{i})$ and $\\pi_{i}(\\mathbf{x},z)$ are both less than $1/2$ (in the binary setting), we have $I(\\mathcal{M},\\mathcal{D},\\mathbf{x},z,i)=$ $\\Theta(\\log{\\frac{\\pi_{i}(\\mathbf{x},z)}{\\eta(x_{i})}})$ , with a symmetric expression for the case that both are close to 1. Because we assume i.i.d. sampling, one can easily see that Ia,b(M, D, x, z, i) = log PP((MM((xx,,  yy))  ==  zz  ||  yyii  ==  ba,,  xx)) , which makes it clear that for $\\epsilon$ -label DP mechanisms like $\\mathcal{M}_{\\sf R R}$ (at level $\\epsilon$ ) the above log ratio is at most $\\epsilon$ in absolute value for all $\\mathbf{x}$ and $\\mathbf{y}$ . On the other hand, for $\\mathcal{M}_{\\mathrm{LLP}}$ , there is always a small chance that all the examples in the bag will have the same label making the above log ratio infinite. However, for large $k$ and distributions $\\mathcal{D}$ in which the $\\eta(x,a)$ values are not too close to 0 or 1, the leakage $I_{a,b}(\\mathcal{M},\\mathcal{D},\\mathbf{x},z,i)$ might be small in most cases. ", "page_idx": 5}, {"type": "text", "text": "", "page_idx": 6}, {"type": "text", "text": "What values of multiplicative advantage should be considered acceptable? We argue that this probability should be viewed as a probability of system failure and set appropriately small. (For example, when running with $\\mathcal{M}_{\\mathrm{LLP}}$ on modern-scale data sets, we might create billions of bags; even a tiny probability of failure can lead to many bags whose individuals have their labels revealed exactly). The next theorem gives high probability bounds for $\\mathcal{M}_{\\mathrm{LLP}}$ in the simple case when the distribution $\\mathcal{D}$ is a product distribution. ", "page_idx": 6}, {"type": "text", "text": "Theorem 3.7. Fix a data distribution $\\mathcal{D}$ over features and binary labels, let $p=\\mathbb{P}_{(x,y)\\sim\\mathcal{D}}(y=1),$ , and assume the labels are independent of features (i.e., $\\mathcal{D}$ is a product of distributions over $\\mathcal{X}$ and $\\boldsymbol{{y}}_{.}$ ). Then there are universal constants c1, c2 > 0 such that for p \u2208(0, 1), all bag sizes k \u2265 c1p l(n1(\u22121p/)\u03b4 ), and all $i\\in[k]$ we have ", "page_idx": 6}, {"type": "equation", "text": "$$\n\\underset{(\\mathbf{x},\\mathbf{y})\\sim\\mathcal{D}_{\\mathcal{Y}\\mid x_{i}}^{m}}{\\mathbb{P}}\\left(\\Big\\lvert I_{1,0}(\\mathcal{M}_{L L P},\\mathcal{D},\\mathbf{x},\\mathcal{M}_{L L P}(\\mathbf{x},\\mathbf{y}),i)\\Big\\rvert\\!>c_{2}\\sqrt{\\frac{\\ln(1/\\delta)}{p(1-p)k}}\\right)\\le\\delta.\n$$", "text_format": "latex", "page_idx": 6}, {"type": "text", "text": "Then, when $k$ is sufficiently large and the conditional label probabilities $\\eta(x_{i})$ are all equal to some constant $p\\in(0,1)$ , the probability of failure drops off exponentially as $k$ increases. When working with a data set of size $m$ , we can substitute $\\delta\\,=\\,\\delta^{\\prime}\\cdot\\,{\\frac{k}{m}}$ to get a bound on the probability that any bag in the dataset exhibits extreme values of leakage $\\ddot{I_{a,b}}$ . For the setting covered by Theorem 3.7, one gets that the bags must be of size $k\\approx\\log(n)/(p(1-p))$ for the probability of extreme bags to converge towards 0. In the experiments in Section 4, we report results on both the additive and the multiplicative reconstruction advantage criteria. ", "page_idx": 6}, {"type": "text", "text": "3.3 Connection to prior work on auditing and membership inference, and distributional DP ", "text_level": 1, "page_idx": 6}, {"type": "text", "text": "Our approach on quantifying attack advantage can be viewed as fitting into a recent line of work on auditing learning algorithms via membership inference attacks. This class of attacks was introduced by [21] and subsequently studied in theory [11, 18] and practice [29]. Whether used as attacks or empirical lower bounds on differential privacy parameters [22], these approaches set up a hypothesis test for the presence or absence of a particular target record in the training data [15]. They diverge in whether they consider an adversary with access to all the rest of the training data (\u201cfully informed\u201d), or with only distributional knowledge of the rest of the training data (usually made available to the attacker as an independent sample drawn from the same distribution). ", "page_idx": 6}, {"type": "text", "text": "In our setting, testing for the presence of an individual makes no sense, since individual records\u2019 features are known. In the binary case, our measures are success metrics for testing the hypothesis that a particular individual\u2019s label is 1 as opposed to 0: Multiplicative advantage bounds the ratio of trueto false-positive rates of the Bayes\u2019 optimal test, while additive advantage measures the difference of true- and false-positive rates. This perspective was also taken in previous work: for example, [26] use such a test to lower-bound the differential privacy parameters of label-DP algorithms. However, their modeling assumes a fully informed adversary (that knows all labels). In contrast, we posit a reasonable model of adversarial uncertainty in order to to look at the risks of mechanisms such as label aggregation. In this respect, our approach follows more in the line of membership inference attacks that use only distributional knowledge, or to variants of differential privacy that assume adversarial uncertainty such as [9, 7, 16]. ", "page_idx": 6}, {"type": "text", "text": "Further relevant references include [25, 32], which have been developed more in the Cryptography literature. Like here, those papers propose to measure prediction advantage by comparing the information status of an agent before and after seen the obfuscated data. Yet, they do not consider the public features/private label mixed setting we study here, which is clearly necessary when investigating, for instance, the LLP mechanism. As a result, the measures proposed in [25, 32] generally fail to distinguish between the information gained as a result of: (1) correlation to the public features, and (2) the mechanism output. Hence, they overestimate the revelation of the mechanism, at times to the extreme. Consider, for clarity, the case where $\\eta(x)$ is either 0 or 1 for all $x$ . In this case the adversary\u2019s inference advantage is zero for any reasonable measure of advantage, since the adversary has perfect knowledge of the labels without the mechanism output. ", "page_idx": 6}, {"type": "text", "text": "4 Experiments ", "text_level": 1, "page_idx": 7}, {"type": "text", "text": "In this section, we demonstrate how our advantage measures can be used to quantify and compare the potential privacy leakage of RR, LLP, and two additional PETs with a range of privacy parameters. See Appendix C for full details on our PETs, experimental setup, and additional results. ", "page_idx": 7}, {"type": "text", "text": "Mechanisms. We empirically evaluate a number of proposed mechanisms for label privacy: randomized response (RR), Label Proportions (LLP), and two further PETs: LLP+Lap, where (zero-mean) Laplace noise is added to the label aggregate in each bag, and LLP+Geom, where geometric noise is added and then clipped so the estimated proportion lies in $[0,1]$ . The noise scale for both LLP+Lap and LLP $^{\\dagger}$ Geom is chosen so that the PETs satisfy $\\epsilon$ label differential privacy. Postprocessed clipped geometric noise is the mechanism for releasing a binary sum that is optimal among all differentially private mechanisms for several loss measures [20]. To minimize squared error, the optimal postprocessing is to correct for the bias introduced by clipping. We empirically study these advantage measures on a variety of synthetic and benchmark datasets, reporting either the AUC vs. advantage trade-off or the prior-vs-posterior scatter plots, that help shed light on the distribution of our advantage measures on different points in the dataset for the various PETs. ", "page_idx": 7}, {"type": "text", "text": "Estimating class conditionals for advantage and PET Utility. The advantage measures for all PETs we consider can all be computed as a function of the class conditional probabilities $\\eta(x)=\\mathbb{P}(y=1|x)$ . In our synthetic datasets we compute the advantage measures for different distributions on $\\eta(x)$ ; however, for non-synthetic data sets, the value of $\\eta(x)$ is not explicitly known. Instead, we estimate $\\eta(x)$ for each $x$ by training a classifier $h$ (without any PETs) and use the prediction probability $h(x)$ as a proxy for $\\eta(x)$ . We compute the figure of merit (additive or multiplicative advantage) for the optimal informed and uninformed attackers using these estimates. ", "page_idx": 7}, {"type": "image", "img_path": "Ai76ATrb2y/tmp/5872e344a9fdc8a7adedd2f31a9064dc59508208242750dcfcc24a2d95e5dba6.jpg", "img_caption": ["Figure 1: Prior-posterior scatter plots for LLP, RR, and LLP $^+$ Geom from two synthetic datasets (where the prior $\\eta(x)$ is drawn) and the two real-world datasets (where $\\eta(x)$ is approximated). The colors of the dots correspond to different parameter values for the PETs. For each bag size $k$ and distribution, we did 1000 independent runs. The further a point is from the $y\\ =\\ x$ dotted line, the more is revealed about its label as a result of the PET. "], "img_footnote": [], "page_idx": 7}, {"type": "text", "text": "We also measure the utility of each PET for trained models. For each dataset, PET, and privacy parameters, we apply the PET to the training labels to produce a privatized version. We then train a model on the privatized data using minibatch gradient descent with the Adam optimizer [24] and a loss function designed for the PET. For RR, the loss debiases the binary crossentropy loss when evaluated on the RR labels, and for LLP, LLP+Laplace, and LLP $^+$ Geom, we minimize the Empirical Proportion Risk defined in Section 2. For each dataset, PET, and privacy parameters, we perform a grid search over the learning rate parameter and report the test AUC of the best performing learning rate. All utility results are averaged over multiple runs. The maximum standard error in the mean for the reported AUCs is 0.0076 and the vast majority are less than 0.002. ", "page_idx": 7}, {"type": "text", "text": "Computing posterior distributions for each PET. Given a list of priors (or estimated priors) for each data point $\\{\\eta(x_{i})\\}_{i=1}^{n}$ , we analytically compute the posterior probabilities for each of the PETs we consider. ", "page_idx": 7}, {"type": "text", "text": "First, we apply Bayes\u2019 theorem and use the fact that the $x_{i}$ \u2019s are independent: ", "page_idx": 7}, {"type": "equation", "text": "$$\n\\mathbb{P}(y_{i}=1|x,\\mathcal{M}(x,y)=z)=\\frac{\\mathbb{P}(\\mathcal{M}(x,y)=z|x,y_{i}=1)\\cdot\\mathbb{P}(y_{i}=1|x_{i})}{\\mathbb{P}(\\mathcal{M}(x,y)=z|x)}.\n$$", "text_format": "latex", "page_idx": 7}, {"type": "text", "text": "For RR with flipping probability $p$ , Equation 1 evaluates to $\\scriptstyle{\\frac{p\\eta(x_{i})}{p\\eta(x_{i})-(1-p)(1-\\eta(x_{i})}}$ if the outcome of MRR(yi) = 0, and to(1\u2212p)(\u03b71(x\u2212ip))\u2212\u03b7p((x1i)\u2212\u03b7(xi) if the outcome is 1. ", "page_idx": 8}, {"type": "text", "text": "For label aggregation (LLP), the bags are independent, so we consider only a single bag at a time. $\\mathcal{M}_{\\mathrm{LLP}}$ is deterministic, so in the numerator $\\mathbb{P}(\\mathcal{M}_{\\mathrm{LLP}}(x,y)\\;\\;=\\;\\;\\dot{{\\boldsymbol{z}}}\\,|\\,x,y_{i}\\;\\;=\\;\\;\\bar{1})$ is the probability density at $z$ of a Poisson binomial distribution with flipping probabilities $(\\eta(x_{1}),\\dot{.}\\dot{.}\\dot{.}\\dot{,}\\eta(x_{i-1}),1,\\eta(x_{i+1}),\\dot{.}\\dot{.}\\dot{.}\\dot{,}\\eta(x_{k}))$ . Similarly, the denominator is the probability density at $z$ of a Poisson binomial distribution with flipping probabilities $(\\eta(x_{1}),\\dots,\\eta(\\Bar{x_{k}}))$ . ", "page_idx": 8}, {"type": "text", "text": "For $\\mathcal{M}_{\\mathrm{Lap-LLP}}$ and $\\mathcal{M}_{\\mathrm{Geom-LLP}}$ , the terms in Equation 1 are convolutions of the posterior for LLP and the Laplace or Geometric distributions, respectively. ", "page_idx": 8}, {"type": "text", "text": "Results. Our results are reported in Figures 1, 2, and 3, as well as in Appendix C. We used two synthentic datasets and two real-world datasets (Higgs and KDD12). Notice that Higgs is a relatively balanced dataset, while KDD12 is a quite imbalanced one. ", "page_idx": 8}, {"type": "text", "text": "Figure 1 give scatter plots of prior $\\mathbb{P}(y=1\\,|\\,\\mathbf{x})$ vs. posterior $\\mathbb{P}(y=1\\,|\\,\\mathbf{x},\\mathcal{M}(\\mathbf{x},\\mathbf{y})=z)$ distribution on the four datasets for LLP, RR and LLP $^+$ Geom with different colors for each value of parameters $k$ (for LLP and $\\mathrm{LLP+Geom})$ and $\\epsilon$ (for RR and $\\mathrm{LLP+Geom})$ ). The behavior of LLP+Lap is reported in Appendix C for completeness, but it turned out to be similar to that of $\\mathrm{LLP+Geom}$ . ", "page_idx": 8}, {"type": "text", "text": "It is instructive to observe how the points spread w.r.t. the main diagonal $y=x$ . Points that are on the diagonal have no label privacy loss as a result of the PET, because the posterior is identical to the prior. On the other hand, points with a posterior of 0 or 1 have complete privacy loss, since the posterior on the private label is deterministic. In general, a wider spread away from $y=x$ indicates more privacy loss. The scatter plots tend to form spindle shapes whose width is determined by the privacy parameters of the PETs. Yet, there is a substantial difference between LLP and RR. While RR generates points on the boundaries of the spindles (middle row), LLP tends to spread such points more uniformly. Moreover, some of the points for LLP lie on the edges of the square $[0,1]^{2}$ , which correspond to an infinite multiplicative advantage. LLP+Lap (bottom row) is somewhere in between, in that the points are also located inside the spindles, but never on the edges of the square. Note that a spindle boundary is the set of points having the same multiplicative advantage measure. Moreover, these differences become more pronounced on skewed datasets like KDD12 as the probability of homogenous bags (bags of all 0 labels or 1 labels) become much more likely. ", "page_idx": 8}, {"type": "image", "img_path": "Ai76ATrb2y/tmp/751f082de3dd9a88e08b093462359a655f9ca0d4c03de75dbe637fa3cffd739b.jpg", "img_caption": ["Figure 2: Top: Prior-posterior scatter plots for RR (grey), LLP (blue), and LLP+Geom (orange) with $\\epsilon\\,=\\,1$ and $k\\,=\\,8$ on the same datasets as in Figure 1. With these choice of parameters, the three mechanisms roughly achieve the same AUC on Higgs. Middle: Empirical CDFs of (the absolute value of) the multiplicative advantage for the three PETs on the four datasets. Bottom: CDFs of the additive advantage. "], "img_footnote": [], "page_idx": 8}, {"type": "text", "text": "These scatter plots are already suggestive of the expected behavior of the utility-privacy tradeoff curves that will come next in Figure 3. Given an allowed level of privacy (as measured by either additive or multiplicative advantage) each point in the interior of the spindle associated with that privacy level will also lie in the boundary of a smaller (thus higher privacy) spindle. This will make inference harder, thereby reducing (average) utility at that level of privacy. Following this intuition, we expect RR to achieve a higher utility-privacy curve than LLP, with LLP $^+$ Geom somewhere in between. A more detailed comparison between RR and LLP $^+$ Geom (or LLP+Lap) is in Appendix D. ", "page_idx": 8}, {"type": "text", "text": "Figure 2 helps further illustrate the different behavior of the considered PETs vis-\u00e0-vis the advantage measure. On the four datasets, we pick here a set of parameters that make the PETs AUC-comparable on Higgs. We then plot the empirical Cumulative Distribution Functions (CDFs) on the four datasets for both multiplicative (middle row) and additive (last row) measures. While the CDFs of additive measures are roughly similar across the three PETs, this is not the case for the highly skewed Beta(2,30) and KDD12 datasets, where one can easily spot for LLP (blue line) the presence of a significant mass of points with large multiplicative advantage. Note that in the middle row, the CDF of RR (grey line) is just a vertical line $\\left.x\\right.=1$ ) while the CDF of LLP+Geom (orange line) first follows the blue line and then the grey one. These high multiplicative advantage points cannot be detected when only relying on the CDFs of the additive measure. ", "page_idx": 8}, {"type": "text", "text": "", "page_idx": 9}, {"type": "text", "text": "Utility vs. advantage tradeoff on benchmark datasets. The experiments so far have compared the distribution of individual additive and multiplicative advantage induced by RR, LLP, and LLP $^{\\cdot+}$ Geom for various parameter settings and datasets. However, the use of PETs is always a tradeoff between utility and privacy, since if we cared about privacy alone, the best strategy would be to release no information at all. Figure 3 plots the AUC vs advantage for each PET as we vary the PET\u2019s privacy parameters. Note that, since the $x$ -axis is advantage, we are able to put the normally incomparable privacy parameters of the PETs on equal footing. For RR and LLP, the single privacy parameter $\\mathbf{\\bar{\\rho}}$ and $k$ , respectively) traces out an AUC vs Advantage curve. Since LLP $+.$ Lap and LLP $^+$ Geom have two parameters, there is an area of achievable AUC vs Advantage pairs. For these mechanisms, we plot a separate curve for each bag size $k$ showing the tradeoff when varying $\\epsilon$ for that $k$ . ", "page_idx": 9}, {"type": "text", "text": "When measuring privacy loss via multiplicative advantage, RR has the best privacy vs. accuracy tradeoff compared to all other PETs. This is consistent with the observations in Fig. 2. In particular, the three mechanisms (with the given parameters) have almost the same AUC on Higgs. Yet when looking at the CDFs of the multiplicative measure one sees that the two DP mechanisms have bounded MAs whereas LLP has a significant number of extreme values. This trend is more pronounced for KDD12 than Higgs. Thus, for the same AUC, LLP has a higher multiplicative advantage, with a more pronounced gap for KDD12 than for Higgs. On the other hand, Fig. 2 also shows that the CDFs of the additive advantage are roughly the same for all three mechanisms (again, at the same AUC). Thus, in Fig. 3 the mechanisms have similar AUC vs advantage tradeoffs. ", "page_idx": 9}, {"type": "image", "img_path": "Ai76ATrb2y/tmp/c53b2503eee9a8a31aac20f5a5b329eaf50056535464affcab78863bf8394a76.jpg", "img_caption": [], "img_footnote": [], "page_idx": 9}, {"type": "text", "text": "Figure 3: Privacy vs utility tradeoff curves for the various PETs on the Higgs and KDD12 datasets. Utility is measured by AUC on test set, while privacy is either the additive measure (bottom row) or the 98th-percentile of the multiplicative measure (so as to rule out the infinite multiplicative advantage cases that can occur for LLP). Each point corresponds to a setting of the privacy parameter for the PET (\u03f5 for RR, $k$ for LLP, and both for $\\mathrm{LLP+Geom})$ ). The $x$ -coordinate is the advantage (either additive or multiplicative) value for that PET, while the $y$ -coordinate is the test AUC of a model trained from the output of that PET. The AUC of the model trained without a PET roughly corresponds to the top value achieved by these curves. ", "page_idx": 9}, {"type": "text", "text": "5 Discussion and Conclusions ", "text_level": 1, "page_idx": 9}, {"type": "text", "text": "We study ways to audit label privatization mechanisms for commonly used PETs: randomized response, random label aggregation, and combinations thereof. Together, the additive and multiplicative advantage measures we introduced paint a richer picture of the reconstruction risks posed by different parameter settings, and for the first time allow us to compare their privacy-accuracy trade-off curves. ", "page_idx": 9}, {"type": "text", "text": "The measures we propose are tailored to settings where the data are sampled i.i.d. from a distribution, and each record consists of public features together with one sensitive binary feature. Computing these measures empirically requires estimates of the adversary\u2019s label uncertainty, which won\u2019t be correct if the adversary has significant side information or, crucially, if the same data are reused in multiple mechanisms. Handling such complex settings requires more general concepts like differential privacy. Another complexity emerges when we consider settings like click prediction, where a minority label (a click) is viewed as qualitatively more revelatory than the majority one (no click). While the measures we consider are agnostic to the label semantics, principled ways to incorporate complex semantics might be valuable and shed light on heuristics used in practice. ", "page_idx": 9}, {"type": "text", "text": "References ", "text_level": 1, "page_idx": 10}, {"type": "text", "text": "[1] Chrome privacy sandbox. https://developers.google.com/privacy-sandbox/relevance/ attribution-reporting.   \n[2] Skadnetwork 4 release notes. https://developer.apple.com/documentation/storekit/ skadnetwork/skadnetwork_release_notes/skadnetwork_4_release_notes.   \n[3] Y. W. Aden. Kdd cup 2012, track 2. https://kaggle.com/competitions/kddcup2012-track2, 2012.   \n[4] P. Baldi, P. Sadowski, and D. Whiteson. Searching for exotic particles in high-energy physics with deep learning. Nature Communications, 5(1):4308, 2014.   \n[5] B. Balle, G. Cherubin, and J. Hayes. Reconstructing training data with informed adversaries. In 43rd IEEE Symposium on Security and Privacy, SP 2022, San Francisco, CA, USA, May 22-26, 2022, pages 1138\u20131156. IEEE, 2022.   \n[6] A. D. Barbour and T. Lindvall. Translated poisson approximation for markov chains. Journal of Theoretical Probability, 19(3):609\u2013630, 2006.   \n[7] R. Bassily, A. Groce, J. Katz, and A. Smith. Coupled-worlds privacy: Exploiting adversarial uncertainty in statistical data privacy. In 2013 IEEE 54th Annual Symposium on Foundations of Computer Science, pages 439\u2013448. IEEE, 2013.   \n[8] J. J. Benedetto. Harmonic analysis and applications. CRC Press, 2020.   \n[9] R. Bhaskar, A. Bhowmick, V. Goyal, S. Laxman, and A. Thakurta. Noiseless database privacy. In Advances in Cryptology\u2013ASIACRYPT 2011: 17th International Conference on the Theory and Application of Cryptology and Information Security, Seoul, South Korea, December 4-8, 2011. Proceedings 17, pages 215\u2013232. Springer, 2011.   \n[10] A. Blum, C. Dwork, F. McSherry, and K. Nissim. Practical privacy: the sulq framework. In Proceedings of the twenty-fourth ACM SIGMOD-SIGACT-SIGART symposium on Principles of database systems, pages 128\u2013138, 2005.   \n[11] M. Bun, J. Ullman, and S. Vadhan. Fingerprinting codes and the price of approximate differential privacy. In Proceedings of the forty-sixth annual ACM symposium on Theory of computing, pages 1\u201310, 2014.   \n[12] R. Busa-Fekete, H. Choi, T. Dick, C. Gentile, and A. Munos Medina. Easy learning from label proportions. In Neurips 2023, 2023.   \n[13] R. I. Busa-Fekete, A. M. Medina, U. Syed, and S. Vassilvitskii. Label differential privacy and private training data release. In A. Krause, E. Brunskill, K. Cho, B. Engelhardt, S. Sabato, and J. Scarlett, editors, International Conference on Machine Learning, ICML 2023, 23-29 July 2023, Honolulu, Hawaii, USA, volume 202 of Proceedings of Machine Learning Research, pages 3233\u20133251. PMLR, 2023.   \n[14] C. Carey, T. Dick, A. Epasto, A. Javanmard, J. Karlin, S. Kumar, A. Mu\u00f1oz Medina, V. Mirrokni, G. H. Nunes, S. Vassilvitskii, et al. Measuring re-identification risk. Proceedings of the ACM on Management of Data, 1(2):1\u201326, 2023.   \n[15] N. Carlini, S. Chien, M. Nasr, S. Song, A. Terzis, and F. Tram\u00e8r. Membership inference attacks from first principles. In 2022 IEEE Symposium on Security and Privacy (SP), pages 1897\u20131914, 2022.   \n[16] D. Desfontaines and B. Pej\u00f3. Sok: Differential privacies. Proceedings on Privacy Enhancing Technologies, 2020.   \n[17] I. Dinur and K. Nissim. Revealing information while preserving privacy. In Proceedings of the TwentySecond ACM SIGMOD-SIGACT-SIGART Symposium on Principles of Database Systems, PODS $\\sqrt{03}$ , pages 202\u2013210. ACM, 2003.   \n[18] C. Dwork, A. Smith, T. Steinke, J. Ullman, and S. Vadhan. Robust traceability from trace amounts. In 2015 IEEE 56th Annual Symposium on Foundations of Computer Science, pages 650\u2013669. IEEE, 2015.   \n[19] B. Ghazi, N. Golowich, R. Kumar, P. Manurangsi, and C. Zhang. Deep learning with label differential privacy. Advances in neural information processing systems, 34:27131\u201327145, 2021.   \n[20] A. Ghosh, T. Roughgarden, and M. Sundararajan. Universally utility-maximizing privacy mechanisms. In arXiv:0811.2841, 2009.   \n[21] N. Homer, S. Szelinger, M. Redman, D. Duggan, W. Tembe, J. Muehling, J. V. Pearson, D. A. Stephan, S. F. Nelson, and D. W. Craig. Resolving individuals contributing trace amounts of DNA to highly complex mixtures using high-density SNP genotyping microarrays. PLoS genetics, 4(8):e1000167, 2008.   \n[22] M. Jagielski, J. Ullman, and A. Oprea. Auditing differentially private machine learning: how private is private sgd? In Proceedings of the 34th International Conference on Neural Information Processing Systems, 2020.   \n[23] Y. Juan, Y. Zhuang, W.-S. Chin, and C.-J. Lin. Field-aware factorization machines for ctr prediction. In Proceedings of the 10th ACM conference on recommender systems, pages 43\u201350, 2016.   \n[24] D. P. Kingma and J. Ba. Adam: A method for stochastic optimization. In Y. Bengio and Y. LeCun, editors, 3rd International Conference on Learning Representations, ICLR 2015, San Diego, CA, USA, May 7-9, 2015, Conference Track Proceedings, 2015.   \n[25] A. Makhdoumi, S. Salamatian, N. Fawaz, and M. M\u00e9dard. From the information bottleneck to the privacy funnel. In 2014 IEEE Information Theory Workshop, ITW 2014, pages 501\u2013505. IEEE, 2014.   \n[26] M. Malek, I. Mironov, K. Prasad, I. Shilov, and F. Tramer. Antipodes of label differential privacy: Pate and alibi. In Advances in Neural Information Processing Systems, volume 34, pages 6934\u20136945, 2021.   \n[27] H. Reeve and Kab\u00e1n. Classification with unknown class-conditional label noise on non-compact feature spaces. In Proceedings of the Thirty-Second Conference on Learning Theory, volume 99 of Proceedings of Machine Learning Research, pages 2624\u20132651. PMLR, 25\u201328 Jun 2019.   \n[28] A. R\u00f6llin. Translated Poisson approximation using exchangeable pair couplings. The Annals of Applied Probability, 17(5-6):1596 \u2013 1614, 2007.   \n[29] R. Shokri, M. Stronati, C. Song, and V. Shmatikov. Membership inference attacks against machine learning models. In 2017 IEEE Symposium on Security and Privacy, SP 2017, San Jose, CA, USA, May 22-26, 2017, pages 3\u201318. IEEE Computer Society, 2017.   \n[30] S. L. Warner. Randomized response: A survey technique for eliminating evasive answer bias. JASA, pages 63\u201369, 1965.   \n[31] R. Wu, J. P. Zhou, K. Q. Weinberger, and C. Guo. Does label differential privacy prevent label inference attacks? In International Conference on Artificial Intelligence and Statistics, pages 4336\u20134347. PMLR, 2023.   \n[32] H. Xiao and S. Devadas. Automatic privacy measurement and control of data processing. In Advances in Cryptology - CRYPTO 2023 - 43rd Annual Inter- national Cryptology Conference, CRYPTO 2023, volume 14082 of Lecture Notes in Computer Science, pages 611\u2013644, 2023.   \n[33] F. Yu, D. Liu, S. Kumar, T. Jebara, and S. Chang. $\\alpha$ -svm for learning with label proportions. In ICML, Proceedings of the 30th International Conference on Machine Learning, pages 504\u2013512, 2013. ", "page_idx": 10}, {"type": "text", "text": "", "page_idx": 11}, {"type": "text", "text": "A Proofs for Section 3 ", "text_level": 1, "page_idx": 12}, {"type": "text", "text": "We start off by providing a preliminary result that will be useful throughout all proofs. ", "page_idx": 12}, {"type": "text", "text": "A.1 Preliminary results ", "text_level": 1, "page_idx": 12}, {"type": "text", "text": "Consider, for a specific $i\\in[m]$ , the random variables ", "page_idx": 12}, {"type": "equation", "text": "$$\nf_{1i}(\\mathbf{x})=\\operatorname*{sup}_{A_{\\mathrm{informed}}}\\mathbf{\\mathbb{P}}_{\\sim\\mathcal{D}_{y\\mid\\mathbf{x}}^{k}}(\\mathcal{A}_{\\mathrm{informed}}(\\mathbf{x},\\mathcal{M}(\\mathbf{x},\\mathbf{y}))_{i}=y_{i}\\mid\\mathbf{x})\n$$", "text_format": "latex", "page_idx": 12}, {"type": "equation", "text": "$$\nf_{2i}(\\mathbf{x})=\\operatorname*{sup}_{A_{\\mathrm{uninfored}}}\\mathbf{\\textsc{P}}_{\\mathbf{y}\\sim\\mathcal{D}_{\\mathbf{y}\\mid\\mathbf{x}}^{k}}(\\mathcal{A}_{\\mathrm{uninformed}}(\\mathbf{x},\\mathcal{M}_{\\perp}(\\mathbf{x},\\mathbf{y}))_{i}=y_{i}\\mid\\mathbf{x})\\;.\n$$", "text_format": "latex", "page_idx": 12}, {"type": "text", "text": "The relevance of $f_{1i}$ and $f_{2i}$ stems from the fact that for the mechanisms $\\mathcal{M}$ we consider in this paper, the advantages EAdv, IEAdv, and HPAdv will be defined in terms of $f_{1i}$ and $f_{2i}$ . ", "page_idx": 12}, {"type": "text", "text": "Lemma A.1. For any PET $\\mathcal{M}$ , any $\\textbf{x}\\in\\:\\mathcal{X}$ , any conditional data distribution $\\mathcal{D}_{\\mathcal{Y}|\\mathbf{x}.}$ , number of examples $k$ , and $i\\in[m]$ , we have ", "page_idx": 12}, {"type": "equation", "text": "$$\nf_{1i}(\\mathbf{x})-f_{2i}(\\mathbf{x})=\\operatorname*{min}\\{\\eta(x_{i}),1-\\eta(x_{i})\\}-\\underset{\\mathbf{y}\\sim\\mathcal{D}_{\\mathcal{V}|\\times}}{\\mathbb{E}}\\Bigg[\\operatorname*{min}_{b\\in\\{0,1\\}}\\left\\{\\mathbb{P}(y_{i}=b\\mid\\mathbf{x},\\mathcal{M}(\\mathbf{x},\\mathbf{y}))\\right\\}|\\,\\mathbf{x}\\Bigg]\\,,\n$$", "text_format": "latex", "page_idx": 12}, {"type": "text", "text": "where $\\eta:x\\mapsto\\mathbb{P}(y=1\\mid x)$ . Moreover, the optimal (informed) adversary $A^{*}$ is: ", "page_idx": 12}, {"type": "equation", "text": "$$\n\\begin{array}{r}{\\mathcal{A}^{*}(\\mathbf{x},\\mathcal{M}(\\mathbf{x},\\mathbf{y}))_{i}:=\\left\\{\\begin{array}{r l}{1}&{i f\\mathbb{P}(y_{i}=1\\mid\\mathbf{x},\\mathcal{M}(\\mathbf{x},\\mathbf{y}))\\geq1/2}\\\\ {0}&{o t h e r w i s e\\;.}\\end{array}\\right.}\\end{array}\n$$", "text_format": "latex", "page_idx": 12}, {"type": "text", "text": "Proof. Set for brevity $z=\\mathcal{M}_{\\perp}(\\mathbf{x},\\mathbf{y})$ . Since $\\mathcal{M}_{\\perp}$ outputs null, and the $(x_{j},y_{j})$ pairs for $j\\in[m]$ are independent, we have ", "page_idx": 12}, {"type": "equation", "text": "$$\n\\mathbb{P}(y_{i}=1\\mid\\mathbf{x},z)=\\mathbb{P}(y_{i}=1\\mid x_{i})=\\eta(x_{i}),\n$$", "text_format": "latex", "page_idx": 12}, {"type": "text", "text": "It immediately follows that the best attacker $\\mathcal{A}_{\\mathrm{unininformed}}$ involved in the computation of $f_{2i}(\\mathbf{x})$ is the Bayes optimal predictor ", "page_idx": 12}, {"type": "equation", "text": "$$\n{\\hat{y}}_{i}=\\operatorname{arg}_{\\operatorname{\\boldsymbol{b}}\\in\\{0,1\\}}{\\mathbb{P}}(y_{i}=b\\mid x_{i})\n$$", "text_format": "latex", "page_idx": 12}, {"type": "text", "text": "so that ", "page_idx": 12}, {"type": "equation", "text": "$$\nf_{2i}(\\mathbf{x})=1-\\operatorname*{min}\\{\\eta(x_{i}),1-\\eta(x_{i})\\}\\;.\n$$", "text_format": "latex", "page_idx": 12}, {"type": "text", "text": "Let us now turn to $f_{1i}$ and fix any adversary $\\boldsymbol{A}_{\\mathrm{informed}}$ . We lower bound the probability that the adversary makes a mistake on $y_{i}$ . Let $z=\\mathcal{M}(\\mathbf{x},\\mathbf{y})$ be the output of the PET, and $(\\hat{y}_{1},\\dots,\\hat{y}_{m})=$ $A_{\\mathrm{informed}}(\\mathbf{x},z)$ be the output of the adversary. Since $\\hat{y}_{i}$ is $(\\mathbf{x},z)$ -measurable, we have ", "page_idx": 12}, {"type": "equation", "text": "$$\n\\begin{array}{r l}&{{\\mathbb P}(\\hat{y}_{i}=y_{i}\\ |\\ \\mathbf x,z)={\\mathbb P}(\\hat{y}_{i}=1\\ |\\ y_{i}=1,\\mathbf x,z)\\,{\\mathbb P}(y_{i}=1\\ |\\ \\mathbf x,z)}\\\\ &{\\qquad\\qquad\\qquad+\\,{\\mathbb P}(\\hat{y}_{i}=0\\ |\\ y_{i}=0,\\mathbf x,z)\\,{\\mathbb P}(y_{i}=0\\ |\\ \\mathbf x,z)}\\\\ &{\\qquad\\qquad\\qquad\\qquad=1\\,\\{\\hat{y}_{i}=1\\}\\,{\\mathbb P}(y_{i}=1\\ |\\ \\mathbf x,z)+1\\,\\{\\hat{y}_{i}=0\\}\\,{\\mathbb P}(y_{i}=0\\ |\\ \\mathbf x,z)\\;.}\\end{array}\n$$", "text_format": "latex", "page_idx": 12}, {"type": "text", "text": "Hence ", "page_idx": 12}, {"type": "equation", "text": "$$\n\\begin{array}{r l}&{\\mathbb{P}(\\hat{y}_{i}=y_{i}\\,|\\,\\mathbf{x})=\\mathbb{E}_{z\\,|\\,\\mathbf{x}}\\Big[\\mathbb{1}\\{\\hat{y}_{i}=1\\}\\,\\mathbb{P}(y_{i}=1\\,|\\,\\,\\mathbf{x},z)+\\mathbb{1}\\{\\hat{y}_{i}=0\\}\\,\\mathbb{P}(y_{i}=0\\,|\\,\\,\\mathbf{x},z)\\,|\\,\\mathbf{x}\\Big]}\\\\ &{\\qquad\\qquad\\leq\\mathbb{E}_{z\\,|\\,\\mathbf{x}}\\Big[\\operatorname*{max}\\{\\mathbb{P}(y_{i}=1\\,|\\,\\,\\mathbf{x},z),\\mathbb{P}(y_{i}=0\\,|\\,\\,\\mathbf{x},z)\\}\\,|\\,\\mathbf{x}\\Big]}\\\\ &{\\qquad\\qquad=\\mathbb{E}_{\\mathbf{y}\\sim\\mathcal{D}_{\\mathcal{Y}\\mid\\,\\mathbf{x}}}\\Big[\\operatorname*{max}\\{\\mathbb{P}(y_{i}=1\\,|\\,\\,\\mathbf{x},\\mathcal{M}(\\mathbf{x},\\mathbf{y})),\\mathbb{P}(y_{i}=0\\,|\\,\\,\\mathbf{x},\\mathcal{M}(\\mathbf{x},\\mathbf{y}))\\}\\,|\\,\\mathbf{x}\\Big]}\\\\ &{\\qquad\\qquad=1-\\mathbb{E}_{\\mathbf{y}\\sim\\mathcal{D}_{\\mathcal{Y}\\mid\\,\\mathbf{x}}}\\big[\\operatorname*{min}\\{\\mathbb{P}(y_{i}=1\\,|\\,\\,\\mathbf{x},\\mathcal{M}(\\mathbf{x},\\mathbf{y})),\\mathbb{P}(y_{i}=0\\,|\\,\\,\\mathbf{x},\\mathcal{M}(\\mathbf{x},\\mathbf{y}))\\}\\,|\\,\\mathbf{x}\\big]}\\\\ &{\\qquad\\qquad=f_{1i}(\\mathbf{x})\\,,}\\end{array}\n$$", "text_format": "latex", "page_idx": 12}, {"type": "text", "text": "where the inequality holds because the maximum probability term is never smaller than the probability term selected by the indicator variables. Incidentally, the above also shows that the optimal informed adversary is the one that selects the larger of the two probability terms with probability one, which makes the inequality above hold with equality. \u53e3 ", "page_idx": 12}, {"type": "text", "text": "At this point, we use the fact that ", "page_idx": 12}, {"type": "equation", "text": "$$\n\\mathrm{EAdv}(\\mathcal{M}_{\\mathrm{LLP}},\\mathcal{D})=\\mathbb{E}_{\\mathbf{x}}[f_{1i}(\\mathbf{x})-f_{2i}(\\mathbf{x})]\n$$", "text_format": "latex", "page_idx": 12}, {"type": "text", "text": "holds for all $i\\in[m]$ since the data sequence $(x_{1},y_{1}),\\dots,(x_{k},y_{k})$ is i.i.d. ", "page_idx": 12}, {"type": "text", "text": "A.2 Proof of Theorem 3.2 ", "text_level": 1, "page_idx": 13}, {"type": "text", "text": "Theorem 3.2. Fix a data distribution $\\mathcal{D}$ , let $p=\\mathbb{P}_{(x,y)\\sim{\\cal D}}(y=1)$ , and fix an arbitrary threshold $\\beta\\in[0,1/2]$ . If labels are independent of features (i.e., $\\mathcal{D}$ is a product of distributions over $\\mathcal{X}$ and $\\boldsymbol{\\wp}$ ), then for all bag sizes $k\\geq1$ we have: ", "page_idx": 13}, {"type": "equation", "text": "$$\n\\begin{array}{r l}&{^{7n\\jmath\\sigma\\prime}\\ a u\\ \\nu u g\\ ^{3\\iota,\\sigma\\delta\\circ\\wedge}\\simeq\\textrm{1}w e\\ ^{n u\\nu e}.}\\\\ &{\\mathrm{EAdv}({\\mathcal{M}}_{L L P},\\mathcal{D})=\\operatorname*{min}\\{p,1-p\\}-\\mathbb{E}_{\\alpha}[\\operatorname*{min}\\{\\alpha,1-\\alpha\\}]\\leq\\left\\{\\sqrt{\\frac{p(1-p)}{k}}\\quad\\#f p\\in[0,1]\\right.}\\\\ &{\\left.t f|p-1/2|\\geq\\beta,\\right.}\\end{array}\n$$", "text_format": "latex", "page_idx": 13}, {"type": "text", "text": "where $\\Omega(\\cdot)$ hides constants independent of $\\beta$ and $k$ . ", "page_idx": 13}, {"type": "text", "text": "Proof. For a given $(x_{j},y_{j})$ in the dataset, we can consider without loss of generality only the size- $k$ bag that $x_{j}$ falls into, and then refer the indexing to this bag only. ", "page_idx": 13}, {"type": "text", "text": "Then set for brevity $\\begin{array}{r}{\\Sigma=k\\alpha=\\sum_{i=1}^{k}y_{i}}\\end{array}$ . From (3), we can write ", "page_idx": 13}, {"type": "equation", "text": "$$\n\\begin{array}{r l}&{\\mathrm{EAdv}(\\mathcal{M}_{\\mathrm{LLP}},\\mathcal{D})=\\mathbb{E}_{\\mathbf{x}}\\left[\\operatorname*{min}\\{\\eta(x_{i}),1-\\eta(x_{i})\\}\\right]-\\mathbb{E}_{\\Sigma}\\left[\\operatorname*{min}_{b\\in\\{0,1\\}}\\left\\{\\mathbb{P}(y_{i}=b\\mid\\Sigma)\\right\\}\\right]}\\\\ &{\\qquad\\qquad\\qquad=\\operatorname*{min}\\{p,1-p\\}-\\mathbb{E}_{\\Sigma}\\left[\\operatorname*{min}_{b\\in\\{0,1\\}}\\left\\{\\mathbb{P}(y_{i}=b\\mid\\Sigma)\\right\\}\\right]\\,.}\\end{array}\n$$", "text_format": "latex", "page_idx": 13}, {"type": "text", "text": "Since $\\mathbb{P}(y_{i}=1\\,|\\,\\Sigma)=\\alpha$ independent of $i$ and $p$ , the minimum value in the second expectation is ", "page_idx": 13}, {"type": "equation", "text": "$$\n\\mathbb{E}_{\\alpha}[\\operatorname*{min}\\{\\alpha,1-\\alpha\\}]\\;,\n$$", "text_format": "latex", "page_idx": 13}, {"type": "text", "text": "and the claimed equality for $\\operatorname{EAdv}(\\mathcal{M}_{\\mathrm{LLP}},\\mathcal{D})$ follows. ", "page_idx": 13}, {"type": "text", "text": "As for the inequality with general $p\\in[0,1]$ , note that, when $a,b\\in[0,1]$ , ", "page_idx": 13}, {"type": "equation", "text": "$$\n\\operatorname*{min}\\{a,1-a\\}-\\operatorname*{min}\\{b,1-b\\}\\leq|a-b|\\;.\n$$", "text_format": "latex", "page_idx": 13}, {"type": "text", "text": "If applied to the expression ", "page_idx": 13}, {"type": "equation", "text": "$$\n\\operatorname*{min}\\{p,1-p\\}-\\mathbb{E}_{\\alpha}[\\operatorname*{min}\\{\\alpha,1-\\alpha\\}]\n$$", "text_format": "latex", "page_idx": 13}, {"type": "text", "text": "this gives ", "page_idx": 13}, {"type": "equation", "text": "$$\n\\operatorname{EAdv}(\\mathcal{M}_{\\mathrm{LLP}},\\mathcal{D})\\leq\\mathbb{E}_{\\alpha}[|\\alpha-p|]\\leq\\sqrt{\\mathbb{E}_{\\alpha}[(\\alpha-p)^{2}]}=\\sqrt{\\frac{p(1-p)}{k}}\\,,\n$$", "text_format": "latex", "page_idx": 13}, {"type": "text", "text": "where the second inequality is Jensen\u2019s. ", "page_idx": 13}, {"type": "text", "text": "Finally, in the case where $|p-1/2|\\geq\\beta$ , for some gap $\\beta>0$ , we can proceed through a more direct analysis. Assume $p\\leq1/2-\\beta$ . We can write ", "page_idx": 13}, {"type": "equation", "text": "$$\n\\begin{array}{r l}&{\\operatorname*{min}\\{\\alpha,1-\\alpha\\}=\\operatorname*{min}\\{\\alpha,1-\\alpha\\}\\mathbb{I}\\{\\alpha\\leq1/2\\}+\\operatorname*{min}\\{\\alpha,1-\\alpha\\}\\mathbb{I}\\{\\alpha>1/2\\}}\\\\ &{\\qquad\\qquad\\qquad+\\alpha\\mathbb{I}\\{\\alpha>1/2\\}-\\alpha\\mathbb{I}\\{\\alpha>1/2\\}}\\\\ &{\\qquad\\qquad=\\alpha\\mathbb{I}\\{\\alpha\\leq1/2\\}+(1-\\alpha)\\mathbb{I}\\{\\alpha>1/2\\}+\\alpha\\mathbb{I}\\{\\alpha>1/2\\}-\\alpha\\mathbb{I}\\{\\alpha>1/2\\}}\\\\ &{\\qquad\\qquad=\\alpha-(2\\alpha-1)\\mathbb{I}\\{\\alpha>1/2\\}}\\\\ &{\\qquad\\qquad\\geq\\alpha-\\mathbb{I}\\{\\alpha>1/2\\}\\;.}\\end{array}\n$$", "text_format": "latex", "page_idx": 13}, {"type": "text", "text": "Hence ", "page_idx": 13}, {"type": "equation", "text": "$$\n\\mathbb{E}_{\\alpha}[\\operatorname*{min}\\{\\alpha,1-\\alpha\\}]\\geq p-\\mathbb{P}(\\alpha>1/2)\\;.\n$$", "text_format": "latex", "page_idx": 13}, {"type": "text", "text": "Now, $p<1/2$ implies $\\operatorname*{min}\\{p,1-p\\}=p$ , which leads us to ", "page_idx": 13}, {"type": "equation", "text": "$$\n\\operatorname*{min}\\{p,1-p\\}-\\mathbb{E}_{\\alpha}[\\operatorname*{min}\\{\\alpha,1-\\alpha\\}]\\leq\\mathbb{P}(\\alpha>1/2)\\;.\n$$", "text_format": "latex", "page_idx": 13}, {"type": "text", "text": "Finally, by the standard Bernstein inequality we have ", "page_idx": 13}, {"type": "equation", "text": "$$\n\\mathbb{P}(\\alpha>1/2)\\le\\exp\\left(-\\frac{k(1/2-p)^{2}}{2p(1-p)+(1-2p)/3}\\right)=e^{-\\Omega(k\\beta^{2})}\\;,\n$$", "text_format": "latex", "page_idx": 13}, {"type": "text", "text": "which gives the second inequality. ", "page_idx": 13}, {"type": "text", "text": "A similar argument holds if we reverse the assumption on $p$ to $p\\geq1/2+\\beta$ . ", "page_idx": 13}, {"type": "text", "text": "A.3 Proof of Theorem 3.3 ", "text_level": 1, "page_idx": 14}, {"type": "text", "text": "Again, as in the proof of Theorem 3.2, for a given $(x_{j},y_{j})$ in the dataset, we can consider with no loss of generality only the size- $k$ bag that $x_{j}$ falls into, and then refer the indexing to this bag only. ", "page_idx": 14}, {"type": "text", "text": "Recall that, for a general distribution $\\mathcal{D}$ over $\\mathcal{X}\\!\\times\\!\\mathcal{Y}$ the distribution of random variable $\\begin{array}{r}{k\\alpha=\\sum_{j=1}^{k}y_{j}}\\end{array}$ conditioned on $\\mathbf{x}=(x_{1},\\ldots,x_{k})$ is Poisson Binomial (PBin) with parameters $\\{\\eta(x_{j})\\}_{j=1}^{k}$ , that is, the distribution of the sum of $k$ independent Bernoulli random variables $y_{j}$ , each with its own bias $\\eta(x_{j})$ , where $\\eta(x)=\\mathbb{P}(y=1\\,|\\,x)$ . ", "page_idx": 14}, {"type": "text", "text": "Notation. For simplicity of notation we let $\\eta_{i}=\\eta(x_{i})$ be the conditional positive probability of a label given feature vector $x$ and let $p=\\mathbb{E}[\\eta_{i}]$ . For fixed feature vectors $\\mathbf{x}=\\left(x_{1},\\ldots,x_{k},x_{k+1}\\right)$ , let $A_{i}$ denote a Bernoulli random variable with mean $\\eta_{i}$ , and let $\\textstyle Z_{k}=\\sum_{j=1}^{k}A_{j}$ ", "page_idx": 14}, {"type": "text", "text": "We recall the statement of the theorem we want to prove. ", "page_idx": 14}, {"type": "text", "text": "Theorem 3.3. Let $\\mathcal{D}$ be an arbitrary distribution on $\\mathcal X\\!\\times\\!\\mathcal Y$ , $p=\\mathbb{E}[\\eta(x)]$ , and $\\mu=\\mathbb{E}[\\eta(x)(1\\!-\\!\\eta(x))]$ . Then, for all bag sizes $k\\geq2$ we have: ", "page_idx": 14}, {"type": "equation", "text": "$$\n\\stackrel{-}{\\mathrm{EAdv}}(\\mathcal{M}_{L L P},\\mathcal{D})=\\widetilde{O}\\bigg(\\frac{\\mu^{1/4}(p(1-p))^{1/4}}{\\sqrt{k}}+\\frac{\\mu^{1/4}}{k}\\bigg)\\;,\n$$", "text_format": "latex", "page_idx": 14}, {"type": "text", "text": "whereO hides logarithmic factors in $k$ . ", "page_idx": 14}, {"type": "text", "text": "The above theorem is a direct consequence of the following Lemma. ", "page_idx": 14}, {"type": "text", "text": "Lemma A.2. Let $\\boldsymbol{\\mathrm{\\Delta}}\\boldsymbol{\\mathrm{\\Omega}}_{\\boldsymbol{B}}$ denote a bag with $k+1$ elements. Let ", "page_idx": 14}, {"type": "equation", "text": "$$\nc_{k}={\\frac{1}{\\sqrt{k}}}\\left({\\frac{1}{3}}\\log{8k}+{\\frac{1}{6}}{\\sqrt{2\\log{8k}+12k p(1-p)\\log{8k}}}\\right)={\\widetilde{O}}\\left({\\sqrt{p(1-p)}}+{\\frac{1}{\\sqrt{k}}}\\right)\\,.\n$$", "text_format": "latex", "page_idx": 14}, {"type": "text", "text": "Then ", "page_idx": 14}, {"type": "equation", "text": "$$\n\\operatorname{EAdv}(\\mathcal{M}_{L L P},\\mathcal{D})\\leq k^{1/4}\\sqrt{2c_{k}}\\sqrt{\\left(\\frac{1}{e^{3/2}}+\\frac{\\pi}{4}+\\frac{\\pi}{e}\\right)\\frac{\\mathbb{E}[\\eta_{1}(1-\\eta_{1})]^{1/2}}{k^{3/2}}}+\\frac{\\mathbb{E}[\\eta_{1}(1-\\eta_{1})]}{k}\\,.\n$$", "text_format": "latex", "page_idx": 14}, {"type": "text", "text": "Proof. Set for brevity $\\mathcal{M}=\\mathcal{M}_{\\mathrm{LLP}}(\\mathbf{x},\\mathbf{y})$ . From (3) we have ", "page_idx": 14}, {"type": "text", "text": "EAdv(MLLP, D)", "page_idx": 14}, {"type": "equation", "text": "$$\n\\begin{array}{r l}&{\\frac{1}{\\kappa+\\kappa+\\kappa}\\overset{\\rightarrow\\,*\\,*\\,\\iota\\,L\\,\\nu}{=}\\frac{\\jmath}{\\kappa_{k+1}}[\\operatorname*{min}\\{\\eta(x_{k+1}),1-\\eta(x_{k+1})\\}]-\\underset{(\\mathbf{x},\\mathbf{y})}{\\mathbb{E}}\\left[\\operatorname*{min}\\left\\{\\mathbb{P}(y_{k+1}=1|\\mathbf{x},\\mathcal{M}),\\mathbb{P}(y_{k+1}=0|\\mathbf{x},\\mathcal{M})\\right\\}\\right]}\\\\ &{\\quad\\quad\\leq\\frac{\\mathbb{E}}{(\\mathbf{x},\\mathbf{y})}\\left[|\\eta(x_{k+1})-\\mathbb{P}(y_{k+1}=1|\\mathbf{x},\\mathcal{M})|\\right]\\;,}\\end{array}\n$$", "text_format": "latex", "page_idx": 14}, {"type": "text", "text": "where we have again used (4). We now focus on calculating $\\mathbb{P}(y_{k+1}=1|\\mathbf{x},\\mathcal{M})$ . Let $\\textstyle\\sum_{j=1}^{k+1}y_{j}$ Note that for a given realization of feature vector $\\mathbf{x}$ , $y k{+}1$ is distributed like $A_{k+1}$ and the output $\\mathcal{M}$ is distributed like $Z_{k+1}$ . Therefore: ", "page_idx": 14}, {"type": "equation", "text": "$$\n\\begin{array}{r l}&{\\mathbb{P}(y_{k+1}=1\\,|\\,\\mathbf{x},\\mathcal{M})=\\mathbb{P}(A_{k+1}=1\\,|\\,\\mathbf{x},Z_{k+1}=\\Sigma)}\\\\ &{\\quad\\quad\\quad\\quad\\quad\\quad\\quad=\\frac{\\mathbb{P}(A_{k+1}=1,Z_{k+1}=\\Sigma\\,|\\,\\mathbf{x})}{\\mathbb{P}(Z_{k+1}=\\Sigma\\,|\\,\\mathbf{x})}}\\\\ &{\\quad\\quad\\quad\\quad\\quad\\quad\\quad=\\eta_{k+1}\\frac{\\mathbb{P}(Z_{k}=\\Sigma-1\\,|\\,\\mathbf{x})}{\\mathbb{P}(Z_{k+1}=\\Sigma\\,|\\,\\mathbf{x})}\\,.}\\end{array}\n$$", "text_format": "latex", "page_idx": 14}, {"type": "text", "text": "Using this expression in the original expectation we see that we can bound the advantage as ", "page_idx": 14}, {"type": "equation", "text": "$$\n\\mathbb{E}_{(\\mathbf{x},\\mathbf{y})}\\left[\\eta_{k+1}\\left|1-\\frac{\\mathbb{P}(Z_{k}=\\Sigma-1\\,|\\,\\mathbf{x})}{\\mathbb{P}(Z_{k+1}=\\Sigma\\,|\\,\\mathbf{x})}\\right|\\right]\n$$", "text_format": "latex", "page_idx": 14}, {"type": "text", "text": "Again, note that for a fixed $\\mathbf{x}$ , the variable $\\Sigma$ is distributed like $Z_{k+1}$ . Therefore. taking expectation over y the above expression can be rewritten as ", "page_idx": 14}, {"type": "equation", "text": "$$\n\\begin{array}{l}{\\displaystyle\\mathbb{E}_{\\mathbf{x}}\\left[\\eta_{k+1}\\sum_{s=0}^{k+1}\\mathbb{P}(Z_{k+1}=s\\,|\\,\\mathbf{x})\\times\\left|1-\\frac{\\mathbb{P}(Z_{k}=s-1\\,|\\,\\mathbf{x})}{\\mathbb{P}(Z_{k+1}=s\\,|\\,\\mathbf{x})}\\right|\\right]=}\\\\ {\\displaystyle\\mathbb{E}_{\\mathbf{x}}\\left[\\eta_{k+1}\\sum_{s=0}^{k+1}\\Bigl|\\mathbb{P}(Z_{k+1}=s\\,|\\,\\mathbf{x})-\\mathbb{P}(Z_{k}=s-1\\,|\\,\\mathbf{x})\\Bigr|\\right]}\\end{array}\n$$", "text_format": "latex", "page_idx": 14}, {"type": "text", "text": "Finally, note that since $Z_{k+1}=Z_{k}+A_{k+1}$ we also have ", "page_idx": 15}, {"type": "equation", "text": "$$\n\\begin{array}{r l}&{\\mathbb{P}(Z_{k+1}=s\\,|\\,\\mathbf{x})=\\mathbb{P}(A_{k+1}=1\\,|\\,\\mathbf{x})\\,\\mathbb{P}(Z_{k}=s-1\\,|\\,\\mathbf{x})+\\mathbb{P}(A_{k+1}=0\\,|\\,\\mathbf{x})\\,\\mathbb{P}(Z_{k}=s\\,|\\,\\mathbf{x})}\\\\ &{\\qquad\\qquad\\qquad=\\eta_{k+1}\\,\\mathbb{P}(Z_{k}=s-1\\,|\\,\\mathbf{x})+(1-\\eta_{k+1})\\,\\mathbb{P}(Z_{k}=s\\,|\\,\\mathbf{x})\\,.}\\end{array}\n$$", "text_format": "latex", "page_idx": 15}, {"type": "text", "text": "Therefore, we conclude that the advantage can be bounded by ", "page_idx": 15}, {"type": "equation", "text": "$$\n\\begin{array}{l}{\\displaystyle\\mathbb{E}_{\\mathbf{x}}\\left[\\eta_{k+1}(1-\\eta_{k+1})\\sum_{s=0}^{k+1}\\Bigl|\\mathbb{P}(Z_{k}=s\\,|\\,\\mathbf{x})-\\mathbb{P}(Z_{k}=s-1\\,|\\,\\mathbf{x})\\Bigr|\\right]=}\\\\ {\\displaystyle\\mathbb{E}_{\\mathbf{x}}\\left[\\eta_{k+1}(1-\\eta_{k+1})\\right]\\,\\mathbb{E}\\left[\\sum_{s=0}^{k+1}\\Bigl|\\mathbb{P}(Z_{k}=s\\,|\\,\\mathbf{x})-\\mathbb{P}(Z_{k}=s-1\\,|\\,\\mathbf{x})\\Bigr|\\right]\\,,}\\end{array}\n$$", "text_format": "latex", "page_idx": 15}, {"type": "text", "text": "where we have used the fact that the random variables $\\eta_{i}$ are independent from each other. Using also the fact that $\\eta_{k+1}$ has the same distribution as $\\eta_{1}$ combined with Lemma A.3 below, we have that the above quantity is bounded by: ", "page_idx": 15}, {"type": "equation", "text": "$$\n\\begin{array}{r l}&{k^{1/4}\\sqrt{2c_{k}}\\sqrt{\\mathbb{E}[\\eta_{1}(1-\\eta_{1})]^{2}\\,\\mathbb{E}[\\eta_{1}^{2}+(1-\\eta_{1})^{2}]^{k}+\\frac{\\pi\\,\\mathbb{E}[\\eta_{1}(1-\\eta_{1})]^{1/2}}{4k^{3/2}}+\\frac{\\pi\\,\\mathbb{E}[\\eta_{1}(1-\\eta_{1})]}{e k^{2}}}}\\\\ &{\\,+\\,\\frac{\\mathbb{E}[\\eta_{1}(1-\\eta_{1})]}{L}\\,.}\\end{array}\n$$", "text_format": "latex", "page_idx": 15}, {"type": "text", "text": "Moreover, notice that $\\mathbb{E}[\\eta_{1}^{2}+(1-\\eta_{1})^{2}]+2\\,\\mathbb{E}[\\eta_{1}(1-\\eta_{1})]=1$ . Therefore $\\mathbb{E}[\\eta_{1}^{2}+(1-\\eta_{1})^{2}]=$ $1-2\\,\\mathbb{E}[\\eta_{1}(1-\\eta_{1})]$ , and using the fact that $\\begin{array}{r}{\\eta_{1}(1-\\eta_{1})\\leq\\frac{1}{4}}\\end{array}$ we have ", "page_idx": 15}, {"type": "equation", "text": "$$\n\\begin{array}{r l}&{\\mathbb{E}[\\eta_{1}(1-\\eta_{1})]^{2}\\,\\mathbb{E}[\\eta_{1}^{2}+(1-\\eta_{1})^{2}]^{k}=\\mathbb{E}[\\eta_{1}(1-\\eta_{1})]^{2}(1-2\\,\\mathbb{E}[\\eta_{1}(1-\\eta_{1})])^{k}}\\\\ &{\\qquad\\qquad\\qquad\\qquad\\le\\displaystyle\\operatorname*{max}_{\\frac{1}{4}\\ge x\\ge0}x^{2}(1-2x)^{k}\\;.}\\end{array}\n$$", "text_format": "latex", "page_idx": 15}, {"type": "text", "text": "But a simple calculation shows that the above function is maximized at $\\begin{array}{r}{x_{k}^{\\star}=\\operatorname*{min}\\{\\frac{1}{k+2},1/4\\}}\\end{array}$ , thus we must have ", "page_idx": 15}, {"type": "equation", "text": "$$\n\\mathbb{E}[\\eta_{1}(1-\\eta_{1})]^{2}\\,\\mathbb{E}[\\eta_{1}^{2}+(1-\\eta_{1})^{2}]^{k}\\le(x_{k}^{\\star})^{2}(1-2x_{k}^{\\star})^{k}\\le\\frac{1}{(e k)^{2}}\n$$", "text_format": "latex", "page_idx": 15}, {"type": "text", "text": "the last inequality holding for all $k\\geq1$ . In addition, we have the trivial bound $\\mathbb{E}[\\eta_{1}(1-\\eta_{1})]^{2}\\,\\mathbb{E}[\\eta_{1}^{2}+$ $(1-\\eta_{1})^{2}]\\dot{\\leq}\\mathbb{E}[\\dot{\\eta}_{1}(1-\\tilde{\\eta_{1}})]^{2}$ , so that ", "page_idx": 15}, {"type": "equation", "text": "$$\n\\begin{array}{r l}&{\\mathbb{E}[\\eta_{1}(1-\\eta_{1})]^{2}\\,\\mathbb{E}[\\eta_{1}^{2}+(1-\\eta_{1})^{2}]^{k}\\le\\operatorname*{min}\\left\\{\\mathbb{E}[\\eta_{1}(1-\\eta_{1})]^{2},\\frac{1}{e^{2}k^{2}}\\right\\}}\\\\ &{\\qquad\\qquad\\qquad\\le\\frac{\\mathbb{E}[\\eta_{1}(1-\\eta_{1})]^{2}}{\\mathbb{E}[\\eta_{1}(1-\\eta_{1})]^{2}\\,e^{2}\\,k^{2}+1}}\\\\ &{\\qquad\\qquad\\qquad\\qquad(\\mathrm{using~min}\\{a,b\\}\\le\\frac{a b}{a+b},\\mathrm{with~}a=\\mathbb{E}[\\eta_{1}(1-\\eta_{1})]^{2}\\mathrm{~and~}b=\\frac{\\eta_{1}}{e^{2}}}\\\\ &{\\qquad\\qquad\\qquad\\le\\frac{\\sqrt{\\mathbb{E}[\\eta_{1}(1-\\eta_{1})]}}{e^{3/2}\\,k^{3/2}}}\\\\ &{\\qquad\\qquad\\qquad\\qquad\\mathrm{(using~}x^{2}-x^{3/2}+1\\ge0,\\mathrm{with~}x=e k\\,\\mathbb{E}[\\eta_{1}(1-\\eta_{1})])\\,.}\\end{array}\n$$", "text_format": "latex", "page_idx": 15}, {"type": "text", "text": "Replacing this bound in (6) we obtain the following upper bound on the advantage: ", "page_idx": 15}, {"type": "equation", "text": "$$\n\\begin{array}{r}{k^{1/4}\\sqrt{2c_{k}}\\sqrt{\\left(\\frac{1}{e^{3/2}}+\\frac{\\pi}{4}\\right)\\frac{\\mathbb{E}[\\eta_{1}(1-\\eta_{1})]^{1/2}}{k^{3/2}}+\\frac{\\pi\\,\\mathbb{E}[\\eta_{1}(1-\\eta_{1})]}{e\\,k^{2}}}+\\frac{\\mathbb{E}[\\eta_{1}(1-\\eta_{1})]}{k}}\\\\ {\\le k^{1/4}\\sqrt{2c_{k}}\\sqrt{\\left(\\frac{1}{e^{3/2}}+\\frac{\\pi}{4}+\\frac{\\pi}{e}\\right)\\frac{\\mathbb{E}[\\eta_{1}(1-\\eta_{1})]^{1/2}}{k^{3/2}}}+\\frac{\\mathbb{E}[\\eta_{1}(1-\\eta_{1})]}{k}\\,,}\\end{array}\n$$", "text_format": "latex", "page_idx": 15}, {"type": "text", "text": "as claimed. ", "page_idx": 15}, {"type": "text", "text": "Lemma A.3. Let $c_{k}$ be as in Lemma A.2. Then the following bound holds: ", "page_idx": 15}, {"type": "equation", "text": "$$\n\\begin{array}{l}{\\displaystyle\\mathbb{E}_{\\mathbf{x}}\\left[\\sum_{s=0}^{k+1}\\left|\\mathbb{P}(Z_{k}=s\\,|\\,\\mathbf{x})-\\mathbb{P}(Z_{k}=s-1\\,|\\,\\mathbf{x})\\right|\\right]\\leq}\\\\ {\\displaystyle\\frac{1}{k}+k^{1/4}\\sqrt{2c_{k}}\\sqrt{\\mathbb{E}[\\eta_{1}^{2}+(1-\\eta_{1})^{2}]^{k}+\\frac{\\pi}{(4\\,\\mathbb{E}[\\eta_{1}(1-\\eta)_{1}]k)^{3/2}}+\\frac{\\pi}{e\\,\\mathbb{E}[\\eta_{1}(1-\\eta_{1})]k^{2}}}}\\end{array}\n$$", "text_format": "latex", "page_idx": 15}, {"type": "text", "text": "Proof. Let $a>0$ and $b<k$ , and let $[a,b]=\\{j\\in\\mathbb{N}|a\\leq j\\leq b\\}$ . For any $\\mathbf{x}$ we then have ", "page_idx": 16}, {"type": "equation", "text": "$$\n\\begin{array}{r l}{\\lefteqn{\\sum_{s=0}^{K+1}\\mathbb{P}(Z_{k}=s\\mid\\mathbf{x})-\\mathbb{P}(Z_{k}=s-1\\mid\\mathbf{x})\\big|}}\\\\ &{\\leq\\displaystyle\\sum_{s\\in[a,b]}\\,\\big|\\mathbb{P}(Z_{k}=s\\mid\\mathbf{x})-\\mathbb{P}(Z_{k}=s-1\\mid\\mathbf{x})\\big|+\\displaystyle\\sum_{s\\notin[a,b]}\\,\\big|\\mathbb{P}(Z_{k}=s\\mid\\mathbf{x})-\\mathbb{P}(Z_{k}=s-1)\\big|}\\\\ &{\\leq\\displaystyle\\sum_{s\\in[a,b]}\\,\\big|\\mathbb{P}(Z_{k}=s\\mid\\mathbf{x})-\\mathbb{P}(Z_{k}=s-1\\mid\\mathbf{x})\\big|+\\displaystyle\\sum_{s\\notin[a,b]}\\mathbb{P}(Z_{k}=s\\mid\\mathbf{x})+\\mathbb{P}(Z_{k}=s-1\\mid\\mathbf{x})}\\\\ &{\\leq\\displaystyle\\sum_{s\\in[a,b]}\\,\\big|\\mathbb{P}(Z_{k}=s\\mid\\mathbf{x})-\\mathbb{P}(Z_{k}=s-1\\mid\\mathbf{x})\\big|+2\\,\\mathbb{P}(Z_{k}\\notin[a,b]\\mid\\mathbf{x})}\\end{array}\n$$", "text_format": "latex", "page_idx": 16}, {"type": "text", "text": "Taking expectation over both sides with respect to $\\mathbf{x}$ we have ", "page_idx": 16}, {"type": "equation", "text": "$$\n\\begin{array}{l}{\\displaystyle\\mathbb{E}_{\\mathbf{x}}\\left[\\sum_{s=0}^{k+1}\\left|\\mathbb{P}(Z_{k}=s\\,|\\,\\mathbf{x})-\\mathbb{P}(Z_{k}=s-1\\,|\\,\\mathbf{x})\\right|\\right]}\\\\ {\\displaystyle\\leq\\mathbb{E}_{\\mathbf{x}}\\left[\\sum_{s\\in[a,b]}\\left|\\mathbb{P}(Z_{k}=s\\,|\\,\\mathbf{x})-\\mathbb{P}(Z_{k}=s-1\\,|\\,\\mathbf{x})\\right|\\right]+2\\mathbb{E}_{\\mathbf{x}}[\\mathbb{P}(Z_{k}\\not\\in[a,b]\\,|\\,\\mathbf{x})]}\\end{array}\n$$", "text_format": "latex", "page_idx": 16}, {"type": "text", "text": "Let now $Q_{k}$ denote the probability measure associated with a binomial random variable with parameters $(k,p)$ . Since $Z_{k}$ is a Poisson-Binomial random variable with parameters $\\eta_{1},\\ldots,\\eta_{k}$ , the probability $\\mathbb{P}(Z_{k}\\notin[a,b]\\mid\\mathbf{x})$ is a linear function in each individual $\\eta_{i}$ , so that $\\mathbb{E}_{\\mathbf{x}}[\\mathbb{P}(Z_{k}\\notin[a,b]\\,|\\,\\mathbf{x})]=$ $Q_{k}([\\bar{a},b]^{\\bar{c}})$ . We now proceed to bound the first expectation in (7). By Cauchy-Schwartz inequality we have ", "page_idx": 16}, {"type": "equation", "text": "$$\n\\begin{array}{r l}&{\\mathbb{E}_{\\mathbf{x}}\\left[\\displaystyle\\sum_{s\\in[a,b]}\\left|\\mathbb{P}(Z_{k}=s\\,|\\,\\mathbf{x})-\\mathbb{P}(Z_{k}=s-1\\,|\\,\\mathbf{x})\\right|\\right]}\\\\ &{\\quad\\le\\mathbb{E}_{\\mathbf{x}}\\left[\\sqrt{\\left(b-a\\right)\\displaystyle\\sum_{s\\in[a,b]}\\left(\\mathbb{P}(Z_{k}=s\\,|\\,\\mathbf{x})-\\mathbb{P}(Z_{k}=s-1\\,|\\,\\mathbf{x})\\right)^{2}}\\right]}\\\\ &{\\quad\\le\\mathbb{E}_{\\mathbf{x}}\\left[\\sqrt{\\left(b-a\\right)\\displaystyle\\sum_{s=0}^{k+1}(\\mathbb{P}(Z_{k}=s\\,|\\,\\mathbf{x})-\\mathbb{P}(Z_{k}=s-1\\,|\\,\\mathbf{x}))^{2}}\\right]}\\\\ &{\\quad\\le\\sqrt{\\mathbb{E}_{\\mathbf{x}}\\left[(b-a)\\displaystyle\\sum_{s=0}^{k+1}(\\mathbb{P}(Z_{k}=s\\,|\\,\\mathbf{x})-\\mathbb{P}(Z_{k}=s-1\\,|\\,\\mathbf{x})|^{2}\\right]},}\\end{array}\n$$", "text_format": "latex", "page_idx": 16}, {"type": "text", "text": "where the last inequality holds by Jensen\u2019s inequality. Let ", "page_idx": 16}, {"type": "equation", "text": "$$\nA=\\mathbb{E}[\\eta_{1}^{2}+(1-\\eta_{1})^{2}]\\qquad\\mathrm{and}\\qquad B=2\\,\\mathbb{E}[\\eta_{1}(1-\\eta_{1})]\\;.\n$$", "text_format": "latex", "page_idx": 16}, {"type": "text", "text": "By Lemma A.4 below we have that the above term is bounded by ", "page_idx": 16}, {"type": "equation", "text": "$$\n\\sqrt{(b-a)\\left(A^{k}+\\frac{\\pi}{(4B k)^{3/2}}+\\frac{\\pi}{e B k^{2}}\\right)}\\;,\n$$", "text_format": "latex", "page_idx": 16}, {"type": "text", "text": "so that (7) gives ", "page_idx": 16}, {"type": "equation", "text": "$$\n\\mathbb{S}_{\\mathbf{x}}\\left[\\sum_{s=0}^{k+1}|\\mathbb{P}(Z_{k}=s\\,|\\,\\mathbf{x})-\\mathbb{P}(Z_{k}=s-1\\,|\\,\\mathbf{x})|\\right]\\le2Q_{k}([a,b]^{c})+\\sqrt{(b-a)\\left(A^{k}+\\frac{\\pi}{(4B k)^{3/2}}+\\frac{\\pi}{e B k}\\right)}\\frac{1}{(2B k)^{3/2}}.\n$$", "text_format": "latex", "page_idx": 16}, {"type": "text", "text": "Let $a=\\operatorname*{max}\\{k p-\\sqrt{k}c_{k},0\\}$ and $b=\\operatorname*{min}\\{k p+\\sqrt{k}c_{k,1}\\}$ . By Bernstein\u2019s inequality applied to binomial random variables we have that $\\begin{array}{r}{Q_{k}\\big([\\bar{a},b]^{c}\\big)=\\frac{1}{2k}}\\end{array}$ . Hence, with this choice of $a$ and $b$ we ", "page_idx": 16}, {"type": "text", "text": "obtain ", "page_idx": 17}, {"type": "equation", "text": "$$\n\\mathbb{E}_{\\mathbf{x}}\\left[\\sum_{s=0}^{k+1}\\left|\\mathbb{P}(Z_{k}=s\\,|\\,\\mathbf{x})-\\mathbb{P}(Z_{k}=s-1\\,|\\,\\mathbf{x})\\right|\\right]\\le\\frac{1}{k}+\\sqrt{2\\sqrt{k}c_{k}}\\sqrt{A^{k}+\\frac{\\pi}{(4B k)^{3/2}}+\\frac{\\pi}{e B k^{2}}}\\,.\n$$", "text_format": "latex", "page_idx": 17}, {"type": "text", "text": "The lemma follows by replacing the values of $A$ and $B$ . ", "page_idx": 17}, {"type": "text", "text": "Lemma A.4. The following inequality holds ", "page_idx": 17}, {"type": "equation", "text": "$$\n\\begin{array}{r l}&{\\mathbb{E}_{\\mathbf{x}}\\left[\\displaystyle\\sum_{s=0}^{k+1}(\\mathbb{P}(Z_{k}=s\\,|\\,\\mathbf{x})-\\mathbb{P}(Z_{k}=s-1\\,|\\,\\mathbf{x}))^{2}\\right]}\\\\ &{\\quad\\le\\mathbb{E}[\\eta_{1}^{2}+(1-\\eta_{1})^{2}]^{k}+\\frac{\\pi}{(8\\,\\mathbb{E}[\\eta_{1}(1-\\eta_{1})]k)^{3/2}}+\\frac{\\pi}{2e\\,\\mathbb{E}[\\eta_{1}(1-\\eta_{1})]k^{2}}\\,.}\\end{array}\n$$", "text_format": "latex", "page_idx": 17}, {"type": "text", "text": "Proof. Let $p_{s}(\\mathbf{x})\\;=\\;\\mathbb{P}(Z_{k}\\;=\\;s\\,|\\,\\mathbf{x})\\,-\\,\\mathbb{P}(Z_{k}\\;=\\;s\\,-\\,1\\,|\\,\\mathbf{x}),$ , for $s\\,=\\,0,\\ldots,k\\,+\\,1$ . Further, for $k+1\\geq u\\geq0$ let $\\begin{array}{r}{g_{u}(\\mathbf{x})=\\frac{1}{\\sqrt{k+2}}\\sum_{s=0}^{k+1}p_{s}(\\mathbf{x})e^{2\\pi i\\frac{u s}{k+2}}}\\end{array}$ denote the discrete Fourier transform. Since, for any $\\mathbf{x}$ , the mapping ", "page_idx": 17}, {"type": "equation", "text": "$$\n\\mathbf{p}(\\mathbf{x}):=(p_{0}(\\mathbf{x}),\\ldots,p_{k+1}(\\mathbf{x}))\\mapsto(g_{1}(\\mathbf{x}),\\ldots,g_{k+1}(\\mathbf{x}):=\\mathbf{g}(\\mathbf{x})\n$$", "text_format": "latex", "page_idx": 17}, {"type": "text", "text": "is a unitary linear transformation [8] we can write: ", "page_idx": 17}, {"type": "equation", "text": "$$\n\\sum_{s=0}^{k+1}(\\mathbb{P}(Z_{k}=s\\,|\\,\\mathbf{x})-\\mathbb{P}(Z_{k}=s-1\\,|\\,\\mathbf{x}))^{2}=\\|\\mathbf{p}(\\mathbf{x})\\|^{2}=\\|\\mathbf{g}(\\mathbf{x})\\|^{2}=\\sum_{u=0}^{k+1}|g_{u}(\\mathbf{x})|^{2}.\n$$", "text_format": "latex", "page_idx": 17}, {"type": "text", "text": "Moreover, by Lemma A.5 below we have that ", "page_idx": 17}, {"type": "equation", "text": "$$\ng_{u}({\\bf x})=(1-e^{\\frac{2\\pi i u}{k+2}})\\frac{1}{\\sqrt{k+2}}\\prod_{j=1}^{k}(1-\\eta_{j}+\\eta_{j}e^{\\frac{2\\pi i u}{k+2}})\n$$", "text_format": "latex", "page_idx": 17}, {"type": "text", "text": "and therefore ", "page_idx": 17}, {"type": "equation", "text": "$$\ng_{u}(\\mathbf{x})|^{2}=g_{u}(\\mathbf{x})\\overline{{g_{u}(\\mathbf{x})}}=\\frac{1}{k+2}\\left(1-\\cos\\frac{2\\pi u}{k+2}\\right)\\prod_{j=1}^{k}\\left((1-\\eta_{j})^{2}+\\eta_{j}^{2}+2\\eta_{j}(1-\\eta_{j})\\cos\\frac{2\\pi u}{k+2}\\right)\\,.\n$$", "text_format": "latex", "page_idx": 17}, {"type": "text", "text": "Therefore we can write ", "page_idx": 17}, {"type": "equation", "text": "$$\n\\begin{array}{r l}&{\\mathbb{E}_{\\mathbf{x}}\\left[\\displaystyle\\sum_{s=0}^{k+1}(\\mathbb{P}(Z_{k}=s\\,|\\,\\mathbf{x})-\\mathbb{P}(Z_{k}=s-1\\,|\\,\\mathbf{x}))^{2}\\right]}\\\\ &{\\quad=\\displaystyle\\frac{1}{k+2}\\mathbb{E}_{\\mathbf{x}}\\left[\\displaystyle\\sum_{u=0}^{k+1}\\left(1-\\cos\\frac{2\\pi u}{k+2}\\right)\\prod_{j=1}^{k}\\left((1-\\eta_{j})^{2}+\\eta_{j}^{2}+2\\eta_{j}(1-\\eta_{j})\\cos\\frac{2\\pi u}{k+2}\\right)\\right]}\\\\ &{\\quad=\\displaystyle\\frac{1}{k+2}\\sum_{u=0}^{k+1}\\left(1-\\cos\\frac{2\\pi u}{k+2}\\right)\\prod_{j=1}^{k}\\mathbb{E}_{\\mathbf{x}}\\left[\\left((1-\\eta_{j})^{2}+\\eta_{j}^{2}+2\\eta_{j}(1-\\eta_{j})\\cos\\frac{2\\pi u}{k+2}\\right)\\right]\\,,}\\end{array}\n$$", "text_format": "latex", "page_idx": 17}, {"type": "text", "text": "Where we have used the fact that the random variables $\\eta_{j}$ are independent. Finally by linearity of expectation and the fact that $\\eta_{j}$ is distributed as $\\eta_{1}$ for all $j$ , we have ", "page_idx": 17}, {"type": "equation", "text": "$$\n\\begin{array}{l}{\\displaystyle\\mathbb{E}_{\\mathbf{x}}\\left[\\sum_{s=0}^{k+1}(\\mathbb{P}(Z_{k}=s\\,|\\,\\mathbf{x})-\\mathbb{P}(Z_{k}=s-1\\,|\\,\\mathbf{x}))^{2}\\right]}\\\\ {\\displaystyle\\frac{1}{k+2}\\sum_{u=0}^{k+1}\\left(1-\\cos\\frac{2\\pi u}{k+2}\\right)\\left(\\mathbb{E}[\\eta_{1}^{2}+(1-\\eta_{1})^{2}]+2\\,\\mathbb{E}[\\eta_{1}(1-\\eta_{1})]\\cos\\frac{2\\pi u}{k+2}\\right)^{k}\\,.}\\end{array}\n$$", "text_format": "latex", "page_idx": 17}, {"type": "text", "text": "Applying Proposition A.6 below with $a=\\mathbb{E}[\\eta_{1}^{2}+(1-\\eta_{1})^{2}]$ and $b=2\\,\\mathbb{E}[\\eta_{1}(1-\\eta_{1})]$ we have that the above expression is bounded by ", "page_idx": 17}, {"type": "equation", "text": "$$\n\\mathbb{E}[\\eta_{1}^{2}+(1-\\eta_{1})^{2}]^{k}+\\frac{\\pi}{(8\\,\\mathbb{E}[\\eta_{1}(1-\\eta_{1})]k)^{3/2}}+\\frac{\\pi}{2e\\,\\mathbb{E}[\\eta_{1}(1-\\eta_{1})]k^{2}}\n$$", "text_format": "latex", "page_idx": 17}, {"type": "text", "text": "which gives the claimed result. ", "page_idx": 17}, {"type": "text", "text": "Lemma A.5. Let $\\begin{array}{r c l c l}{p_{s}(\\mathbf{x})}&{=}&{\\mathbb{P}(Z_{k}}&{=}&{s\\,\\vert\\,\\mathbf{x})\\;-\\;\\mathbb{P}(Z_{k}}&{=}&{s\\;-\\;1\\,\\vert\\,\\mathbf{x})}\\end{array}$ and let $g_{u}(\\mathbf{x})\\quad=$ \u221ak1+2 sk=+01 ps(x)e2k\u03c0i+u2s denote the discrete Fourier transform of p(x) = (p1(x), . . . , ps(x)). Then ", "page_idx": 18}, {"type": "equation", "text": "$$\ng_{u}(\\mathbf{x})=\\frac{1}{\\sqrt{k+2}}(1-e^{\\frac{2\\pi i u}{k+2}})\\prod_{j=1}^{k}(1-\\eta_{j}+\\eta_{j}e^{\\frac{2\\pi i u}{k+2}})\n$$", "text_format": "latex", "page_idx": 18}, {"type": "text", "text": "Proof. By definition of $g_{u}(\\mathbf{x})$ we have: ", "page_idx": 18}, {"type": "equation", "text": "$$\n\\begin{array}{r l}&{\\frac{1}{\\sqrt{k+2}}\\left(\\displaystyle\\sum_{s=0}^{k+1}e^{\\frac{2\\pi i u s}{k+2}}\\,{\\mathbb P}(Z_{k}=s\\,|\\,\\mathbf x)-\\displaystyle\\sum_{s=0}^{k+1}e^{\\frac{2\\pi i u s}{k+2}}\\,{\\mathbb P}(Z_{k}=s-1\\,|\\,\\mathbf x)\\right)}\\\\ &{\\qquad\\qquad=\\frac{1}{\\sqrt{k+2}}\\left(\\displaystyle\\sum_{s=0}^{k+1}e^{\\frac{2\\pi i u s}{k+2}}\\,{\\mathbb P}(Z_{k}=s\\,|\\,\\mathbf x)-e^{\\frac{2\\pi i u s}{k+2}}\\sum_{s=0}^{k+1}e^{\\frac{2\\pi i u(s-1)}{k+2}}\\,{\\mathbb P}(Z_{k}=s-1\\,|\\,\\mathbf x)\\right)}\\\\ &{\\qquad\\qquad=\\frac{1}{\\sqrt{k+2}}(1-e^{\\frac{2\\pi i u}{k+2}}){\\mathbb E}_{Z_{k}}[e^{\\frac{2\\pi i u}{k+2}Z_{k}}\\,|\\,\\mathbf x]}\\\\ &{\\qquad\\qquad=\\frac{1}{\\sqrt{k+2}}(1-e^{\\frac{2\\pi i u}{k+2}})\\phi_{Z_{k}}|\\times\\left(\\frac{2\\pi u}{k+2}\\right)}\\end{array}\n$$", "text_format": "latex", "page_idx": 18}, {"type": "text", "text": "where $\\phi_{Z_{k}\\mid\\mathbf{x}}$ denotes the characteristic function of $Z_{k}$ conditioned on x. Using the fact that $Z_{k}=$ $\\textstyle\\sum_{j=1}^{k}A_{j}$ and that $A_{1},\\ldots,A_{k}$ are independent given $\\mathbf{x}$ , we have $\\begin{array}{r}{\\phi_{Z_{k}\\mid\\mathbf{x}}\\,=\\,\\prod_{j=1}^{k}\\phi_{A_{j}\\mid x_{j}}}\\end{array}$ . The result follows from the fact that $A_{j}$ is a Bernoulli random variable and therefore $\\phi_{A_{j}\\mid x_{j}}(z)\\,=$ $(1-\\eta_{j}+\\eta_{j}e^{i z})$ . \u53e3 ", "page_idx": 18}, {"type": "text", "text": "Proposition A.6. For any $a,b,k>0$ such that $a+b=1$ we have ", "page_idx": 18}, {"type": "equation", "text": "$$\n\\frac{1}{k+2}\\sum_{u=0}^{k+1}\\left(1-\\cos{\\frac{2\\pi u}{k+2}}\\right)\\left(a+b\\cos{\\frac{2\\pi u}{k+2}}\\right)^{k}\\leq a^{k}+\\frac{\\pi}{(4k b)^{3/2}}+\\frac{\\pi}{e b k^{2}}\n$$", "text_format": "latex", "page_idx": 18}, {"type": "text", "text": "Proof. Using the fact that cos $\\textstyle{\\frac{2\\pi u}{k+2}}\\leq0$ for $u\\in[(k+2)/4,3(k+2)/4]$ we have that ", "page_idx": 18}, {"type": "equation", "text": "$$\n\\begin{array}{r l}{\\left(1-\\cos\\frac{2\\pi u}{k+2}\\right)\\left(a+b\\cos\\frac{2\\pi u}{k+2}\\right)^{k}}&{\\overset{k+2/4}{=}\\left(1-\\cos\\frac{2\\pi u}{k+2}\\right)\\left(a+b\\cos\\frac{2\\pi u}{k+2}\\right)^{k}}\\\\ &{\\quad{\\null}=\\left.\\sum_{n=1}^{3\\lfloor k+2\\rfloor/4}\\left(1-\\cos\\frac{2\\pi u}{k+2}\\right)\\left(a+b\\cos\\frac{2\\pi u}{k+2}\\right)^{k}\\right.}\\\\ &{\\quad+\\left.\\sum_{n=1}^{5\\lfloor k+2\\rfloor}\\left(1-\\cos\\frac{2\\pi u}{k+2}\\right)\\left(a+b\\cos\\frac{2\\pi u}{k+2}\\right)^{k}\\right.}\\\\ &{\\quad\\left.+\\quad\\sum_{n=1}^{4\\lfloor k+2\\rfloor}\\left(1-\\cos\\frac{2\\pi u}{k+2}\\right)\\left(a+b\\cos\\frac{2\\pi u}{k+2}\\right)^{k}\\right.}\\\\ &{\\quad\\left.\\leq\\left(k+2\\right)^{k}\\left(1-\\sum_{n=1}^{6\\lfloor k+2\\rfloor/4}\\left(1-\\cos\\frac{2\\pi u}{k+2}\\right)\\left(a+b\\cos\\frac{2\\pi u}{k+2}\\right)\\right.}\\\\ &{\\quad\\left.\\quad+\\quad\\sum_{n=1}^{k+1}\\left(1-\\cos\\frac{2\\pi u}{k+2}\\right)\\left(a+b\\cos\\frac{2\\pi u}{k+2}\\right)^{k}\\right.}\\\\ &{\\quad\\left.\\quad=\\left(k+2\\right)a^{k+2}\\left(1-\\cos\\frac{2\\pi u}{k+2}\\right)\\left(a+b\\cos\\frac{2\\pi u}{k+2}\\right)^{k}}\\end{array}\n$$", "text_format": "latex", "page_idx": 18}, {"type": "text", "text": "where we used the fact that $(1-\\cos t)\\le2$ for the first inequality and the symmetry of the cosine function for the last equality. We now apply the result of Proposition A.8 to the above expression to ", "page_idx": 18}, {"type": "text", "text": "see that ", "page_idx": 19}, {"type": "equation", "text": "$$\n\\begin{array}{r l r}{\\lefteqn{\\sum_{u=0}^{(k+2)/4}\\left(1-\\cos\\frac{2\\pi u}{k+2}\\right)\\left(a+b\\cos\\frac{2\\pi u}{k+2}\\right)^{k}\\leq2\\pi^{2}\\sum_{u=0}^{(k+2)/4}\\frac{u^{2}}{(k+2)^{2}}\\left(1-4\\pi b\\frac{u^{2}}{(k+2)^{2}}\\right)^{k}}}\\\\ &{}&{\\leq2\\pi^{2}\\sum_{u=0}^{(k+2)/4}\\frac{u^{2}}{(k+2)^{2}}e^{-4\\pi k b\\frac{u^{2}}{(k+2)^{2}}}}\\end{array}\n$$", "text_format": "latex", "page_idx": 19}, {"type": "text", "text": "Therefore we conclude that ", "page_idx": 19}, {"type": "equation", "text": "$$\n\\frac{1}{\\dot{\\tau}+2}\\sum_{u=0}^{k+1}\\left(1-\\cos{\\frac{2\\pi u}{k+2}}\\right)\\left(a+b\\cos{\\frac{2\\pi u}{k+2}}\\right)^{k}\\leq a^{k}+4\\pi^{2}\\sum_{u=0}^{(k+2)/4}\\frac{u^{2}}{(k+2)^{2}}e^{-4\\pi k b\\frac{u^{2}}{(k+2)^{2}}}\\frac{1}{k+2}\\,.\n$$", "text_format": "latex", "page_idx": 19}, {"type": "text", "text": "Finally, applying Proposition A.7 with $m=k+2$ and $\\alpha=4\\pi k b$ we can upper bound the above quantity by: ", "page_idx": 19}, {"type": "equation", "text": "$$\na^{k}+4\\pi^{2}\\left(\\frac{\\sqrt{\\pi}}{4(4\\pi k b)^{3/2}}+\\frac{1}{4e\\pi b k(k+2)}\\right)\\leq a^{k}+\\frac{\\pi}{(4k b)^{3/2}}+\\frac{\\pi}{e b k^{2}}\\;,\n$$", "text_format": "latex", "page_idx": 19}, {"type": "text", "text": "which concludes the proof. ", "page_idx": 19}, {"type": "text", "text": "Proposition A.7. Let $m>0$ and $\\alpha>0$ . Then ", "page_idx": 19}, {"type": "equation", "text": "$$\n\\sum_{u=0}^{m/4}\\frac{u^{2}}{m^{2}}e^{-\\alpha\\frac{u^{2}}{m^{2}}}\\frac{1}{m}\\leq\\frac{\\sqrt{\\pi}}{4\\alpha^{3/2}}+\\frac{1}{e\\alpha m}\n$$", "text_format": "latex", "page_idx": 19}, {"type": "text", "text": "Proof. Let $f\\colon\\ensuremath{\\mathbb{R}}\\to\\ensuremath{\\mathbb{R}}$ be given by $x\\mapsto x^{2}e^{-\\alpha x^{2}}$ . Note that the sum we are attempting to bound is then given by: ", "page_idx": 19}, {"type": "equation", "text": "$$\n\\sum_{u=0}^{m/4}f\\left({\\frac{u}{m}}\\right){\\frac{1}{m}}\n$$", "text_format": "latex", "page_idx": 19}, {"type": "text", "text": "Note also that $f$ has a maximum at $\\begin{array}{r}{x_{0}\\,=\\,\\frac{1}{\\sqrt{\\alpha}}}\\end{array}$ . Thus $f$ is increasing for $x\\,<x_{0}$ and decreasing otherwise. In particular if ", "page_idx": 19}, {"type": "equation", "text": "$$\n\\sum_{u=0}^{m/4}f\\left({\\frac{u}{m}}\\right){\\frac{1}{m}}=\\sum_{u=0}^{\\lfloor x_{0}\\rfloor}f\\left({\\frac{u}{m}}\\right){\\frac{1}{m}}+\\sum_{u=\\lceil x_{0}\\rceil}^{m/4}f\\left({\\frac{u}{m}}\\right){\\frac{1}{m}}:=L+U,\n$$", "text_format": "latex", "page_idx": 19}, {"type": "text", "text": "then $L$ corresponds to a lower Riemman sum for $f$ and $\\begin{array}{r}{L\\,\\leq\\,\\int_{0}^{\\frac{\\lfloor x_{0}\\rfloor+1}{m}}f(x)d x}\\end{array}$ . Similarly $U$ is an upper Riemman sum for $f$ and $\\begin{array}{r}{U\\leq\\int_{\\frac{\\lceil x_{0}\\rceil-1}{m}}^{1/4-\\frac{1}{m}}f(x)d x}\\end{array}$ . Therefore we have ", "page_idx": 19}, {"type": "equation", "text": "$$\n\\begin{array}{r l}&{\\displaystyle\\sum_{u=0}^{m/4}f\\left(\\frac{u}{m}\\right)\\frac{1}{m}\\leq\\int_{0}^{1/4-1/m}x^{2}e^{-\\alpha x^{2}}d x+\\int_{\\frac{\\lceil x_{0}\\rceil-1}{m}}^{\\frac{\\lfloor x_{0}\\rfloor+1}{m}}f(x)d x}\\\\ &{\\quad\\quad\\quad\\quad\\quad\\quad\\quad\\leq\\displaystyle\\int_{0}^{\\infty}x^{2}e^{-\\alpha x^{2}}+\\frac{1}{m}\\operatorname*{max}_{x}f(x)}\\\\ &{\\quad\\quad\\quad\\quad\\quad=\\frac{\\sqrt{\\pi}}{4\\alpha^{3/2}}+\\frac{1}{e\\alpha m}\\,,}\\end{array}\n$$", "text_format": "latex", "page_idx": 19}, {"type": "text", "text": "as claimed. ", "page_idx": 19}, {"type": "text", "text": "Proposition A.8. The following inequality holds for any $t\\in[0,1/4]$ : ", "page_idx": 19}, {"type": "equation", "text": "$$\n1-2(\\pi t)^{2}\\leq\\cos2\\pi t\\leq1-4\\pi t^{2}\n$$", "text_format": "latex", "page_idx": 19}, {"type": "text", "text": "Proof. For the lower bound we start from the fact that for any $x\\geq0$ it is well known that ", "page_idx": 20}, {"type": "equation", "text": "$$\n\\sin2\\pi x\\leq2\\pi x.\n$$", "text_format": "latex", "page_idx": 20}, {"type": "text", "text": "Integrating this inequality from $[0,t]$ we have that $\\begin{array}{r}{\\int_{0}^{t}\\sin2\\pi x\\le\\pi t^{2}}\\end{array}$ . Since $\\begin{array}{r}{\\int_{0}^{t}\\sin2\\pi x=\\frac{1}{2\\pi}(1-}\\end{array}$ $\\cos2\\pi t)$ the lower bound follows. ", "page_idx": 20}, {"type": "text", "text": "For the upper bound we proceed in a similar fashion. By the fact that $\\sin{2\\pi x}$ is concave for $x\\in[0,1/\\bar{4}]$ we have that ", "page_idx": 20}, {"type": "equation", "text": "$$\n\\sin2\\pi x=\\sin2\\pi{\\bigl(}(1-4x)\\cdot0+4x\\cdot{\\frac{1}{4}}{\\bigr)}\\geq{\\bigl(}1-4x{\\bigr)}\\sin0+4x\\sin{\\frac{\\pi}{2}}=4x.\n$$", "text_format": "latex", "page_idx": 20}, {"type": "text", "text": "Again integrating the above inequality from 0 to $t$ we have $\\begin{array}{r}{\\frac{1-\\cos2\\pi t}{2\\pi}\\geq2t^{2}}\\end{array}$ . ", "page_idx": 20}, {"type": "text", "text": "A.4 Proof of Theorem 3.4 ", "text_level": 1, "page_idx": 20}, {"type": "text", "text": "Proof. The proof follows the same argument of the proof used in 3.3, where we see that, in view of the factorization in Equation 5 we may bound the individual expected advantage as: ", "page_idx": 20}, {"type": "equation", "text": "$$\n\\operatorname{EAdv}(\\mathcal{M},\\mathcal{D},x_{k+1})\\leq\\eta(x_{k+1})(1-\\eta(x_{k+1})\\operatorname{\\mathbb{1}}_{x_{1},\\ldots,x_{k}}\\left[\\sum_{s=0}^{k}\\left|P(Z_{k}=s|\\mathbf{x})-P(Z_{k}=s-1|\\mathbf{x})\\right|\\right]\\,.\n$$", "text_format": "latex", "page_idx": 20}, {"type": "text", "text": "But from Lemma A.3 it follows that this can be bounded by ", "page_idx": 20}, {"type": "equation", "text": "$$\n\\mu_{i}\\,O\\left((p(1-p))^{1/4}\\sqrt{(1-2\\mu)^{k}k^{1/2}+\\frac{1}{\\mu^{3/2}k}}+\\sqrt{\\frac{(1-2\\mu)^{k}}{k^{1/2}}+\\frac{1}{\\mu^{3/2}k^{2}}}\\right)\\;.\n$$", "text_format": "latex", "page_idx": 20}, {"type": "text", "text": "Now, since $\\,(1-2\\mu)^{k}k^{1/2}\\,<\\,\\frac{\\mu}{k}$ for $\\begin{array}{r}{k\\,\\geq\\,\\frac{2}{\\mu}\\log\\left(\\frac{1}{\\mu}\\right)}\\end{array}$ , we upper bound accordingly the two terms involving $(1-2\\mu)^{k}$ , and the result follows. \u53e3 ", "page_idx": 20}, {"type": "text", "text": "A.5 Tail distribution of the attack advatange ", "text_level": 1, "page_idx": 20}, {"type": "text", "text": "We are also interested in the tail of the distribution of the attack advantage, that is, the tail of the difference between ", "page_idx": 20}, {"type": "equation", "text": "$$\nf_{1}(\\mathbf{x})=\\operatorname*{sup}_{\\mathbf{\\mathcal{A}_{\\mathrm{informed}}}}\\!\\!\\!\\!\\underbrace{\\mathbb{P}}_{\\mathbf{\\Pi}_{i\\sim\\mathrm{Uniform}([m])}}(\\mathcal{A}_{\\mathrm{informed}}(\\mathbf{x},\\mathcal{M}(\\mathbf{x},\\mathbf{y}))_{i}=y_{i}\\mid\\mathbf{x})\n$$", "text_format": "latex", "page_idx": 20}, {"type": "text", "text": "and ", "page_idx": 20}, {"type": "equation", "text": "$$\nf_{2}(\\mathbf{x})=\\operatorname*{sup}_{\\begin{array}{c}{A_{\\mathrm{uninformed}}}\\\\ {i\\sim\\mathrm{Uniform}([m])}\\\\ {\\operatorname{coins~of}\\mathcal{M}}\\end{array}}(\\mathcal{A}_{\\mathrm{uninformed}}(\\mathbf{x},\\mathcal{M}_{\\perp}(\\mathbf{x},\\mathbf{y}))_{i}=y_{i}\\mid\\mathbf{x})\n$$", "text_format": "latex", "page_idx": 20}, {"type": "text", "text": "Specifically, we define ", "page_idx": 20}, {"type": "equation", "text": "$$\n\\mathrm{HPAdv}(\\mathcal{M},\\mathcal{D},\\theta)=\\underset{\\mathbf{x}\\sim\\mathcal{D}_{\\mathcal{X}}^{m}}{\\mathbb{P}}\\left(f_{1}(\\mathbf{x})-f_{2}(\\mathbf{x})\\right)>\\theta)~,\n$$", "text_format": "latex", "page_idx": 20}, {"type": "text", "text": "viewed as a function of $\\theta\\in[0,1]$ , which we call the High Probability attack Advantage (at level $\\theta$ ). This is simply a high-probability version of $\\operatorname{EAdv}(A,{\\mathcal{M}},{\\mathcal{D}})$ over the generation of $\\mathbf{x}$ . A similar high-probability version can be defined for the individual version of the attack advantage. ", "page_idx": 20}, {"type": "text", "text": "We begin by observing that in the special case of $\\mathcal{M}_{\\sf R R}$ , we have $\\mathrm{IEAdv}_{1}(\\mathcal{M}_{\\mathrm{RR}},\\mathcal{D},x_{1})=f_{1}(\\mathbf{x})-$ $f_{2}(\\mathbf{x})$ , so that the high probability bound involved in the computation of $\\mathrm{HPAdv}(\\mathcal{M}_{\\sf R R},\\mathcal{D},\\theta)$ is a direct consequence of the tail properties of the function $\\bar{\\eta(x_{1})}\\,=\\,\\mathbb{P}(y_{1}\\,=\\,1\\,|\\,x_{1})$ as applied to the expression for $\\mathrm{IEAdv}_{1,1}(\\mathcal{M}_{\\sf R R}^{\\sf\\bar{R}},\\bar{\\mathcal{D}},x_{1})$ in Theorem A.17. Thus, for $\\mathcal{M}_{\\sf R R}$ , the connection from IEAdv to HPAdv is immediate. ", "page_idx": 20}, {"type": "text", "text": "We continue with studying HPAdv for $\\mathcal{M}_{\\mathrm{LLP}}$ . We have the following bound. ", "page_idx": 20}, {"type": "text", "text": "Theorem A.9. Under the same assumptions and notation as in Theorem 3.3 (main body) there are universal constants $c_{1},c_{2}>0$ such that, for $k=\\Omega(1/\\mu)$ , ", "page_idx": 21}, {"type": "equation", "text": "$$\n\\mathrm{HPAdv}\\left(\\mathcal{M}_{L L P},\\mathcal{D},c_{1}\\sqrt{\\frac{\\mu}{k}}\\right)\\leq\\left(k+1\\right)e^{-c_{2}\\,k\\mu}\\;.\n$$", "text_format": "latex", "page_idx": 21}, {"type": "text", "text": "In order to prove this theorem, we first need ancillary results related to Poisson Binomial distributions.   \nWe denote a Poisson Binomial distribution with parameters $\\{\\eta_{1},\\hdots,\\eta_{k}\\}$ by $\\operatorname{PBin}(\\eta_{1},\\dots,\\eta_{k})$ . ", "page_idx": 21}, {"type": "text", "text": "Lemma A.10. Let $s,\\Sigma\\sim P B i n(\\eta_{1},\\dots,\\eta_{k})$ , $\\Sigma^{(1)}\\sim P B i n(\\eta_{2},\\dots,\\eta_{k}),$ , where $\\eta_{1},\\ldots,\\eta_{k}\\in[0,1]$ are such that ", "page_idx": 21}, {"type": "equation", "text": "$$\n\\sum_{i=1}^{k}\\eta_{i}\\bigl(1-\\eta_{i}\\bigr)\\geq1\\ .\n$$", "text_format": "latex", "page_idx": 21}, {"type": "text", "text": "Then ", "page_idx": 21}, {"type": "equation", "text": "$$\n\\mathbb{E}_{s}\\left[\\left|\\frac{\\mathbb{P}(\\Sigma^{(1)}=s)-\\mathbb{P}(\\Sigma^{(1)}=s-1)}{\\mathbb{P}(\\Sigma=s)}\\right|\\right]\\!\\le\\frac{9}{\\sqrt{\\sum_{i=2}^{k}\\eta_{i}(1-\\eta_{i})}}\\;.\n$$", "text_format": "latex", "page_idx": 21}, {"type": "text", "text": "Proof. We will use the following distribution to approximate Poisson Binomial distributions. ", "page_idx": 21}, {"type": "text", "text": "Definition A.11. [28] We say that an integer random variable $Y$ is distributed according to the translated Poisson distribution with parameters $\\mu$ and $\\sigma^{2}$ , denoted $T P(\\mu,\\sigma^{2})$ , if and only $i f Y$ can be written as ", "page_idx": 21}, {"type": "equation", "text": "$$\nY=\\lfloor\\mu+\\sigma^{2}\\rfloor+Z,\n$$", "text_format": "latex", "page_idx": 21}, {"type": "text", "text": "where $Z$ is a random variable distributed according to Poisson $(\\sigma^{2}+\\{\\mu-\\sigma^{2}\\})$ , being $\\{\\mu-\\sigma^{2}\\}$ the fractional part of $\\mu-\\sigma^{2}$ , and $\\textstyle\\left\\lfloor\\mu+\\sigma^{2}\\right\\rfloor$ the integer part of $\\mu+\\sigma^{2}$ . ", "page_idx": 21}, {"type": "text", "text": "Let us then define two random variables $\\Gamma$ and $\\Gamma^{(1)}$ . Variable $\\Gamma$ is $\\textstyle\\operatorname{TP}(\\mu,\\sigma^{2})$ with $\\textstyle\\mu=\\sum_{i=1}^{k}\\eta_{i}$ and $\\begin{array}{r}{\\sigma^{2}=\\sum_{i=1}^{k}{\\eta_{i}(1-\\eta_{i})}}\\end{array}$ , while is $\\mathrm{TP}(\\mu_{1},\\sigma_{1}^{2})$ , where $\\begin{array}{r}{\\mu_{1}=\\sum_{i=2}^{k}\\eta_{i}}\\end{array}$ and $\\begin{array}{r}{\\sigma_{1}^{2}=\\sum_{i=2}^{k}{\\eta_{i}(1-\\eta_{i})}}\\end{array}$ . Let $d_{\\mathrm{TV}}$ denote the total variation distance. We can write ", "page_idx": 21}, {"type": "equation", "text": "$$\n\\begin{array}{r l}{\\frac{\\nabla(\\sum^{(1)}=s)-\\nabla(\\sum^{(1)}=s-1)}{\\nabla(\\sum=s)}\\bigg[\\bigg]-\\displaystyle\\sum_{s=0}^{k}\\nabla(\\sum s=s)\\times\\bigg[\\bigg]\\bigg[\\frac{\\nabla(\\sum^{(1)}=s)-\\nabla(\\sum^{(1)}=s-1)}{\\nabla(\\sum^{(2)}=s)}\\bigg]\\bigg[}&{}\\\\ {=\\displaystyle\\sum_{s=0}^{k}\\bigg[\\nabla(\\sum^{(1)}=s)-\\nabla(\\sum^{(1)}=s-1)\\bigg]}&{}\\\\ {\\leq\\displaystyle\\sum_{s=0}^{k}\\bigg[\\nabla(\\sum^{(1)}=s)-\\nabla(\\Gamma=s)\\bigg]+\\frac{k}{\\sum^{(2)}}\\bigg[\\nabla(\\Gamma=s)-\\nabla(\\Gamma^{(1)}=s}\\\\ {\\quad}&{\\qquad+\\displaystyle\\sum_{s=0}^{k}\\bigg[\\nabla(\\Gamma^{(1)}=s-1)-\\nabla(\\sum^{(2)}=s-1)\\bigg]+\\coth^{(1)}}\\\\ {\\leq\\displaystyle d_{\\mathcal{N}}(\\sum,\\sum^{(1)})\\bigg[\\Gamma(\\Gamma=s)-\\nabla(\\Gamma^{(1)}=s-1)\\bigg]+d_{\\mathcal{N}}(\\sum^{(1)},\\Gamma)}&{}\\\\ {\\leq\\displaystyle\\frac{\\sqrt{\\sum^{(1)}\\alpha^{(1)}(1-s)}+2}{\\sum^{(1)}\\mu(1-s)}+\\frac{\\sqrt{\\sum^{(2)}\\alpha^{(1)}(1-s)}+2}{\\sum^{(1-s)}\\mu(1-s)}}&{}\\end{array}\n$$", "text_format": "latex", "page_idx": 21}, {"type": "equation", "text": "$$\n\\begin{array}{l}{\\displaystyle+\\sum_{s=0}^{k}\\biggl|\\mathbb{P}(\\Gamma=s)-\\mathbb{P}(\\Gamma^{(1)}=s-1)\\biggr|}\\\\ {\\displaystyle\\leq\\frac{3}{\\sqrt{\\sigma}}+\\frac{3}{\\sqrt{\\sigma_{1}}}+\\sum_{s=0}^{k}\\biggl|\\mathbb{P}(\\Gamma=s)-\\mathbb{P}(\\Gamma^{(1)}=s-1)\\biggr|\\;,}\\end{array}\n$$", "text_format": "latex", "page_idx": 21}, {"type": "text", "text": "where (10) follows from the triangle inequality, (11) follows from Lemma A.12 below, and (12) follows from the overapproximation ", "page_idx": 22}, {"type": "equation", "text": "$$\n\\frac{\\sqrt{\\sum_{i=1}^{k}\\eta_{i}^{3}(1-\\eta_{i})}+2}{\\sum_{i=1}^{k}\\eta_{i}(1-\\eta_{i})}\\leq\\frac{\\sqrt{\\sum_{i=1}^{k}\\eta_{i}(1-\\eta_{i})}+2}{\\sum_{i=1}^{k}\\eta_{i}(1-\\eta_{i})}\\leq\\frac{3}{\\sqrt{\\sum_{i=1}^{k}\\eta_{i}(1-\\eta_{i})}}\\,,\n$$", "text_format": "latex", "page_idx": 22}, {"type": "text", "text": "the latter inequality exploiting the condition $\\begin{array}{r}{\\sum_{i=1}^{k}\\eta_{i}(1-\\eta_{i})\\geq1}\\end{array}$ ", "page_idx": 22}, {"type": "text", "text": "Lemma A.12. $I I28J$ , see (3.4) therein] Let $J_{1},\\ldots,J_{k}$ be independent random Bernoulli with parameters $p_{1},\\ldots,p_{k}$ . Then ", "page_idx": 22}, {"type": "equation", "text": "$$\nd_{T V}\\left(\\sum_{i=1}^{k}J_{i},T P(\\mu,\\sigma^{2})\\right)\\leq\\frac{\\sqrt{\\sum_{i=1}^{k}p_{i}^{3}(1-p_{i})}+2}{\\sum_{i=1}^{k}p_{i}(1-p_{i})}\n$$", "text_format": "latex", "page_idx": 22}, {"type": "text", "text": "where $\\textstyle\\mu=\\sum_{i=1}^{k}p_{i}$ and $\\begin{array}{r}{\\sigma^{2}=\\sum_{i=1}^{k}p_{i}(1-p_{i})}\\end{array}$ . ", "page_idx": 22}, {"type": "text", "text": "We recall a lemma which will be useful to upper bound the last term in (12). ", "page_idx": 22}, {"type": "text", "text": "Lemma A.13. [6] For $\\mu_{1},\\mu_{2}\\in\\mathbb{R}$ and $\\sigma_{1}^{2},\\sigma_{2}^{2}\\in\\mathbb{R}_{+}$ such that $\\left\\lfloor\\mu_{1}-\\sigma_{1}^{2}\\right\\rfloor\\leq\\left\\lfloor\\mu_{2}-\\sigma_{2}^{2}\\right\\rfloor$ , it holds that ", "page_idx": 22}, {"type": "equation", "text": "$$\nd_{T V}\\Bigl(T P(\\mu_{1},\\sigma_{1}^{2}),T P(\\mu_{2},\\sigma_{2}^{2})\\Bigr)\\leq{\\frac{|\\mu_{1}-\\mu_{2}|}{\\sigma_{1}}}+{\\frac{|\\sigma_{1}^{2}-\\sigma_{2}^{2}|+1}{\\sigma_{1}^{2}}}\\ .\n$$", "text_format": "latex", "page_idx": 22}, {"type": "text", "text": "We will need the following technical lemma as well. ", "page_idx": 22}, {"type": "text", "text": "Lemma A.14. For $\\mu\\in\\mathbb{R}$ and $\\sigma_{1}^{2},\\sigma_{2}^{2}\\in\\mathbb{R}_{+}$ , let us define $X_{1}\\sim T P(\\mu,\\sigma_{1}^{2})$ and $X_{2}\\sim T P(\\mu+1,\\sigma_{2}^{2})$ . Then ", "page_idx": 22}, {"type": "equation", "text": "$$\n\\mathbb{P}(X_{1}=\\ell-1)=\\mathbb{P}(X_{2}=\\ell)\n$$", "text_format": "latex", "page_idx": 22}, {"type": "text", "text": "for all $\\ell\\in\\mathbb{Z}$ . ", "page_idx": 22}, {"type": "text", "text": "Proof of Lemma A.14. One has to observe that Translated Poisson distribution is equivalent to a Poisson distribution with parameter $\\delta$ where $\\delta=\\mu-\\gamma$ and $\\gamma=\\lfloor\\mu-\\sigma^{2}\\rfloor$ , but it is shifted by $\\gamma$ . Moreover, note that $\\gamma+\\bar{1^{\\prime}}\\!=\\!\\lfloor\\mu+1-\\sigma^{2}\\rfloor$ , thus $\\delta+1=\\mu-\\gamma+1$ . This observation implies the claim with $\\mu+1$ . \u53e3 ", "page_idx": 22}, {"type": "text", "text": "We continue by using both Lemma A.13 and Lemma A.14. Define $\\Gamma^{(2)}\\sim\\mathrm{TP}(\\mu_{1}+1,\\sigma_{1}^{2})$ . We can write ", "page_idx": 22}, {"type": "equation", "text": "$$\n\\begin{array}{r l}{\\displaystyle\\sum_{s=0}^{k}\\biggl|\\mathbb{P}(\\Gamma=s)-\\mathbb{P}(\\Gamma^{(1)}=s-1)\\biggr|=\\displaystyle\\sum_{s=0}^{k}\\biggl|\\mathbb{P}(\\Gamma=s)-\\mathbb{P}(\\Gamma^{(2)}=s)\\biggr|}\\\\ {\\displaystyle}&{=d_{\\mathrm{Tw}}\\biggl(\\mathbb{P}(\\mu,\\sigma^{2}),\\,\\mathrm{TP}(\\mu_{1}+1,\\sigma_{1}^{2})\\biggr)}\\\\ {\\displaystyle}&{\\leq\\displaystyle\\frac{|\\mu-\\mu_{1}-1|}{\\sigma}+\\frac{|\\sigma^{2}-\\sigma_{1}^{2}|}{\\sigma^{2}}+1}\\\\ {\\displaystyle}&{(\\mathrm{from}\\,\\mathrm{Lemma\\,A.13})}\\\\ {\\displaystyle}&{=\\displaystyle\\frac{1-\\eta_{1}}{\\sigma}+\\frac{\\eta_{1}(1-\\eta_{1})+1}{\\sigma^{2}}}\\\\ {\\displaystyle}&{\\leq\\frac{3}{\\sqrt{\\sigma}}\\,,}\\end{array}\n$$", "text_format": "latex", "page_idx": 22}, {"type": "text", "text": "the latter inequality using again the condition $\\begin{array}{r}{\\sum_{i=1}^{k}\\eta_{i}(1-\\eta_{i})\\geq1}\\end{array}$ . ", "page_idx": 22}, {"type": "text", "text": "Piecing together gives ", "page_idx": 22}, {"type": "equation", "text": "$$\n\\mathbb{E}_{s}\\left[\\left\\vert1-\\frac{\\mathbb{P}(\\Sigma^{(1)}=s-1)}{\\mathbb{P}(\\Sigma=s)}\\right\\vert\\right]\\le\\frac{6}{\\sqrt{\\sigma}}+\\frac{3}{\\sqrt{\\sigma_{1}}}\\le\\frac{9}{\\sqrt{\\sigma_{1}}}\\;.\n$$", "text_format": "latex", "page_idx": 22}, {"type": "text", "text": "This concludes the proof. ", "page_idx": 22}, {"type": "text", "text": "With these results handy, we are ready to prove Theorem A.9. Recall the functions $f_{1}(\\mathbf{x})$ and $f_{2}(\\mathbf{x})$ defined in the main body. ", "page_idx": 23}, {"type": "text", "text": "Proof of Theorem A.9. Let $\\textstyle\\sum_{j=1}^{k}y_{j}$ . From Lemma A.1, we see that ", "page_idx": 23}, {"type": "equation", "text": "$$\nf_{1}(\\mathbf{x})=1-\\frac{1}{k}\\sum_{i=1}^{k}\\mathbb{E}_{\\mathbf{y}\\sim\\mathcal{D}_{\\mathcal{Y}|\\mathbf{x}}}\\bigg[\\operatorname*{min}_{b\\in\\{0,1\\}}\\left\\lbrace\\mathbb{P}(y_{i}=b\\mid\\mathbf{x},\\Sigma\\right\\rbrace|\\,\\mathbf{x}\\bigg]\n$$", "text_format": "latex", "page_idx": 23}, {"type": "text", "text": "and ", "page_idx": 23}, {"type": "equation", "text": "$$\nf_{2}(\\mathbf{x})=1-\\frac{1}{k}\\sum_{i=1}^{k}\\operatorname*{min}\\{\\eta(x_{i}),1-\\eta(x_{i})\\}\n$$", "text_format": "latex", "page_idx": 23}, {"type": "text", "text": "so that ", "page_idx": 23}, {"type": "equation", "text": "$$\n\\begin{array}{l}{{f_{1}({\\bf x})-f_{2}({\\bf x})=\\displaystyle\\frac{1}{k}\\sum_{i=1}^{k}\\left(\\operatorname*{min}\\{\\eta(x_{i}),1-\\eta(x_{i})\\}-\\mathbb{E}_{{\\bf y}\\sim{\\mathcal D}_{{\\mathbb Y}|\\times}}\\left[\\operatorname*{min}_{b\\in\\{0,1\\}}\\left\\{\\mathbb{P}(y_{i}=b\\mid{\\bf x},\\Sigma\\right\\}|\\,{\\bf x}\\right]\\right)\\right.}}\\\\ {{\\displaystyle\\left.\\leq\\frac{1}{k}\\sum_{i=1}^{k}\\left|\\eta(x_{i})-\\mathbb{P}_{\\Sigma|{\\bf x}}(y_{i}=1\\mid\\Sigma,{\\bf x})\\right|\\;,}}\\end{array}\n$$", "text_format": "latex", "page_idx": 23}, {"type": "text", "text": "where in the inequality we have again used (4). ", "page_idx": 23}, {"type": "text", "text": "But, for any given $s\\in\\{0,1,\\ldots,k\\}$ , ", "page_idx": 23}, {"type": "equation", "text": "$$\n\\begin{array}{r l}&{{\\mathbb P}(y_{i}=1\\,|\\,\\Sigma=s,\\mathbf{x})={\\mathbb P}(y_{i}=1\\,|\\,\\mathbf{x})\\,\\frac{{\\mathbb P}(\\Sigma=s\\,|\\,y_{i}=1,\\,\\mathbf{x})}{{\\mathbb P}(\\Sigma=s\\,|\\,\\mathbf{x})}}\\\\ &{\\qquad\\qquad\\qquad\\qquad\\qquad=\\eta(x_{i})\\,\\frac{{\\mathbb P}(\\Sigma^{(-i)}=s\\,-\\,1\\,|\\,\\mathbf{x})}{{\\mathbb P}(\\Sigma=s\\,|\\,\\mathbf{x})}}\\\\ &{\\qquad\\qquad\\qquad\\qquad\\qquad\\qquad\\mathbb{P}(\\Sigma^{(-i)}=s-1\\,|\\,\\mathbf{x})}\\\\ &{\\qquad\\qquad\\qquad\\qquad\\qquad\\qquad\\qquad=\\eta(x_{i})\\,\\frac{{\\mathbb P}(\\Sigma^{(-i)}=s\\,-\\,1\\,|\\,\\mathbf{x})}{\\eta(x_{i})\\,{\\mathbb P}(\\Sigma^{(-i)}=s\\,-\\,1\\,|\\,\\mathbf{x})+(1-\\eta(x_{i}))\\,{\\mathbb P}(\\Sigma^{(-i)}=s\\,|\\,\\mathbf{x})}}\\end{array}\n$$", "text_format": "latex", "page_idx": 23}, {"type": "text", "text": "where $\\begin{array}{r}{\\Sigma^{(-i)}=\\sum_{j:j=1,j\\neq i}^{k}y_{j}}\\end{array}$ ", "page_idx": 23}, {"type": "text", "text": "Hence ", "page_idx": 23}, {"type": "equation", "text": "$$\nf_{1}(\\mathbf{x})-f_{2}(\\mathbf{x})\\leq\\frac{1}{k}\\sum_{i=1}^{k}\\eta(x_{i})(1-\\eta(x_{i}))\\mathbb{E}_{s}\\bigg[\\bigg|\\frac{\\mathbb{P}(\\Sigma^{(-i)}=s\\,|\\,\\mathbf{x})-\\mathbb{P}(\\Sigma^{(-i)}=s-1\\,|\\,\\mathbf{x})}{\\mathbb{P}(\\Sigma=s\\,|\\,\\mathbf{x})}\\bigg|\\,|\\,\\mathbf{x}\\bigg]\\,,\n$$", "text_format": "latex", "page_idx": 23}, {"type": "text", "text": "where $s$ (conditioned on $\\mathbf{x}$ ) is distributed as $\\operatorname{PBin}(\\eta(x_{1}),\\dots,\\eta(x_{k}))$ . Set for brevity $\\mu=\\mathbb{E}[\\eta(x)(1-$ $\\eta(x)]$ , and introduce the short-hand notation ", "page_idx": 23}, {"type": "equation", "text": "$$\nC_{\\beta,i}=C_{\\beta}({\\bf x}^{(-i)})=\\mathbb{I}\\Big\\{\\sum_{\\substack{j:j=1,\\,j\\neq i}}^{k}\\eta(x_{j})(1-\\eta(x_{j}))\\leq(k-1)\\mu-\\beta\\Big\\}\\,,\n$$", "text_format": "latex", "page_idx": 23}, {"type": "text", "text": "for some $\\beta\\in[0,(k-1)\\mu)$ to be specified. In the above $\\mathbf{x}^{(-i)}$ denotes $\\mathbf{x}$ with its $i$ -th item $x_{i}$ removed. We have ", "page_idx": 23}, {"type": "equation", "text": "$$\n\\begin{array}{r l}&{\\jmath(x_{i})(1-\\eta(x_{i}))\\mathbb{E}_{s}\\bigg[\\bigg|\\frac{\\mathbb{P}\\left(\\sum^{(-i)}=s\\mid\\mathbf{x}\\right)-\\mathbb{P}\\left(\\sum^{(-i)}=s-1\\mid\\mathbf{x}\\right)}{\\mathbb{P}\\left(\\sum=s\\mid\\mathbf{x}\\right)}\\bigg|\\,|\\,\\mathbf{x}\\bigg]}\\\\ &{\\qquad\\qquad\\qquad\\qquad=C_{\\beta,i}\\eta(x_{i})(1-\\eta(x_{i}))\\mathbb{E}_{s}\\bigg[\\bigg|\\frac{\\mathbb{P}\\left(\\sum^{(-i)}=s\\mid\\mathbf{x}\\right)-\\mathbb{P}\\left(\\sum^{(-i)}=s-1\\mid\\mathbf{x}\\right)}{\\mathbb{P}\\left(\\sum=s\\mid\\mathbf{x}\\right)}\\bigg|\\,|\\,\\mathbf{x}\\bigg]}\\\\ &{\\qquad\\qquad\\qquad+\\left(1-C_{\\beta,i}\\right)\\eta(x_{i})(1-\\eta(x_{i}))\\mathbb{E}_{s}\\bigg[\\bigg|\\frac{\\mathbb{P}\\left(\\sum^{(-i)}=s\\mid\\mathbf{x}\\right)-\\mathbb{P}\\left(\\sum^{(-i)}=s-1\\mid\\mathbf{x}\\right)}{\\mathbb{P}\\left(\\sum=s\\mid\\mathbf{x}\\right)}\\bigg|\\,|\\,}\\\\ &{\\qquad\\qquad\\qquad\\leq C_{\\beta,i}+(1-C_{\\beta,i})\\eta(x_{i})(1-\\eta(x_{i}))\\mathbb{E}_{s}\\bigg[\\bigg|\\frac{\\mathbb{P}\\left(\\sum^{(-i)}=s\\mid\\mathbf{x}\\right)-\\mathbb{P}\\left(\\sum^{(-i)}=s-1\\mid\\mathbf{x}\\right)}{\\mathbb{P}\\left(\\sum=s\\mid\\mathbf{x}\\right)}}\\end{array}\n$$", "text_format": "latex", "page_idx": 23}, {"type": "text", "text": "since ", "page_idx": 24}, {"type": "equation", "text": "$$\n\\eta(x_{i})(1-\\eta(x_{i}))\\mathbb{E}_{s}\\Big[\\Big|\\frac{\\mathbb{P}(\\Sigma^{(-i)}=s\\,|\\,\\mathbf{x})-\\mathbb{P}(\\Sigma^{(-i)}=s-1\\,|\\,\\mathbf{x})}{\\mathbb{P}(\\Sigma=s\\,|\\,\\mathbf{x})}\\Big|\\,|\\,\\mathbf{x}\\Big]\\leq1\\,.\n$$", "text_format": "latex", "page_idx": 24}, {"type": "text", "text": "for every $i$ and every realization $\\mathbf{x}$ . ", "page_idx": 24}, {"type": "text", "text": "On the other hand, a closer look at term ", "page_idx": 24}, {"type": "equation", "text": "$$\n(1-C_{\\beta,i})\\mathbb{E}_{s}\\Big[\\Big|\\frac{\\mathbb{P}(\\Sigma^{(-i)}=s\\,|\\,\\mathbf{x})-\\mathbb{P}(\\Sigma^{(-i)}=s-1\\,|\\,\\mathbf{x})}{\\mathbb{P}(\\Sigma=s\\,|\\,\\mathbf{x})}\\Big|\\,|\\,\\mathbf{x}\\Big]\n$$", "text_format": "latex", "page_idx": 24}, {"type": "text", "text": "reveals that we are in a position to apply Lemma A.10. This allows us to conclude that this expectation is upper bounded by1 ", "page_idx": 24}, {"type": "equation", "text": "$$\n\\frac{9(1-C_{\\beta,i})}{\\sqrt{\\sum_{j:j\\neq i,j=1}^{k}\\eta(x_{j})(1-\\eta(x_{j}))}}\n$$", "text_format": "latex", "page_idx": 24}, {"type": "text", "text": "for every realization of $\\mathbf{x}$ . Using the definition of $C_{\\beta,i}$ the above can be further upper bounded by ", "page_idx": 24}, {"type": "equation", "text": "$$\n\\frac{9}{\\sqrt{(k-1)\\mu-\\beta}}\\;.\n$$", "text_format": "latex", "page_idx": 24}, {"type": "text", "text": "Putting together, we have obtained ", "page_idx": 24}, {"type": "equation", "text": "$$\n\\begin{array}{r l}&{f_{1}(\\mathbf x)-f_{2}(\\mathbf x)\\le\\displaystyle\\frac1k\\sum_{i=1}^{k}\\left(C_{\\beta,i}+\\frac{9\\eta(x_{i})(1-\\eta(x_{i}))}{\\sqrt{(k-1)\\mu-\\beta}}\\right)}\\\\ &{\\qquad\\qquad=\\displaystyle\\frac1k\\sum_{i=1}^{k}C_{\\beta,i}+\\frac{9\\sum_{i=1}^{k}\\eta(x_{i})(1-\\eta(x_{i}))}{k\\sqrt{(k-1)\\mu-\\beta}}}\\end{array}\n$$", "text_format": "latex", "page_idx": 24}, {"type": "text", "text": "for every $\\mathbf{x}$ . Now, from the standard Bernstein inequality,2 ", "page_idx": 24}, {"type": "equation", "text": "$$\n\\mathbb{P}_{\\mathbf{x}\\sim\\mathcal{D}_{\\mathcal{X}}}\\left(C_{\\beta,i}=0\\;\\forall\\,i\\right)\\geq1-k\\,e^{-\\frac{\\beta^{2}}{2k\\mu+\\beta/6}}\n$$", "text_format": "latex", "page_idx": 24}, {"type": "text", "text": "and ", "page_idx": 24}, {"type": "equation", "text": "$$\n\\mathbb{P}_{\\mathbf{x}\\sim\\mathcal{D}_{\\mathcal{X}}}\\left(\\sum_{i=1}^{k}\\eta(x_{i})(1-\\eta(x_{i}))\\le k\\mu+\\beta\\right)\\ge1-e^{-\\frac{\\beta^{2}}{2k\\mu+\\beta/6}}\n$$", "text_format": "latex", "page_idx": 24}, {"type": "text", "text": "for every $\\beta>0$ . This yields ", "page_idx": 24}, {"type": "equation", "text": "$$\n\\mathbb{P}_{\\mathbf{x}\\sim\\mathcal{D}_{\\mathcal{X}}}\\left(f_{1}(\\mathbf{x})-f_{2}(\\mathbf{x})>\\frac{9(k\\mu+\\beta)}{k\\sqrt{(k-1)\\mu-\\beta}}\\right)\\le(k+1)\\,e^{-\\frac{\\beta^{2}}{2k\\mu+\\beta/6}}\n$$", "text_format": "latex", "page_idx": 24}, {"type": "text", "text": "holding for $0\\leq\\beta<(k-1)\\mu$ . ", "page_idx": 24}, {"type": "text", "text": "One can easily see that choosing $\\beta=(k-1)\\mu/2$ yields, when $k=\\Omega(1/\\mu)$ , ", "page_idx": 24}, {"type": "equation", "text": "$$\n\\mathbb{P}_{\\mathbf{x}\\sim\\mathcal{D}_{\\mathcal{X}}}\\left(f_{1}(\\mathbf{x})-f_{2}(\\mathbf{x})=\\Omega\\left(\\sqrt{\\frac{\\mu}{k}}\\right)\\right)\\le k\\,e^{-\\Theta(k\\mu)}\\;,\n$$", "text_format": "latex", "page_idx": 24}, {"type": "text", "text": "which concludes the proof. ", "page_idx": 24}, {"type": "text", "text": "Remark A.15. The analysis contained above also allows us to provide bounds on the additive advantage that are fully conditional on $\\mathbf{x}=(x_{1},\\ldots,x_{m})$ . For instance, combining Lemma A.10 with Eq. (13), one can easily derive a bound of the form ", "page_idx": 24}, {"type": "equation", "text": "$$\nf_{1}(\\mathbf{x})-f_{2}(\\mathbf{x})=O\\left(\\frac{1}{k}\\sum_{i=1}^{k}\\frac{\\eta(x_{i})(1-\\eta(x_{i}))}{\\sqrt{\\sum_{j:j\\neq i}\\eta(x_{j})(1-\\eta(x_{j}))}}\\right)\\;.\n$$", "text_format": "latex", "page_idx": 24}, {"type": "text", "text": "Then, in order for this bound to be of the form $1/\\sqrt{k}$ , we need to make further assumptions on the function $x\\to\\mathbb{P}(y=1|x)$ , the most obvious one being $\\mathbb{P}(y=1|x)\\in(0,1)$ (bounded away from 0 and 1) for all $x$ . ", "page_idx": 24}, {"type": "text", "text": "A.6 The advantage of RR is independent of the number of examples ", "text_level": 1, "page_idx": 25}, {"type": "text", "text": "Lemma A.16. For all data distributions $\\mathcal{D}$ , all $x_{i}$ , and all datasets $S$ of size $m$ , $\\mathrm{IEAdv}(\\mathcal{M}_{R R},\\mathcal{D},x_{i})$ is independent of $m$ , and so is $\\mathrm{EAdv}(\\mathcal{M}_{R R},\\mathcal{D})$ . ", "page_idx": 25}, {"type": "text", "text": "Proof. Fix any $m$ , any $x_{i}$ , and any data distribution $\\mathcal{D}$ . Then, by Lemma A.1, ", "page_idx": 25}, {"type": "equation", "text": "$$\n\\begin{array}{r l}&{\\mathrm{\\tiny~IEAdv}(\\mathcal{M}_{\\mathtt{R R}},\\mathcal{D},x_{i})=\\operatorname*{min}\\{\\eta(x_{i}),1-\\eta(x_{i})\\}}\\\\ &{\\quad-\\underset{y_{i}\\sim\\mathcal{D}_{\\mathcal{N}\\mid x_{i}}}{\\mathbb{E}}\\biggl[\\operatorname*{min}\\biggl\\{\\underset{(\\mathbf{x}^{(-i)},\\mathbf{y}^{(-i)})}{\\mathbb{P}}(y_{i}=1\\mid\\mathbf{x},\\mathcal{M}_{\\mathtt{R R}}(\\mathbf{x},\\mathbf{y})),\\underset{(\\mathbf{x}^{(-i)},\\mathbf{y}^{(-i)})}{\\mathbb{P}}(y_{i}=0\\mid\\mathbf{x},\\mathcal{M}_{\\mathtt{R R}}(\\mathbf{x},\\mathbf{y}))\\biggr\\}\\biggr\\rvert x_{i}\\biggr]}\\end{array}\n$$", "text_format": "latex", "page_idx": 25}, {"type": "text", "text": "The first term already has no dependence on $m$ . We focus on the second term. ", "page_idx": 25}, {"type": "text", "text": "The key to this proof is that a noisy label $R R(y_{i})=\\tilde{y}_{i}$ is independent of the other true labels $y_{j},j\\neq i$ . Thus, we have ", "page_idx": 25}, {"type": "equation", "text": "$$\n\\mathbb{P}(y_{i}=1\\mid\\mathbf{x},\\mathcal{M}_{\\mathtt{R R}}(\\mathbf{x},\\mathbf{y}))=\\mathbb{P}(y_{i}=1\\mid\\mathbf{x},\\mathcal{M}_{\\mathtt{R R}}(\\mathbf{x},\\mathbf{y})_{i})=\\mathbb{P}(y_{i}=1\\mid x_{i},\\mathcal{M}_{\\mathtt{R R}}(x_{i},y_{i}))\\;.\n$$", "text_format": "latex", "page_idx": 25}, {"type": "text", "text": "Applying this to (15), we have ", "page_idx": 25}, {"type": "equation", "text": "$$\n\\begin{array}{r l}&{\\underset{y_{i}\\sim\\mathcal{D}_{\\mathcal{Y}\\mid x_{i}}}{\\mathbb{E}}\\biggl[\\operatorname*{min}\\biggl\\{\\underset{(\\mathbf{x}^{(-i)},\\mathbf{y}^{(-i)})}{\\mathbb{P}}(y_{i}=1\\mid\\mathbf{x},\\mathcal{M}_{\\mathtt{R R}}(\\mathbf{x},\\mathbf{y})),\\underset{(\\mathbf{x}^{(-i)},\\mathbf{y}^{(-i)})}{\\mathbb{P}}(y_{i}=0\\mid\\mathbf{x},\\mathcal{M}_{\\mathtt{R R}}(\\mathbf{x},\\mathbf{y}))\\biggr\\}\\mid x_{i}\\biggr]}\\\\ &{=\\underset{y_{i}\\sim\\mathcal{D}_{\\mathcal{Y}\\mid x_{i}}}{\\mathbb{E}}\\biggl[\\operatorname*{min}\\bigl\\{\\mathbb{P}(y_{i}=1\\mid x_{i},\\mathcal{M}_{\\mathtt{R R}}(x_{i},y_{i})),\\mathbb{P}(y_{i}=0\\mid x_{i},\\mathcal{M}_{\\mathtt{R R}}(x_{i},y_{i}))\\bigr\\}\\mid x_{i}\\biggr].}\\end{array}\n$$", "text_format": "latex", "page_idx": 25}, {"type": "text", "text": "Plugging this back into (15) gives us $\\operatorname{EAdv}_{1}(\\mathcal{M}_{\\operatorname{RR}},\\mathcal{D})$ as desired. Taking the expectation over $x_{i}\\sim\\mathcal{D}_{\\mathcal{X}}$ completes the proof of the second claim. \u53e3 ", "page_idx": 25}, {"type": "text", "text": "A.7 Proof of Theorem 3.5 ", "text_level": 1, "page_idx": 25}, {"type": "text", "text": "We prove a more verbose version of Theorem 3.5 which includes the optimal adversary: ", "page_idx": 25}, {"type": "text", "text": "Theorem A.17. For any data distribution $\\mathcal{D}$ , the individual expected attack advantage for randomized response with privacy parameter $\\begin{array}{r}{\\pi=\\frac{1}{1+e^{\\epsilon}}}\\end{array}$ is ", "page_idx": 25}, {"type": "equation", "text": "$$\n\\begin{array}{r}{\\operatorname{IEAdv}(\\mathcal{M}_{R R},\\mathcal{D},x_{1})=\\big(\\operatorname*{min}\\{\\eta(x_{1}),1-\\eta(x_{1})\\}-\\pi\\big)\\!\\cdot\\!\\mathbb{I}\\{\\eta(x_{1})\\in[\\pi,1-\\pi]\\}.}\\end{array}\n$$", "text_format": "latex", "page_idx": 25}, {"type": "text", "text": "The optimal adversary maximizing $\\mathrm{IEAdv}_{1}(\\mathcal{M}_{R R},\\mathcal{D},x_{1})\\,\\iota$ is ", "page_idx": 25}, {"type": "equation", "text": "$$\nA^{*}(x_{1},\\tilde{y_{1}})=\\left\\{\\!\\!\\begin{array}{l l}{1,}&{i f\\eta(x_{1})>1-\\pi}\\\\ {0,}&{i f\\eta(x_{1})<\\pi}\\\\ {\\tilde{y_{1}},}&{o t h e r w i s e\\;.}\\end{array}\\right.\n$$", "text_format": "latex", "page_idx": 25}, {"type": "text", "text": "In words, upon receiving $x_{1}$ , the optimal attacker $A^{*}$ predicts the associated label $y_{1}$ as the noisy label $\\tilde{y}_{1}$ if the distribution $\\mathcal{D}$ contains enough uncertainty about $y_{1}$ (the condition $\\eta(x_{1})\\in[\\pi,1-\\pi]$ holds) given the extra noise level $\\pi$ injected. Otherwise, it predicts deterministically (as $y_{1}$ is indeed close to being deterministic when $\\bar{\\eta(x_{1})}\\notin[\\pi,1-\\pi])$ . ", "page_idx": 25}, {"type": "text", "text": "Proof. First we characterize the optimal attacker for which the individual expected advantage is maximal. The Bayes optimal decision which minimizes the loss $\\mathbb{I}\\{A(x_{1},\\tilde{y_{1}})\\neq\\bar{y}\\}$ conditioned on $x_{1}$ and $\\tilde{y_{1}}$ is ", "page_idx": 25}, {"type": "equation", "text": "$$\nA^{\\prime}(x_{1},\\tilde{y_{1}})=\\mathbb{I}\\{\\mathbb{P}(y_{1}=1|x_{1},\\tilde{y_{1}})>\\mathbb{P}(y_{1}=0|x_{1},\\tilde{y_{1}})\\}\n$$", "text_format": "latex", "page_idx": 25}, {"type": "text", "text": "which can be written as ", "page_idx": 25}, {"type": "equation", "text": "$$\n1<\\frac{\\mathbb{P}(y_{1}=1|x_{1},\\tilde{y_{1}})}{\\mathbb{P}(y_{1}=0|x_{1},\\tilde{y_{1}})}=\\frac{\\mathbb{P}(\\tilde{y_{1}}|y_{1}=1,x_{1})\\,\\mathbb{P}(y_{1}=1|x_{1})}{\\mathbb{P}(\\tilde{y_{1}}|y_{1}=0,x_{1})\\,\\mathbb{P}(y_{1}=0|x_{1})}\n$$", "text_format": "latex", "page_idx": 25}, {"type": "text", "text": "Assume that $\\tilde{y_{1}}=1$ , in which case (16) becomes ", "page_idx": 25}, {"type": "equation", "text": "$$\n{\\frac{\\pi}{1-\\pi}}<{\\frac{\\eta(x_{1})}{1-\\eta(x_{1})}}\n$$", "text_format": "latex", "page_idx": 25}, {"type": "text", "text": "which is true whenever $\\eta(x_{1})\\,>\\,\\pi$ , and on the other hand, if $\\eta(x_{1})\\,<\\,\\pi$ then (17) does not hold anymore, thus $A^{\\prime}(x_{1},\\tilde{y_{1}})=\\dot{0}$ . A similar argument holds for $\\tilde{y_{1}}=0$ : The Bayes optimal decision $A^{\\prime}(x_{1},\\tilde{y_{1}})=1$ if and only if $\\eta(x_{1})>1-\\pi$ . Putting together, and noting that $\\pi\\leq1/2$ , this implies that the optimal attack is ", "page_idx": 26}, {"type": "equation", "text": "$$\nA^{*}(x_{1},{\\tilde{y_{1}}})=\\left\\{\\begin{array}{l l}{1,}&{\\mathrm{if}\\;\\eta(x_{1})>1-\\pi}\\\\ {0,}&{\\mathrm{if}\\;\\eta(x_{1})<\\pi}\\\\ {{\\tilde{y_{1}}},}&{\\mathrm{otherwise}\\;.}\\end{array}\\right.\n$$", "text_format": "latex", "page_idx": 26}, {"type": "text", "text": "To compute the reconstruction advantage of optimal attacker $A^{*}$ , we may decompose the feature set into parts as ", "page_idx": 26}, {"type": "equation", "text": "$$\nG(\\pi)=\\{x_{1}:\\eta(x_{1})\\in[\\pi,1-\\pi]\\}\n$$", "text_format": "latex", "page_idx": 26}, {"type": "text", "text": "and its complement set $G^{C}(\\pi)$ . It is clear the advantage of the optimal attacker $A^{*}$ restricted to $G^{C}(\\pi)$ is 0 since $\\tilde{y}_{1}$ gives no extra information on $y_{1}$ when $\\bar{x}_{1}\\in G^{C}\\dot{(\\pi)}$ , that is, the value of $A^{*}(x_{1},\\tilde{y}_{1})$ is independent of $\\tilde{y}_{1}$ when $x_{1}\\in G^{C}(\\pi)$ . On the other hand, the advantage of $A^{*}$ for any $x_{1}\\in G(\\pi)$ is ", "page_idx": 26}, {"type": "equation", "text": "$$\n(1-\\pi)-(1-\\operatorname*{min}\\{\\eta(x_{1}),1-\\eta(x_{1})\\})=\\operatorname*{min}\\{\\eta(x_{1}),1-\\eta(x_{1})\\}-\\pi\n$$", "text_format": "latex", "page_idx": 26}, {"type": "text", "text": "since $\\mathcal{M}_{\\mathrm{RR}}$ reveals the true label with probability $1-\\pi$ , while the attack utility (conditioned on $x_{1}$ ) of the uninformed attacker $1-\\operatorname*{min}\\{\\eta(x_{1}),1-\\eta(x_{1})\\}$ . This concludes the proof. \u53e3 ", "page_idx": 26}, {"type": "text", "text": "B Proofs for Section 3.2 ", "text_level": 1, "page_idx": 26}, {"type": "text", "text": "B.1 Proof of Theorem 3.7 ", "text_level": 1, "page_idx": 26}, {"type": "text", "text": "Proof. Consider the difference of log-odds ratio $I_{k,i}(\\mathcal{M},\\mathcal{D},\\mathbf{x},z,i)$ , where $z\\,=\\,\\mathcal{M}_{\\mathrm{LLP}}(\\mathbf{x},\\mathbf{y})\\,=$ $\\scriptstyle{\\frac{1}{k}}\\sum_{i=1}^{k}y_{i}$ is the output of the aggregation PET. Since $\\mathbf{y}$ is independent of $\\mathbf{x}$ , we can write ", "page_idx": 26}, {"type": "equation", "text": "$$\n\\begin{array}{r l}&{I_{1,0}(\\mathcal{M},\\mathcal{D},\\mathbf{x},z,i)=I(z)=\\ln\\frac{\\mathbb{P}(y_{1}=1\\,|\\,z)}{\\mathbb{P}(y_{1}=0\\,|\\,z)}-\\ln\\frac{\\mathbb{P}(y_{1}=1)}{\\mathbb{P}(y_{1}=0)}}\\\\ &{\\phantom{\\hat{=}}=\\ln\\frac{z}{1-z}-\\ln\\frac{p}{1-p}}\\\\ &{\\phantom{\\hat{=}}=\\ln\\frac{z(1-p)}{(1-z)p}\\,,}\\end{array}\n$$", "text_format": "latex", "page_idx": 26}, {"type": "text", "text": "where we used the fact that, since $k z$ is a binomial random variable, $\\mathbb{P}(y_{1}=1\\,|\\,z)=z$ , independent of $p$ . From the standard Bernstein inequality we have, with probability $\\geq1-\\delta$ , ", "page_idx": 26}, {"type": "equation", "text": "$$\np-B\\leq z\\leq p+B\\;,\n$$", "text_format": "latex", "page_idx": 26}, {"type": "text", "text": "where ", "page_idx": 26}, {"type": "equation", "text": "$$\nB=B(k,p,\\delta)=\\sqrt{\\frac{2p(1-p)\\ln(1/\\delta)}{k}}+\\frac{2}{3k}\\ln(1/\\delta)\\;.\n$$", "text_format": "latex", "page_idx": 26}, {"type": "text", "text": "Since $z\\to\\ln{\\frac{z}{1-z}}$ is monotonically increasing in $z\\in[0,1]$ , this yields ", "page_idx": 26}, {"type": "equation", "text": "$$\n\\mathrm{n}\\left(1-{\\frac{B}{(1-p+B)p}}\\right)=\\ln{\\frac{(p-B)(1-p)}{(1-p+B)p}}\\leq I(z)\\leq\\ln{\\frac{(p+B)(1-p)}{(1-p-B)p}}=\\ln\\left(1+{\\frac{B}{(1-p-B)(1-p)}}\\right)\\,.\n$$", "text_format": "latex", "page_idx": 26}, {"type": "text", "text": "with the same probability. The condition 32p (ln1(\u22121p/)\u03b4) implies 2B \u2264 p \u2212p2, which in turn implies $\\begin{array}{r}{\\frac{B}{(1-p+B)p}\\,\\leq\\,\\frac{1}{2}}\\end{array}$ , as well as $\\begin{array}{r}{\\frac{B}{(1-p-B)p}\\,>\\,0}\\end{array}$ . We further bound the right-most side through $\\ln(1+x)\\leq x$ for all $x\\geq0$ , and the left-most side via $\\ln(1-x)\\geq-x(\\ln2)$ for $x\\in[0,1/2]$ . This gives ", "page_idx": 26}, {"type": "equation", "text": "$$\n-\\frac{B\\ln2}{(1-p+B)p}\\leq I(z)\\leq\\frac{B}{(1-p-B)p}\\;,\n$$", "text_format": "latex", "page_idx": 26}, {"type": "text", "text": "which, after further overapproximations, allows us to write ", "page_idx": 26}, {"type": "equation", "text": "$$\n|I(z)|\\leq{\\frac{B\\ln2}{(1-p-B)p}}\\;.\n$$", "text_format": "latex", "page_idx": 26}, {"type": "text", "text": "Next, the condition $2B\\leq p-p^{2}$ implies $(1-p-B)\\geq(1-p)/2$ so that, overall, ", "page_idx": 26}, {"type": "equation", "text": "$$\n|I(z)|\\leq{\\frac{2B(k,p,\\delta)(\\ln2)}{p(1-p)}}=O\\left({\\sqrt{\\frac{\\ln(1/\\delta)}{p(1-p)k}}}\\right)\n$$", "text_format": "latex", "page_idx": 26}, {"type": "text", "text": "with probability at least $1-\\delta$ . This concludes the proof. ", "page_idx": 26}, {"type": "text", "text": "C Experimental Setup for Section 4 and Further Experimental Results ", "text_level": 1, "page_idx": 27}, {"type": "text", "text": "Datasets. We conduct our experiments on the following datasets: ", "page_idx": 27}, {"type": "text", "text": "KDD2012: We use the click prediction data from the KDD Cup 2012, Track 2 [3] with the feature processing performed in [23]. The learning task for this data is to predict the click through rate for an advertisement based on a number of features related to the advertisement, the page that it appears on, and the user viewing it. There are 11 categorical features that are each one-hot encoded, resulting in a sparse feature vector with 11 non-zero entries in 54,686,452 dimensions. The label for the example is 1 if the ad was clicked, and 0 otherwise. ", "page_idx": 27}, {"type": "text", "text": "Higgs: We also use the Higgs dataset [4], which is a binary classification dataset where the goal is to distinguish between a signal process that produces Higgs bosons, and a background process which does not. The dataset has 28 real-valued features, which are a mix of kinematic properties measured by particle detectors and hand-crafted high level features designed by physicists. The dataset consists of 11,000,000 examples produced via Monte Carlo simulation. We use the first 10,000 examples as our testing data, and the remaining examples for training. ", "page_idx": 27}, {"type": "text", "text": "Model Architectures. Next, we describe the models we use for each dataset. We use the same model architecture regardless of which PET has been used to privatize the labels. ", "page_idx": 27}, {"type": "text", "text": "KDD2012 Model: The model we use for KDD2012 is a deep embedding network. We reduce the dimension of each example from 54,686,452 dimensions to 500,000 dimensions by hashing feature indices. Each hashed feature index is associated with a learned embedding vector in $\\mathbb{R}^{50}$ , and the representation vector for an example is the sum of the learned embeddings for each of its non-zero hashed feature indices. This representation vector is passed through two dense layers with 100 and 50 units, respectively, and ReLU activation functions. The final output is a single unit with sigmoid activation that is interpreted as the click probability for each example. ", "page_idx": 27}, {"type": "text", "text": "Higgs Model: For the Higgs data, we do no feature pre-processing. We use a fully connected feed forward neural network with 4 hidden layers all with 300 units and ReLU activation. The final output is a single unit with sigmoid activation that is interpreted as the probability that the example has the positive class. ", "page_idx": 27}, {"type": "text", "text": "Training Setup. When training a model on the output of any PET, we always use minibatch gradient descent together with the Adam optimizer [24]. PET-specific training details are presented in the following paragraphs. ", "page_idx": 27}, {"type": "text", "text": "Training with Randomized Response. In our experiments we found that the bias in randomized response can affect prediction accuracy for the model trained on these labels, so we post-process the RR output to remove the bias introduced (see for example [19], Equation (7) therein). ", "page_idx": 27}, {"type": "text", "text": "Let $f:y\\rightarrow\\mathbb{R}$ be any function (for example the gradient) of a label, and let $y\\in\\{0,1\\}$ . For plain RR, ", "page_idx": 27}, {"type": "equation", "text": "$$\n\\mathbb{E}[f(R R(y))]=\\frac{e^{\\epsilon}-1}{e^{\\epsilon}+1}\\cdot f(y)+\\frac{1}{e^{\\epsilon}+1}\\cdot(f(0)+f(1)).\n$$", "text_format": "latex", "page_idx": 27}, {"type": "text", "text": "Thus, ", "page_idx": 27}, {"type": "equation", "text": "$$\nf(y)=\\mathbb{E}\\left[\\frac{e^{\\epsilon}+1}{e^{\\epsilon}-1}\\cdot f(R R(y))-\\frac{1}{e^{\\epsilon}-1}\\cdot(f(0)+f(1))\\right].\n$$", "text_format": "latex", "page_idx": 27}, {"type": "text", "text": "Therefore, we can post-process the output of RR to obtain an unbiased estimate of $f(y)$ for any function $f$ . This has no effect on the advantage, however it does help the accuracy substantially. We use this debiasing procedure to obtain an unbiased estimate of the binary cross-entropy loss of the model, and perform minibatch gradient descent on the estimated loss. In all of our figures, we use \u201cRR\u201d to denote this debiased version of the mechanism. ", "page_idx": 27}, {"type": "text", "text": "Training with LLP. For LLP we use minibatch gradient descent to optimize the Empirical Proportion Risk defined in Section 2. We use the binary cross-entropy loss to compare the predicted label proportion against the observed label proportion. As discussed in Appendix D, since the binary cross-entropy loss is a proper loss, the minimizer of the population-level proportion risk for cross-entropy loss is also a minimizer of the population-level cross-entropy loss, as long as the Bayes optimal classifier can be represented by the model architecture. ", "page_idx": 27}, {"type": "text", "text": "Training with LLP+Lap. LLP+Lap is parametrized by two parameters, $k\\in\\{1,2,\\ldots\\}$ and $\\epsilon>0$ . For each bag $B_{i}$ the mechanism discloses $\\alpha_{i}+Z_{i}$ , where $\\alpha_{i}$ is the label proportion in that bag, and $\\begin{array}{r}{Z_{i}\\sim\\mathrm{Lap}(\\frac{\\daleth}{k\\epsilon})}\\end{array}$ , is an independent zero-mean Laplace random variable with parameter $\\frac{1}{k\\epsilon}$ , that is, with variance $\\frac{2}{k^{2}\\epsilon_{.}^{2}}$ . Theorem D.2 shows that for any minibatch of data, the expected gradient of the proportion matching risk is unaffected by adding mean-zero noise to the label proportion. Therefore, using Proportion Matching to train with LLP+Lap is similar to training with LLP, except the variance of each gradient step is increased. ", "page_idx": 28}, {"type": "text", "text": "Training with LLP+Geom. LLP $^+$ Geom also has parameters, $k\\in\\{1,2,\\ldots\\}$ and $\\epsilon>0$ , but $Z_{i}$ $\\begin{array}{r}{Z_{i}=\\frac{Z_{i}^{+}-Z_{i}^{-}}{k}}\\end{array}$ $Z_{i}^{+}$ $Z_{i}^{-}$ geometric distribution with probability of success $1-e^{-\\epsilon}$ . The value $\\alpha_{i}+Z_{i}$ is then clipped to [0, 1]. It is not hard to see that, for every given $\\epsilon$ , LLP $^+$ Geom with parameters $k=1$ and $\\epsilon$ coincides with RR with parameter $\\epsilon$ . ", "page_idx": 28}, {"type": "text", "text": "Unlike LLP+Laplace, the clipped noisy label proportion is not an unbiased estimate of the bag\u2019s true label proportion. We post-process the output of LLP $^+$ Geom to obtain unbiased estimates of the bag\u2019s label proportion. In particular, let $\\alpha_{i}$ be the true label proportion for a bag, \u03b1(inoise)= \u03b1i + Zi be the unclipped noisy proportion, and $\\alpha_{i}^{(\\mathrm{clip})}=\\mathrm{clip}(\\alpha_{i}^{(\\mathrm{noise})},[0,1])$ be the clipped noisy proportion. Then, using the memoryless property of the Geometric distribution, we have that ", "page_idx": 28}, {"type": "equation", "text": "$$\n\\mathbb{E}[\\alpha_{i}^{(\\mathrm{noise})}\\mid\\alpha_{i}^{(\\mathrm{clip})}]=\\left\\{\\begin{array}{l l}{\\alpha_{i}^{(\\mathrm{clip})}}&{\\mathrm{if~}\\alpha_{i}^{(\\mathrm{clip})}\\in(0,1)}\\\\ {-\\frac{1}{k}\\left(\\frac{1}{1-e^{-\\epsilon}}-1\\right)}&{\\mathrm{if~}\\alpha_{i}^{(\\mathrm{clip})}=0}\\\\ {1+\\frac{1}{k}\\left(\\frac{1}{1-e^{-\\epsilon}}-1\\right)}&{\\mathrm{if~}\\alpha_{i}^{(\\mathrm{clip})}=1.}\\end{array}\\right.\n$$", "text_format": "latex", "page_idx": 28}, {"type": "text", "text": "When training with $\\mathrm{LLP+Geom}$ , we replace the clipped label proportion by $\\mathbb{E}[\\alpha_{i}^{(\\mathrm{noise})}\\mid\\alpha_{i}^{(\\mathrm{clip})}]$ \u03b1(clip)] before computing the proportion matching loss. Since \u03b1(inoise) is an unbiased estimate of \u03b1i, so is the conditional expectation. After this debiasing, Theorem D.2 guarantees that the expected gradient of the proportion matching risk is the same as if the true label proportion had been used. It follows that using Proportion Matching to train with LLP $^+$ Geom with proportion debiasing is similar to training with LLP except with higher variance. ", "page_idx": 28}, {"type": "text", "text": "AUC vs Advantage Experimental Setup. For all PETs, we train models to minimize the binary cross-entropy loss. For RR, we use privacy parameters $\\epsilon$ in $\\{2^{-4},2^{-3},\\ldots,2^{5}\\}$ , for LLP we use bag sizes $k$ in $\\{\\bar{2^{0}},2^{1},\\ldots,2^{9}\\}$ , and for LLP+Laplace and LLP $^+$ Geom we use all combinations of $\\epsilon$ and $k$ from the same sets. For every PET and every value of their privacy parameters, we train the model with each learning rate in $\\{10^{\\overset{.}{-6}},5\\cdot10^{-6},10^{\\overset{.}{-5}},10^{-4},5\\cdot10^{\\overset{.}{-4}},10^{-\\overset{.}{-3}},5\\cdot10^{-3},10^{-2}\\}$ . Finally, for each combination of privacy parameter and learning rate, we train the model 10 times (each trial corresponds to different model initialization and data shuffling, and RR noise). For each privacy parameter, we report the mean AUC of the learning rate with the highest mean AUC. ", "page_idx": 28}, {"type": "text", "text": "Estimating Attack Advantage. The attack advantage of the optimal attacker is estimated and reported for every PET with various parameters. The optimal attacker and its advantage have been characterized for RR as well as for LLP, in Lemma A.1 and Theorem A.17, respectively. Crucially, notice that the advantage can be easily calculated with knowledge of the parameters of each PET (label filpping probability or the bag size), and the class conditional distribution $\\eta(x)$ \u2014 or at least an accurate estimate of it. We considered two estimates of the class conditionals: one based on Deep Neural Networks (DNN) as described above, and one based of $k$ -Nearest Neighbors $(k\\mathsf{N N})$ . The $k\\mathrm{NN}$ estimator can produce accurate estimates for class conditional distributions in the large-scale data regimes, due to its strong consistency properties that has been studied in the 70s and 80s, and that became the part of Machine Learning folklore. DNNs can also produce accurate estimates if the training process and architecture is tuned carefully enough. We found that these two approaches result in very similar results on our large scale benchmark datasets, therefore we relied on the estimate provided by the DNN, and we estimated the attack advantage of the optimal attacker based on the output score of the DNN. ", "page_idx": 28}, {"type": "text", "text": "Remark. It is known that when trained with event-level (i.e., non-private) labels, DNNs are not guaranteed to give rise to calibrated classifiers, which is important for estimating the probabilities involved in the definition of attack advantage, while a $k\\mathrm{NN}$ is typically calibrated. Yet, since we ", "page_idx": 28}, {"type": "image", "img_path": "Ai76ATrb2y/tmp/4f097584b7f10be8f6a1eb8c04271a79b8fa5e60276686800e2d66a37f658d8a.jpg", "img_caption": ["Figure 4: Prior-posterior scatter plots for LLP $^+$ Geom and LLP+Lap on two synthetic datasets and the two real-world datasets. The two synthetic datasets have been generated by drawing $\\eta(x)$ from a Beta(2,30) distribution and a uniform distribution on $[0,1]$ . The colors of the dots correspond to different parameter values for the PETs. For each bag size $k$ and distribution, we did 1000 independent runs. The further a point is from the $y=x$ dotted line, the more is revealed about its label as a result of the PET. "], "img_footnote": [], "page_idx": 29}, {"type": "image", "img_path": "Ai76ATrb2y/tmp/42d9593a39a739efc10a6d1bd21a5b7f61bb7262d62bf919047b6bcc478e823e.jpg", "img_caption": [], "img_footnote": [], "page_idx": 29}, {"type": "text", "text": "Figure 5: Privacy vs utility tradeoff curves for the various PETs on the Higgs (left) and KDD12 (right) datasets. Utility is measured by AUC on test set, while privacy is either the additive measure (bottom row) or the 98th-percentile of the multiplicative measure (so as to rule out the infinite multiplicative advantage cases that can occur for LLP). Each point corresponds to a setting of the privacy parameter for the PET (\u03f5 for RR, $k$ for LLP, and both for $\\mathrm{LLP+Geom})$ ). The $x$ -coordinate is the advantage (either additive or multiplicative) value for that PET, while the $y$ -coordinate is the test AUC of a model trained from the output of that PET. The AUC of the model trained without a PET roughly corresponds to the top value achieved by these curves. This plot is similar to Figure 3 except that the curves for the LLP $^+$ Geom PET correspond to a fixed value of $\\epsilon$ , rather than a fixed value of $k$ . ", "page_idx": 29}, {"type": "text", "text": "observed in our initial experiments that the two learning methods resulted in similar overall outcomes, we decided go with DNNs as the underlying classifier for estimating the behavior of the optimal attacker. ", "page_idx": 29}, {"type": "text", "text": "Further experimental results omitted from the main text. Figure 4 contains scatter plots for LLP+Lap in addition to LLP $^+$ Geom for comparison. The two groups of scatter plots look very similar on each dataset. Figure 5 shows the privacy-vs-utility plots (the data is identical to Figure 3) except in this case, the curves for the LLP $^+$ Geom PET correspond to a fixed value of $\\epsilon$ with the bag size $k$ varying. ", "page_idx": 29}, {"type": "text", "text": "Computational Resources. We conduct our experiments on a cluster of virtual machines each equipped with a p100 GPU, 16 core CPU, and 16GB of memory. Each training run on Higgs takes approximately 10 minutes, and each training run on KDD12 takes approximately 20 hours. ", "page_idx": 29}, {"type": "text", "text": "D PROPMATCH with Noisy Label Proportions ", "text_level": 1, "page_idx": 30}, {"type": "text", "text": "In this appendix we argue that the standard PROPMATCH algorithm is still an effective learning algorithm for the LLP+Lap PET (henceforth denoted $\\mathcal{M}_{\\mathrm{Lap-LLP}})$ . Recall that PROPMATCH generally learns by using stochastic gradient descent (SGD) to minimize the empirical proportion matching loss. Our result below shows that the expected value of the gradient of proportion matching loss is the same whether Laplace noise is added to the label proportion or not. In other words, the expected trajectory of SGD for PROPMATCH when using $\\mathcal{M}_{\\mathrm{Lap-LLP}}$ is the same for all values of $\\epsilon$ , including $\\epsilon=\\infty$ , which corresponds to the special case of $\\mathcal{M}_{\\mathrm{LLP}}$ . In fact, the main way that decreasing the value of $\\epsilon$ (resulting in stronger differential privacy guarantees) affects utility is the increased variance of the gradients. The following result characterizes how much the variance increases compared to the case where $\\epsilon=\\infty$ (or equivalently, compared to PROPMATCH run with $\\mathcal{M}_{\\mathrm{LLP}})$ ). ", "page_idx": 30}, {"type": "text", "text": "To analyze PROPMATCH, we require a few properties of the loss $\\ell:\\mathbb{R}\\times\\mathbb{R}\\to\\mathbb{R}$ and the noise distribution. First, the loss is proper, which means that for every real-valued random variable $A$ , the function $f(p)=\\mathbb{E}(\\ell(p,A))$ has a unique minimizer at $\\mu=\\operatorname{\\mathbb{E}}(A)$ . We also assume that $\\ell(p,y)$ is differentiable in $p$ , and that its derivative is affine in $y$ , that is $\\begin{array}{r}{\\frac{\\partial}{\\partial p}\\ell(p,y)=a_{p}y+b_{p}}\\end{array}$ , where $a_{p},b_{p}$ may depend on $p$ but not $y$ . These conditions are satisfied by the cross entropy (or logistic) loss $\\ell(p,y)=-y\\log(p)-(1-y)\\log(1-p)$ (where $p\\in[0,1];$ ) and the squared error $\\bar{\\ell}(p,y)\\,{\\overset{\\bullet}{=}}\\,(p-y)^{2}$ . ", "page_idx": 30}, {"type": "text", "text": "Finally, we assume that the noise mechanism operates on a bag of $k$ examples for some $k\\,\\in\\,\\mathbb{N}$ (possibly $k=1$ ). Given the proportion $\\alpha$ of positive examples in the bag, it releases $\\tilde{\\alpha}=\\alpha+Z_{\\alpha}$ , where $\\mathbb{E}[Z_{\\alpha}|\\alpha]=0$ for every fixed $\\alpha\\in\\{0,1/k,\\ldots,1\\}$ . This condition is satisfied by LLP (since it adds no noise), LLP+Lap (since Laplace noise is mean 0), and the debiased versions of randomized response and LLP+Geom, described in Appendix C. ", "page_idx": 30}, {"type": "text", "text": "Given a class of predictors $\\mathcal{H}$ of predictors $h$ that map feature vectors to $[0,1]$ , we can define the problem of minimizing the population-level noisy proportion-matching loss for a distribution $\\mathcal{D}$ , defined via the choice of a bag $\\boldsymbol{\\mathrm{\\Delta}}\\boldsymbol{\\mathrm{\\Omega}}^{\\beta}$ of $k$ labeled examples drawn from $\\mathcal{D}$ : ", "page_idx": 30}, {"type": "equation", "text": "$$\n\\operatorname*{min}_{h\\in\\mathcal{H}}\\mathbb{E}_{,\\alpha,\\tilde{\\alpha}}\\left[\\ell\\left(\\frac{1}{k}\\sum_{x\\in\\mathcal{B}}h(x),\\tilde{\\alpha}\\right)\\right]\n$$", "text_format": "latex", "page_idx": 30}, {"type": "text", "text": "This differs from the loss studied in [13] only in that we allow the label proportion to be perturbed.   \nThe PROPMATCH algorithm essentially minimizes this loss. ", "page_idx": 30}, {"type": "text", "text": "Theorem D.1. Let $\\boldsymbol{\\mathrm{\\Delta}}\\boldsymbol{\\mathrm{\\Omega}}^{\\beta}$ be a random bag of size $k,\\,\\ell:\\mathbb{R}\\times\\mathbb{R}\\to\\mathbb{R}^{+}\\cup\\{\\infty\\}$ be a loss function, and $\\mathcal{M}$ be a mechanism for releasing the label proportions with $\\mathcal{M}(\\alpha)=\\tilde{\\alpha}=\\alpha+Z_{\\alpha},$ , where $\\mathbb{E}[Z_{\\alpha}|\\alpha]=0$ for all $\\alpha$ . Suppose $\\mathcal{H}$ contains a predictor $h^{*}$ that matches the true label probabilities in $\\mathcal{D}$ (i.e. $\\bar{h}^{*}(x)=\\mathbb{P}_{\\mathcal{D}}\\bar{(y=1|x)}$ . If $\\ell$ is proper (defined above), then $h^{*}$ is a minimizer of the population-level noisy proportion-matching loss on $\\mathcal{D}$ . It is essentially unique, in that any other minimizer $h^{\\prime}$ must satisfy $\\mathbb{P}_{(x,y)\\sim\\mathcal{D}}(h^{\\prime}(x)=h^{*}(x))=1.$ . ", "page_idx": 30}, {"type": "text", "text": "Theorem D.2. Let $\\boldsymbol{\\mathrm{\\Delta}}\\boldsymbol{\\mathrm{\\Omega}}^{\\beta}$ be a random bag of size $k,\\,\\ell:\\mathbb{R}\\times\\mathbb{R}\\to\\mathbb{R}^{+}\\cup\\{\\infty\\}$ be a loss function, and $\\mathcal{M}$ be a mechanism for releasing the label proportions with $\\mathcal{M}(\\alpha)=\\tilde{\\alpha}=\\alpha+Z_{\\alpha}.$ , where $\\mathbb{E}[Z_{\\alpha}|\\alpha]=0$ for all $\\alpha$ . Suppose that $\\textstyle{\\frac{\\partial}{\\partial p}}\\ell(p,y)$ is affine in $y$ . ", "page_idx": 30}, {"type": "text", "text": "For a predictor $h_{\\theta}\\in\\mathcal{H}$ (parametrized by $\\theta$ ) denote by $\\begin{array}{r}{h_{\\theta}(B)=\\frac{1}{k}\\sum_{x\\in B}h_{\\theta}(x)}\\end{array}$ its average prediction over $\\boldsymbol{\\mathrm{\\Delta}}\\boldsymbol{\\mathrm{\\Omega}}^{\\beta}$ . We have ", "page_idx": 30}, {"type": "equation", "text": "$$\n\\mathbb{E}\\left[\\nabla_{\\theta}\\ell\\left(h_{\\theta}(\\mathcal{B}),\\tilde{\\alpha}\\right)\\right]=\\mathbb{E}\\left[\\nabla_{\\theta}\\ell\\left(h_{\\theta}(\\mathcal{B}),\\alpha\\right)\\right]\\,,\n$$", "text_format": "latex", "page_idx": 30}, {"type": "text", "text": "and furthermore ", "page_idx": 30}, {"type": "equation", "text": "$$\n\\begin{array}{r l}&{\\mathbb{\\Sigma}\\left[\\left\\lVert\\nabla_{\\theta}\\ell\\left(h_{\\theta}(B),\\tilde{\\alpha}\\right)\\right\\rVert_{2}^{2}\\right]=\\mathbb{E}\\left[\\left\\lVert\\nabla_{\\theta}\\ell(h_{\\theta}(B),\\alpha)\\right\\rVert^{2}\\right]+\\mathbb{E}\\left(Z_{\\alpha}^{2}\\cdot\\left\\lVert\\frac{\\partial}{\\partial\\alpha}\\nabla_{\\theta}\\ell(h_{\\theta}(B),\\alpha)\\right\\rVert^{2}\\right)}\\\\ &{\\quad\\quad\\quad\\quad\\quad\\quad\\leq\\mathbb{E}\\left[\\left\\lVert\\nabla_{\\theta}\\ell(h_{\\theta}(B),\\alpha)\\right\\rVert^{2}\\right]+\\left(\\underset{\\alpha}{\\operatorname*{max}}\\mathrm{Var}(Z_{\\alpha})\\right)\\cdot\\mathbb{E}\\left[\\left\\lVert\\frac{\\partial}{\\partial\\alpha}\\nabla_{\\theta}\\ell(h_{\\theta}(B),\\alpha)\\right\\rVert^{2}\\right].}\\end{array}\n$$", "text_format": "latex", "page_idx": 30}, {"type": "text", "text": "That is, for nice loss functions like the logistic and square loss, we can write the variance of the noisy LLP gradient as the sum of two terms: the variance of the LLP-based estimate of the proportionmatching loss, and a noise term that scales roughly as the variance of $Z$ . For Laplace noise, this variance is $\\frac{2}{k^{2}\\epsilon^{2}}$ . For Geometric noise, the variance is upper bounded above by $\\frac{2e^{-\\epsilon}}{k^{2}(1\\!-\\!e^{-\\epsilon})^{2}}$ (which is always smaller than the Laplace variance, most noticeably for large $\\epsilon$ ). For small values of , this upper bound is loose (because clipping and debiasing reduces the overall variance). For example, with randomized response (which is the same as LLP $^+$ Geom with $k=1$ ), the variance is just $\\frac{e^{\\epsilon}}{e^{\\epsilon}\\!+\\!1}$ ", "page_idx": 30}, {"type": "text", "text": "", "page_idx": 31}, {"type": "text", "text": "Analyzing this formula helps us understand the performance of the noisy variants of LLP. Let us compare LLP $^+$ Geom with bag size $k$ to averaging randomized response estimates over $k$ separate examples. Suppose we fix $\\epsilon$ and let $k$ increase. There are three effects in play: (1) the noise added for privacy is lower for LLP+Geom (variance $1/k^{2}$ versus $1/k_{\\cdot}$ ); (2) the bias of the gradient estimator is higher for $\\mathrm{LLP+Geom}$ , since we are estimating the gradient of the proportion-matching loss and not necessarily the true gradient; (3) the variance due to sampling is about the same in both cases, about $1/k$ . ", "page_idx": 31}, {"type": "text", "text": "We thus get a classic bias-variance tradeoff. As a thought experiment, consider what happens when $\\epsilon$ is very small, and almost all the error comes from the added noise. In that case, setting $k$ a bit larger than 1 will help, since the bias introduced will be smaller than the reduction in noise. However, there is a point of diminishing returns, at least when the proportion-matching optimum is different from the true optimum (that is, when the model cannot express the Bayes-optimal predictor). Looking at the experiments with the Higgs data set, we see a muted version of this effect: for small values of $\\epsilon$ , there is no real difference in the performance of LLP+Geom for $k\\in\\{1,2,4\\}$ , but larger $k$ introduce a real penalty. For larger values of $\\epsilon$ (over 1) on Higgs, and all values of $\\epsilon$ on KDD12, the dropoff occurs already for $k=2$ . ", "page_idx": 31}, {"type": "text", "text": "This analysis suggests that the advantages of LLP $^+$ Geom over RR will be dataset-dependent, and noticeable only for small values of $\\epsilon$ . ", "page_idx": 31}, {"type": "text", "text": "Proof of Theorem $D.I$ . This proof is the same as the argument in [12, Thm 3.2]. Fix some bag $\\boldsymbol{\\mathrm{\\Delta}}\\boldsymbol{\\mathrm{\\Omega}}^{\\beta}$ of examples, and take expectation over the sampling of their labels to get a label proportion $\\alpha$ and its noisy variant $\\tilde{\\alpha}$ . Because the loss is proper, the unique minimizer of the proportion matching loss is given by the predictions of $h^{*}$ . ", "page_idx": 31}, {"type": "equation", "text": "$$\n\\arg\\operatorname*{min}_{p}\\mathbb{E}_{\\alpha,\\tilde{\\alpha}}\\ell(p,\\tilde{\\alpha})=\\mathbb{E}(\\tilde{\\alpha})=\\mathbb{E}(\\alpha)=\\frac{1}{k}h^{*}(x)\\,.\n$$", "text_format": "latex", "page_idx": 31}, {"type": "text", "text": "This is true for every bag $\\boldsymbol{\\mathrm{\\Delta}}\\boldsymbol{\\mathrm{\\Omega}}_{\\boldsymbol{B}}$ , and thus in expectation over the choice of $\\boldsymbol{\\mathrm{\\Delta}}\\boldsymbol{\\mathrm{\\Omega}}^{\\beta}$ . Furthermore, this loss is unique since the indicator functions of bags form a spanning set for the indicators for the support of $\\mathcal{D}$ . If $h\\neq h^{*}$ with nonzero probability, then the bag-level predictions of $h$ will differ from those of $h^{*}$ with nonzero probability. \u53e3 ", "page_idx": 31}, {"type": "text", "text": "Proof of Theorem $D.2$ . Let $\\begin{array}{r}{\\ell^{\\prime}(p,y)\\,=\\,\\frac\\partial{\\partial p}\\ell(p,y)\\,=\\,a_{p}y+b_{p}}\\end{array}$ , where $\\begin{array}{r}{a_{p}\\,=\\,\\frac{\\partial}{\\partial y}\\ell^{\\prime}(p,y)}\\end{array}$ . Using the chain rule and the fact that $\\ell^{\\prime}$ is affine, we get: ", "page_idx": 31}, {"type": "equation", "text": "$$\n\\begin{array}{r l}&{\\nabla_{\\theta}\\ell\\left(h_{\\theta}(B),\\tilde{\\alpha}\\right)}\\\\ {=}&{\\ell^{\\prime}(h_{\\theta}(B),\\tilde{\\alpha})\\nabla_{\\theta}h_{\\theta}(B)}\\\\ {=}&{\\left(\\ell^{\\prime}(h_{\\theta}(B),\\alpha)+Z_{\\alpha}a_{h_{\\theta}(B)}\\right)\\nabla_{\\theta}h_{\\theta}(B)}\\\\ {=}&{\\nabla_{\\theta}\\ell(h_{\\theta}(B),\\alpha)+Z_{\\alpha}a_{h_{\\theta}(B)}\\nabla_{\\theta}h_{\\theta}(B)}\\\\ {=}&{\\nabla_{\\theta}\\ell(h_{\\theta}(B),\\alpha)+Z_{\\alpha}\\cdot\\frac{\\partial}{\\partial\\alpha}\\nabla_{\\theta}\\ell(h_{\\theta}(B),\\alpha)\\,.}\\end{array}\n$$", "text_format": "latex", "page_idx": 31}, {"type": "text", "text": "Since the noise is unbiased for every $\\alpha$ , the second term above is 0 in expectation for every pair $(\\boldsymbol{B},\\alpha)$ . This proves that the estimator is unbiased (Equation (18)). To analyze its variance, note that the unbiasedness of $\\tilde{\\alpha}$ means that the two terms are decorrelated, and we can sum their convariances: ", "page_idx": 31}, {"type": "equation", "text": "$$\n\\begin{array}{r l}&{\\mathrm{Covar}\\left(\\nabla_{\\theta}\\ell(h_{\\theta}(B),\\alpha)+Z_{\\alpha}\\cdot\\frac{\\partial}{\\partial\\alpha}\\nabla_{\\theta}\\ell(h_{\\theta}(B),\\alpha)\\right)}\\\\ &{\\quad\\quad\\quad=\\mathrm{Covar}\\left(\\nabla_{\\theta}\\ell(h_{\\theta}(B),\\alpha)\\right)+\\mathrm{Covar}\\left(Z_{\\alpha}\\cdot\\frac{\\partial}{\\partial\\alpha}\\nabla_{\\theta}\\ell(h_{\\theta}(B),\\alpha)\\right)}\\\\ &{\\quad\\quad\\quad\\quad+\\mathbb{E}\\left(\\left\\langle\\nabla_{\\theta}\\ell(h_{\\theta}(B),\\alpha)\\right.,\\left.\\frac{\\partial}{\\partial\\alpha}\\nabla_{\\theta}\\ell(h_{\\theta}(B),\\alpha))\\right\\rangle}\\\\ &{\\quad\\quad\\quad=\\mathrm{Covar}\\left(\\nabla_{\\theta}\\ell(h_{\\theta}(B),\\alpha)\\right)+\\mathrm{Covar}\\left(Z_{\\alpha}\\cdot\\frac{\\partial}{\\partial\\alpha}\\nabla_{\\theta}\\ell(h_{\\theta}(B),\\alpha)\\right)\\,.}\\end{array}\n$$", "text_format": "latex", "page_idx": 31}, {"type": "text", "text": "The expected squared norm of a random vector is the trace of its covariance. Thus, the expression above gives us the equality in Equation (18). The final inequality follows again from decorrelation: by conditioning on the pair $(\\boldsymbol{\\beta},\\alpha)$ , we can pull out $\\bar{\\mathbb{E}}\\bigl[Z_{\\alpha}^{2}\\bigr]$ from the outer product of ", "page_idx": 31}, {"type": "text", "text": "$\\begin{array}{r}{Z_{\\alpha}\\cdot\\frac{\\partial}{\\partial\\alpha}\\nabla_{\\theta}\\ell(h_{\\theta}(B),\\alpha)}\\end{array}$ with itself. Taking the trace (to get the expected square norm), we can use the fact that $\\|\\nabla_{\\theta}\\ell(h_{\\theta}(B),\\alpha)\\|^{2}$ is nonegative, to replace $\\mathbb{E}[Z_{\\alpha}^{2}]$ with an upper bound that holds for all $\\alpha$ . This yields the final inequality in Equation (19), as desired. \u53e3 ", "page_idx": 32}, {"type": "text", "text": "We have analyzed PROPMATCH in this section since it is the algorithm used in our experiments. Similar results hold for other LLP algorithms, like EASYLLP [12], though we do not work those out here. ", "page_idx": 32}, {"type": "text", "text": "NeurIPS Paper Checklist ", "text_level": 1, "page_idx": 33}, {"type": "text", "text": "1. Claims ", "text_level": 1, "page_idx": 33}, {"type": "text", "text": "Question: Do the main claims made in the abstract and introduction accurately reflect the paper\u2019s contributions and scope? ", "page_idx": 33}, {"type": "text", "text": "Answer: [Yes] ", "page_idx": 33}, {"type": "text", "text": "Justification: The main contribution of the paper is clearly stated in the abstract and introduction, and reflected in the technical and experimental sections (Section 3, 4, and associated appendices). ", "page_idx": 33}, {"type": "text", "text": "Guidelines: ", "page_idx": 33}, {"type": "text", "text": "\u2022 The answer NA means that the abstract and introduction do not include the claims made in the paper.   \n\u2022 The abstract and/or introduction should clearly state the claims made, including the contributions made in the paper and important assumptions and limitations. A No or NA answer to this question will not be perceived well by the reviewers.   \n\u2022 The claims made should match theoretical and experimental results, and reflect how much the results can be expected to generalize to other settings.   \n\u2022 It is fine to include aspirational goals as motivation as long as it is clear that these goals are not attained by the paper. ", "page_idx": 33}, {"type": "text", "text": "2. Limitations ", "text_level": 1, "page_idx": 33}, {"type": "text", "text": "Question: Does the paper discuss the limitations of the work performed by the authors? Answer: [Yes] ", "page_idx": 33}, {"type": "text", "text": "Justification: Limitations are discussed in Section 5. ", "page_idx": 33}, {"type": "text", "text": "Guidelines: ", "text_level": 1, "page_idx": 33}, {"type": "text", "text": "\u2022 The answer NA means that the paper has no limitation while the answer No means that the paper has limitations, but those are not discussed in the paper.   \n\u2022 The authors are encouraged to create a separate \"Limitations\" section in their paper.   \n\u2022 The paper should point out any strong assumptions and how robust the results are to violations of these assumptions (e.g., independence assumptions, noiseless settings, model well-specification, asymptotic approximations only holding locally). The authors should reflect on how these assumptions might be violated in practice and what the implications would be.   \n\u2022 The authors should reflect on the scope of the claims made, e.g., if the approach was only tested on a few datasets or with a few runs. In general, empirical results often depend on implicit assumptions, which should be articulated.   \n\u2022 The authors should reflect on the factors that influence the performance of the approach. For example, a facial recognition algorithm may perform poorly when image resolution is low or images are taken in low lighting. Or a speech-to-text system might not be used reliably to provide closed captions for online lectures because it fails to handle technical jargon.   \n\u2022 The authors should discuss the computational efficiency of the proposed algorithms and how they scale with dataset size.   \n\u2022 If applicable, the authors should discuss possible limitations of their approach to address problems of privacy and fairness.   \n\u2022 While the authors might fear that complete honesty about limitations might be used by reviewers as grounds for rejection, a worse outcome might be that reviewers discover limitations that aren\u2019t acknowledged in the paper. The authors should use their best judgment and recognize that individual actions in favor of transparency play an important role in developing norms that preserve the integrity of the community. Reviewers will be specifically instructed to not penalize honesty concerning limitations. ", "page_idx": 33}, {"type": "text", "text": "3. Theory Assumptions and Proofs ", "text_level": 1, "page_idx": 33}, {"type": "text", "text": "Question: For each theoretical result, does the paper provide the full set of assumptions and a complete (and correct) proof? ", "page_idx": 33}, {"type": "text", "text": "Answer: [Yes] ", "page_idx": 34}, {"type": "text", "text": "Justification: Full proofs of all our theoretical results are given in the appendix. ", "text_level": 1, "page_idx": 34}, {"type": "text", "text": "Guidelines: ", "page_idx": 34}, {"type": "text", "text": "\u2022 The answer NA means that the paper does not include theoretical results.   \n\u2022 All the theorems, formulas, and proofs in the paper should be numbered and crossreferenced.   \n\u2022 All assumptions should be clearly stated or referenced in the statement of any theorems.   \n\u2022 The proofs can either appear in the main paper or the supplemental material, but if they appear in the supplemental material, the authors are encouraged to provide a short proof sketch to provide intuition.   \n\u2022 Inversely, any informal proof provided in the core of the paper should be complemented by formal proofs provided in appendix or supplemental material.   \n\u2022 Theorems and Lemmas that the proof relies upon should be properly referenced. ", "page_idx": 34}, {"type": "text", "text": "4. Experimental Result Reproducibility ", "text_level": 1, "page_idx": 34}, {"type": "text", "text": "Question: Does the paper fully disclose all the information needed to reproduce the main experimental results of the paper to the extent that it affects the main claims and/or conclusions of the paper (regardless of whether the code and data are provided or not)? ", "page_idx": 34}, {"type": "text", "text": "Answer: [Yes] ", "page_idx": 34}, {"type": "text", "text": "Justification: All our experimental results are reproducible. Details on our experimental setting (model architecture, hyperparameter tuning, etc.) which are omitted from the main body of the paper are given in Appendix C. The datasets which we experimented with are publicly available and we have released the code we used to run experiments. ", "page_idx": 34}, {"type": "text", "text": "Guidelines: ", "text_level": 1, "page_idx": 34}, {"type": "text", "text": "\u2022 The answer NA means that the paper does not include experiments.   \n\u2022 If the paper includes experiments, a No answer to this question will not be perceived well by the reviewers: Making the paper reproducible is important, regardless of whether the code and data are provided or not.   \n\u2022 If the contribution is a dataset and/or model, the authors should describe the steps taken to make their results reproducible or verifiable.   \n\u2022 Depending on the contribution, reproducibility can be accomplished in various ways. For example, if the contribution is a novel architecture, describing the architecture fully might suffice, or if the contribution is a specific model and empirical evaluation, it may be necessary to either make it possible for others to replicate the model with the same dataset, or provide access to the model. In general. releasing code and data is often one good way to accomplish this, but reproducibility can also be provided via detailed instructions for how to replicate the results, access to a hosted model (e.g., in the case of a large language model), releasing of a model checkpoint, or other means that are appropriate to the research performed.   \n\u2022 While NeurIPS does not require releasing code, the conference does require all submissions to provide some reasonable avenue for reproducibility, which may depend on the nature of the contribution. For example (a) If the contribution is primarily a new algorithm, the paper should make it clear how to reproduce that algorithm. (b) If the contribution is primarily a new model architecture, the paper should describe the architecture clearly and fully. (c) If the contribution is a new model (e.g., a large language model), then there should either be a way to access this model for reproducing the results or a way to reproduce the model (e.g., with an open-source dataset or instructions for how to construct the dataset). (d) We recognize that reproducibility may be tricky in some cases, in which case authors are welcome to describe the particular way they provide for reproducibility. In the case of closed-source models, it may be that access to the model is limited in some way (e.g., to registered users), but it should be possible for other researchers to have some path to reproducing or verifying the results. ", "page_idx": 34}, {"type": "text", "text": "5. Open access to data and code ", "text_level": 1, "page_idx": 35}, {"type": "text", "text": "Question: Does the paper provide open access to the data and code, with sufficient instructions to faithfully reproduce the main experimental results, as described in supplemental material? ", "page_idx": 35}, {"type": "text", "text": "Answer: [Yes] ", "page_idx": 35}, {"type": "text", "text": "Justification: The datasets we operated on are publicly available. We released the code and made available instructions on how to run our experiments at https://github.com/ google-research/google-research/tree/master/auditing_privacy_via_lia. ", "page_idx": 35}, {"type": "text", "text": "Guidelines: ", "page_idx": 35}, {"type": "text", "text": "\u2022 The answer NA means that paper does not include experiments requiring code.   \n\u2022 Please see the NeurIPS code and data submission guidelines (https://nips.cc/ public/guides/CodeSubmissionPolicy) for more details.   \n\u2022 While we encourage the release of code and data, we understand that this might not be possible, so \u201cNo\u201d is an acceptable answer. Papers cannot be rejected simply for not including code, unless this is central to the contribution (e.g., for a new open-source benchmark).   \n\u2022 The instructions should contain the exact command and environment needed to run to reproduce the results. See the NeurIPS code and data submission guidelines (https: //nips.cc/public/guides/CodeSubmissionPolicy) for more details.   \n\u2022 The authors should provide instructions on data access and preparation, including how to access the raw data, preprocessed data, intermediate data, and generated data, etc.   \n\u2022 The authors should provide scripts to reproduce all experimental results for the new proposed method and baselines. If only a subset of experiments are reproducible, they should state which ones are omitted from the script and why.   \n\u2022 At submission time, to preserve anonymity, the authors should release anonymized versions (if applicable).   \n\u2022 Providing as much information as possible in supplemental material (appended to the paper) is recommended, but including URLs to data and code is permitted. ", "page_idx": 35}, {"type": "text", "text": "6. Experimental Setting/Details ", "text_level": 1, "page_idx": 35}, {"type": "text", "text": "Question: Does the paper specify all the training and test details (e.g., data splits, hyperparameters, how they were chosen, type of optimizer, etc.) necessary to understand the results? ", "page_idx": 35}, {"type": "text", "text": "Answer: [Yes] ", "page_idx": 35}, {"type": "text", "text": "Justification: Such details are partly given in Section 4 and partly in Appendix C. ", "page_idx": 35}, {"type": "text", "text": "Guidelines: ", "page_idx": 35}, {"type": "text", "text": "\u2022 The answer NA means that the paper does not include experiments. \u2022 The experimental setting should be presented in the core of the paper to a level of detail that is necessary to appreciate the results and make sense of them. \u2022 The full details can be provided either with the code, in appendix, or as supplemental material. ", "page_idx": 35}, {"type": "text", "text": "7. Experiment Statistical Significance ", "text_level": 1, "page_idx": 35}, {"type": "text", "text": "Question: Does the paper report error bars suitably and correctly defined or other appropriate information about the statistical significance of the experiments? ", "page_idx": 35}, {"type": "text", "text": "Answer: [Yes] ", "page_idx": 35}, {"type": "text", "text": "Justification: We mention in Section 4 and in Appendix C that all our results are averaged across 5 or 10 repetitions (depending on the dataset). The associated standard errors are quite small, and still allow us to statistically tell apart the different curves when they are not overlapping. We discuss the standard errors in Section 4, paragraph \u201cEstimating Class conditionals for advantage and PET utility\u201d. ", "page_idx": 35}, {"type": "text", "text": "Guidelines: ", "page_idx": 35}, {"type": "text", "text": "\u2022 The answer NA means that the paper does not include experiments. ", "page_idx": 35}, {"type": "text", "text": "\u2022 The authors should answer \"Yes\" if the results are accompanied by error bars, confidence intervals, or statistical significance tests, at least for the experiments that support the main claims of the paper.   \n\u2022 The factors of variability that the error bars are capturing should be clearly stated (for example, train/test split, initialization, random drawing of some parameter, or overall run with given experimental conditions).   \n\u2022 The method for calculating the error bars should be explained (closed form formula, call to a library function, bootstrap, etc.)   \n\u2022 The assumptions made should be given (e.g., Normally distributed errors).   \n\u2022 It should be clear whether the error bar is the standard deviation or the standard error of the mean.   \n\u2022 It is OK to report 1-sigma error bars, but one should state it. The authors should preferably report a 2-sigma error bar than state that they have a $96\\%$ CI, if the hypothesis of Normality of errors is not verified.   \n\u2022 For asymmetric distributions, the authors should be careful not to show in tables or figures symmetric error bars that would yield results that are out of range (e.g. negative error rates).   \n\u2022 If error bars are reported in tables or plots, The authors should explain in the text how they were calculated and reference the corresponding figures or tables in the text. ", "page_idx": 36}, {"type": "text", "text": "8. Experiments Compute Resources ", "text_level": 1, "page_idx": 36}, {"type": "text", "text": "Question: For each experiment, does the paper provide sufficient information on the computer resources (type of compute workers, memory, time of execution) needed to reproduce the experiments? ", "page_idx": 36}, {"type": "text", "text": "Answer: [Yes] ", "page_idx": 36}, {"type": "text", "text": "Justification: We mention computational resources and associated wall-clock running times in Appendix C. ", "page_idx": 36}, {"type": "text", "text": "Guidelines: ", "page_idx": 36}, {"type": "text", "text": "\u2022 The answer NA means that the paper does not include experiments.   \n\u2022 The paper should indicate the type of compute workers CPU or GPU, internal cluster, or cloud provider, including relevant memory and storage.   \n\u2022 The paper should provide the amount of compute required for each of the individual experimental runs as well as estimate the total compute.   \n\u2022 The paper should disclose whether the full research project required more compute than the experiments reported in the paper (e.g., preliminary or failed experiments that didn\u2019t make it into the paper). ", "page_idx": 36}, {"type": "text", "text": "9. Code Of Ethics ", "text_level": 1, "page_idx": 36}, {"type": "text", "text": "Question: Does the research conducted in the paper conform, in every respect, with the NeurIPS Code of Ethics https://neurips.cc/public/EthicsGuidelines? ", "page_idx": 36}, {"type": "text", "text": "Answer: [Yes] ", "page_idx": 36}, {"type": "text", "text": "Justification: We reviewed the three main categories of concerns in the Code of Ethics (harms of the process, societal impact, and impact mitigation). We believe we have complied with the spirit and letter of the requirements in each category. In particular, no human subjects research was involved in this project, and the data sets we use are both open-source, standard ML data sets which do not come with privacy or intellectual property concerns. ", "page_idx": 36}, {"type": "text", "text": "Guidelines: ", "page_idx": 36}, {"type": "text", "text": "\u2022 The answer NA means that the authors have not reviewed the NeurIPS Code of Ethics.   \n\u2022 If the authors answer No, they should explain the special circumstances that require a deviation from the Code of Ethics.   \n\u2022 The authors should make sure to preserve anonymity (e.g., if there is a special consideration due to laws or regulations in their jurisdiction). ", "page_idx": 36}, {"type": "text", "text": "10. Broader Impacts ", "text_level": 1, "page_idx": 36}, {"type": "text", "text": "Question: Does the paper discuss both potential positive societal impacts and negative societal impacts of the work performed? ", "page_idx": 36}, {"type": "text", "text": "Answer: [No] . ", "page_idx": 37}, {"type": "text", "text": "Justification: This work aims to advance the science of privacy-aware machine learning. As such, its goal is to get the beneftis of training models on sensitive data sets while measuring and mitigating harmful effects on individuals. Putting protections such as the ones we develop into real-world use is delicate since privacy protections can, in addition to helping data contributors, have side effects such as limiting data access and model quality for sparse sub-populations. These issues, while important, are not specific to our work and lie outside the scope of the paper. That is the main reason why we do not explicitly discuss in the paper the societal impact of this work. ", "page_idx": 37}, {"type": "text", "text": "Guidelines: ", "text_level": 1, "page_idx": 37}, {"type": "text", "text": "\u2022 The answer NA means that there is no societal impact of the work performed.   \n\u2022 If the authors answer NA or No, they should explain why their work has no societal impact or why the paper does not address societal impact.   \n\u2022 Examples of negative societal impacts include potential malicious or unintended uses (e.g., disinformation, generating fake profiles, surveillance), fairness considerations (e.g., deployment of technologies that could make decisions that unfairly impact specific groups), privacy considerations, and security considerations.   \n\u2022 The conference expects that many papers will be foundational research and not tied to particular applications, let alone deployments. However, if there is a direct path to any negative applications, the authors should point it out. For example, it is legitimate to point out that an improvement in the quality of generative models could be used to generate deepfakes for disinformation. On the other hand, it is not needed to point out that a generic algorithm for optimizing neural networks could enable people to train models that generate Deepfakes faster.   \n\u2022 The authors should consider possible harms that could arise when the technology is being used as intended and functioning correctly, harms that could arise when the technology is being used as intended but gives incorrect results, and harms following from (intentional or unintentional) misuse of the technology.   \n\u2022 If there are negative societal impacts, the authors could also discuss possible mitigation strategies (e.g., gated release of models, providing defenses in addition to attacks, mechanisms for monitoring misuse, mechanisms to monitor how a system learns from feedback over time, improving the efficiency and accessibility of ML). ", "page_idx": 37}, {"type": "text", "text": "11. Safeguards ", "text_level": 1, "page_idx": 37}, {"type": "text", "text": "Question: Does the paper describe safeguards that have been put in place for responsible release of data or models that have a high risk for misuse (e.g., pretrained language models, image generators, or scraped datasets)? ", "page_idx": 37}, {"type": "text", "text": "Answer: [NA] . ", "page_idx": 37}, {"type": "text", "text": "Justification: We don\u2019t see any such risks ", "page_idx": 37}, {"type": "text", "text": "Guidelines: ", "page_idx": 37}, {"type": "text", "text": "\u2022 The answer NA means that the paper poses no such risks.   \n\u2022 Released models that have a high risk for misuse or dual-use should be released with necessary safeguards to allow for controlled use of the model, for example by requiring that users adhere to usage guidelines or restrictions to access the model or implementing safety filters.   \n\u2022 Datasets that have been scraped from the Internet could pose safety risks. The authors should describe how they avoided releasing unsafe images.   \n\u2022 We recognize that providing effective safeguards is challenging, and many papers do not require this, but we encourage authors to take this into account and make a best faith effort. ", "page_idx": 37}, {"type": "text", "text": "12. Licenses for existing assets ", "text_level": 1, "page_idx": 37}, {"type": "text", "text": "Question: Are the creators or original owners of assets (e.g., code, data, models), used in the paper, properly credited and are the license and terms of use explicitly mentioned and properly respected? ", "page_idx": 37}, {"type": "text", "text": "Answer: [NA] . ", "page_idx": 37}, {"type": "text", "text": "Justification: We don\u2019t rely on such assets. ", "page_idx": 38}, {"type": "text", "text": "Guidelines: ", "page_idx": 38}, {"type": "text", "text": "\u2022 The answer NA means that the paper does not use existing assets.   \n\u2022 The authors should cite the original paper that produced the code package or dataset.   \n\u2022 The authors should state which version of the asset is used and, if possible, include a URL.   \n\u2022 The name of the license (e.g., CC-BY 4.0) should be included for each asset.   \n\u2022 For scraped data from a particular source (e.g., website), the copyright and terms of service of that source should be provided.   \n\u2022 If assets are released, the license, copyright information, and terms of use in the package should be provided. For popular datasets, paperswithcode.com/datasets has curated licenses for some datasets. Their licensing guide can help determine the license of a dataset.   \n\u2022 For existing datasets that are re-packaged, both the original license and the license of the derived asset (if it has changed) should be provided.   \n\u2022 If this information is not available online, the authors are encouraged to reach out to the asset\u2019s creators. ", "page_idx": 38}, {"type": "text", "text": "13. New Assets ", "text_level": 1, "page_idx": 38}, {"type": "text", "text": "Question: Are new assets introduced in the paper well documented and is the documentation provided alongside the assets? ", "page_idx": 38}, {"type": "text", "text": "Answer: [NA] ", "page_idx": 38}, {"type": "text", "text": "Justification: No new assets. ", "page_idx": 38}, {"type": "text", "text": "Guidelines: ", "page_idx": 38}, {"type": "text", "text": "\u2022 The answer NA means that the paper does not release new assets.   \n\u2022 Researchers should communicate the details of the dataset/code/model as part of their submissions via structured templates. This includes details about training, license, limitations, etc.   \n\u2022 The paper should discuss whether and how consent was obtained from people whose asset is used.   \n\u2022 At submission time, remember to anonymize your assets (if applicable). You can either create an anonymized URL or include an anonymized zip file. ", "page_idx": 38}, {"type": "text", "text": "14. Crowdsourcing and Research with Human Subjects ", "text_level": 1, "page_idx": 38}, {"type": "text", "text": "Question: For crowdsourcing experiments and research with human subjects, does the paper include the full text of instructions given to participants and screenshots, if applicable, as well as details about compensation (if any)? ", "page_idx": 38}, {"type": "text", "text": "Answer: [NA] . ", "page_idx": 38}, {"type": "text", "text": "Justification: No such experiments. ", "page_idx": 38}, {"type": "text", "text": "Guidelines: ", "page_idx": 38}, {"type": "text", "text": "\u2022 The answer NA means that the paper does not involve crowdsourcing nor research with human subjects.   \n\u2022 Including this information in the supplemental material is fine, but if the main contribution of the paper involves human subjects, then as much detail as possible should be included in the main paper.   \n\u2022 According to the NeurIPS Code of Ethics, workers involved in data collection, curation, or other labor should be paid at least the minimum wage in the country of the data collector. ", "page_idx": 38}, {"type": "text", "text": "15. Institutional Review Board (IRB) Approvals or Equivalent for Research with Human Subjects ", "text_level": 1, "page_idx": 38}, {"type": "text", "text": "Question: Does the paper describe potential risks incurred by study participants, whether such risks were disclosed to the subjects, and whether Institutional Review Board (IRB) approvals (or an equivalent approval/review based on the requirements of your country or institution) were obtained? ", "page_idx": 38}, {"type": "text", "text": "Answer: [NA] . ", "page_idx": 39}, {"type": "text", "text": "Justification: No such experiments. Guidelines: ", "page_idx": 39}, {"type": "text", "text": "\u2022 The answer NA means that the paper does not involve crowdsourcing nor research with human subjects.   \n\u2022 Depending on the country in which research is conducted, IRB approval (or equivalent) may be required for any human subjects research. If you obtained IRB approval, you should clearly state this in the paper.   \n\u2022 We recognize that the procedures for this may vary significantly between institutions and locations, and we expect authors to adhere to the NeurIPS Code of Ethics and the guidelines for their institution.   \n\u2022 For initial submissions, do not include any information that would break anonymity (if applicable), such as the institution conducting the review. ", "page_idx": 39}]