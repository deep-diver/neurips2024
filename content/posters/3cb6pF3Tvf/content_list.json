[{"type": "text", "text": "Learning-Augmented Algorithms for the Bahncard Problem ", "text_level": 1, "page_idx": 0}, {"type": "text", "text": "Hailiang Zhao1   Xueyan Tang?  Peng Chen1 Shuiguang Deng 1Zhejiang University 2Nanyang Technological University {hliangzhao,pgchen,dengsg}@zju.edu.cn asxytang@ntu.edu.sg ", "page_idx": 0}, {"type": "text", "text": "Abstract ", "text_level": 1, "page_idx": 0}, {"type": "text", "text": "In this paper, we study learning-augmented algorithms for the Bahncard problem. The Bahncard problem is a generalization of the ski-rental problem, where a traveler needs to irrevocably and repeatedly decide between a cheap short-term solution and an expensive long-term one with an unknown future. Even though the problem is canonical, only a primal-dual-based learning-augmented algorithm was explicitly designed for it. We develop a new learning-augmented algorithm, named PFSUM, that incorporates both history and short-term future to improve online decision making. We derive the competitive ratio of PFSUM as a function of the prediction error and conduct extensive experiments to show that PFSUM outperforms the primal-dual-based algorithm. ", "page_idx": 0}, {"type": "text", "text": "1 Introduction ", "text_level": 1, "page_idx": 0}, {"type": "text", "text": "The Bahncard is a railway pass of the German railway company, which provides a discount on all train tickets for a fixed time period of pass validity. When a travel request arises, a traveler can buy the train ticket with the regular price, or purchase a Bahncard first and get entitled to a discount on all train tickets within its valid time. The Bahncard problem is an online cost minimization problem, whose objective is to minimize the overall cost of pass and ticket purchases, without knowledge of future travel requests [1]. It reveals a recurring renting-or-buying phenomenon, where an online algorithm needs to irrevocably and repeatedly decide between a cheap short-term solution and an expensive long-term one with an unknown future. The performance of an online algorithm is typically measured by the competitive ratio, which is the worst-case ratio across all inputs between the costs of the online algorithm and an optimal offline one [2]. ", "page_idx": 0}, {"type": "text", "text": "Recently, there has been growing interest in using machine-learned predictions to improve online algorithms. One seminal work was done by Lykouris and Vassilvtiski [3] for the caching problem, in which the online algorithms are allowed to leverage predictions of future inputs to make decisions, but they are not given any guarantee on the prediction accuracy. Since then, the framework of online algorithms with predictions has been extensively studied for a wide range of problems including ski-rental [48], scheduling [9, 10], graph optimization [11], covering [12, 13], data structures [14 16], etc. In this framework, the measurements for the online algorithms include consistency and robustness, where the former refers to the competitive ratio under perfect predictions while the latter refers to the upper bound of the competitive ratio when the predictions can be arbitrarily bad. ", "page_idx": 0}, {"type": "text", "text": "The Bahncard problem with machine-learned predictions was recently studied by Bamas et al. [12]. They designed a primal-dual-based algorithm assuming given a prediction of the optimal solution, i.e., an optimal collection of times to purchase Bahncards such that the total cost is minimized. While Bamas et al. [12] presented an elegant framework for seamlessly integrating the primal-dual method with a predicted solution, their approach faces three critical issues. First, their considered scenario is limited, involving slotted time and a fixed ticket price of 1 for any travel request. The discretization is necessary for them to formulate an integer program and enable the application of the primal-dual method proposed by Buchbinder et al. [17]. Second, their results of consistency and robustness are weak in that they only hold under the condition that the cost of a Bahncard goes towards infinity, in which case the optimal solution is to never buy any Bahncard. Last, their algorithm demands a complete solution as input advice, which implies a predicted complete sequence of travel requests over an arbitrarily long timespan, which is impractical for real employment. ", "page_idx": 0}, {"type": "text", "text": "", "page_idx": 1}, {"type": "text", "text": "In this paper, we study the Bahncard problem with machine-learned predictions, adopting a different technical perspective. We address the general scenario where travel requests may arise at any time with diverse ticket prices. We develop an algorithm, named PFSUM, which takes short-term predictions on future trips as inputs. We derive its competitive ratio under any prediction error that is naturally defined as the difference between the predicted and true values. To present our results, we introduce several notations. The Bahncard problem is instantiated by three parameters and denoted by $\\mathsf{B P}(C,\\beta,T)$ , meaning that a Bahncard costs $C$ , reduces any (regular) ticket price $p$ to $\\beta p$ for some $0\\leq\\beta<1$ , and is valid for a time period of $T$ . When $\\beta\\,=\\,0$ and $T\\rightarrow\\infty$ , the Bahncard problem reduces to the well-known ski-rental problem. Following the definition in [3, 4], we take the competitive ratio of a learning-augmented online algorithm ALG as a function $\\mathtt{C R_{A L G}}(\\eta)$ of the prediction error $\\eta$ . ALG is $\\delta$ -consistent if $\\mathsf{C R}_{\\mathsf{A L G}}(0)=\\delta$ , and $\\vartheta$ -robust if $\\mathtt{C R}_{\\mathsf{A L G}}(\\eta)\\leq\\vartheta$ for all $\\eta$ ", "page_idx": 1}, {"type": "text", "text": "At any time $t$ when a travel request arises and there is no a valid Bahncard, a prediction on the total (regular) ticket price of all travel requests in the upcoming interval $[t,t+T)$ is made. Incorporating this prediction, PFSUM purchases a Bahncard at time $t$ when (i) the total ticket price in the past interval $(t-T,t]$ is at least $\\gamma$ and (i) the predicted total ticket price in $[t,t+T)$ is also at least $\\gamma$ where $\\gamma:=C/(\\bar{1}-\\beta)$ . Denoting by $\\eta$ the maximum prediction error, we derive that ", "page_idx": 1}, {"type": "equation", "text": "$$\n\\begin{array}{r}{\\mathtt{C R p F S U M}(\\eta)=\\left\\{\\begin{array}{l l}{\\frac{2\\gamma+(2-\\beta)\\eta}{(1+\\beta)\\gamma+\\beta\\eta}}&{0\\le\\eta\\le\\gamma,}\\\\ {\\frac{(3-\\beta)\\gamma+\\eta}{(1+\\beta)\\gamma+\\beta\\eta}}&{\\eta>\\gamma.}\\end{array}\\right.}\\end{array}\n$$", "text_format": "latex", "page_idx": 1}, {"type": "text", "text": "The result shows that PFSUM is $2/(1+\\beta)$ -consistent and $1/\\beta$ -robust, and its competitive ratio degrades smoothly as the prediction error increases. We also share our experience in the design of PFSUM with some interesting observations. ", "page_idx": 1}, {"type": "text", "text": "2 Related Work ", "text_level": 1, "page_idx": 1}, {"type": "text", "text": "The Bahncard problem. Fleischer [1] was the first to study the Bahncard problem. By extending the optimal 2-competitive break-even algorithm for ski-rental, he proposed an optimal $(2-\\beta)$ competitive deterministic algorithm named SUM for $\\mathsf{B P}(C,\\beta,T)$ . He also proposed a randomized algorithm named RAND for $\\mathsf{B P}(C,\\beta,\\infty)$ , and proved that it is $e/(e\\mathrm{~-~}1+\\beta)$ -competitive. He conjectured that RAND keeps the same competitiveness for $T<\\infty$ . Karlin et al. [18] designed a randomized online algorithm for TCP acknowledgement and applied it to $\\mathsf{B P}(C,\\beta,T)$ with the conjecture settled positively. In addition, the Bahncard problem was extended to several realistic problems in computer systems such as bandwidth cost minimization [19], cloud instance reservation [20], and data migration [21]. Notably, Wang et al. [20] designed algorithms incorporating short-term predictions about the future for reserving virtual machine instances in clouds, which brings inspiration to our algorithm design. ", "page_idx": 1}, {"type": "text", "text": "Learning-augmented algorithms. Learning-augmented algorithms aim to leverage machine-learned predictions to improve the performance in both theory and practice [22]. Algorithms using possibly imperfect predictions have found applications in numerous important problems [4-7, 9-11, 16, 23-27]. See https : //algorithms- with-predictions .github.io/ for a comprehensive collection of the literature. ", "page_idx": 1}, {"type": "text", "text": "To our knowledge, the only learning-augmented algorithms specifically designed for the Bahncard problem were developed by Bamas et al. [12] and Drygala et al. [28]. Bamas et al. [12] proposed an algorithm, named PDLA, which is $\\lambda/(1\\!-\\!\\bar{\\beta}\\!+\\!\\bar{\\lambda}\\beta)\\!\\cdot\\!(e^{\\bar{\\lambda^{\\prime}}}\\!\\!-\\!\\bar{\\beta})/(e^{\\lambda}\\!-\\!\\bar{1})$ -consistent and $(e^{\\lambda}{-}\\overleftarrow{\\beta})/(e^{\\lambda}{-}1)$ robust when $C\\to\\infty$ where $\\lambda\\in(0,1]$ is a hyper-parameter of the algorithm. Their method, as previously discussed, is limited to scenarios with slotted time and uniform ticket prices for all travel requests. Our approach significantly differs from [12]. First, we address the general scenario where travel requests can arise at any time and feature varied ticket prices. Second, our algorithm utilizes short-term predictions provided at the times when travel requests are made, in contrast to their method which requires predicting a complete solution. We experimentally compare our algorithm with that of [12] in Section 5. Drygala et al. [28] focused on how many predictions are required to gather enough information to output a near-optimal Bahncard purchasing schedule, assuming all predictions are correct. The learning-augmented algorithm proposed takes a suggested sequence of buying times as input and assumes a slotted time setting, thereby sharing similar drawbacks to [12]. ", "page_idx": 1}, {"type": "text", "text": "", "page_idx": 2}, {"type": "text", "text": "Im et al. [26] explored a somewhat related TCP acknowledgement problem with machine-learned predictions. They introduced a new prediction error measure designed to assess how much the optimal objective value changes as the difference between actual requests and predicted requests varies. A detailed comparison between our work and [26] is provided in Appendix A.1 of [29]. ", "page_idx": 2}, {"type": "text", "text": "3 Preliminaries ", "text_level": 1, "page_idx": 2}, {"type": "text", "text": "We adhere to the notations coined by Fleischer [1]. $\\mathsf{B P}(C,\\beta,T)$ with $C>0,T>0$ , and $0\\leq\\beta<1$ is a request-answer game between an online algorithm ALG and an adversary (see, e.g., [30]). The adversary presents a finite sequence of travel requests $\\sigma=\\sigma_{1}\\sigma_{2}\\cdot\\cdot\\cdot$ , where each $\\sigma_{i}$ is a tuple $(t_{i},p_{i})$ that contains the travel time $t_{i}\\,\\geq\\,0$ and the regular ticket price $p_{i}~\\geq0$ . The travel requests are presented in chronological order: $0\\leq t_{1}<t_{2}<\\cdot\\cdot.$ ", "page_idx": 2}, {"type": "text", "text": "ALG needs to react to each travel request $\\sigma_{i}$ . If ALG does not have a valid Bahncard, it can opt to buy the ticket with the regular price $p_{i}$ , or first purchase a Bahncard which costs $C$ , and then pay the ticket price with a $\\beta$ -discount, i.e., $\\beta p_{i}$ . A Bahncard purchased at time $t$ is valid during the time interval $[t,t+T)$ . Note that a travel request arising at time $t+T$ does not benefit from the Bahncard purchased at time $t$ .We say $\\sigma_{i}$ is a reduced request of ALG if ALG has a valid Bahncard at time $t_{i}$ Otherwise, $\\sigma_{i}$ is a regular request of ALG. We use $\\mathsf{A L G}(\\sigma_{i})$ to denote ALG's cost on $\\sigma_{i}$ ", "page_idx": 2}, {"type": "equation", "text": "$$\n{\\sf A L G}(\\sigma_{i})=\\left\\{\\begin{array}{l l}{\\beta p_{i}}&{{\\sf A L G}{\\mathrm{~has~a~valid~Bahncard~at~}}t_{i},}\\\\ {p_{i}}&{{\\mathrm{otherwise.}}}\\end{array}\\right.\n$$", "text_format": "latex", "page_idx": 2}, {"type": "text", "text": "We denote by $\\mathtt{A L G}(\\sigma)$ the total cost of ALG for reacting to all the travel requests in $\\sigma$ . The competitive ratio of ALG is defined by $\\mathtt{C R A L G}:=\\operatorname*{max}_{\\sigma}\\mathsf{A L G}(\\sigma)/\\mathsf{O P T}(\\sigma)$ , where OPT is an optimal offline algorithm for $\\mathsf{B P}(C,\\beta,T)$ .We use $\\mathsf{A L G}(\\sigma;\\mathcal{T})$ to denote the partial cost incurred during a time interval $\\mathcal{T}$ $\\begin{array}{r}{\\mathsf{A L G}(\\sigma;\\mathbb{Z})=C\\!\\cdot\\!x\\!+\\!\\sum_{i:t_{i}\\in\\mathbb{Z}}\\mathsf{A L G}(\\sigma_{i})}\\end{array}$ , where $x$ is the number of Bahncards purchased by ALG in I. Additionally, we use c(o;T) to denote the total regular cost in I: c(o;I) := Za:t:Ez Pi. Given a time length $l$ , we define the $l$ -recent-cost of $\\sigma$ at time $t$ as $c(\\sigma;(t-l,t])$ . Similarly, we define the $l$ -future-cost of $\\sigma$ at time $t$ as $c(\\sigma;[t,t+l))$ . In our design, we assume that when a travel request $(t,p)$ arises, a short-term prediction of the total regular cost in the time interval $[t,t+T)$ can be made. To represent prediction errors, we use $\\hat{c}(\\sigma;[t,t+T))$ to denote the predicted total regular cost in $[t,t+T)$ . Sometimes we are concerned about the regular requests of an algorithm $\\mathsf{A L G}$ in a recent time interval. Thus, we further define the regular $l$ -recent-cost of ALG on $\\sigma$ at time $t$ as ", "page_idx": 2}, {"type": "equation", "text": "$$\n\\mathsf{A L G}^{r}\\left(\\sigma;(t-l,t]\\right):=\\sum_{\\substack{i:\\sigma_{i}\\mathrm{~is~a~regular~request~of~}\\mathsf{A L G}\\mathrm{~in~}(t-l,t]}}p_{i}.\n$$", "text_format": "latex", "page_idx": 2}, {"type": "text", "text": "Without loss of generality, we assume that an online algorithm ALG or an optimal offline algorithm OPT considers purchasing Bahncards at the times of regular requests only. The rationale is that the purchase of a Bahncard at any other time can always be delayed to the next regular request without increasing the total cost. ", "page_idx": 2}, {"type": "text", "text": "Lemma 3.1. [1] For any time $t_{\\perp}$ $c(\\sigma;[t,t+T))\\geq\\gamma:=C/(1-\\beta),$ .OPT has at least one reduced requestin $[t,t+T)$ .The same holds for the time interval $(t,t+T]$ ", "page_idx": 2}, {"type": "text", "text": "$\\gamma$ is known as the break-even point, i.e., the threshold to purchase a Bahncard at time $t$ for minimizing the cost incurred in the time interval $[t,t+T)$ ", "page_idx": 2}, {"type": "text", "text": "Corollary 3.2. At any time $t$ if the $T$ -future-cost $c(\\sigma;[t,t+T))<\\gamma,$ OPT does not purchase a Bahncard at $t$ ", "page_idx": 2}, {"type": "text", "text": "An optimal deterministic online algorithm for the Bahncard problem is SUM, which is $(2-\\beta)$ competitive [1]. SUM purchases a Bahncard at a regular request $(t,p)$ whenever its regular $T$ -recentcost at time $t$ is at least $\\gamma$ i.e., $\\mathsf{S U M}^{r}\\left(\\sigma;(t-T,t]\\right)\\geq\\gamma$ ", "page_idx": 2}, {"type": "text", "text": "4  Learning-Augmented Algorithms for the Bahncard Problem ", "text_level": 1, "page_idx": 3}, {"type": "text", "text": "4.1  Initial Attempt ", "text_level": 1, "page_idx": 3}, {"type": "text", "text": "The SUM algorithm developed in [1] purchases a Bahncard based on the cost incurred in the past only. It is likely that there is no further travel request in the valid time of the Bahncard besides the request at the purchasing time. Our initial attempt is an adaptation of the $\\underset{-}{A^{w}}$ algorithm proposed in [20]. Aiming to save cost, the $A_{\\gamma}^{w}$ algorithm shifts the cost consideration for Bahncard purchasing towards the future with the help of predictions. That is, a Bahncard is purchased based on a combination of the actual cost incurred in the past and the predicted cost in the future. We name the adaptation of $A_{\\gamma}^{w}$ to the Bahncard problem as $\\mathsf{S U M}_{w}$ 1  Specifically, at each regular request $(t,p)$ \uff0c $\\mathsf{S U M}_{w}^{-}$ predicts the total regular cost in a prediction window $(t,t+w]$ where $w$ $\\left[0<w<T\\right]$ is the length of the prediction window. $\\mathsf{S U M}_{w}$ purchases a Bahncard at a regular request $(t,p)$ whenever the sum of the regular $(T-w)$ -recent-cost at $t$ and the predicted total regular cost in $(t,t+w]$ is at least $\\gamma$ , i.e., ", "page_idx": 3}, {"type": "equation", "text": "$$\n\\mathsf{S U M}_{w}^{r}\\big(\\sigma;(t+w-T,t]\\big)+\\hat{c}\\big(\\sigma;(t,t+w]\\big)\\geq\\gamma.\n$$", "text_format": "latex", "page_idx": 3}, {"type": "text", "text": "Note that $\\mathsf{S U M}_{w}$ reduces to SUM when $w=0$ ", "page_idx": 3}, {"type": "text", "text": "Unfortunately, $\\mathsf{S U M}_{w}$ is not a good algorithm for using machine-learned predictions. We find that its consistency is at least $(3-\\beta)/(1+\\beta)$ , which is even larger than SUM's competitive ratio of $2-\\beta$ since $\\beta<1$ . We construct a travel request sequence to show the consistency result in Appendix A.2 of [29]. Moreover, $\\mathsf{S U M}_{w}$ does not have any bounded robustness. Consider another example where only one travel request $(t,p)$ arises with $p\\rightarrow0$ , but the predictor yields $\\hat{c}\\big(\\sigma;(t,t+w]\\big)\\stackrel{\\cdot}{\\geq}\\gamma$ . Then, $\\mathsf{S U M}_{w}$ purchases a Bahncard at $(t,p)$ . Thus, we have $\\mathsf{S U M}_{w}(\\sigma)/\\mathsf{O P T}(\\sigma)=(C+\\beta p)/p\\to\\infty$ $\\mathsf{S U M}_{w}$ fails because if a Bahncard is purchased at time $t$ , it is possible that most of the ticket cost in the interval $(t+w-T,t+w]$ is incurred before $t$ . Consequently, only a small fraction of the ticket cost is incurred from $t$ onward and can benefit from the Bahncard purchased. As a result, $\\mathsf{S U M}_{w}$ suffers from the same deficiency as SUM. We remark that it is not helpful to set the prediction window length $w$ to $T$ or even larger values, because the travel request arising at (or beyond) time $t+T$ (if any) is not covered by the Bahncard purchased at time $t$ ", "page_idx": 3}, {"type": "text", "text": "", "page_idx": 3}, {"type": "text", "text": "4.2  Second Attempt ", "text_level": 1, "page_idx": 3}, {"type": "text", "text": "What we have learned from $\\mathsf{S U M}_{w}$ is that the Bahncard purchase condition should not be based on the total ticket cost in a past time interval and a future prediction window. Thus, our second algorithm FSUM (Future SUM) is designed to purchase a Bahncard at a regular request $(t,p)$ whenever the predicted $T$ -future-cost at time $t$ is at least $\\gamma$ i.e., ", "page_idx": 3}, {"type": "equation", "text": "$$\n\\hat{c}(\\sigma;[t,t+T))\\geq\\gamma.\n$$", "text_format": "latex", "page_idx": 3}, {"type": "text", "text": "Note that $\\mathsf{F S U M}\\neq\\mathsf{S U M}_{T}$ because the Bahncard purchase condition of $\\mathsf{S U M}_{T}$ .s $\\hat{c}\\big(\\sigma;(t,t{+}T]\\big)\\ge\\gamma$ ", "page_idx": 3}, {"type": "text", "text": "Theorem 4.1. FSUM is $2/(1+\\beta)$ -consistent. ", "page_idx": 3}, {"type": "text", "text": "The proof is given in Appendix A.3 of [29]. FSUM's consistency is generally better than SUM's competitiveratio since $2/(1+\\beta)<2-\\beta$ alwaysholdsfor $0<\\beta<1$ . However, similar to $\\mathsf{S U M}_{w}$ FSUM does not have any bounded robustness. Consider again the example where only one travel request $(t,p)$ arises with $p\\rightarrow0$ but the predictor yields $\\hat{c}(\\sigma;\\bar{[t,t+T)})\\ge\\bar{\\gamma}.$ Then, FSUM purchases a Bahncard at $(t,p)$ and $\\mathsf{F S U M}(\\sigma)/\\mathsf{O P T}(\\sigma)=(C+\\beta p)/\\bar{p}\\to\\infty$ ", "page_idx": 3}, {"type": "text", "text": "4.3 PFSUM Algorithm ", "text_level": 1, "page_idx": 3}, {"type": "text", "text": "FSUM fails to achieve any bounded robustness because it completely ignores the historical information in the Bahncard purchase condition. Thus, the worst case is that the actual ticket cost in the prediction window is close to O, while the predictor forecasts that it exceeds $\\gamma$ in whichcase hardly anything benefits from the Bahncard purchased. On the other hand, we note that SUM achieves a decent competitive ratio because a Bahncard is purchased only when the regular $T$ -recent-costis at least $\\gamma$ , so that the Bahncard cost can be charged to the regular $T$ -recent-cost in the competitive analysis. Motivated by this observation, we introduce a new algorithm PFSUM (Past and Future SUM), in which the Bahncard purchase condition incorporates the ticket costs in both a past time interval and a future prediction window, but uses them separately rather than taking their sum. PFSUM purchases a Bahncard at a regular request $(t,p)$ whenever (i) the $T$ -recent-cost at $t$ is at least $\\gamma$ i.e., $\\bar{c}(\\sigma;(t-T,t])\\geq\\gamma$ , and (i) the predicted $T$ -future-cost at $t$ is also at least $\\gamma$ i.e., $\\hat{c}(\\sigma;[t,t+T))\\ge\\gamma$ Note that the first condition is different from the condition for SUM to purchase a Bahncard: PFSUM considers the $T$ -recent-cost, but SUM considers only the regular $T$ -recent-cost. The rationale is that by definition, the regular $T$ -recent-cost is not covered by any Bahncard, so requiring it to be at least $\\gamma$ for Bahncard purchase would make the algorithm less effective in saving cost. Compared with FSUM, though PFSUM has an additional condition for purchasing the Bahncard, it is somewhat surprising that PFSUM achieves the same consistency of $\\bar{2}/(1+\\beta)$ as FSUM, as shown below. ", "page_idx": 3}, {"type": "text", "text": "", "page_idx": 4}, {"type": "text", "text": "Given a travel request sequence $\\sigma$ ,we use $\\mu_{1}\\,<\\,\\cdot\\,\\cdot\\,<\\,\\mu_{m}$ to denote the times when PFSUM purchases Bahncards. Accordingly, the timespan can be divided into epochs $E_{j}:=[\\mu_{j},\\mu_{j+1})$ for $0\\leq j\\leq m$ , where we define $\\mu_{0}=0$ and $\\mu_{m+1}=\\infty$ .Each epoch $E_{j}$ (except $E_{0}$ ) starts with an on phase $[\\mu_{j},\\mu_{j}+T)$ (the valid time of the Bahncard purchased by PFSUM), followed by an off phase $[\\mu_{j}+T,\\mu_{j+1})$ (in which there is no valid Bahncard by PFSUM). Epoch $E_{0}$ has an off phase only. We define $\\eta$ as the maximum prediction error among all the predictions used by PFSUM: ", "page_idx": 4}, {"type": "equation", "text": "$$\n\\eta:=\\operatorname*{max}_{\\substack{(t,p)\\,\\mathrm{is\\aregular\\request}}}\\left|\\hat{c}\\big(\\sigma;[t,t+T)\\big)-c\\big(\\sigma;[t,t+T)\\big)\\right|.\n$$", "text_format": "latex", "page_idx": 4}, {"type": "text", "text": "Then, for any travel request $(t,p)$ in an off phase, we have ", "page_idx": 4}, {"type": "equation", "text": "$$\nc\\big(\\sigma;[t,t+T)\\big)-\\eta\\leq\\hat{c}\\big(\\sigma;[t,t+T)\\big)\\leq c\\big(\\sigma;[t,t+T)\\big)+\\eta.\n$$", "text_format": "latex", "page_idx": 4}, {"type": "text", "text": "The following lemmas will be used frequently in the competitive analysis of PFSUM. ", "page_idx": 4}, {"type": "text", "text": "Lemma 4.2. The total regular cost in an on phase is at least $\\gamma-\\eta$ ", "page_idx": 4}, {"type": "text", "text": "Proof. If $c(\\sigma;[\\mu_{j},\\mu_{j}+T))\\,<\\,\\gamma\\,-\\,\\eta$ for some $j$ , it follows from (5) that $\\hat{c}(\\sigma;[\\mu_{j},\\mu_{j}+T))\\le$ $c(\\sigma;[\\mu_{j},\\mu_{j}+T))+\\eta<\\gamma-\\eta+\\eta=\\gamma$ , which means that PFSUM would not purchase a Bahncard at time $\\mu_{j}$ , leading to a contradiction. Thus, we must have $c(\\sigma;[\\mu_{j},\\mu_{j}+T))\\geq\\gamma-\\eta$ \u53e3 ", "page_idx": 4}, {"type": "text", "text": "Lemma 4.3. In an off phase, the total regular cost in any time interval $[t,t+l)$ of length $l\\leq T$ is less than 2 + n. ", "page_idx": 4}, {"type": "text", "text": "Proof.Assume on the contrary that $c(\\sigma;[t,t+l))\\geq2\\gamma+\\eta$ We take the earliest travel request $(t^{\\prime},p)$ in $[t,t+l)$ such that $c(\\sigma;[t,t^{\\prime}])\\geq\\gamma$ This implies $c(\\sigma;[t,t^{\\prime}))<\\gamma$ . Then, we have $c(\\sigma;[t^{\\prime},t+l))=$ $c(\\bar{\\sigma};[t,t+l))-c(\\sigma;[t,t^{\\prime}))>2\\gamma+\\eta-\\gamma=\\gamma+\\eta$ 7. Hence, $c(\\sigma;(t^{\\prime}-T,t^{\\prime}])\\geq c(\\sigma;[t,\\dot{t}^{\\prime}])\\geq\\gamma$ and $c(\\sigma;[t^{\\prime},t^{\\prime}+T))\\geq c(\\sigma;[t^{\\prime},t+l))>\\gamma+\\eta$ .By (5), the latter further leads to $\\hat{c}(\\sigma;[t^{\\prime},t^{\\prime}+T))\\ge$ $c(\\sigma;[t^{\\prime},t^{\\prime}+T))\\,-\\,\\eta\\,>\\,\\gamma$ , which means that PFSUM should purchase a Bahncard at time $t^{\\prime}$ contradicting that $t^{\\prime}\\in[t,t+l)$ is in the off phase. Hence, $c(\\sigma;[t,\\bar{t}+T))<2\\gamma+\\eta$ must hold. ", "page_idx": 4}, {"type": "text", "text": "Lemma 4.4. Suppose a time interval $[t,t+T)$ overlaps with an off phase. Among the total regular cost in $[t,t+T)$ ,let $s_{2}$ $s_{3}$ and $s_{4}$ denote those in the preceding on phase, the off phase, and the succeeding on phase respectively(seeFigure $^{\\,l}$ ).If $0\\leq\\eta\\leq\\gamma,\\,s_{2}\\leq\\gamma$ and $s_{4}\\leq\\gamma$ thenthetotal regular cost in $[t,t+T)$ is no more than $2\\gamma+\\eta,$ i.e., $s_{2}+s_{3}+s_{4}\\leq2\\gamma+\\eta$ ", "page_idx": 4}, {"type": "image", "img_path": "3cb6pF3Tvf/tmp/638b4c71d5eeaa5d277ae7a655969b4d49570c4f8b314587bbaf0b309a4616df.jpg", "img_caption": [], "img_footnote": [], "page_idx": 4}, {"type": "text", "text": "Figure 1: Mllustration for Lemma 4.4. The shaded rectangle is the valid time of a Bahncard purchased byOPT. ", "page_idx": 4}, {"type": "text", "text": "Proof. Assume on the contrary that $s_{2}+s_{3}+s_{4}>2\\gamma+\\eta$ . Then, $s_{3}>0$ and hence there is at least one travel request during the off phase. We take the earliest travel request $(t^{\\prime},p)$ in the off phase, such that $c(\\sigma;[t,t^{\\prime}])\\geq\\gamma$ . With a similar analysis to Lemma 4.3, we can derive that PFSUM should purchase a Bahncard at time $t^{\\prime}$ , contradicting that $t^{\\prime}$ is in the off phase. \u53e3 ", "page_idx": 4}, {"type": "text", "text": "We adopt a divide-and-conquer approach to analyze PFSUM. Specifically, we focus on the time intervals in which at least one of PFSUM and OPT has a valid Bahncard, and analyze the cost ratio between PFSUM and OPT in these intervals. Consider a maximal contiguous time interval throughout which at least one of PFSUM and OPT has a valid Bahncard. As shown in Figure 2, there are 6 different patterns. If OPT and PFSUM purchase a Bahncard at the same time, the time interval is exactly an on phase (Pattern I), and the cost ratio in it is 1 (Proposition 4.5). Otherwise, there are 5 different cases: the time interval does not overlap with any on phase (Pattern IH); and the time interval overlaps with at least one on phase - it can start at some time in an on or off phase and end at some time in an on or off phase, giving rise to four cases (Patterns II to VI). In Patterns II to VI, we assume that none of the involved Bahncards purchased by OPT are bought at the same time as any Bahncards purchased by PFSUM. ", "page_idx": 5}, {"type": "image", "img_path": "3cb6pF3Tvf/tmp/92213d5ba6a0e38f0fb47235a6d5f68acc043559bda12006252702f300a69ded.jpg", "img_caption": [], "img_footnote": [], "page_idx": 5}, {"type": "text", "text": "Figure 2: All the 6 patterns of concerned time intervals in which either PFSUM or OPT has a Bahncard. In Patterns III to VI, $x$ is the number of Bahncards purchased by OPT in an on phase and expiring in the next on phase. $x$ can be any non-negative integer. ", "page_idx": 5}, {"type": "text", "text": "Proposition 4.5. (Pattern I) If OPT purchases a Bahncard at time $\\tau_{i}$ at the beginning of epoch $E_{j}$ i.e., $\\tau_{i}=\\mu_{j}$ then ", "page_idx": 5}, {"type": "equation", "text": "$$\n\\frac{P F S U M\\big(\\sigma;[\\mu_{j},\\mu_{j}+T)\\big)}{O P T\\big(\\sigma;[\\mu_{j},\\mu_{j}+T)\\big)}=1.\n$$", "text_format": "latex", "page_idx": 5}, {"type": "text", "text": "Apparently, if the cost ratios between PFSUM and OPT of Patterns $\\mathrm{II}$ to VI are all capped by the same bound, the competitive ratio of PFSUM is given by this bound. Unfortunately, this is not exactly true. In what follows, we show that the cost ratios of Patterns $\\mathrm{II}$ to $\\mathrm{v}$ canbe capped by the same bound (Propositions 4.6 and 4.7), which is the competitive ratio of PFSUM that we would like to prove. For Pattern VI, we show that its cost ratio is capped by the same bound if a particular condition holds, where we refer to such Pattern VI as augmented Pattern VI (Proposition 4.8). For non-augmented Pattern VI, we show that it must be accompanied by Patterns I to IV in the sense that a time interval of non-augmented Pattern VI must be preceded (not necessarily immediately) by a time interval of Pattern I, II, III or IV. We prove that the cost ratio of non-augmented Pattern VI combined with such Pattern I, II, II or IV is capped by the same aforesaid bound (Propositions 4.9 and 4.10). This then concludes that PFSUM's competitive ratio is given by this bound. ", "page_idx": 5}, {"type": "text", "text": "Proposition 4.6. (Pattern I1) If OPT purchases a Bahncard at time $\\tau_{i}$ in the off phase of an epoch $E_{j}$ and the Bahncard expires in the same off phase, i.e., $\\mu_{j}+T\\le\\tau_{i}<\\tau_{i}+T<\\mu_{j+1}$ ,then ", "page_idx": 5}, {"type": "equation", "text": "$$\n\\frac{P F S U M(\\sigma;[\\tau_{i},\\tau_{i}+T))}{O P T(\\sigma;[\\tau_{i},\\tau_{i}+T))}<\\frac{2\\gamma+\\eta}{(1+\\beta)\\gamma+\\beta\\eta}.\n$$", "text_format": "latex", "page_idx": 5}, {"type": "text", "text": "Proof. Let $x=c(\\sigma;[\\tau_{i},\\tau_{i}{+}T))$ . Based on the definition of Pattern II, ${\\mathsf{O P T}}(\\sigma;[\\tau_{i},\\tau_{i}{+}T))=C{+}\\beta x$ (OPT buys a card at $\\tau_{i}$ ) and $\\mathsf{P F S U M}(\\sigma;[\\tau_{i},\\tau_{i}+T))=x$ (PFSUM does not buy cards during any off phase). Hence, the cost ratio is $\\frac{x}{C+\\beta x}$ , which increases with $x$ since $\\beta<1$ . By Lemma 4.3, <2 +7. Thus, the cost atiois bounded by c3(\u00b1+m) = (1-3+3(2+m) = (1+3+B \u518f\u53e3 ", "page_idx": 5}, {"type": "text", "text": "The proof technique of the following propositions for Patterns II to VI is to divide the time interval concerned into sub-intervals, where each sub-interval starts and ends at the time when OPT or PFSUM purchases a Bahncard or a Bahncard purchased expires. Then, for $0\\leq\\eta\\leq\\gamma$ and $\\eta>\\gamma$ we respectively derive the upper bound of the cost ratio based on Lemmas 4.2 to 4.4. All the bounds in Propositions 4.7 to 4.8 are tight (achievable). Detailed proofs are given in Appendixes A.4 to A.5 of [29]. ", "page_idx": 6}, {"type": "text", "text": "Proposition 4.7. (Patterns II to V) The cost ratio in the time interval of Patterns Ill, IV, and $V$ is boundedby ", "page_idx": 6}, {"type": "equation", "text": "$$\n\\left\\{\\begin{array}{l l}{\\frac{2\\gamma+(2-\\beta)\\eta}{(1+\\beta)\\gamma+\\beta\\eta}}&{0\\le\\eta\\le\\gamma,}\\\\ {\\frac{(3-\\beta)\\gamma+\\eta}{(1+\\beta)\\gamma+\\beta\\eta}}&{\\eta>\\gamma.}\\end{array}\\right.\n$$", "text_format": "latex", "page_idx": 6}, {"type": "text", "text": "We refer to Pattern VI as augmented Pattern VI if the total regular cost in the last on phase involved is at least $\\gamma$ . Proposition 4.8 shows that the cost ratio of augmented Pattern VI is capped by the same bound as Patterns IlI to V. ", "page_idx": 6}, {"type": "text", "text": "Proposition 4.8. (Augmented Pattern VI) Denote by $\\mu_{j}$ and $\\mu_{j+x}$ respectively the frst and last Bahncards purchased by PFSUMin Pattern VI. If the total regular cost in the on phase of $E_{j+x}$ is at least $\\gamma_{;}$ the cost ratio in the time interval of Pattern VI, i.e., $[\\mu_{j},\\mu_{j+x}+T)$ , is bounded by (8). ", "page_idx": 6}, {"type": "text", "text": "We remark that the cost ratio of general Pattern VI cannot be capped by the same bound as Patterns III to V. This is because in Pattern VI, PFSUM purchases one more Bahncard than OPT and hence has a higher cost of card purchases, whereas PFSUM purchases less or equal numbers of Bahncards compared to OPT in Patterns III to V. Thus, an additional condition is necessary in Proposition 4.8. ", "page_idx": 6}, {"type": "text", "text": "Next, we examine non-augmented Pattern VI. Note that the time intervals of Patterns $\\mathrm{v}$ andVI cannot exist in isolation. By the definition of PFSUM, when a Bahncard is purchased at time $\\mu_{j}$ , the total regular cost in the preceding interval $(\\mu_{j}-T,\\mu_{j}]$ is at least $\\gamma$ (referred to as feature $\\diamondsuit$ ). Consequently, by Lemma 3.1, OPT must purchase a Bahncard whose valid time overlaps with $(\\mu_{j}\\mathrm{~-~}T,\\mu_{j}]$ . To deal with non-augmented Pattern VI that starts at time $\\mu_{j}$ for some $j$ we backtrack from $\\mu_{j}$ to find out what happens earlier. Our target is to identify all possible patterns that might precede Pattern VI. ", "page_idx": 6}, {"type": "image", "img_path": "3cb6pF3Tvf/tmp/54ecc0f5fc95b6b98b848ae2eb9e324a987cbed71dec21db455174bbcac0961c.jpg", "img_caption": ["Figure 3: Pattern graph. "], "img_footnote": [], "page_idx": 6}, {"type": "text", "text": "Note that the time interval $(\\mu_{j}-T,\\mu_{j}]$ definitely intersects with the off phase of epoch $E_{j-1}$ and may also intersect with the on phase of $E_{j-1}$ (if the off phase of $E_{j-1}$ is shorter than $T$ ). Therefore, it is possible for all Patterns I to VI to precede Pattern VI (see Figures 3(b) and (c) for illustrations). If Pattern I, IV or VI precedes Pattern VI, there is an off phase in between, in which neither PFSUM nor OPT holds a valid Bahncard. Figure 3(a) presents a pattern graph to illustrate all possible concatenations of patterns preceding Pattern VI. In this graph, a node represents a pattern, and an edge from node $i$ to node $j$ means pattern $i$ can precede pattern $j$ . Since every Pattern $\\mathrm{v}$ or VI must be preceded by some pattern, the backtracking will always encounter a time interval of Pattern I, II, III or IV. We stop backtracking at the first Pattern I, II, III or IV encountered. ", "page_idx": 6}, {"type": "text", "text": "We use $p_{1}\\oplus p_{2}$ to denote the composite of pattern $p_{1}$ followed by pattern $p_{2}$ ; use $p^{y}$ to denote a sequence comprising $y$ consecutive instances of pattern $p$ ; and use $\\{p_{1},\\ldots,p_{n}\\}\\oplus p_{j}$ to represent all possible composite patterns of the form $p_{i}\\oplus p_{j}$ for each $i=1,\\hdots,n$ . Then, the patterns encountered in the backtracking can be represented by ", "page_idx": 6}, {"type": "equation", "text": "$$\n\\{\\mathrm{I},\\mathrm{II},\\mathrm{III},\\mathrm{IV}\\}\\oplus\\{\\mathrm{V},\\mathrm{VI}\\}^{y}\\oplus\\mathrm{VI},\n$$", "text_format": "latex", "page_idx": 6}, {"type": "text", "text": "where $y$ can be any non-negative integers. Following the feature $\\diamond$ , for each VI in $\\{\\mathbf{V},\\mathbf{V}\\mathbf{I}\\}^{y}$ of (9), the total regular cost in the last on phase of Pattern VI and the following off phase is at least $\\gamma$ .It is easy to see that the cost ratio between PFSUM and OPT in the time interval of such Pattern VI is no larger than that of augmented Pattern VI and hence the upper bound given in Proposition 4.8. For each $\\mathrm{v}$ in $\\{\\mathbf{V},\\mathbf{V}\\mathbf{I}\\}^{y}$ of (9), the cost ratio of Pattern V is capped by the same bound based on Proposition 4.7. In the following, we prove that the cost ratio of non-augmented Pattern VI combined with Pattern I, II,III or IV at the beginning of (9) is also capped by the same bound. ", "page_idx": 7}, {"type": "text", "text": "Proposition 4.9. The cost ratio in the combination of a time interval of Pattern VI and a time interval of Pattern II or Ill is bounded by (8). ", "page_idx": 7}, {"type": "text", "text": "Proof Sketch. Note that in Patterns II and IMI, PFSUM purchases one less Bahncard than OPT. Recall that in Pattern VI, PFSUM purchases one more Bahncard than OPT. Hence, when considering Pattern VI with Pattern II or I together, PFSUM purchases the same number of Bahncards as OPT. Therefore, we can use the same technique as Proposition 4.7 to cap the cost ratio by the same bound. See Appendix A.6 of [29] for details. \u53e3 ", "page_idx": 7}, {"type": "text", "text": "Proposition 4.10. The cost ratio in the combination of a time interval of Pattern VI and a time interval of Pattern I or IV encountered in backtracking is bounded by (8). ", "page_idx": 7}, {"type": "text", "text": "Proof Sketch. Consider Pattern IV. When analyzing the cost ratio of Pattern IV in Proposition 4.7, it is assumed that the total regular cost in the last on phase is at least $\\gamma-\\eta$ . In IV of (9), following the feature $\\diamond$ , the total cost of travel requests in the last on phase of Pattern IV and the following off phase is at least $\\gamma$ . Thus, there is an additional cost of at least $\\eta$ . Therefore, we can \u201cmigrate\u201d an additional cost of $\\eta$ to the non-augmented Pattern VI at the end of (9) and make the latter become an augmented Pattern VI so that the result of Proposition 4.8 can be applied. Meanwhile, the proof of Proposition 4.7 still applies to the Pattern IV even if the cost $\\eta$ is removed from the last on phase. Hence, after migrating the cost of $\\eta$ , the Patterns IV and VI involved have the same upper bound of cost ratio given in (8). The proof for Pattern I is similar. See Appendix A.7 of [29] for details. ", "page_idx": 7}, {"type": "text", "text": "By the above analysis and Propositions 4.6 to 4.10, we have: ", "page_idx": 7}, {"type": "text", "text": "Theorem 4.11. PFSUM has a competitive ratio of ", "page_idx": 7}, {"type": "equation", "text": "$$\n\\begin{array}{r}{C R_{P F S U M}(\\eta)=\\left\\{\\begin{array}{l l}{\\frac{2\\gamma+(2-\\beta)\\eta}{(1+\\beta)\\gamma+\\beta\\eta}}&{0\\le\\eta\\le\\gamma,}\\\\ {\\frac{(3-\\beta)\\gamma+\\eta}{(1+\\beta)\\gamma+\\beta\\eta}}&{\\eta>\\gamma.}\\end{array}\\right.}\\end{array}\n$$", "text_format": "latex", "page_idx": 7}, {"type": "text", "text": "By letting $\\eta\\,=\\,0$ , it is easy to see that the consistency of PFSUM is $2/(1+\\beta)$ . Note that the competitive ratio of (10) is a continuous function of the prediction error $\\eta$ . It increases from $2/(1+\\beta)$ to $(\\bar{4}-\\beta)/(1+2\\beta)$ as $\\eta$ increases from O to $\\gamma$ , and further increases from $(4-\\beta)/(1+2\\beta)$ towards $1/\\beta$ as $\\eta$ increases from $\\gamma$ towards infinity. Hence, PFSUM is $1/\\beta$ -robust. ", "page_idx": 7}, {"type": "text", "text": "5 Experiments ", "text_level": 1, "page_idx": 7}, {"type": "text", "text": "We conduct extensive experiments to compare PFSUM with SUM [1], PDLA [12], $\\mathsf{S U M}_{w}$ (Section 4.1), FSUM (Section 4.2), and SRL (Ski-Rental-based Learning algorithm), where SRL is adapted from Algorithm 2 proposed in [4] for ski-rental. SRL performs as follows. Let $\\lambda\\in(0,1]$ be a hyper-parameter, SRL purchases a Bahncard at a regular request $(t,p)$ if and only if there exists a time $\\bar{t^{\\prime}}\\in(t-T,t]$ that satisfies one of the following conditions: (i) the predicted $T$ -future-cost at time $t^{\\prime}$ is no less than $\\gamma$ , and the total regular cost in $[t^{\\prime},t]$ is greater than $\\lambda\\gamma$ ; or (i) the predicted $T$ -future-cost at time $t^{\\prime}$ is less than $\\gamma$ , and the total regular cost in $[t^{\\prime},t]$ is greater than $\\gamma/\\lambda$ ", "page_idx": 7}, {"type": "text", "text": "Wetest $\\mathsf{S U M}_{w}$ With $w=T/2$ , and test SRL and PDLA with $\\lambda$ set to 0.2, 0.5, and 1. To accommodate SRL and PDLA, we discretize time over a sufficiently long timespan, closely approximating a continuous time scenario. The experimental results across diverse input instances demonstrate the superior performance of PFSUM. ", "page_idx": 7}, {"type": "text", "text": "Input instances. Referring to the experimental setup of [31], we consider two main types of traveler profiles: commuters, and occasional travelers. We set the timespan at 2oo0 days, during which commuters travel every day. For occasional travelers, there is a time gap between travel requests. We model the inter-request time of occasional travelers using an exponential distribution with a mean of 2. We consider only one travel request per day. This is because multiple travel requests occurring on the same day can be effectively treated as a single request with combined ticket price, since a Bahncard's validity either covers an entire day or does not cover any part of the day. ", "page_idx": 7}, {"type": "text", "text": "", "page_idx": 8}, {"type": "text", "text": "For each request sequence generated, we investigate three types of ticket price distributions: a Normal distribution with a mean of 50 and a variance of 25, a Uniform distribution centered around a mean of 50, and a Pareto distribution called the Lomax distribution with a shape parameter of 2 and a scale parameter of 50. Our choice of the Pareto distribution stems from the observation that prices of travel requests in the real world often exhibit a heavy tail, which suggests that a minority of travel requests typically account for a significant portion of total cost. Such heavy-tailed distributions are often hypothesized to adhere to some form of Pareto distributions [32, 33]. ", "page_idx": 8}, {"type": "text", "text": "Noisy prediction. The predictions are generated by adding noise to the original instance, following the methodology used by Bamas et al. [12]. Specifically, we introduce a perturbation probability. $p$ For each day in a given instance, with probability $p$ , the travel request on that day is removed, if it exists. Meanwhile, with probability $p$ , we add random noise, sampled from the same distribution used for generating ticket prices, to the price of the travel request, or simply add a travel request if no request exists on that day. These two operations are executed independently. We vary the perturbation probability from O to 1 in the experiments. Intuitively, the prediction error increases with the perturbation probability. The predictions needed by SRL, $\\mathsf{S U M}_{w}$ , FSUM, and PFSUM are derived from the total regular cost over the specified time period in the perturbed instance. For PDLA, the predicted solution is obtained by executing the offline optimal algorithm on the perturbed instance. ", "page_idx": 8}, {"type": "image", "img_path": "3cb6pF3Tvf/tmp/1fed60d550c4eb94411ed33dffafdb6ab0ab01e38f0483c75b600bf372a1b691.jpg", "img_caption": ["Figure 4: The cost ratios for commuters ( $\\beta=0.8$ $T=10$ $C=100)$ ).\u201cU\", \u201cN\u201d and \u201cP\" represent Uniform, Normal and Pareto ticket price distributions respectively. "], "img_footnote": [], "page_idx": 8}, {"type": "image", "img_path": "3cb6pF3Tvf/tmp/9c8de8eb64febe112112f32efb49c31d272108e1fed62d53c04a0f9707b8d589.jpg", "img_caption": ["Figure 5: The cost ratios for occasional travelers ( $\\beta=0.8$ $T=10$ $C=100)$ ).\u201cU\u201d, \u201cN\u201d and \u201cP\" represent Uniform, Normal and Pareto ticket price distributions respectively. "], "img_footnote": [], "page_idx": 8}, {"type": "text", "text": "Results and discussion. For all types of input instances, the algorithms exhibit similar relative performance. We present in Figures 4 to 7 the results obtained for commuters and occasional travelers when setting $\\beta\\:=\\:0.8$ (or 0.6), $T\\,=\\,10$ (or 5), $C\\,=\\,100$ , and different ticket price distributions, including the Uniform distribution, the Normal distribution, and the Pareto distribution. Experimental results for other settings are given in Appendix A.8 of [29]. Each curve in the figure represents the average cost ratio between an algorithm and OPT over 100 experiment runs. The shaded area represents the $95\\%$ confidence interval of the corresponding curve. ", "page_idx": 8}, {"type": "text", "text": "We make the following observations from the experimental results. (1) When predictions are good (perturbation probability is small), PFSUM, FSUM, $\\mathsf{S U M}_{w}$ , and SRL all perform better than SUM. This shows that predictions on the ticket prices of short-term future trips are useful for reducing the total cost. With perfect predictions (perturbation probability $=0$ ), in most cases, either PFSUM or ", "page_idx": 8}, {"type": "image", "img_path": "3cb6pF3Tvf/tmp/3116a9d08edcceb5df0d8c66015ba14deefb0fc6ef09d71dd75193da5ca86ccc.jpg", "img_caption": ["Figure 6: The cost ratios for commuters ( $\\beta=0.6$ $T=5$ $C=100)$ ). \u201cU\", \u201cN\" and \u201cP\" represent Uniform, Normal and Pareto ticket price distributions respectively. "], "img_footnote": [], "page_idx": 9}, {"type": "image", "img_path": "3cb6pF3Tvf/tmp/af9948605727f8742bffa767faf22b7cbfcddaf65b9525a635e9cb717e6e217b.jpg", "img_caption": ["Figure 7: The cost ratios for occasional travelers ( $\\beta=0.6$ $T=5$ $C=100)$ .\u201cU\",\u201cN\u201d and\u201cP\u201d represent Uniform, Normal and Pareto ticket price distributions respectively. "], "img_footnote": [], "page_idx": 9}, {"type": "text", "text": "FSUM produces the lowest cost ratio among all algorithms. This empirically confirms that PFSUM and FSUM have better consistency than SUM and $\\mathsf{S U M}_{w}$ . (2) PFSUM outperforms all the other algorithms for a wide range of perturbation probability, demonstrating that PFSUM makes wise use of predictions. In general, PFSUM has the narrowest confidence intervals, indicating that its results are the most stable among all algorithms. (3) For the Pareto distribution, as the prediction error increases, PFSUM demonstrates its robustness through a gradual and smooth rise in the cost ratio to OPT. Even when the perturbation probability is large, PFSUM hardly performs worse than SUM. In contrast, the performance of $\\mathsf{S U M}_{w}$ and FSUM deteriorates rapidly with increasing perturbation probability, showing their poor robustness. (4) The primal-dual-based algorithm PDLA generally has much higher cost ratios than PFSUM and even the conventional online algorithm SUM. This shows that it is important to take advantage of the characteristics of the Bahncard (it is valid for a fixed time period only and provides the same discount to all the tickets purchased therein) when designing learning-augmented algorithms. (5) PFSUM consistently outperforms SRL, particularly in scenarios with significant prediction errors. While the performance of SRL improves with increasing $\\lambda$ under high prediction errors, as a larger $\\lambda$ leads to reduced reliance on the predictions and enhances the algorithm's robustness, its overall performance remains inferior to that of SUM. ", "page_idx": 9}, {"type": "text", "text": "6 Discussions and Conclusions ", "text_level": 1, "page_idx": 9}, {"type": "text", "text": "We have developed a new learning-augmented algorithm called PFSUM for the Bahncard problem. PFSUM makes predictions on the short-term future only, aligning closely with the temporal nature of the Bahncard problem and the practice of real-world ML predictions. We present a comprehensive analysis of PFSUM's competitive ratio under arbitrary prediction errors by a divide-and-conquer approach. Experimental results demonstrate significant performance advantages of PFSUM. ", "page_idx": 9}, {"type": "text", "text": "Different from prior works, we do not predict a full sequence of requests from the outset, and predict just a sum of near-future requests (cost) when needed. In some online problems with temporal aspects, compared with individual requests, the aggregated arrival pattern across a group of requests is more predictable (see, e.g., [34]). Thus, our approach can enhance the learnability of ML predictions. We believe that our analysis and result will be useful to various applications of the Bahncard problem as well as other problems with recurring renting-or-buying phenomena. ", "page_idx": 9}, {"type": "text", "text": "Acknowledgments and Disclosure of Funding ", "text_level": 1, "page_idx": 10}, {"type": "text", "text": "This work was supported in part by the Singapore Ministry of Education under Academic Research Fund Tier 2 Award MOE-T2EP20122-0007, the National Natural Science Foundation of China under Grants 62125206 and U20A20173, the National Key Research and Development Program of China under Grant 2022YFB4500100, and the Key Research Project of Zhejiang Province under Grant 2022C01145. ", "page_idx": 10}, {"type": "text", "text": "References ", "text_level": 1, "page_idx": 10}, {"type": "text", "text": "[1]  Rudolf Fleischer. On the bahncard problem. Theoretical Computer Science, 268(1):161-174, 2001.   \n[2]  Allan Borodin and Ran El-Yaniv. Online Computation and Competitive Analysis, volume 53. Cambridge University Press Cambridge, 1998.   \n[3]  Thodoris Lykouris and Sergei Vassilvtiski. Competitive caching with machine learned advice. In Jennifer Dy and Andreas Krause, editors, Proceedings of the 35th International Conference on Machine Learning, volume 80, 2018.   \n[4]  Manish Purohit, Zoya Svitkina, and Ravi Kumar. Improving online algorithms via ml predictions. Advances in Neural Information Processing Systems, 31, 2018.   \n[5]  Sreenivas Gollapudi and Debmalya Panigrahi. Online algorithms for rent-or-buy with expert advice. In Kamalika Chaudhuri and Ruslan Salakhutdinov, editors, Proceedings of the 36th International ConferenceonMachineLearning,volme97ofProceedings ofMachineLearning Research, pages 2319-2327. PMLR, 09-15 Jun 2019.   \n[6]  Alexander Wei and Fred Zhang. _ Optimal robustness-consistency trade-offs for learningaugmented online algorithms. In H. Larochelle, M. Ranzato, R. Hadsell, M.F. Balcan, and H. Lin, editors, Advances in Neural Information Processing Systems, volume 33, pages 8042-8053. Curran Associates, Inc., 2020.   \n[7]  Shufan Wang, Jian Li, and Shiqiang Wang. Online algorithms for multi-shop ski rental with machine learned advice. In H. Larochelle, M. Ranzato, R. Hadsell, M.F. Balcan, and H. Lin, editors, Advances in Neural Information Processing Systems, volume 33, pages 8150-8160. Curran Associates, Inc., 2020.   \n[8]  Yongho Shin, Changyeol Lee, Gukryeol Lee, and Hyung-Chan An. Improved learningaugmented algorithms for the multi-option ski rental problem via best-possible competitive analysis. In Andreas Krause, Emma Brunskill, Kyunghyun Cho, Barbara Engelhardt, Sivan Sabato, and Jonathan Scarlett, editors, Proceedings of the 40th International Conference on Machine Learning, volume 202 of Proceedings of Machine Learning Research, pages 31539-31561. PMLR, 23-29 Jul 2023. URL https: //proceedings .mlr.press/v202/shin23c .html. [9]  Sungjin Im, Ravi Kumar, Mahshid Montazer Qaem, and Manish Purohit. Non-clairvoyant scheduling with predictions. In Proceedings of the 33rd ACM Symposium on Parallelism in Algorithms and Architectures, pages 285-294, 2021.   \n[10] Yossi Azar, Stefano Leonardi, and Noam Touitou. Flow time scheduling with uncertain processing time. In Proceedings of the 53rd Annual ACM SIGACT Symposium on Theory of Computing, STOC 2021, page 1070-1080, New York, NY, USA, 2021. Association for Computing Machinery. ISBN 9781450380539. doi: 10.1145/3406325.3451023.   \n[11]  Justin Chen, Sandeep Silwal, Ali Vakilian, and Fred Zhang. Faster fundamental graph algorithms via learned predictions. In Kamalika Chaudhuri, Stefanie Jegelka, Le Song, Csaba Szepesvari, Gang Niu, and Sivan Sabato, editors, Proceedings of the 39th International Conference on Machine Learning, volume 162 of Proceedings of Machine Learning Research, pages 3583- 3602. PMLR, 17-23 Jul 2022.   \n[12] Etienne Bamas, Andreas Maggiori, and Ola Svensson. The primal-dual method for learning augmented algorithms. In H. Larochelle, M. Ranzato, R. Hadsell, M.F. Balcan, and H. Lin, editors, Advances in Neural Information Processing Systems, volume 33, pages 20083-20094. Curran Associates, Inc., 2020.   \n[13] Keerti Anand, Rong Ge, Amit Kumar, and Debmalya Panigrahi. Online algorithms with multiple predictions. In Kamalika Chaudhuri, Stefanie Jegelka, Le Song, Csaba Szepesvari, Gang Niu, and Sivan Sabato, editors, Proceedings of the 39th International Conference on Machine Learning, volume 162 of Proceedings of Machine Learning Research, pages 582-598. PMLR, 17-23 Jul 2022.   \n[14] Paolo Ferragina, Fabrizio Lillo, and Giorgio Vinciguerra. On the performance of learned data structures. Theoretical Computer Science, 871:107-120, 2021. ISSN 0304-3975. doi: https://doi.org/10.1016/j.tcs.2021.04.015.   \n[15]  Antonio Boffa, Paolo Ferragina, and Giorgio Vinciguerra. A learned approach to design compressed rank/select data structures. ACM Trans. Algorithms, 18(3), oct 2022. ISSN 1549-6325. doi: 10.1145/3524060.   \n[16] Honghao Lin, Tian Luo, and David Woodruff. Learning augmented binary search trees. In Kamalika Chaudhuri, Stfanie Jegelka, Le Song, Csaba zepesvari, Gang Niu, and Sivan Sabato editors, Proceedings of the 39th International Conference on Machine Learning, volume 162 of Proceedings of Machine Learning Research, pages 13431-13440. PMLR, 17-23 Jul 2022.   \n[17] Niv Buchbinder, Kamal Jain, and Joseph Naor. Online primal-dual algorithms for maximizing ad-auctions revenue. In European Symposium on Algorithms, pages 253-264. Springer, 2007.   \n[18]  Anna R. Karlin, Claire Kenyon, and Dana Randall. Dynamic tcp acknowledgement and other stories about e/(e-1). In Proceedings of the Thirty-Third Annual ACM Symposium on Theory of Computing, STOC \\*01, page 502-509, New York,NY, USA, 2001. Association for Computing Machinery. ISBN 1581133499. doi: 10.1145/380752.380845.   \n[19]  Micah Adler, Ramesh K. Sitaraman, and Harish Venkataramani. Algorithms for optimizing the bandwidth cost of content delivery. Computer Networks, 55(18):4007-4020, 2011. ISSN 1389-1286. doi: https://doi.org/10.1016/j.comnet.2011.07.015. Internet-based Content Delivery.   \n[20] Wei Wang, Baochun Li, and Ben Liang. To reserve or not to reserve: Optimal online multiinstance acquisition in iaas clouds. In 1Oth International Conference on Autonomic Computing $(\\{I C A C\\}\\;I\\dot{3})$ , pages 13-22, 2013.   \n[21] Mingyu Liu, Li Pan, and Shijun Liu. Keep hot or go cold: A randomized online migration algorithm for cost optimization in staas clouds. IEEE Transactions on Network and Service Management, 18(4):4563-4575, 2021. doi: 10.1109/TNSM.2021.3096533.   \n[22]  Michael Mitzenmacher and Sergei Vassilvitski. Algorithms with predictions. Communications of the ACM, 65(7):33-35, 2022.   \n[23] Keyuan Zhang, Zhongdong Liu, Nakjung Choi, and Bo Ji. Learning-augmented online algorithm for two-level ski-rental problem. In Proceedings of the AAAl Conference on Artificial Intelligence, volume 38, pages 20293-20300, 2024.   \n[24] Keerti Anand, Rong Ge, and Debmalya Panigrahi. Customizing ML predictions for online algorithms. In Hal Daume III and Aarti Singh, editors, Proceedings of the 37th International Conference on Machine Learning, volume 1i9 of Proceedings of Machine Learning Research, pages 303-313. PMLR, 13-18 Jul 2020.   \n[25] Mozhengfu Liu and Xueyan Tang. Dynamic bin packing with predictions. Proc. ACM Meas. Anal. Comput. Syst., 6(3), Dec 2022. doi: 10.1145/3570605.   \n[26] Sungjin Im, Benjamin Moseley, Chenyang Xu, and Ruilong Zhang. Online dynamic acknowledgement with learned predictions. arXiv preprint arXiv:2305.18227, 2023.   \n[27] Jessica Maghakian, Russell Lee, Mohammad Hajiesmaili, Jian Li, Ramesh Sitaraman, and Zhenhua Liu. Applied online algorithms with heterogeneous predictors. In International Conference on Machine Learning, pages 23484-23497. PMLR, 2023.   \n[28] Marina Drygala, Sai Ganesh Nagarajan, and Ola Svensson. Online algorithms with costly predictions. In International Conference on Artificial Intelligence and Statistics, pages 8078- 8101. PMLR, 2023.   \n[29]  Hailiang Zhao, Xueyan Tang, Peng Chen, and Shuiguang Deng. Learning-augmented algorithms for the bahncard problem. arXiv preprint arXiv:2410.15257, 2024.   \n[30]  Allan Borodin and Ran El-Yaniv. Online computation and competitive analysis. cambridge university press, 2005.   \n[31]  Mike Timm and Sabine Storandt. On the multi-kind bahncard problem. 2020.   \n[32] Mark EJ Newman. Power laws, pareto distributions and zipf's law. Contemporary physics, 46 (5):323-351, 2005.   \n[33]  Michael Mitzenmacher. Dynamic models for file sizes and double pareto distributions. Internet mathematics,1(3), 2004.   \n[34] Hong Zhang, Yupeng Tang, Anurag Khandelwal, and Ion Stoica. SHEPHERD: Serving DNNs in the wild. In 2Oth USENIX Symposium on Networked Systems Design and Implementation (NSDI 23), pages 787-808, Boston, MA, April 2023. USENIX Association. ISBN 978-1-939133-33-5. URL https: //www.usenix.org/conference/nsdi23/presentation/zhang-hong. ", "page_idx": 10}, {"type": "text", "text": "", "page_idx": 11}, {"type": "text", "text": "", "page_idx": 12}, {"type": "text", "text": "A Appendix ", "text_level": 1, "page_idx": 13}, {"type": "text", "text": "A.1 A Detailed Comparison between Our Work and [26] ", "text_level": 1, "page_idx": 13}, {"type": "text", "text": "Im et al. [26] studied a problem somewhat related to the Bahncard problem, focusing on TCP acknowledgement enhanced with machine-learned predictions. In the TCP acknowledgment problem, a sequence of requests unfolds over time, each requiring acknowledgment, and a single acknowledgment can address all pending requests simultaneously. The objective here is to optimize the combined total of request delay and acknowledgement cost (strike a balance between minimizing the delays in addressing requests and the costs of acknowledgments). Im et al. [26] introduced a novel prediction error measure that estimates how much the optimal objective value changes when the difference between the actual numbers of requests and the predictions varies. Im et al. [26] took into account the temporal aspects of requests, akin to a previous work [9]. The new error measure enables their algorithm to achieve near-optimal consistency and robustness simultaneously. Our investigation into the Bahncard problem differs significantly from theirs in terms of techniques employed. The main differences are summarized as follows. ", "page_idx": 13}, {"type": "text", "text": "\u00b7 In [26], predictions are made for a full sequence of TCP acknowledgment requests. The prediction necessitates a discrete formulation, where time is partitioned into slots of equal length. In contrast, our approach refrains from discretization and requires only short-term predictions within a future interval of length $T$ , i.e., the length of the valid time period of a Bahncard. In our work, a prediction on the short-term future is made only when a travel request arises and there is no valid Bahncard, aligning more closely with real-world ML predictions. ", "page_idx": 13}, {"type": "text", "text": "\u00b7 Im et al. [26] designed an error measure that is built on the change of the optimal objective value when the algorithm input varies from $\\operatorname*{min}\\{p_{t},\\hat{p}_{t}\\}$ to $\\operatorname*{max}\\{p_{t},\\hat{p}_{t}\\}$ ,where $p_{t}$ is the actual number of requests arising in time slot $t$ and $\\hat{p}_{t}$ is the predicted number. By contrast, our error measure estimates the quality of predictions directly. Harnessing the novel error measure, Im et al. [26] formulated an intricate algorithm, simultaneously ensuring near-optimal consistency and robustness. In contrast, we design a simple and easily implementable algorithm using short-term predictions and demonstrates its significant performance advantages in experimental evaluations. ", "page_idx": 13}, {"type": "text", "text": "A.2  Consistency of $\\mathsf{S U M}_{w}$ is at least $(3-\\beta)/(1+\\beta)$ ", "text_level": 1, "page_idx": 13}, {"type": "text", "text": "As shown in Figure 8, consider a travel request sequence $\\sigma$ of five requests: $(t_{1},\\epsilon)$ \uff0c $(t_{2},\\gamma-\\epsilon)$ \uff0c $(t_{3},\\gamma-2\\epsilon)$ \uff0c $(t_{4},\\epsilon)$ , and $(t_{5},\\epsilon)$ , where $t_{1}<t_{2}\\leq t_{1}+w<t_{4}+w-T<t_{1}+T<t_{3}<t_{4}<$ $t_{2}+T<t_{3}+w<t_{5}\\leq t_{4}+w$ . By the algorithm definition, $\\mathsf{S U M}_{w}$ purchases two Bahncards at times $t_{1}$ and $t_{4}$ respectively, while OPT purchases a Bahncard at time $t_{2}$ . When $\\epsilon\\to0$ ,we have ", "page_idx": 13}, {"type": "image", "img_path": "3cb6pF3Tvf/tmp/9d13a54e41b5a54703c6c2d9b5515db1312a091212a80d55d96eb009e83ec167.jpg", "img_caption": [], "img_footnote": [], "page_idx": 13}, {"type": "text", "text": "Figure 8: An example where the shaded rectangle (resp. bold line) is the valid time of a Bahncard purchased by $\\mathsf{S U M}_{w}$ (resp. OPT). $\\mathsf{S U M}_{w}$ purchases a Bahncard at $t_{1}$ because $t_{2}\\leq t_{1}+w$ and $\\epsilon+(\\gamma-\\epsilon)\\geq\\gamma$ $\\mathsf{S U M}_{w}$ does not purchase a Bahncard at $t_{3}$ since $t_{3}+w<t_{5}$ and $\\mathsf{S U M}_{w}^{r}(\\sigma;(t_{3}+$ $w-\\dot{T},t_{3}]\\bigr\\rangle+\\hat{c}(\\sigma;(t_{3},t_{3}+w])=\\dot{(}\\gamma-2\\epsilon)+\\epsilon<\\gamma$ $\\mathsf{S U M}_{w}$ purchases a Bahncard at $t_{4}$ because $t_{3},t_{4},t_{5}\\in(t_{4}+w-T,t_{4}+w]$ and the total ticket cost is $\\gamma$ ", "page_idx": 13}, {"type": "text", "text": "A.3Proof of Theorem 4.1 ", "text_level": 1, "page_idx": 13}, {"type": "text", "text": "For analyzing consistency, we have $\\hat{c}(\\sigma;[t,t+T))\\equiv c(\\sigma;[t,t+T))$ holds for any regular request $(t,p)$ . Given a travel request sequence $\\sigma$ , we denote by $\\mu_{1}\\,<\\,\\cdot\\,\\cdot\\,<\\,\\mu_{m}$ the times when FSUM purchases Bahncards. Then, the timespan can be divided into epochs $E_{j}:=[\\mu_{j},\\mu_{j+1})$ for $0\\leq j\\leq$ $m$ , where we define $\\mu_{0}=0$ and $\\mu_{m+1}=\\infty$ . Due to perfect predictions, each epoch $E_{j}$ (except $E_{0}$ starts with an on phase $[\\mu_{j},\\mu_{j}+T)$ in which the total regular cost is at least $\\gamma$ , followed by an off phase $[\\mu_{j}+T,\\mu_{j+1})$ . Epoch $E_{0}$ has an off phase only. By the definition of FSUM, for any time $t$ in an off phase when a travel request arises, we have ", "page_idx": 13}, {"type": "text", "text": "", "page_idx": 14}, {"type": "equation", "text": "$$\n\\hat{c}\\bigl(\\sigma;[t,t+T)\\bigr)=c\\bigl(\\sigma;[t,t+T)\\bigr)<\\gamma.\n$$", "text_format": "latex", "page_idx": 14}, {"type": "text", "text": "Note that when both FSUM and OPT do not have a valid Bahncard, they pay the same cost. Thus, we focus on only the time intervals in which at least one of FSUM and $\\bar{\\mathsf{O P}}\\bar{\\mathsf{T}}$ has a valid Bahncard. We examine the Bahncards purchased by OPT relative to the Bahncards purchased by FSUM. Clearly, OPT purchases at most one Bahncard in any on phase since the length of an on phase is $T$ , and OPT does not purchase any Bahncard in any off phase by (11) and Corollary 3.2. For any epoch $E_{j}$ ,if OPT purchases its $i$ -th Bahncard at time $\\tau_{i}\\in[\\mu_{j},\\mu_{j}+T)$ , there are two cases to consider. ", "page_idx": 14}, {"type": "image", "img_path": "3cb6pF3Tvf/tmp/81ea85b08dbc1fb4e89e479476074785832baa5795667ce98c5db7286c41dc76.jpg", "img_caption": ["Figure 9: Case I. The shaded rectangle is the valid time of a Bahncard purchased by OPT. "], "img_footnote": [], "page_idx": 14}, {"type": "text", "text": "Case I. The Bahncard expires in the following off phase $[\\mu_{j}+T,\\mu_{j+1})$ .As shown in Figure 9, for ease of notation, we use $s_{1},...,s_{5}$ to denote the total regular costs in the time intervals $[\\mu_{j},\\operatorname*{max}\\{\\mu_{j},\\tau_{i-1}{+}T\\})$ \uff0c $[\\operatorname*{max}\\{\\mu_{j},\\tau_{i-1}\\!+\\!T\\},\\tau_{i})$ \uff0c\uff0c $[\\tau_{i},\\mu_{j}+T)$ \uff0c $[\\mu_{j}+T,\\tau_{i}+T)$ , and $[\\tau_{i}+T,\\mu_{j+1})$ respectively. Here $\\tau_{i-1}$ is the time when OPT purchases its $(i-1)$ -th Bahncard. If $i=1$ , we define $\\tau_{i-1}=-\\infty$ . Note that some of the aforesaid intervals can be empty so that the corresponding total regular cost is O. Since the total regular cost in an on phase is at least $\\gamma$ , we have ", "page_idx": 14}, {"type": "equation", "text": "$$\ns_{1}+s_{2}+s_{3}\\geq\\gamma.\n$$", "text_format": "latex", "page_idx": 14}, {"type": "text", "text": "By Lemma 3.1, we have $s_{3}{+}s_{4}\\ensuremath{\\geq}\\gamma$ If no travel request arises during the time interval $[\\mu_{j}{+}T,\\tau_{i}{+}T)$ we have $s_{4}=0$ . Otherwise, we denote by $t^{\\prime}\\in[\\mu_{j}+T,\\tau_{i}+T)$ the time when the first travel request arises in this interval. Since $t^{\\prime}$ is in an off phase, it follows from (11) and $\\tau_{i}<t^{\\prime}$ that ", "page_idx": 14}, {"type": "equation", "text": "$$\ns_{4}=c\\bigl(\\sigma;[\\mu_{j}+T,\\tau_{i}+T)\\bigr)=c\\bigl(\\sigma;[t^{\\prime},\\tau_{i}+T)\\bigr)\\leq c\\bigl(\\sigma;[t^{\\prime},t^{\\prime}+T)\\bigr)<\\gamma.\n$$", "text_format": "latex", "page_idx": 14}, {"type": "text", "text": "Hence, we always have ", "page_idx": 14}, {"type": "equation", "text": "$$\ns_{4}<\\gamma.\n$$", "text_format": "latex", "page_idx": 14}, {"type": "text", "text": "The cost ratio in epoch $E_{j}$ is given by ", "page_idx": 14}, {"type": "equation", "text": "$$\ns_{5}\\geq0\n$$", "text_format": "latex", "page_idx": 14}, {"type": "equation", "text": "$$\n\\begin{array}{r l}{\\frac{\\mathsf{F S U M}(\\sigma;E_{j})}{\\mathsf{O P T}(\\sigma;E_{j})}=\\frac{C+\\beta(s_{1}+s_{2}+s_{3})+s_{4}+s_{5}}{C+\\beta(s_{1}+s_{3}+s_{4})+s_{2}+s_{5}}}\\\\ &{<\\frac{C+\\beta(s_{1}+s_{2}+s_{3})+\\gamma+s_{5}}{C+\\beta(s_{1}+s_{3}+\\gamma)+s_{2}+s_{5}}}\\\\ &{\\leq\\frac{C+\\beta(s_{1}+s_{2}+s_{3})+\\gamma+s_{5}}{C+\\beta(s_{1}+s_{2}+s_{3}+\\gamma)+s_{5}}}\\\\ &{\\leq\\frac{C+\\beta(s_{1}+s_{2}+s_{3})+\\gamma}{C+\\beta(s_{1}+s_{2}+s_{3}+\\gamma)+s_{5}}}\\\\ &{\\leq\\frac{C+\\beta(s_{1}+s_{2}+s_{3})+\\gamma}{C+\\beta(s_{1}+s_{2}+s_{3}+\\gamma)}}\\\\ &{\\leq\\frac{C+\\beta\\gamma+\\gamma}{C+\\gamma}}\\\\ &{=\\frac{2}{1+\\beta}.}\\end{array}\n$$", "text_format": "latex", "page_idx": 14}, {"type": "equation", "text": "$$\n\\gamma={\\frac{C}{1-\\beta}}\n$$", "text_format": "latex", "page_idx": 14}, {"type": "text", "text": "Case II. The Bahncard expires in the on phase of the next epoch,i... $[\\mu_{j+1},\\mu_{j+1}+T)$ ", "page_idx": 14}, {"type": "text", "text": "Case II-A. OPT does not purchase any Bahncard in $[\\tau_{i}+T,\\mu_{j+1}+T)$ . As shown in Figure 10, we use $s_{1},...,s_{7}$ to denote the total regular costs in the time intervals $[\\mu_{j},\\operatorname*{max}\\{\\mu_{j},\\tau_{i-1}+T\\})$ $\\lceil\\operatorname*{max}\\{\\mu_{j},\\tau_{i-1}+T\\},\\tau_{i}\\rceil$ \uff0c $[\\tau_{i},\\mu_{j}+T)$ \uff0c $[\\mu_{j}+T,\\mu_{j+1})$ \uff0c $[\\mu_{j+1},\\tau_{i}+T)$ \uff0c $[\\tau_{i}+T,\\mu_{j+1}+T)$ , and ", "page_idx": 14}, {"type": "text", "text": "$[\\mu_{j+1}+T,\\mu_{j+2})$ , respectively. Again $\\tau_{i-1}$ is the time when OPT purchases its $(i-1)$ -th Bahncard. f $i=1$ we define $\\tau_{i-1}=-\\infty$ . Since the total regular cost in an on phase is at least $\\gamma$ ,we have ", "page_idx": 15}, {"type": "equation", "text": "$$\n\\begin{array}{c}{{s_{1}+s_{2}+s_{3}\\geq\\gamma,}}\\\\ {{s_{5}+s_{6}\\geq\\gamma.}}\\end{array}\n$$", "text_format": "latex", "page_idx": 15}, {"type": "equation", "text": "$$\n\\overbrace{\\underbrace{\\mu_{j}\\ \\tau_{i-1}+T\\ \\ \\tau_{i}\\ \\mu_{j}+T\\ \\{\\mu_{j+1}\\ \\tau_{i}+T\\ \\ \\ \\ \\ \\mu_{j+1}+T\\ \\ \\ \\ \\ \\mu_{j+1}+T\\ \\ \\ \\ \\mu_{j+2}}_{\\left\\vert\\ \\ \\leftarrow{s_{1}-\\frac{1}{i}}\\right\\vert^{2}-\\left(-\\!\\!\\!\\frac{\\mathrm{off}}{\\mu_{j}-\\frac{1}{i}-s_{2}-\\frac{1}{i}}\\right)}}^{\\mathrm{off}}\\underbrace{\\mathrm{t}^{j}}_{\\left\\vert\\\n$$", "text_format": "latex", "page_idx": 15}, {"type": "text", "text": "Figure 10: Case II-A. The shaded rectangle is the valid time of a Bahncard purchased by OPT. ", "page_idx": 15}, {"type": "text", "text": "If no travel request arises during the time interval $[\\mu_{j}+T,\\mu_{j+1})$ we have $s_{4}=0\\leq s_{6}$ Otherwise, we denote by $\\bar{t}^{\\prime}\\in[\\mu_{j}+T,\\bar{\\mu_{j+1}})$ the time when the first travel request arises in this interval. It follows from (11) and $\\tau_{i}<t^{\\prime}$ that ", "page_idx": 15}, {"type": "equation", "text": "$$\ns_{4}+s_{5}=c\\bigl(\\sigma;[\\mu_{j}+T,\\tau_{i}+T)\\bigr)=c\\bigl(\\sigma;[t^{\\prime},\\tau_{i}+T)\\bigr)\\leq c\\bigl(\\sigma;[t^{\\prime},t^{\\prime}+T)\\bigr)<\\gamma.\n$$", "text_format": "latex", "page_idx": 15}, {"type": "text", "text": "Together with (17), we get $s_{4}<s_{6}$ . Therefore, we always have ", "page_idx": 15}, {"type": "equation", "text": "$$\ns_{4}\\leq s_{6},\n$$", "text_format": "latex", "page_idx": 15}, {"type": "text", "text": "and ", "page_idx": 15}, {"type": "equation", "text": "$$\ns_{4}<\\gamma.\n$$", "text_format": "latex", "page_idx": 15}, {"type": "text", "text": "The cost ratio in epochs $E_{j}$ and $E_{j+1}$ is given by ", "page_idx": 15}, {"type": "equation", "text": "$$\n\\begin{array}{r l}{\\frac{\\mathbb{F S}\\cup\\mathrm{M}(\\sigma;E_{j}\\cup E_{j+1})}{\\mathbb{O P T}(\\sigma;E_{j}\\cup E_{j+1})}=\\frac{2C+\\beta(s_{1}+s_{2}+s_{3}+s_{5}+s_{6})+s_{4}+s_{7}}{C+\\beta(s_{1}+s_{3}+s_{4}+s_{5}+s_{6})+s_{2}+s_{6}+s_{7}}}\\\\ {\\le}&{\\frac{2C+\\beta(s_{1}+s_{2}+s_{3}+s_{5}+s_{6}+s_{6})+s_{4}+s_{7}}{C+\\beta(s_{1}+s_{3}+s_{5}+s_{6})+s_{2}+s_{4}+s_{7}}}\\\\ {\\le}&{\\frac{2C+\\beta(s_{1}+s_{2}+s_{3}+s_{5}+s_{6}+s_{6})+s_{4}+s_{7}}{C+\\beta(s_{1}+s_{2}+s_{3}+s_{5}+s_{6})+s_{4}+s_{7}}}\\\\ &{\\le\\frac{2C+\\beta(s_{1}+s_{2}+s_{3}+s_{5}+s_{6})+s_{4}+s_{7}}{C+\\beta(s_{1}+s_{2}+s_{3}+s_{5}+s_{6})+s_{4}+s_{7}}}\\\\ {\\le\\frac{2C+\\beta(s_{1}+s_{2}+s_{3}+s_{5}+s_{6})}{C+\\beta(s_{1}+s_{2}+s_{3}+s_{5}+s_{6})}}\\\\ &{\\le\\frac{2C+2\\beta\\gamma}{C+2\\beta\\gamma}}\\\\ {=\\frac{2}{1+\\beta}.}\\end{array}\n$$", "text_format": "latex", "page_idx": 15}, {"type": "equation", "text": "$$\n\\gamma={\\frac{C}{1-\\beta}}\n$$", "text_format": "latex", "page_idx": 15}, {"type": "text", "text": "In addition, the cost ratio in epoch $E_{j}$ is given by ", "page_idx": 15}, {"type": "equation", "text": "$$\n\\begin{array}{r l}{\\frac{\\mathsf{F S U M}(\\sigma;E_{j})}{\\mathsf{O P T}(\\sigma;E_{j})}=\\frac{C+\\beta(s_{1}+s_{2}+s_{3})+s_{4}}{C+\\beta(s_{1}+s_{3}+s_{4})+s_{2}}}\\\\ &{\\le\\frac{C+\\beta(s_{1}+s_{2}+s_{3})+s_{4}}{C+\\beta(s_{1}+s_{2}+s_{3}+s_{4})}}\\\\ &{\\le\\frac{C+\\beta\\gamma+s_{4}}{C+\\beta\\gamma+\\beta s_{4}}}\\\\ &{<\\frac{C}{C+\\beta\\gamma+\\beta s_{4}}}\\\\ &{<\\frac{C+\\beta\\gamma+\\gamma}{C+\\beta\\gamma+\\beta\\gamma}}\\\\ &{=\\frac{2}{1+\\beta}.}\\end{array}\n$$", "text_format": "latex", "page_idx": 15}, {"type": "equation", "text": "$$\n\\gamma={\\frac{C}{1-\\beta}}\n$$", "text_format": "latex", "page_idx": 15}, {"type": "text", "text": "Case II-B. After time $\\tau_{i}+T$ OPT purchases another $x$ Bahncards at times $\\tau_{i+1},...,\\tau_{i+x}$ respectively $x\\geq1$ as shown in Figure 11. For each $k=1,...,x$ , the purchasing time $\\tau_{i+k}$ falls in the on phase $[\\mu_{j+k},\\mu_{j+k}+T)$ , and the expiry time $\\tau_{i+k}+T$ falls in the next on phase $[\\mu_{j+k+1},\\mu_{j+k+1}\\neq$ $T$ .OPT does not purchase any new Bahncard in $[\\tau_{i+x}+T,\\mu_{j+x+1}+T\\bar{)}$ . Essentially, the pattern in epoch $E_{j}$ of CaseII-A repeats $x$ times, followed by the pattern of Case II-A. By (22), $\\mathsf{F S U M}(\\sigma;E_{j+k})/\\bar{\\mathsf{O P T}}(\\sigma;E_{j+k})\\le2/(1+\\beta)$ for each $k=0,...,x-1$ By (21), $\\mathsf{F S U M}(\\sigma;E_{j+x}\\cup$ $E_{j+x+1})/{\\sf O P T}(\\sigma;E_{j+x}\\cup E_{j+x+1})\\le2/(1+\\beta)$ . Hence, ", "page_idx": 15}, {"type": "text", "text": "", "page_idx": 16}, {"type": "equation", "text": "$$\n\\frac{\\mathsf{F S U M}(\\sigma;E_{j}\\cup\\cdots\\cup E_{j+x+1})}{\\mathsf{O P T}(\\sigma;E_{j}\\cup\\cdots\\cup E_{j+x+1})}\\leq\\frac{2}{1+\\beta}.\n$$", "text_format": "latex", "page_idx": 16}, {"type": "equation", "text": "$$\n\\overbrace{\\underbrace{\\left.\\sum_{i_{j}}\\tau_{i-1}+T\\mathrm{\\Large~\\tau}\\tau_{i}\\right.\\kern-\\nulldelimiterspace}\\left.\\frac{\\mathrm{off}}{\\mathrm{\\Large~\\tau}\\mu_{j+1}\\mathrm{\\Large~\\tau}\\tau_{i}+T\\mathrm{\\Large~\\tau}\\tau_{i+1}\\mathrm{\\Large~\\mu}_{j+1}+T\\mathrm{\\Large~\\mu}_{j+1}}\\right\\rangle_{i_{j+1}}}^{\\mathrm{on}}\\underbrace{\\mathrm{off}}_{\\mathrm{i}_{j}}}\\,\\underbrace{\\mathrm{on}}_{i_{j+1}}\\,...\\,\\underbrace{\\mathrm{in}}_{\\mathrm{\\Large~\\tau}_{i+1}\\mathrm{\\Large~\\tau}_{i+x}+T\\mathrm{\\Large~\\mu}_{j+x+1}+T}}\\,\\underbrace{\\mathrm{in}}_{\\mathrm{\\Large~\\mu}_{j+x+1}+T}\\,\\underbrace{\\mathrm{in}}_{\\mathrm{\\Large~\\tau}_{i+x+1}+T}}\\,\\underbrace{\\mathrm{of}}_{\\mathrm{\\Large~\\mu}_{j+x+1}+T}\\,,\n$$", "text_format": "latex", "page_idx": 16}, {"type": "image", "img_path": "", "img_caption": ["Figure 11: Case I-B. The shaded rectangle is the valid time of a Bahncard purchased by OPT. "], "img_footnote": [], "page_idx": 16}, {"type": "text", "text": "Case II-C. After time $\\tau_{i}\\!+\\!T$ , OPT purchases another $x$ Bahncards at times $\\tau_{i+1},...,\\tau_{i+x}$ respectively $[x\\geq1]$ as shown in Figure 12. For each $k=1,...,x-1$ , the purchasing time $\\tau_{i+k}$ falls in the on phase $[\\mu_{j+k},\\mu_{j+k}{+}T)$ , and the expiry time $\\tau_{i+k}+T$ falls in the next on phase $[\\mu_{j+k+1},\\mu_{j+k+1}{+}T)$ The purchasing time $\\tau_{i+x}$ falls in the on phase $[\\mu_{j+x},\\mu_{j+x}+T)$ , and the expiry time $\\tau_{i+x}+T$ falls in the following off phase $[\\mu_{j+x}+T,\\mu_{j+x+1})$ . Essentially, the pattern in epoch $E_{j}$ of Case II-A repeats $x$ times, followed by the pattern of Case I. By (22), $\\mathsf{F S U M}(\\sigma;E_{j+k})/{\\mathsf{O P T}}(\\sigma;E_{j+k})\\leq2/(1+\\beta)$ for each $k=0,...,x-1$ . By (15), $\\mathsf{F S U M}(\\sigma;E_{j+x})/{\\mathsf{O P T}}(\\sigma;E_{j+x})\\leq2/(1+\\beta)$ Hence, ", "page_idx": 16}, {"type": "image", "img_path": "3cb6pF3Tvf/tmp/c76be57ae0cef76e7b06331515eb712db49bc9220e664e1dcb6e1e85323e8025.jpg", "img_caption": ["Figure 12: Case II-C. The shaded rectangle is the valid time of a Bahncard purchased by OPT. "], "img_footnote": [], "page_idx": 16}, {"type": "text", "text": "If OPT does not purchase any Bahncard in the on phase of $E_{j}$ , it must have purchased a Bahncard in the on phase of $E_{j-1}$ , and the Bahncard expires in the on phase of $E_{j}$ due to Lemma 3.1. Otherwise, purchasing another Bahncard at the beginning of $E_{j}$ can never increase the total cost, because the total regular cost in the on phase of $E_{j}$ is at least $\\gamma$ . Thus, $E_{j-1}$ and $E_{j}$ must fall into Case II-A or be the last two epochs of Case II-B, which have been analyzed above. ", "page_idx": 16}, {"type": "text", "text": "The theorem follows from (15), (21), (23) and (24). ", "page_idx": 16}, {"type": "text", "text": "A.4 Proof of Proposition 4.7 ", "text_level": 1, "page_idx": 16}, {"type": "text", "text": "A.4.1 Proof for Pattern III ", "text_level": 1, "page_idx": 16}, {"type": "text", "text": "Proposition Restated. If OPT purchases $x+2$ Bahncards $\\left(x\\geq0\\right)$ ) in successive on phases starting from $E_{j}$ , where (i) the first Bahncard has its purchase time $\\tau_{i}$ falling in the off phase of $E_{j-1}$ and its expiry time $\\tau_{i}+T$ falling in the on phase of $E_{j}$ , (ii) for each $k=1,...,x$ the $(k+1)$ -th Bahncard has its purchase time $\\tau_{i+k}$ falling in the on phase of $E_{j+k-1}$ and its expiry time $\\tau_{i+k}+T$ falling in the on phase of $E_{j+k}$ , and (ii) the $(x+2)$ -th Bahncard has its purchase time $\\tau_{i+x+1}$ falling in the on phase of $E_{j+x}$ and its expiry time $\\tau_{i+x+1}+T$ falling in the off phase of $E_{j+x}$ , then ", "page_idx": 16}, {"type": "equation", "text": "$$\n\\frac{\\mathsf{P F S U M}\\big(\\sigma;[\\tau_{i},\\tau_{i+x+1}+T)\\big)}{\\mathsf{O P T}\\big(\\sigma;[\\tau_{i},\\tau_{i+x+1}+T)\\big)}\\leq\\left\\{\\begin{array}{l l}{\\frac{2\\gamma+(2-\\beta)\\eta}{(1+\\beta)\\gamma+\\beta\\eta}}&{0\\leq\\eta\\leq\\gamma,}\\\\ {\\frac{(3-\\beta)\\gamma+\\eta}{(1+\\beta)\\gamma+\\beta\\eta}}&{\\eta>\\gamma,}\\end{array}\\right.\n$$", "text_format": "latex", "page_idx": 16}, {"type": "text", "text": "where the upper bound is tight (achievable) when $x\\to\\infty$ ", "page_idx": 16}, {"type": "text", "text": "Proof. As shown in Figure 13, we divide $[\\tau_{i},\\tau_{i+x+1}+T)$ into $4x+5$ time intervals, where each time interval starts and ends with the time when OPT or PFSUM purchases a Bahncard or a Bahncard purchased by OPT or PFSUM expires. Let these intervals be indexed by $-1,0,1,2,...,4x+3$ and let $s_{-1},s_{0},s_{1},s_{2},...,s_{4x+3}$ denote the total regular costs in these intervals respectively. By definition, it is easy to see that for each $k=0,...,x-1$ the $(4k+3)$ -th time interval, i.e., $[\\mu_{j+k}+T,\\mu_{j+k+1})$ (which is an off phase), is shorter than $T$ since it is within the valid time of a Bahncard purchased by OPT. ", "page_idx": 16}, {"type": "text", "text": "", "page_idx": 17}, {"type": "image", "img_path": "3cb6pF3Tvf/tmp/99d418640639c01234ab677c17838e005cc0621f9c16c9ee23d9e29ad4bcfefe.jpg", "img_caption": [], "img_footnote": [], "page_idx": 17}, {"type": "text", "text": "Figure 13: Illustration for Pattern IH1. The shaded rectangle is the valid time of a Bahncard purchased byOPT. ", "page_idx": 17}, {"type": "text", "text": "First, we observe that the cost ratio PFSUM $|\\bigl(\\sigma;[\\tau_{i},\\tau_{i+x+1}+T)\\bigr)/{\\mathsf{O P T}}\\bigl(\\sigma;[\\tau_{i},\\tau_{i+x+1}+T)\\bigr)$ is less than $1/\\beta$ , as shown below. ", "page_idx": 17}, {"type": "equation", "text": "$$\n\\begin{array}{r l}{\\frac{1}{\\beta}-\\frac{\\operatorname{PES}(\\mathbf{1}\\mid\\sigma_{\\textrm{f}}(\\gamma_{\\textrm{,}}\\tau_{\\textrm{t}+\\tau_{+}}+T))}{\\operatorname{QP}\\{\\sigma_{\\textrm{f}}(\\gamma_{\\textrm{,}}\\tau_{\\textrm{t}+\\tau_{+}}+T)\\}}}&{}\\\\ {=}&{\\frac{(x+2)C+\\beta\\left((s-1+s_{0})+\\sum_{k=0}^{\\infty-1}\\left(s_{k+l+2}+s_{k+3}+s_{k+4}\\right)+(s_{k+2}+s_{k+3})\\right)}{\\beta\\cdot\\operatorname{QP}\\Gamma\\left(\\sigma_{\\textrm{|}}\\gamma_{\\textrm{t}},\\tau_{\\textrm{t}+\\tau_{+}}+T\\right)}}\\\\ &{+\\frac{\\sum_{k=0}^{\\infty}s_{k+1}-\\beta\\left[(x+1)C+\\beta\\sum_{k=0}^{\\infty}\\left(s_{k}+s_{k+1}+s_{k+2}\\right)+\\sum_{k=-1}^{\\infty}s_{k+4}\\right)\\right]}{\\beta\\cdot\\operatorname{QP}\\Gamma\\left(\\sigma_{\\textrm{|}}\\gamma_{\\textrm{t}},\\tau_{\\textrm{t}+\\tau_{+}}+T\\right)}}\\\\ &{=\\frac{(x+2)C+\\beta\\sum_{k=0}^{\\infty}s_{k}+\\sum_{k=0}^{\\infty-1}s_{k+1}+\\sum_{k=0}^{\\infty-1}s_{k+4}+\\beta\\sum_{k=0}^{\\infty-1}s_{k+3}}{\\beta\\cdot\\operatorname{QP}\\Gamma\\left(\\sigma_{\\textrm{|}}\\gamma_{\\textrm{t}},\\tau_{\\textrm{t}+\\tau_{+}}+T\\right)}}\\\\ &{-\\frac{\\beta(x+1)C+\\beta^{2}\\sum_{k=0}^{\\infty-1}s_{k}+s_{k+1}+s_{k+4}}{\\beta\\cdot\\operatorname{QP}\\Gamma\\left(\\sigma_{\\textrm{|}}\\gamma_{\\textrm{t}},\\tau_{\\textrm{t}+\\tau_{+}}+T\\right)}+\\beta\\sum_{k=-1}^{\\infty}s_{k+4}}\\\\ &{=\\frac{(x+2)-\\beta(x+1)C+\\beta(1-\\beta)\\sum_{k=0}^{\\infty-1}\\left(s_{k}+s_{k+2}\\right)+\\sum_{k=0}^{\\infty-1}s_{k+1}}{\\beta\\cdot\\operatorname{QP}\\Gamma\\left(\\sigma_{\\textrm{|}} \n$$", "text_format": "latex", "page_idx": 17}, {"type": "text", "text": "Thus, the following inequality always holds: ", "page_idx": 17}, {"type": "equation", "text": "$$\n\\frac{\\mathsf{P F S U M}\\big(\\sigma;[\\tau_{i},\\tau_{i+x+1}+T)\\big)}{\\mathsf{O P T}\\big(\\sigma;[\\tau_{i},\\tau_{i+x+1}+T)\\big)}<\\frac{1}{\\beta}.\n$$", "text_format": "latex", "page_idx": 17}, {"type": "text", "text": "Next, we analyze the upper bound of the cost ratio. There are two cases to consider. ", "page_idx": 17}, {"type": "text", "text": "Case I. $0\\leq\\eta\\leq\\gamma$ . By Corollary 3.2, for each $k=-1,0,...,x$ , the $T$ -future-cost at $\\tau_{i+k+1}$ is at least $\\gamma$ , i.e., ", "page_idx": 17}, {"type": "equation", "text": "$$\n\\left\\{\\begin{array}{l l}{s_{-1}+s_{0}\\geq\\gamma,}\\\\ {s_{4k+2}+s_{4k+3}+s_{4k+4}\\geq\\gamma\\quad\\mathrm{for}\\;\\mathrm{each}\\;k=0,...,x-1,}\\\\ {s_{4x+2}+s_{4x+3}\\geq\\gamma.}\\end{array}\\right.\n$$", "text_format": "latex", "page_idx": 17}, {"type": "text", "text": "By Lemma 4.2, for each $k=0,...,x$ , we have ", "page_idx": 17}, {"type": "equation", "text": "$$\ns_{4k}+s_{4k+1}+s_{4k+2}\\geq\\gamma-\\eta.\n$$", "text_format": "latex", "page_idx": 17}, {"type": "text", "text": "Note that all the travel requests in the $(4k+2)$ -th (for $k\\;=\\;0,...,x)$ and the $(4k+4)$ -th (for $k=-1,...,x-1)$ time intervals are reduced requests of both PFSUM and OPT. Thus, to maximize the cost ratio in $[\\tau_{i},\\tau_{i+x+1}+T)$ , we should minimize these $s_{4k+2}$ 's and $s_{4k+4}$ 's. If they are greater ", "page_idx": 17}, {"type": "text", "text": "than $\\gamma$ , the cost ratio can be increased by decreasing $s_{4k+2}$ Or $S_{4k+4}$ to $\\gamma$ without violating (27) and (28). Thus, for the purpose of deriving an upper bound on the cost ratio, we can assume that ", "page_idx": 18}, {"type": "equation", "text": "$$\n\\left\\{\\begin{array}{l l}{{s_{4k+2}\\leq\\gamma}}&{{\\mathrm{for}\\;\\mathrm{each}\\;k=0,...,x,}}\\\\ {{s_{4k+4}\\leq\\gamma}}&{{\\mathrm{for}\\;\\mathrm{each}\\;k=-1,...,x-1.}}\\end{array}\\right.\n$$", "text_format": "latex", "page_idx": 18}, {"type": "text", "text": "It follows from (29) and Lemma 4.4 that ", "page_idx": 18}, {"type": "equation", "text": "$$\n\\left\\{\\begin{array}{l l}{s_{4k+3}+s_{4k+4}\\leq2\\gamma+\\eta}&{\\mathrm{for~}k=-1,}\\\\ {s_{4k+2}+s_{4k+3}+s_{4k+4}\\leq2\\gamma+\\eta}&{\\mathrm{for~each}\\;k=0,...,x-1,}\\\\ {s_{4k+2}+s_{4k+3}\\leq2\\gamma+\\eta}&{\\mathrm{for~}k=x.}\\end{array}\\right.\n$$", "text_format": "latex", "page_idx": 18}, {"type": "text", "text": "As a result, we have ", "page_idx": 18}, {"type": "text", "text": "$\\begin{array}{r l}&{\\|\\Phi^{k}\\Phi\\Phi\\Phi(n)[\\rho_{1},\\rho_{4},\\ldots,\\rho_{1}+1]\\rangle}\\\\ &{=\\mathbb{P}\\Big(\\eta_{1}\\Big[\\rho_{2},\\rho_{3},\\ldots,\\rho_{4}+1\\Big]\\Big)}\\\\ &{\\quad-\\mathbb{P}\\Big(\\eta_{1}\\Big[\\rho_{3},\\Big]\\Big[\\sigma_{1}\\Big]\\Big[\\sigma_{1}\\Big]\\Big[\\sigma_{2}\\Big[\\sigma_{3}\\Big]\\Big[\\sigma_{3}\\Big]+\\frac{1}{2}\\Big]\\Big[\\sigma_{1}\\Big]+\\frac{1}{2}\\Big[\\sigma_{2}\\Big[\\sigma_{3}\\Big]+\\frac{1}{2}\\Big]+\\frac{1}{2}\\sigma_{3}+\\frac{1}{3}}\\\\ &{=\\frac{1}{\\big(\\sigma_{2}\\big)^{2}}\\Big(\\eta_{1}\\Big[\\rho_{4}+\\eta_{3}\\Big]+\\sum_{l=1}^{2-1}\\Big(\\eta_{4}\\Big[\\sigma_{3}\\Big]+\\sigma_{3+1}\\Big)+\\Big(\\eta_{4}\\Big[\\sigma_{2}\\Big]+\\epsilon_{4}\\Big[\\sigma_{3+1}\\Big]\\Big)+\\sum_{l=1}^{3-1}\\sigma_{3}}\\\\ &{\\quad-\\frac{1}{\\big(\\sigma_{2}\\big)^{2}}\\Big[\\sigma_{2}\\Big]+\\frac{1}{2}\\sigma_{3}+\\frac{1}{3}\\Big[\\sigma_{1}\\Big]+\\Big[\\sigma_{2}\\Big[\\sigma_{3}+\\eta_{4}+\\eta_{4}\\Big]+\\Big(\\eta_{4}\\Big[\\sigma_{2}\\Big]+\\epsilon_{4}\\Big[\\sigma_{3}\\Big]\\Big]\\Big]}\\\\ &{=\\frac{1}{\\big(\\sigma_{2}\\big)^{2}}\\Big(\\eta_{1}\\Big[\\rho_{3}+\\eta_{3}\\Big]+\\sum_{l=1}^{2-1}\\Big(\\eta_{4}\\Big[\\sigma_{2}\\Big[\\sigma_{3}\\Big]+\\eta_{4}\\Big[\\sigma_{3+1}\\Big]+\\eta_{4}\\Big[\\sigma_{2}\\Big]+\\epsilon_{4}\\Big[\\sigma_{3+1}\\Big]\\Big)+\\sum_{l=1}^{3-1}\\sigma_{3}}\\\\ &{\\quad+\\frac{1}{\\big(\\sigma_{2}\\big)^{2}}\\Big(\\eta_{1}\\Big[\\sigma_{$ 4k+1 4k+1 1k+1 d (30)   \nx(2 + (2 - \u03b2)n) + (4 + (3 - \u03b2)n)   \nx((1 + \u03b2)+ \u03b2n) + (2 + 2\u03b2) + 2\u03b2n)   \n2 + (2 - \u03b2)n   \n(1 + \u03b2)+\u03b2n (when c \u2192 00) (31) ", "page_idx": 18}, {"type": "text", "text": "Case II. $\\eta>\\gamma$ By Lemma 4.3, for each $k=-1,0,...,x$ the total regular cost in the $(4k+3)$ -th time interval (which is in an off phase and has length at most $T$ ) is less than $2\\gamma+\\eta$ ", "page_idx": 18}, {"type": "equation", "text": "$$\ns_{4k+3}<2\\gamma+\\eta.\n$$", "text_format": "latex", "page_idx": 18}, {"type": "text", "text": "On the other hand, the total regular cost in any time interval in an on phase is non-negative. As a result, we have ", "page_idx": 18}, {"type": "equation", "text": "$$\n\\begin{array}{r l}{\\displaystyle\\frac{\\mathsf{P F S U M}(\\sigma;[\\tau_{i},\\tau_{i+x+1}+T))}{\\mathsf{O P T}\\left(\\sigma;[\\tau_{i},\\tau_{i+x+1}+T)\\right)}<\\frac{(x+1)C+(x+2)(2\\gamma+\\eta)}{(x+2)C+\\beta(x+2)(2\\gamma+\\eta)}}&{\\left(\\mathrm{by}\\ (26))\\ \\mathrm{and}\\ (32)\\right)}\\\\ &{\\displaystyle=\\frac{x\\big(C+(2\\gamma+\\eta)\\big)+\\big(C+(4\\gamma+2\\eta)\\big)}{x\\big(C+\\beta(2\\gamma+\\eta)\\big)+\\big(2C+\\beta(4\\gamma+2\\eta)\\big)}}\\end{array}\n$$", "text_format": "latex", "page_idx": 18}, {"type": "equation", "text": "$$\n\\begin{array}{r l}{{}}&{{\\leq\\displaystyle\\frac{C+(2\\gamma+\\eta)}{C+\\beta(2\\gamma+\\eta)}\\quad(\\mathrm{when}\\,x\\to\\infty)}}\\\\ {{}}&{{=\\displaystyle\\frac{(3-\\beta)\\gamma+\\eta}{(1+\\beta)\\gamma+\\beta\\eta}.}}\\end{array}\n$$", "text_format": "latex", "page_idx": 19}, {"type": "text", "text": "The result follows from (31) and (33). ", "page_idx": 19}, {"type": "text", "text": "A tight example is given in Figure 14, where $x\\to\\infty$ . The upper bound is achieved when $0\\leq\\eta\\leq\\gamma$ for each $k=-1,...,x-1$ \uff0c $s_{4k+3}=\\gamma+2\\eta$ \uff0c $s_{4x+3}\\to2\\gamma+\\eta$ for each $k=0,...,x$ \uff0c $s_{4k}=\\gamma-\\eta$ \uff0c $s_{4k+1}\\,=\\,s_{4k+2}\\,=\\,0$ , or when $\\eta\\:>\\:\\gamma$ , for each $k\\,=\\,-1,...,x$ \uff0c $s_{4k+3}\\,=\\,2\\gamma+\\eta$ and for each $k=0,...,x$ $s_{4k}=s_{4k+1}=s_{4k+2}=0$ ", "page_idx": 19}, {"type": "image", "img_path": "3cb6pF3Tvf/tmp/12a8965038b188b8748fe6590fb97e2bebf27ea1ce28f5f5f1cacc39367b8000.jpg", "img_caption": [], "img_footnote": [], "page_idx": 19}, {"type": "text", "text": "Figure 14: A tight example for Pattern IV. The shaded rectangle is the valid time of a Bahncard purchased by OPT. ", "page_idx": 19}, {"type": "text", "text": "A.4.2 Proof for Pattern IV ", "text_level": 1, "page_idx": 19}, {"type": "text", "text": "Proposition Restated. If OPT purchases $x+1$ Bahncards $(x\\geq0)$ ) in successive on phases starting from $E_{j}$ , where (i) the first Bahncard has its purchase time $\\tau_{i}$ falling in the off phase of $E_{j-1}$ and its expiry time $\\tau_{i}+T$ falling in the on phase of $E_{j}$ , and (ii) for each $k=1,...,x$ the $\\left(k+1\\right)$ -th Bahncard has its purchase time $\\tau_{i+k}$ falling in the on phase of $E_{j+k-1}$ and its expiry time $\\tau_{i+k}+T$ falling in the on phase of $E_{j+k}$ , and (i) OPT does not purchase any new Bahncard in the on phase of $E_{j+x}$ , then ", "page_idx": 19}, {"type": "equation", "text": "$$\n\\frac{\\mathsf{P F S U M}\\big(\\sigma;[\\tau_{i},\\mu_{j+x}+T)\\big)}{\\mathsf{O P T}\\big(\\sigma;[\\tau_{i},\\mu_{j+x}+T)\\big)}\\leq\\left\\{\\begin{array}{l l}{\\frac{2\\gamma+(2-\\beta)\\eta}{(1+\\beta)\\gamma+\\beta\\eta}}&{0\\leq\\eta\\leq\\gamma,}\\\\ {\\frac{(3-\\beta)\\gamma+\\eta}{(1+\\beta)\\gamma+\\beta\\eta}}&{\\eta>\\gamma,}\\end{array}\\right.\n$$", "text_format": "latex", "page_idx": 19}, {"type": "text", "text": "where the upper bound is tight (achievable) for any $x$ ", "page_idx": 19}, {"type": "text", "text": "Proof. As shown in Figure 15, we divide $[\\tau_{i},\\mu_{j+x}+T)$ into $4x+3$ time intervals, where each time interval starts and ends with the time when OPT or PFSUM purchases a Bahncard or a Bahncard purchased by OPT or PFSUM expires. Let these intervals be indexed by $-1,0,1,2,...,4x+1$ , and let $s_{-1},s_{0},s_{1},s_{2},...,s_{4x+1}$ denote the total regular costs in these intervals respectively. By definition, it is easy to see that for each $k=0,...,x-1$ , the $(4k+3)$ -th time interval, i.e., $[\\mu_{j+k}+T,\\mu_{j+k+1})$ (which is an off phase), is shorter than $T$ since it is within the valid time of a Bahncard purchased by OPT. ", "page_idx": 19}, {"type": "image", "img_path": "3cb6pF3Tvf/tmp/ba3a32133ac6b119f1f2ddc214151645b6e26cface807bafde6b729a7a891c7e.jpg", "img_caption": [], "img_footnote": [], "page_idx": 19}, {"type": "text", "text": "Figure 15: Mllustration for Pattern IV. The shaded rectangle is the valid time of a Bahncard purchased byOPT. ", "page_idx": 19}, {"type": "text", "text": "First, we observe that the cost ratio PFSUM $\\left(\\sigma;[\\tau_{i},\\mu_{j+x}+T)\\right)/{\\mathsf{O P T}}(\\sigma;[\\tau_{i},\\mu_{j+x}+T))$ is less than $1/\\beta$ , as shown below. ", "page_idx": 19}, {"type": "equation", "text": "$$\n\\frac{1}{\\beta}-\\frac{\\mathsf{P F S U M}\\big(\\sigma;[\\tau_{i},\\mu_{j+x}+T)\\big)}{\\mathsf{O P T}\\big(\\sigma;[\\tau_{i},\\mu_{j+x}+T)\\big)}\n$$", "text_format": "latex", "page_idx": 19}, {"type": "equation", "text": "$$\n\\begin{array}{r l}&{=\\frac{(x+1)C+\\beta\\left[(s-1+s_{0})+\\sum_{k=0}^{K-1}\\left(s_{k+2}+s_{k+3}+s_{4k+4}\\right)\\right]+\\sum_{k=0}^{x}s_{k+1}}{\\beta\\cdot\\Phi\\Gamma\\left[\\sigma_{k},\\left|\\tau_{k},\\mu_{k+2}+T\\right|\\right]}}\\\\ &{-\\frac{\\beta\\left[(x+1)C+\\beta\\left[\\sum_{k=0}^{K-1}\\left(s_{k+1}+s_{4k+1}+s_{4k+2}\\right)+\\left(s_{k+}+s_{4k+1}\\right)\\right]+\\sum_{k=-1}^{x-1}s_{k+1+s}\\right]}{\\beta\\cdot\\Phi\\Gamma\\left[\\sigma_{k},\\left|\\tau_{k},\\mu_{k+2}+T\\right|\\right]}}\\\\ &{=\\frac{(x+1)C+\\beta\\left[\\sum_{k=0}^{K-1}s_{k+4}+\\sum_{k=0}^{K-1}s_{4k+2}+\\sum_{k=-1}^{K-1}s_{4k+3}\\right]+\\sum_{k=0}^{x}s_{k+1}}{\\beta\\cdot\\Phi\\Gamma\\left[\\sigma_{k},\\left|\\tau_{k},\\mu_{k+3}+T\\right|\\right]}}\\\\ &{-\\frac{\\beta(x+1)C+\\beta^{2}\\left[\\sum_{k=0}^{K}s_{k+4}+\\sum_{k=0}^{K-1}s_{4k+1}+\\sum_{k=0}^{K-1}s_{4k+2}\\right]+\\beta\\sum_{k=-1}^{K-1}s_{k+4}}{\\beta\\cdot\\Phi\\Gamma\\left[\\sigma_{k},\\left|\\tau_{k},\\mu_{k+3}+T\\right|\\right]}}\\\\ &{=\\frac{(1-\\beta)(x+1)C+\\beta\\left[1-\\beta\\right]\\left(1-\\beta\\right)\\left(\\sum_{k=0}^{K}s_{k+4}+\\sum_{k=0}^{K-1}s_{k+4}\\right)+\\left(1-\\beta^{2}\\right)\\sum_{k=0}^{x-1}s_{k+1}}{\\beta\\cdot\\Phi\\Gamma\\left[\\sigma_{k},\\left|\\tau_{k},\\mu_{k+4}+T\\right|\\right]}}\\\\ &{>0.\\ \\ (\\mathrm{since}\\ \\circ\\beta\\le1)}\\end{array}\n$$", "text_format": "latex", "page_idx": 20}, {"type": "text", "text": "Thus, the following inequality always holds: ", "page_idx": 20}, {"type": "equation", "text": "$$\n\\frac{\\mathsf{P F S U M}\\big(\\sigma;[\\tau_{i},\\mu_{j+x}+T)\\big)}{\\mathsf{O P T}\\big(\\sigma;[\\tau_{i},\\mu_{j+x}+T)\\big)}<\\frac{1}{\\beta}.\n$$", "text_format": "latex", "page_idx": 20}, {"type": "text", "text": "Next, we analyze the upper bound of the cost ratio. There are two cases to consider. ", "page_idx": 20}, {"type": "text", "text": "Case I. $0\\leq\\eta\\leq\\gamma$ . By Corollary 3.2, for each $k=-1,0,...,x$ the $T$ -future-cost at $\\tau_{i+k+1}$ is at least $\\gamma$ , i.e., ", "page_idx": 20}, {"type": "equation", "text": "$$\n\\left\\{\\begin{array}{l}{{s_{-1}+s_{0}\\geq\\gamma,}}\\\\ {{s_{4k+2}+s_{4k+3}+s_{4k+4}\\geq\\gamma\\quad\\mathrm{for}\\,\\mathrm{each}\\,k=0,...,x-1.}}\\end{array}\\right.\n$$", "text_format": "latex", "page_idx": 20}, {"type": "text", "text": "By Lemma 4.2, we have ", "page_idx": 20}, {"type": "equation", "text": "$$\n\\left\\{\\begin{array}{l l}{s_{4k}+s_{4k+1}+s_{4k+2}\\geq\\gamma-\\eta\\quad\\mathrm{for}\\;\\mathrm{each}\\;k=0,...,x-1,}\\\\ {s_{4x}+s_{4x+1}\\geq\\gamma-\\eta.}\\end{array}\\right.\n$$", "text_format": "latex", "page_idx": 20}, {"type": "text", "text": "Note that all the travel requests in the $(4k+2)$ -th $(k=0,...,x\\textrm{--}1)$ and the $(4k+4)$ -th $\\left(k\\mathbf{\\alpha}=\\right.$ $-1,...,x-1)$ time intervals are reduced requests of both PFSUM and OPT. Thus, to maximize the cost ratio in $[\\tau_{i},\\mu_{j+x}+T)$ , we should minimize $s_{4k+2}$ and $s_{4k+4}$ If they are greater than $\\gamma$ the cost ratio can be increased by decreasing $s_{4k+2}$ or $s_{4k+4}$ to $\\gamma$ without violating (36) and (37). Thus, for the purpose of deriving an upper bound on the cost ratio, we can assume that ", "page_idx": 20}, {"type": "equation", "text": "$$\n\\left\\{\\begin{array}{l l}{s_{4k+2}\\leq\\gamma}&{\\mathrm{~for~each~}k=0,...,x-1,}\\\\ {s_{4k+4}\\leq\\gamma}&{\\mathrm{~for~each~}k=-1,...,x-1.}\\end{array}\\right.\n$$", "text_format": "latex", "page_idx": 20}, {"type": "text", "text": "It follows from (38), and Lemma 4.4 that ", "page_idx": 20}, {"type": "equation", "text": "$$\n\\left\\{\\begin{array}{l l}{s_{4k+3}+s_{4k+4}\\leq2\\gamma+\\eta}&{\\mathrm{for~}k=-1,}\\\\ {s_{4k+2}+s_{4k+3}+s_{4k+4}\\leq2\\gamma+\\eta}&{\\mathrm{for~each~}k=0,...,x-1.}\\end{array}\\right.\n$$", "text_format": "latex", "page_idx": 20}, {"type": "text", "text": "As a result, we have ", "page_idx": 20}, {"type": "equation", "text": "$$\n\\begin{array}{r l}&{\\frac{\\mathsf{P F S U M}\\left(\\sigma;[\\tau_{i},\\mu_{j+x}+T)\\right)}{\\mathsf{O P T}\\left(\\sigma;[\\tau_{i},\\mu_{j+x}+T)\\right)}}\\\\ &{=\\frac{(x+1)C+\\beta\\left[\\sum_{k=0}^{x-1}\\left(s_{4k}+s_{4k+1}+s_{4k+2}\\right)+\\left(s_{4x}+s_{4x+1}\\right)\\right]+\\sum_{k=-1}^{x-1}s_{4k+3}}{(x+1)C+\\beta\\left[\\left(s_{-1}+s_{0}\\right)+\\sum_{k=0}^{x-1}\\left(s_{4k+2}+s_{4k+3}+s_{4k+4}\\right)\\right]+\\sum_{k=0}^{x}s_{4k+1}}}\\\\ &{=\\frac{(x+1)C+\\left(s_{-1}+s_{0}\\right)+\\sum_{k=0}^{x-1}\\left(s_{4k+2}+s_{4k+3}+s_{4k+4}\\right)+\\beta\\sum_{k=0}^{x}s_{4k+1}}{(x+1)C+\\beta\\left[\\left(s_{-1}+s_{0}\\right)+\\sum_{k=0}^{x-1}\\left(s_{4k+2}+s_{4k+3}+s_{4k+4}\\right)\\right]+\\sum_{k=0}^{x}s_{4k+1}}}\\end{array}\n$$", "text_format": "latex", "page_idx": 20}, {"type": "equation", "text": "$$\n\\begin{array}{r l}&{-\\;\\frac{(1-\\beta)\\left[\\sum_{k=0}^{x-1}\\big(s_{4k}+s_{4k+2}\\big)+s_{4x}\\right]}{(x+1)C+\\beta\\left[(s_{-1}+s_{0})+\\sum_{k=0}^{x-1}\\big(s_{4k+2}+s_{4k+3}+s_{4k+4}\\big)\\right]+\\sum_{k=0}^{x}s_{4k+1}}}\\\\ &{\\leq\\frac{(x+1)C+(x+1)(2\\gamma+\\eta)+\\beta\\sum_{k=0}^{x}s_{4k+1}-(1-\\beta)\\left[\\sum_{k=0}^{x-1}\\big(s_{4k}+s_{4k+2}\\big)+s_{4x}\\right]}{(x+1)C+\\beta(x+1)(2\\gamma+\\eta)+\\sum_{k=0}^{x}s_{4k+1}}}\\end{array}\n$$", "text_format": "latex", "page_idx": 21}, {"type": "equation", "text": "$$\n\\begin{array}{r l r}&{\\quad=\\frac{(x+1)(C+2\\gamma+\\eta)+\\sum_{k=0}^{x}s_{4k+1}-(1-\\beta)\\left[\\sum_{k=0}^{x-1}\\left(s_{4k}+s_{4k+1}+s_{4k+2}\\right)+(s_{4x}+s_{4x+1})\\right]}{(x+1)C+\\beta(x+1)(2\\gamma+\\eta)+\\sum_{k=0}^{x}s_{4k+1}}}\\\\ &{\\quad\\le\\frac{(x+1)C+(x+1)(2\\gamma+\\eta)+\\sum_{k=0}^{x}s_{4k+1}-(1-\\beta)(x+1)(\\gamma-\\eta)}{(x+1)C+\\beta(x+1)(2\\gamma+\\eta)+\\sum_{k=0}^{x}s_{4k+1}}\\quad\\mathrm{(by~(37))}}\\\\ &{\\quad\\le\\frac{(x+1)C+(x+1)(2\\gamma+\\eta)-(1-\\beta)(x+1)(\\gamma-\\eta)}{(x+1)C+\\beta(x+1)(2\\gamma+\\eta)}\\quad\\mathrm{(since~}\\sum_{k=0}^{x}s_{4k+1}\\ge0)}\\\\ &{\\quad=\\frac{2\\gamma+(2-\\beta)\\eta}{(1+\\beta)\\gamma+\\beta\\eta}.}&{}&{\\quad\\mathrm{(40)}}\\end{array}\n$$", "text_format": "latex", "page_idx": 21}, {"type": "text", "text": "Case II. $\\eta>\\gamma$ . By Lemma 4.3, for each $k=-1,0,...,x$ , the total regular cost in the $(4k+3)$ -th time interval (which is in an off phase and has length at most $T$ ) is less than $2\\gamma+\\eta$ ", "page_idx": 21}, {"type": "equation", "text": "$$\ns_{4k+3}<2\\gamma+\\eta.\n$$", "text_format": "latex", "page_idx": 21}, {"type": "text", "text": "On the other hand, the total regular cost in any time interval in an on phase is non-negative. As a result, we have ", "page_idx": 21}, {"type": "equation", "text": "$$\n\\begin{array}{r}{\\begin{array}{r l}{\\displaystyle\\frac{\\mathsf{P F S U M}\\big(\\sigma;[\\tau_{i},\\mu_{j+x}+T)\\big)}{\\mathsf{O P T}\\big(\\sigma;[\\tau_{i},\\mu_{j+x}+T)\\big)}\\leq\\frac{(x+1)C+(x+1)(2\\gamma+\\eta)}{(x+1)C+\\beta(x+1)(2\\gamma+\\eta)}}&{\\mathrm{by~(35)~and~(4~\\mu)}}\\\\ {\\displaystyle=\\frac{(3-\\beta)\\gamma+\\eta}{(1+\\beta)\\gamma+\\beta\\eta}.}&\\end{array}}\\end{array}\n$$", "text_format": "latex", "page_idx": 21}, {"type": "text", "text": "The result follows from (40) and (42). ", "page_idx": 21}, {"type": "text", "text": "A tight example is given in Figure 16, where $x=0$ . The upper bound is achieved when $0\\leq\\eta\\leq\\gamma$ $s_{-1}\\to\\gamma+2\\eta$ $s_{0}=\\gamma-\\eta$ , and $s_{1}=0$ , or when $\\eta>\\gamma$ $s_{-1}\\to2\\gamma+\\eta$ and $s_{0}=s_{1}=0$ ", "page_idx": 21}, {"type": "image", "img_path": "3cb6pF3Tvf/tmp/1fbbe8445ca96bd7645430acb4adc205e52eeabec0060d7558c5f51cc14e22bd.jpg", "img_caption": [], "img_footnote": [], "page_idx": 21}, {"type": "text", "text": "Figure 16: A tight example for Pattern IV. The shaded rectangle is the valid time of a Bahncard purchased by OPT. ", "page_idx": 21}, {"type": "text", "text": "A.4.3 Proof for Pattern V ", "text_level": 1, "page_idx": 21}, {"type": "text", "text": "Proposition Restated. If (i) there is no Bahncard purchased by OPT expiring in the on phase of $E_{j}$ , (ii) OPT purchases $x+1$ Bahncards $(x\\geq0)$ in successive on phases starting from $E_{j}$ , where (a) for each $k=0,...,x-1$ .the $(k+1)$ -th Bahncard has its purchase time $\\tau_{i+k}$ falling in the on phase of $E_{j+k}$ and its expiry time $\\tau_{i+k}+T$ falling in the on phase of $E_{j+k+1}$ , and (b) the $(x+1)$ -th Bahncard has its purchase time $\\tau_{i+x}$ falling in the on phase of $E_{j+x}$ and its expiry time $\\tau_{i+x}+T$ falling in the off phase of $E_{j+x}$ , then ", "page_idx": 21}, {"type": "equation", "text": "$$\n\\frac{\\mathsf{P F S U M}(\\sigma;[\\mu_{j},\\tau_{i+x}+T))}{\\mathsf{O P T}(\\sigma;[\\mu_{j},\\tau_{i+x}+T))}\\le\\left\\{\\begin{array}{l l}{\\frac{2\\gamma+(2-\\beta)\\eta}{(1+\\beta)\\gamma+\\beta\\eta}}&{0\\le\\eta\\le\\gamma,}\\\\ {\\frac{(3-\\beta)\\gamma+\\eta}{(1+\\beta)\\gamma+\\beta\\eta}}&{\\eta>\\gamma,}\\end{array}\\right.\n$$", "text_format": "latex", "page_idx": 21}, {"type": "text", "text": "where the upper bound is tight (achievable) for any $x$ ", "page_idx": 22}, {"type": "text", "text": "Proof. As shown in Figure 17, we divide $[\\mu_{j},\\tau_{i+x}+T)$ into $4x+3$ time intervals, where each time interval starts and ends with the time when OPT or PFSUM purchases a Bahncard or a Bahncard purchased by OPT or PFSUM expires. Let these intervals be indexed by $1,2,...,4x+3$ , and let $s_{1},s_{2},...,s_{4x+3}$ denote the total regular costs in these intervals respectively. By definition, it is easy to see that for each $k=0,...,x-1$ , the $(4k+3)$ -th time interval, i.e., $[\\mu_{j+k}+T,\\mu_{j+k+1})$ (which is an off phase), is shorter than $T$ since it is within the valid time of a Bahncard purchased by OPT. ", "page_idx": 22}, {"type": "text", "text": "Next, we analyze the upper bound of the cost ratio. There are two cases to consider. ", "page_idx": 22}, {"type": "image", "img_path": "3cb6pF3Tvf/tmp/bdb34408b8ecbcb66103bb1ee4bb0761d381bd1454096662e97380d3dacd2a48.jpg", "img_caption": [], "img_footnote": [], "page_idx": 22}, {"type": "text", "text": "Figure 17: Mllustration for Pattern V. The shaded rectangle is the valid time of a Bahncard purchased byOPT. ", "page_idx": 22}, {"type": "text", "text": "First, we observe that the cost ratio PFSUM $\\vert\\big(\\sigma;[\\mu_{j},\\tau_{i+x}+T)\\big)/\\mathsf{O P T}\\big(\\sigma;[\\mu_{j},\\tau_{i+x}+T)\\big)$ is less than $1/\\beta$ , as shown below. ", "page_idx": 22}, {"type": "equation", "text": "$$\n\\begin{array}{r l}{\\frac{1}{\\beta}-\\frac{\\operatorname{PE}[\\mathcal{S}(\\mathbf{\\theta})[\\mathcal{F}_{i};\\gamma_{i+\\varepsilon}+T])}{\\operatorname{OPT}(\\gamma;\\mu_{i},\\gamma_{i+\\varepsilon}+T)}}&{}\\\\ &{=\\frac{(x+1)C+\\beta\\left[\\sum_{k=0}^{K-1}\\left(s\\mu_{k+1}+s\\mu_{k+1}\\right)+\\left(s\\mu_{k+2}+s\\mu_{k+3}\\right)\\right]+\\sum_{k=0}^{\\varepsilon}s\\mu_{k+1}}{\\beta\\cdot\\operatorname{OPT}\\left(\\alpha;\\mu_{k},\\gamma_{i+\\varepsilon}+T\\right)}}\\\\ &{-\\frac{\\beta\\left[\\left(x+1\\right)C+\\beta\\left[\\sum_{k=0}^{K-1}\\left(s\\mu_{k+1}+s\\mu_{k+2}+s\\mu_{k+4}\\right)+\\left(s\\mu_{k+1}+s\\mu_{k+2}\\right)\\right]+\\sum_{k=0}^{\\varepsilon}s\\mu_{k+3}\\right]}{\\beta\\cdot\\operatorname{OPT}\\left(\\alpha;\\mu_{k},\\gamma_{i+\\varepsilon}+T\\right)}}\\\\ &{=\\frac{(x+1)C+\\beta\\left[\\sum_{k=0}^{K-1}s\\mu_{k+4}+\\sum_{k=0}^{K-1}s\\mu_{k+3}+\\sum_{k=0}^{K-1}s\\mu_{k+4}\\right]+\\sum_{k=0}^{\\varepsilon}s\\mu_{k+1}}{\\beta\\cdot\\operatorname{OPT}\\left(\\alpha;\\mu_{k},\\gamma_{i+\\varepsilon}+T\\right)}}\\\\ &{-\\frac{\\beta(x+1)C+\\beta^{2}\\left[\\sum_{k=0}^{K-1}s\\mu_{k+1}+\\sum_{k=0}^{K-1}s\\mu_{k+4}\\right]+\\sum_{k=0}^{K-1}s\\mu_{k+4}\\right]+\\beta\\sum_{k=0}^{K-1}s\\mu_{k+3}}\\\\ &{\\beta\\cdot\\operatorname{OPT}\\left(\\alpha;\\mu_{k},\\gamma_{i+\\varepsilon}+T\\right)}\\\\ &{=\\frac{(1-\\beta)(x+1)C+\\beta(1-\\beta)\\left(\\sum_{k=0}^{K-1}s\\mu_{k+2}+\\sum_{k=0}^{K-1}s\\mu_{k+4}\\right)+(1-\\beta^{2})\\sum_{k=0}^{K-1}s\\mu_{k+1}}{\\beta\\cdot\\operatorname{OPT}\\left(\\alpha;\\mu_{k},\\gamma_{i+\\varepsilon}+T\\right)}}\\\\ & \n$$", "text_format": "latex", "page_idx": 22}, {"type": "text", "text": "Thus, the following inequality always holds: ", "page_idx": 22}, {"type": "equation", "text": "$$\n\\frac{\\mathsf{P F S U M}\\big(\\sigma;[\\mu_{j},\\tau_{i+x}+T)\\big)}{\\mathsf{O P T}\\big(\\sigma;[\\mu_{j},\\tau_{i+x}+T)\\big)}<\\frac{1}{\\beta}.\n$$", "text_format": "latex", "page_idx": 22}, {"type": "text", "text": "Case I. $0\\leq\\eta\\leq\\gamma$ By Corollary 3.2, for each $k=0,...,x$ the $T$ -future-cost at $\\tau_{i+k}$ is at least $\\gamma$ i.e., ", "page_idx": 22}, {"type": "equation", "text": "$$\n\\left\\{\\begin{array}{l l}{{s_{4k+2}+s_{4k+3}+s_{4k+4}\\geq\\gamma}}&{{\\mathrm{for}\\,\\mathrm{each}\\,k=0,...,x-1,}}\\\\ {{s_{4x+2}+s_{4x+3}\\geq\\gamma.}}&{{}}\\end{array}\\right.\n$$", "text_format": "latex", "page_idx": 22}, {"type": "text", "text": "By Lemma 4.2, we have ", "page_idx": 22}, {"type": "equation", "text": "$$\n\\left\\{\\begin{array}{l l}{s_{1}+s_{2}\\geq\\gamma-\\eta,}\\\\ {s_{4k}+s_{4k+1}+s_{4k+2}\\geq\\gamma-\\eta\\quad\\mathrm{for}\\;\\mathrm{each}\\;k=1,...,x.}\\end{array}\\right.\n$$", "text_format": "latex", "page_idx": 22}, {"type": "text", "text": "Note that all the travel requests in the $(4k+2)$ -th (for $k\\;=\\;0,...,x)$ and the $(4k+4)$ -th (for $k=0,...,x-1)$ time intervals are reduced requests of both PFSUM and OPT. Thus, to maximize the cost ratio in $[\\mu_{j},\\tau_{i+x}+T)$ , we should minimize these $s_{4k+2}$ 's and $s_{4k+4}\\,\\mathrm{~}$ s. If they are greater than $\\gamma$ the cost ratio can be increased by decreasing $s_{4k+2}$ or $S_{4k+4}$ to $\\gamma$ without violating (45) and (46). Thus, for the purpose of deriving an upper bound on the cost ratio, we can assume that ", "page_idx": 23}, {"type": "equation", "text": "$$\n\\left\\{\\begin{array}{l l}{{s_{4k+2}\\leq\\gamma}}&{{\\mathrm{for}\\;\\mathrm{each}\\;k=0,...,x,}}\\\\ {{s_{4k+4}\\leq\\gamma}}&{{\\mathrm{for}\\;\\mathrm{each}\\;k=0,...,x-1.}}\\end{array}\\right.\n$$", "text_format": "latex", "page_idx": 23}, {"type": "text", "text": "It follows from (47) and Lemma 4.4 that ", "page_idx": 23}, {"type": "equation", "text": "$$\n\\left\\{\\begin{array}{l l}{s_{4k+2}+s_{4k+3}+s_{4k+4}\\leq2\\gamma+\\eta}&{\\mathrm{for}\\;\\mathrm{each}\\;k=0,...,x-1,}\\\\ {s_{4k+2}+s_{4k+3}\\leq2\\gamma+\\eta}&{\\mathrm{for}\\;k=x.}\\end{array}\\right.\n$$", "text_format": "latex", "page_idx": 23}, {"type": "text", "text": "As a result, we have ", "page_idx": 23}, {"type": "text", "text": "$\\begin{array}{r l}&{\\mathbb{P}\\mathbb{F}\\mathbb{S}\\mathbb{B}\\mathbb{H}\\big(\\sigma;\\mu_{j},\\tau_{i+}+T\\big)\\big)}\\\\ &{\\mathbb{O}\\mathbb{P}\\big[\\sigma\\big(\\mu_{j},\\tau_{i+}\\sigma_{i}+T\\big)\\big)}\\\\ &{=\\frac{(x+1)C}{(x+1)C}+\\beta\\left[\\sum_{k=0}^{x-1}\\big(s_{i k+1}+s_{i k+2}+s_{i k+4}\\big)+\\big(s_{i k+1}+s_{i k+2}\\big)\\right]+\\sum_{k=0}^{x}s_{i k+3}}\\\\ &{=\\frac{(x+1)C}{(x+1)C}+\\beta\\left[\\sum_{k=0}^{x-1}\\big(s_{i k+2}+s_{i k+3}+s_{i k+4}\\big)+\\big(s_{i k+2}+s_{i k+3}\\big)\\right]+\\sum_{k=0}^{x}s_{i k+1}}\\\\ &{=\\frac{(x+1)C}{(x+1)C}+\\sum_{k=0}^{x-1}\\big(s_{i k+2}+s_{i k+3}+s_{i k+4}\\big)+\\big(s_{i k+2}+s_{i k+3}\\big)+\\beta\\sum_{k=0}^{x}s_{i k+1}}\\\\ &{-\\frac{(x-1)C}{(x+1)C}\\left[\\sum_{k=0}^{x-1}\\big(s_{i k+2}+s_{i k+3}+s_{i k+4}\\big)+\\big(s_{i k+2}+s_{i k+3}\\big)\\right]+\\sum_{k=0}^{x}s_{i k+1}}\\\\ &{-\\frac{(1-s)\\Big[\\sum_{k=0}^{x-1}\\big(s_{i k+2}+s_{i k+4}\\big)+s_{i k+4}\\big)}{(x+1)C+\\beta\\Big[\\sum_{k=0}^{x-1}\\big(s_{i k+2}+s_{i k+3}+s_{i k+4}\\big)+\\big(s_{i k+2}+s_{i k+3}\\big)\\Big]}+\\sum_{k=0}^{x}s_{i k+1}}\\\\ &{\\leq\\frac{(x+1)C+(x+1)(2\\gamma+\\eta)+\\beta\\sum_{k=0}^{x-1}s_{i k+1}-(1-\\beta)\\big[\\sum_{k=0}^{x-1}\\big(s_{i k+2}+s_{i k+4}\\big)+s_{i k+2}\\big]}{(x+1)C+\\beta(x+1)(2\\gamma+$ (by (44) and (48)) $\\begin{array}{r l}&{\\quad=\\frac{(x+1)C+(x+1)(2\\gamma+\\eta)+\\sum_{k=0}^{x}s_{4k+1}-(1-\\beta)\\left[(s_{1}+s_{2})+\\sum_{k=1}^{x}\\left(s_{4k}+s_{4k+1}+s_{4k+1}\\right.+s_{4k+1}\\right.)}{(x+1)C+\\beta(x+1)(2\\gamma+\\eta)+\\sum_{k=0}^{x}s_{4k+1}}}\\\\ &{\\leq\\frac{(x+1)C+(x+1)(2\\gamma+\\eta)+\\sum_{k=0}^{x}s_{4k+1}-(1-\\beta)(x+1)(\\gamma-\\eta)}{(x+1)C+\\beta(x+1)(2\\gamma+\\eta)+\\sum_{k=0}^{x}s_{4k+1}}\\quad\\mathrm{(by~(46))}}\\\\ &{\\leq\\frac{(x+1)C+(x+1)(2\\gamma+\\eta)-(1-\\beta)(x+1)(\\gamma-\\eta)}{(x+1)C+\\beta(x+1)(2\\gamma+\\eta)}\\quad\\mathrm{(since~}\\sum_{k=0}^{x}s_{4k+1}\\ge0)}\\\\ &{=\\frac{2\\gamma+(2-\\beta)\\eta}{(1+\\beta)\\gamma+\\beta\\eta}.}\\end{array}$ ", "page_idx": 23}, {"type": "text", "text": "Case II. $\\eta>\\gamma$ . By Lemma 4.3, for each $k=0,...,x$ , the total regular cost in the $(4k+3)$ -th time interval (which is in an off phase and has length at most $T$ ) is less than $2\\gamma+\\eta$ ", "page_idx": 23}, {"type": "equation", "text": "$$\ns_{4k+3}<2\\gamma+\\eta.\n$$", "text_format": "latex", "page_idx": 23}, {"type": "text", "text": "On the other hand, the total regular cost in any time interval in an on phase is non-negative. As a result,we have ", "page_idx": 23}, {"type": "equation", "text": "$$\n\\begin{array}{r}{\\frac{\\mathsf{F S U M}\\left(\\sigma;[\\mu_{j},\\tau_{i+x}+T)\\right)}{\\mathsf{O P T}\\left(\\sigma;[\\mu_{j},\\tau_{i+x}+T)\\right)}<\\frac{(x+1)C+(x+1)(2\\gamma+\\eta)}{(x+1)C+\\beta(x+1)(2\\gamma+\\eta)}\\quad\\mathrm{by~(44)~and~(50)}}\\\\ {=\\frac{(3-\\beta)\\gamma+\\eta}{(1+\\beta)\\gamma+\\beta\\eta}.\\qquad\\qquad\\qquad\\qquad\\qquad\\qquad}\\end{array}\n$$", "text_format": "latex", "page_idx": 23}, {"type": "text", "text": "The result follows from (49) and (51). ", "page_idx": 23}, {"type": "text", "text": "A tight example is given in Figure 18, where $x=0$ . The upper bound is achieved when $0\\leq\\eta\\leq\\gamma$ $s_{1}=0$ \uff0c $s_{2}=\\gamma-\\eta$ and $s_{3}\\rightarrow\\gamma+2\\eta$ , or when $\\eta>\\gamma$ $s_{1}=s_{2}=0$ , and $s_{3}\\to2\\gamma+\\eta$ ", "page_idx": 23}, {"type": "image", "img_path": "3cb6pF3Tvf/tmp/f58b2564cf94f8a7d4af688fe1a480620a87784cb59acbe33bfdaac419d01454.jpg", "img_caption": [], "img_footnote": [], "page_idx": 24}, {"type": "text", "text": "Figure 18: A tight example for Pattern V. The shaded rectangle is the valid time of a Bahncard purchased by OPT. ", "page_idx": 24}, {"type": "text", "text": "A.5 Proof of Proposition 4.8 (For Augmented Pattern VI) ", "text_level": 1, "page_idx": 24}, {"type": "text", "text": "Proposition Restated. If (i) there is no Bahncard purchased by OPT expiring in the on phase of $E_{j}$ (ii) OPT purchases $x$ Bahncards $\\left\\lfloor x\\geq1\\right\\rfloor$ ) in successive on phases starting from $E_{j}$ , where for each $k=0,...,x-1$ , the $(k+1)$ -th Bahncard has its purchase time $\\tau_{i+k}$ falling in the on phase of $E_{j+k}$ and its expiry time $\\tau_{i+k}+T$ falling in the on phase of $E_{j+k+1}$ , and (i) OPT does not purchase any new Bahncard in the on phase of $E_{j+x}$ , and (iv) the total regular cost in the on phase of $E_{j+x}$ is at least $\\gamma$ , then ", "page_idx": 24}, {"type": "equation", "text": "$$\n\\frac{\\mathsf{P F S U M}(\\sigma;[\\mu_{j},\\mu_{j+x}+T))}{\\mathsf{O P T}(\\sigma;[\\mu_{j},\\mu_{j+x}+T))}\\leq\\left\\{\\begin{array}{l l}{\\frac{2\\gamma+(2-\\beta)\\eta}{(1+\\beta)\\gamma+\\beta\\eta}}&{0\\leq\\eta\\leq\\gamma,}\\\\ {\\frac{(3-\\beta)\\gamma+\\eta}{(1+\\beta)\\gamma+\\beta\\eta}}&{\\eta>\\gamma,}\\end{array}\\right.\n$$", "text_format": "latex", "page_idx": 24}, {"type": "text", "text": "where the upper bound is tight (achievable) for any $x$ ", "page_idx": 24}, {"type": "text", "text": "Proof. As shown in Figure 19, we divide $[\\mu_{j},\\mu_{j+x}+T)$ into $4x+1$ time intervals, where each time interval starts and ends with the time when $\\mathsf{O P T}$ or PFSUM purchases a Bahncard or a Bahncard purchased by OPT or PFSUM expires. Let these intervals be indexed by $1,2,...,4x+1$ , and let $s_{1},s_{2},...,s_{4x+1}$ denote the total regular costs in these intervals respectively. By definition, it is easy to see that for each $k=0,...,x-1$ , the $(4k+3)$ -th time interval, i.e., $[\\mu_{j+k}+T,\\mu_{j+k+1})$ (which is an off phase), is shorter than $T$ since it is within the valid time of a Bahncard purchased by OPT. ", "page_idx": 24}, {"type": "image", "img_path": "3cb6pF3Tvf/tmp/cf2a9eb0bc83d2c230b84927e420e408a4307a38ce93df4d2dac0e15d1056aaf.jpg", "img_caption": [], "img_footnote": [], "page_idx": 24}, {"type": "text", "text": "Figure 19: Mlustration for Proposition 4.8. The shaded rectangle is the valid time of a Bahncard purchased by OPT. ", "page_idx": 24}, {"type": "text", "text": "First, we observe that the cost ratio PFS $\\mathsf{U M}\\big(\\sigma;[\\mu_{j},\\mu_{j+x}+T)\\big)/\\mathsf{O P T}\\big(\\sigma;[\\mu_{j},\\mu_{j+x}+T)\\big)<1/\\beta,$ as shown below: ", "page_idx": 24}, {"type": "equation", "text": "$$\n\\begin{array}{r l}{\\frac{1}{b}-\\frac{\\mathbb{P}\\mathbb{F}\\{\\mathbf{S},\\mu_{1},\\mu_{2},\\mu_{3}+\\tau,T\\}}{\\mathbb{O}\\mathbb{P}\\{\\tau,\\mu_{1},\\mu_{2}+\\tau,T\\}}}\\\\ {}&{~~-\\frac{x C}{2}\\frac{\\beta}{\\mu}\\frac{\\left(x_{1}+2\\mathrm{i}\\epsilon_{1}\\partial_{x}+2\\mathrm{i}+3\\epsilon_{1}+4\\mathrm{j}\\right)+\\sum_{k=0}^{x}s_{k}+\\mathrm{i}}{\\beta}}\\\\ {}&{~~-\\frac{\\beta\\left[\\left(x+1\\right)C+\\beta\\left[\\left(x+\\mu_{1}\\partial_{x}\\mu_{1}+\\tau\\right)\\right]\\right]}{\\beta}-\\frac{\\beta\\left[\\left(x+1\\right)C+\\beta+\\epsilon_{1}+2\\mathrm{i}+3\\epsilon_{1}+4\\mathrm{j}\\right]+\\sum_{k=0}^{x-1}s_{k}+\\mathrm{i}\\}}\\\\ {}&{~~-\\frac{\\beta\\left[\\left(x+1\\right)C+\\beta\\left[\\sum_{k=0}^{x-1}\\left(s_{k+1}+s_{k+2}+s_{k+4}\\right)+s_{k+1}\\right]+\\sum_{k=0}^{x-1}s_{k}+\\mathrm{i}\\right]}{\\beta}}\\\\ {}&{~~-\\frac{\\beta\\left[1-\\beta\\right]x C-\\beta C+\\beta(1-\\beta)\\sum_{k=0}^{x-1}s_{k}+2+\\beta(1-\\beta)\\sum_{k=0}^{x-1}s_{k+4}+(1-\\beta)^{2}\\sum_{k=0}^{x-1}s_{k+1}}{\\beta\\cdot\\left[\\beta\\nabla\\Gamma\\left(\\left|\\sigma;\\mu_{k},\\mu_{k+2}+T\\right|\\right)\\right]}}\\\\ {}&{~~>\\frac{(1-\\beta)x C-\\beta C+\\beta(1-\\beta)\\left(\\sum_{k=0}^{x-1}s_{k+2}+\\sum_{k=0}^{x-2}s_{k+4}\\right)}{\\beta\\cdot\\left[\\alpha\\nabla\\Gamma\\left(\\left|\\mu_{k},\\mu_{k+2}+x_{1}\\right|\\right)\\right]}}\\end{array}\n$$", "text_format": "latex", "page_idx": 24}, {"type": "equation", "text": "$$\n\\begin{array}{r l}&{\\quad+\\frac{\\displaystyle(1-\\beta^{2})\\sum_{k=0}^{x-1}s_{4k+1}+\\beta(1-\\beta)(s_{4x}+s_{4x+1})}{\\beta\\cdot\\big[\\big(\\sigma\\mathbf{P}^{\\top}(\\rho;[\\mu_{j},\\mu_{j+x}+T)]\\big)\\big]}\\quad\\mathrm{(since~}0\\le\\beta<1\\mathrm{)}}\\\\ &{\\geq\\frac{\\displaystyle(1-\\beta)x C-\\beta C+\\beta(1-\\beta)\\big(\\sum_{k=0}^{x-1}s_{4k+2}+\\sum_{k=0}^{x-2}s_{4k+4}\\big)}{\\beta\\cdot\\big[\\big(\\sigma\\mathbf{P}^{\\top}(\\mu_{j},\\mu_{j+x}+T)\\big)\\big]}}\\\\ &{\\quad+\\frac{\\displaystyle(1-\\beta^{2})\\sum_{k=0}^{x-1}s_{4k+1}+\\beta(1-\\beta)\\gamma}{\\beta\\cdot\\big[\\big(\\sigma\\mathbf{P}^{\\top}(\\mu_{j},\\mu_{j+x}+T)\\big)\\big]}\\quad\\mathrm{(since~}s_{4x}+s_{4x+1}\\geq\\gamma\\mathrm{)}}\\\\ &{\\quad=\\frac{\\displaystyle(1-\\beta)x C+\\beta(1-\\beta)\\big(\\sum_{k=0}^{x-1}s_{4k+2}+\\sum_{k=0}^{x-2}s_{4k+4}\\big)+\\big(1-\\beta^{2}\\big)\\sum_{k=0}^{x-1}s_{4k+1}}{\\beta\\cdot\\big[\\big(\\sigma\\mathbf{P}^{\\top}\\big(\\mu_{j},\\mu_{j+x}+T\\big)\\big)\\big]}}\\end{array}\n$$", "text_format": "latex", "page_idx": 25}, {"type": "text", "text": ">0. ", "page_idx": 25}, {"type": "text", "text": "Thus, the following inequality always holds: ", "page_idx": 25}, {"type": "equation", "text": "$$\n\\frac{\\mathsf{P F S U M}\\big(\\sigma;[\\mu_{j},\\mu_{j+x}+T)\\big)}{\\mathsf{O P T}\\big(\\sigma;[\\mu_{j},\\mu_{j+x}+T)\\big)}<\\frac{1}{\\beta}.\n$$", "text_format": "latex", "page_idx": 25}, {"type": "text", "text": "There are two cases to consider. ", "page_idx": 25}, {"type": "text", "text": "Case I. $0\\leq\\eta\\leq\\gamma$ By Corollary 3.2, for each $k=0,...,x-1$ , the $T$ -future-cost at $\\tau_{i+k}$ is at least $\\gamma$ ,i.e., ", "page_idx": 25}, {"type": "equation", "text": "$$\ns_{4k+2}+s_{4k+3}+s_{4k+4}\\geq\\gamma.\n$$", "text_format": "latex", "page_idx": 25}, {"type": "text", "text": "On the other hand, by Lemma 4.2 and the (iv)-th condition of the proposition, we have ", "page_idx": 25}, {"type": "equation", "text": "$$\n\\left\\{\\begin{array}{l l}{s_{1}+s_{2}\\geq\\gamma-\\eta,}\\\\ {s_{4k}+s_{4k+1}+s_{4k+2}\\geq\\gamma-\\eta\\quad\\mathrm{for}\\;\\mathrm{each}\\;k=1,...,x-1,}\\\\ {s_{4x}+s_{4x+1}\\geq\\gamma.}\\end{array}\\right.\n$$", "text_format": "latex", "page_idx": 25}, {"type": "text", "text": "Note that for each $k=0,...,x-1$ , all the travel requests in the $(4k+2)$ -th and the $(4k+4)$ -th time intervals are reduced requests of both PFSUM and OPT. Thus, to maximize the cost ratio in $[\\mu_{j},\\mu_{j+x}+T)$ , we should minimize $s_{4k+2}$ and $s_{4k+4}$ . If they are greater than $\\gamma$ , the cost ratio can be increased by decreasing $s_{4k+2}$ or $s_{4k+4}$ to $\\gamma$ without violating (55) and (56) (except for $s_{4x}$ ). For $s_{4x}$ , if it is greater than $\\gamma$ , the cost ratio can be increased by decreasing it to $\\gamma$ without violating (55) and (56). Thus, for the purpose of deriving an upper bound on the cost ratio, we can assume that ", "page_idx": 25}, {"type": "equation", "text": "$$\n\\left\\{\\begin{array}{l l}{s_{4k+2}\\leq\\gamma}&{\\mathrm{for~each}\\;k=0,...,x-1,}\\\\ {s_{4k+4}\\leq\\gamma}&{\\mathrm{for~each}\\;k=0,...,x-1.}\\end{array}\\right.\n$$", "text_format": "latex", "page_idx": 25}, {"type": "text", "text": "It follows from (57) and Lemma 4.4 that, for each $k=0,...,x-2$ ", "page_idx": 25}, {"type": "equation", "text": "$$\ns_{4k+2}+s_{4k+3}+s_{4k+4}\\leq2\\gamma+\\eta.\n$$", "text_format": "latex", "page_idx": 25}, {"type": "text", "text": "For $k=x-1$ ,we still have ", "page_idx": 25}, {"type": "equation", "text": "$$\ns_{4k+2}+s_{4k+3}+s_{4k+4}\\leq2\\gamma+\\eta.\n$$", "text_format": "latex", "page_idx": 25}, {"type": "text", "text": "Otherwise, there must exist a time $t$ in the off phase of $E_{j+x-1}$ such that PFSUM purchases a Bahncard, leading to a contradiction. ", "page_idx": 25}, {"type": "text", "text": "As a result, ", "page_idx": 25}, {"type": "equation", "text": "$$\n\\begin{array}{r l}&{\\frac{\\mathsf{P F S U M}\\left(\\sigma;\\,\\left[\\mu_{j},\\mu_{j+x}+T\\right)\\right)}{\\mathsf{O P T}\\left(\\sigma;\\,\\left[\\mu_{j},\\mu_{j+x}+T\\right)\\right)}}\\\\ &{=\\frac{(x+1)C+\\beta\\left[\\sum_{k=0}^{x-1}\\big(s_{4k+1}+s_{4k+2}+s_{4k+4}\\big)+s_{4x+1}\\right]+\\sum_{k=0}^{x-1}s_{4k+3}}{x C+\\beta\\left[\\sum_{k=0}^{x-1}\\big(s_{4k+2}+s_{4k+3}+s_{4k+4}\\big)\\right]+\\sum_{k=0}^{x}s_{4k+1}}}\\end{array}\n$$", "text_format": "latex", "page_idx": 25}, {"type": "text", "text": "$\\begin{array}{r l}&{\\mathbf{a}:(-1)\\mathbf{U}^{-\\delta}+\\frac{1}{N}\\mathbf{U}^{\\top}+\\mathbf{S}_{\\mathbf{u}}^{\\top}+\\frac{1}{N}\\mathbf{U}^{-\\delta}(\\mathbf{u}_{1}\\!+\\!\\frac{1}{N}\\mathbf{I}^{-\\delta}({\\mathbf{u}}_{2}\\!+\\!\\frac{1}{N}\\mathbf{u}_{3}\\!+\\!\\frac{1}{N}\\mathbf{I}^{-\\delta}({\\mathbf{u}}_{3}\\!+\\!\\frac{1}{N}\\mathbf{I}^{-\\delta})-(1-\\delta))\\mathbf{Y}_{3}^{-\\delta}\\mathbf{I}^{-\\delta}({\\mathbf{u}}_{3}\\!+\\!\\frac{1}{N}\\mathbf{I}^{-\\delta}({\\mathbf{u}}_{4}\\!+\\!2)\\mathbf{I}^{-\\delta}({\\mathbf{u}}_{2}\\!+\\!\\frac{1}{N}\\mathbf{I}^{-\\delta}({\\mathbf{u}}_{3}\\!+\\!2)\\mathbf{I}^{-\\delta}({\\mathbf{u}}_{4}\\!+\\!2)))}\\\\ &{~~~-\\frac{(\\delta-1)\\mathbf{U}^{-\\delta}}{N}\\mathbf{U}^{-\\delta}+\\frac{1}{N}\\mathbf{U}^{-\\delta}+\\frac{1}{N}\\mathbf{U}^{-\\delta}+\\frac{1}{N}\\mathbf{U}^{-\\delta}({\\mathbf{u}}_{1}\\!+\\!2)\\mathbf{U}^{-\\delta}}\\\\ &{~~~-\\frac{(\\delta-1)\\mathbf{U}^{-\\delta}}{N}\\mathbf{U}^{-\\delta}+\\frac{1}{N}\\mathbf{U}^{-\\delta}+\\frac{1}{N}\\mathbf{U}^{-\\delta}+\\frac{1}{N}\\mathbf{U}^{-\\delta}}\\\\ &{~~~-\\frac{(1-\\delta)\\mathbf{U}^{-\\delta}}{N}\\!\\left[\\frac{1}{N}\\!+\\!\\frac{1}{N}\\!\\left(\\mathbf{u}_{1}\\!+\\!\\frac{1}{N}\\mathbf{u}_{2}\\!+\\!\\frac{1}{N}\\mathbf{I}^{-\\delta}({\\mathbf{u}}_{1}\\!+\\!\\frac{1}{N}\\mathbf{u}_{3}\\!+\\!\\frac{1}{N}\\mathbf{I}^{-\\delta})+\\frac{1}{N}\\mathbf{u}_{4}\\!\\right)\\right.}\\\\ &{~~~\\left.-\\frac{(1-\\delta)\\mathbf{U}^{-\\delta}}{$ 84h+4) (by (56)) 1\u22650) (c+ 1)(1 - \u03b2)+x(2 +n) - (1 - \u03b2)[x( -n) +] (since C = (1 - \u03b2)) x(1 -\u03b2) + \u03b2x(2 + n) 2y + (2 - 2\u03b2)n (60) (1 + \u03b2) + \u03b2n ", "page_idx": 26}, {"type": "text", "text": "Case II. $\\eta>\\gamma$ . In this case, the total regular cost in any time interval in an on phase can be zero (except for the on phase of $E_{j+x}$ ", "page_idx": 26}, {"type": "equation", "text": "$$\n\\left\\{\\begin{array}{l l}{s_{1}+s_{2}\\geq0,}\\\\ {s_{4k}+s_{4k+1}+s_{4k+2}\\geq0\\quad\\mathrm{for}\\;\\mathrm{each}\\;k=1,...,x-1,}\\\\ {s_{4x}+s_{4x+1}\\geq\\gamma.}\\end{array}\\right.\n$$", "text_format": "latex", "page_idx": 26}, {"type": "text", "text": "On the other hand, by Lemma 4.3, for each $k=0,...,x-2$ , the total regular cost in the $(4k+3)$ -th time interval (which is in an off phase and has length at most $T$ ) is less than $2\\gamma+\\eta$ ", "page_idx": 26}, {"type": "equation", "text": "$$\ns_{4k+3}<2\\gamma+\\eta.\n$$", "text_format": "latex", "page_idx": 26}, {"type": "text", "text": "For $k=x-1$ , we have ", "page_idx": 26}, {"type": "equation", "text": "$$\ns_{4x-1}<\\gamma+\\eta.\n$$", "text_format": "latex", "page_idx": 26}, {"type": "text", "text": "Otherwise, there must exist a time $t$ in the off phase of $E_{j+x-1}$ such that PFSUM purchases a Bahncard, leading to a contradiction. ", "page_idx": 26}, {"type": "text", "text": "As a result, ", "page_idx": 26}, {"type": "equation", "text": "$$\n\\frac{\\mathsf{P F S U M}(\\sigma;[\\mu_{j},\\mu_{j+x}+T))}{\\mathsf{O P T}(\\sigma;[\\mu_{j},\\mu_{j+x}+T))}<\\frac{(x+1)C+(x-1)(2\\gamma+\\eta)+(\\gamma+\\eta)+\\beta\\gamma}{x C+\\beta x(2\\gamma+\\eta)}\n$$", "text_format": "latex", "page_idx": 26}, {"type": "equation", "text": "$$\n=\\frac{(3-\\beta)\\gamma+\\eta}{(1+\\beta)\\gamma+\\beta\\eta}.\n$$", "text_format": "latex", "page_idx": 26}, {"type": "text", "text": "The result follows from (60) and (64). ", "page_idx": 26}, {"type": "text", "text": "A tight example for Proposition 4.8 is given in Figure 20, where $x=1$ . The upper bound is achieved when $0\\leq\\eta\\leq\\gamma$ $s_{1}=s_{5}=0$ $s_{2}=\\gamma\\,{-}\\,\\eta$ $s_{3}\\rightarrow2\\eta$ and $s_{4}=\\gamma$ , or when $\\eta>\\gamma$ $s_{1}=s_{2}=s_{5}=0$ $s_{3}\\to\\gamma+\\eta$ and $s_{4}=\\gamma$ ", "page_idx": 26}, {"type": "image", "img_path": "3cb6pF3Tvf/tmp/2b954da7c9a185c7488ee04d21b2a60a200f0004c67bac5cb14fc71c5c834a17.jpg", "img_caption": [], "img_footnote": [], "page_idx": 27}, {"type": "text", "text": "Figure 20: A tight example for Proposition 4.8. The shaded rectangle is the valid time of a Bahncard purchased by OPT. ", "page_idx": 27}, {"type": "text", "text": "A.6Proof of Proposition 4.9 ", "text_level": 1, "page_idx": 27}, {"type": "text", "text": "A.6.1 Non-Augmented Pattern VI Combined with Pattern I ", "text_level": 1, "page_idx": 27}, {"type": "text", "text": "Proposition Restated. If (i) OPT purchases a Bahncard at time $\\tau_{k}$ in the off phase of some epoch $E_{l}$ which expires in the same off phase, (i) there is no Bahncard purchased by OPT expiring in the on phase of $E_{j}$ $(j>l)$ , (iii) OPT purchases $x$ Bahncards $[x\\ge1$ ) in successive on phases starting from $E_{j}$ , where for each $k=0,...,x-1$ , the $(k+1)$ -th Bahncard has its purchasing time $\\tau_{i+k}$ falling in the on phase of $E_{j+k}$ and its expiry time $\\tau_{i+k}+T$ falling in the on phase of $E_{j+k+1}$ , and (iv) OPT does not purchase any new Bahncard in the on phase of $E_{j+x}$ , then ", "page_idx": 27}, {"type": "equation", "text": "$$\n\\frac{\\mathsf{P F S U M}\\big(\\sigma;[\\tau_{k},\\tau_{k}+T)\\cup[\\mu_{j},\\mu_{j+x}+T)\\big)}{\\mathsf{O P T}\\big(\\sigma;[\\tau_{k},\\tau_{k}+T)\\cup[\\mu_{j},\\mu_{j+x}+T)\\big)}\\leq\\left\\{\\begin{array}{l l}{\\frac{2\\gamma+(2-\\beta)\\eta}{(1+\\beta)\\gamma+\\beta\\eta}}&{0\\leq\\eta\\leq\\gamma,}\\\\ {\\frac{(3-\\beta)\\gamma+\\eta}{(1+\\beta)\\gamma+\\beta\\eta}}&{\\eta>\\gamma,}\\end{array}\\right.\n$$", "text_format": "latex", "page_idx": 27}, {"type": "text", "text": "where the upper bound is tight (achievable) for any $x$ ", "page_idx": 27}, {"type": "text", "text": "Proof. As shown in Figure 21, we divide $[\\tau_{k},\\tau_{k}+T)\\cup[\\mu_{j},\\mu_{j+x}+T)$ into $4x+2$ time intervals, where each time interval starts and ends with the time when OPT or PFSUM purchases a Bahncard or a Bahncard purchased by OPT or PFSUM expires. Let these intervals be indexed by $-1,1,...,4x{+}1$ and let $s_{-1},s_{1},...,s_{4x+1}$ denote the total regular costs in these intervals respectively. By definition, it is easy to see that for each $k=0,...,x-1$ the $(4k+3)$ -th time interval, i.e., $[\\mu_{j+k}+T,\\mu_{j+k+1})$ (which is an off phase), is shorter than $T$ since it is within the valid time of a Bahncard purchased by OPT. ", "page_idx": 27}, {"type": "image", "img_path": "3cb6pF3Tvf/tmp/0e799496d501b10f107da4345e0ebc715f1c6dcbd822063852891dc45888038f.jpg", "img_caption": [], "img_footnote": [], "page_idx": 27}, {"type": "text", "text": "Figure 21: Mllustration for Appendix A.6.1. The shaded rectangle is the valid time of a Bahncard purchased by OPT. ", "page_idx": 27}, {"type": "text", "text": "First, we observe that the cost ratio P $^{-}{\\mathsf{S U M}}(\\sigma;[\\tau_{k},\\tau_{k}+T)\\cup[\\mu_{j},\\mu_{j+x}+T)]/{\\mathsf{O P T}}(\\sigma;[\\tau_{k},\\tau_{k}+$ $T)\\cup[\\mu_{j},\\mu_{j+x}+T))$ is less than $1/\\beta$ , as shown below: ", "page_idx": 27}, {"type": "equation", "text": "$$\n\\begin{array}{r l}&{\\frac{1}{\\beta}-\\frac{\\mathsf{P F S U M}\\left(\\sigma;[\\tau_{k},\\tau_{k}+T)\\;\\cup\\;[\\mu_{j},\\mu_{j+x}+T)\\right)}{\\mathsf{O P T}\\left(\\sigma;[\\tau_{k},\\tau_{k}+T)\\;\\cup\\;[\\mu_{j},\\mu_{j+x}+T)\\right)}}\\\\ &{\\quad=\\frac{\\left(x+1\\right)C+\\beta\\left[s-1+\\sum_{k=0}^{x-1}(s_{4k+2}+s_{4k+3}+s_{4k+4})\\right]+\\sum_{k=0}^{x}s_{4k+1}}{\\beta\\cdot\\mathsf{O P T}\\left(\\sigma;[\\tau_{k},\\tau_{k}+T)\\;\\cup\\;[\\mu_{j},\\mu_{j+x}+T)\\right)}}\\\\ &{\\quad-\\;\\frac{\\beta\\left[(x+1)C+\\beta\\left[\\sum_{k=0}^{x-1}(s_{4k+1}+s_{4k+2}+s_{4k+4})+s_{4x+1}\\right]+s_{-1}+\\sum_{k=0}^{x-1}s_{4k+3}\\right]}{\\beta\\cdot\\mathsf{O P T}\\left(\\sigma;[\\tau_{k},\\tau_{k}+T)\\;\\cup\\;[\\mu_{j},\\mu_{j+x}+T)\\right)}}\\\\ &{\\quad=\\frac{\\left(1-\\beta\\right)(x+1)C+\\beta\\left(1-\\beta\\right)\\sum_{k=0}^{x-1}(s_{4k+2}+s_{4k+4})+\\left(1-\\beta^{2}\\right)\\sum_{k=0}^{x}s_{4k+1}}{\\beta\\cdot\\mathsf{O P T}\\left(\\sigma;[\\tau_{k},\\tau_{k}+T)\\;\\cup\\;[\\mu_{j},\\mu_{j+x}+T)\\right)}}\\end{array}\n$$", "text_format": "latex", "page_idx": 27}, {"type": "equation", "text": "$$\n>0.\\quad(\\mathrm{since}\\;0\\leq\\beta<1)\n$$", "text_format": "latex", "page_idx": 28}, {"type": "text", "text": "Thus, the following inequality always holds: ", "page_idx": 28}, {"type": "equation", "text": "$$\n\\frac{\\mathsf{P F S U M}(\\sigma;[\\tau_{k},\\tau_{k}+T)\\cup[\\mu_{j},\\mu_{j+x}+T))}{\\mathsf{O P T}(\\sigma;[\\tau_{k},\\tau_{k}+T)\\cup[\\mu_{j},\\mu_{j+x}+T))}<\\frac{1}{\\beta}.\n$$", "text_format": "latex", "page_idx": 28}, {"type": "text", "text": "Next, we analyze the upper bound of the cost ratio. Note that by Lemma 4.3, we have ", "page_idx": 28}, {"type": "equation", "text": "$$\ns_{-1}<2\\gamma+\\eta.\n$$", "text_format": "latex", "page_idx": 28}, {"type": "text", "text": "There are two cases to consider. ", "page_idx": 28}, {"type": "text", "text": "Case I. $0\\leq\\eta\\leq\\gamma$ .By Corollary 3.2, for each $k=0,...,x-1$ , the $T$ -future-cost at $\\tau_{i+k}$ is at least $\\gamma$ , i.e., ", "page_idx": 28}, {"type": "equation", "text": "$$\ns_{4k+2}+s_{4k+3}+s_{4k+4}\\geq\\gamma.\n$$", "text_format": "latex", "page_idx": 28}, {"type": "text", "text": "By Lemma 4.2, we have ", "page_idx": 28}, {"type": "equation", "text": "$$\n\\left\\{\\begin{array}{l l}{s_{1}+s_{2}\\geq\\gamma-\\eta,}\\\\ {s_{4k}+s_{4k+1}+s_{4k+2}\\geq\\gamma-\\eta\\quad\\mathrm{for}\\;\\mathrm{each}\\;k=1,...,x-1,}\\\\ {s_{4x}+s_{4x+1}\\geq\\gamma-\\eta.}\\end{array}\\right.\n$$", "text_format": "latex", "page_idx": 28}, {"type": "text", "text": "Note that for each $k=0,...,x-1$ , all the travel requests in the $(4k+2)$ -th and the $(4k+4)$ -th time intervals are reduced requests of both PFSUM and OPT. Thus, to maximize the cost ratio in $[\\tau_{k},\\tau_{k}+T)\\cup[\\mu_{j},\\mu_{j+x}+T\\bar{)}$ , we should minimize $s_{4k+2}$ and $s_{4k+4}$ . If they are greater than $\\gamma$ the cost ratio can be increased by decreasing $s_{4k+2}$ or $s_{4k+4}$ to $\\gamma$ without violating (68) and (69). Thus, for the purpose of deriving an upper bound on the cost ratio, we can assume that ", "page_idx": 28}, {"type": "equation", "text": "$$\n\\begin{array}{r l r}&{}&{s_{4k+2}\\leq\\gamma,}\\\\ &{}&{s_{4k+4}\\leq\\gamma.}\\end{array}\n$$", "text_format": "latex", "page_idx": 28}, {"type": "text", "text": "It follows from (70), (71) and Lemma 4.4 that, for each $k=0,...,x-1$ ", "page_idx": 28}, {"type": "equation", "text": "$$\ns_{4k+2}+s_{4k+3}+s_{4k+4}\\leq2\\gamma+\\eta.\n$$", "text_format": "latex", "page_idx": 28}, {"type": "text", "text": "As a result, we have ", "page_idx": 28}, {"type": "equation", "text": "$$\n\\begin{array}{r l}&{\\begin{array}{r l}&{\\operatorname{\\mathcal{P}}[\\operatorname{Sinf}(\\alpha_{1}\\{\\gamma_{1},\\gamma_{3}+\\gamma_{1}\\}(u)\\{\\mu_{1},\\mu_{2}+\\gamma_{1}\\})}\\\\ &{\\operatorname{OPT}(\\alpha_{1}\\{\\gamma_{1},\\gamma_{4}+\\gamma_{1}\\}\\cup[\\mu_{2},\\mu_{3}+\\gamma_{1}])}\\\\ &{=\\frac{(x+1)C+\\beta\\sum_{i=1}^{N}\\big(\\delta\\alpha_{1}+\\kappa_{4}\\alpha_{2}+\\kappa_{4}\\alpha_{4}+\\kappa_{4}\\alpha_{1}\\big)+s_{1}\\alpha_{1}+\\kappa_{3}+\\sum_{i=1}^{N-1}s_{4}+\\kappa_{4}}{\\left(x+1\\right)C+\\beta\\sum_{i=1}^{N}\\big(\\alpha_{1}+\\kappa_{4}\\alpha_{2}+\\kappa_{4}\\alpha_{3}+\\kappa_{4}\\alpha_{4}\\big)\\right]+\\sum_{k=0}^{N}s_{k}\\alpha_{1}}}\\\\ &{\\leq\\frac{(x+1)C+(2\\gamma+\\eta)+\\delta\\left(\\sum_{i=1}^{N}\\big(\\alpha_{k+1}+\\kappa_{4}\\alpha_{2}+\\kappa_{4}\\alpha_{1}+\\kappa_{4}\\big)+s_{4}\\alpha_{1}+\\kappa_{1}\\right)+\\sum_{k=0}^{N}s_{k}\\alpha_{k+1}}{\\left(x+1\\right)C+\\beta\\left(\\sum_{j=1}^{N}\\alpha_{k+1}+\\kappa_{4}\\alpha_{2}+\\kappa_{4}\\alpha_{3}+\\kappa_{4}\\alpha_{1}\\right)+\\sum_{k=0}^{N}s_{k}\\alpha_{k+3}}}\\\\ &{=\\frac{(x+1)C+(2\\gamma+\\eta)+\\delta\\sum_{i=1}^{N}s_{k}\\alpha_{1}+\\sum_{j=1}^{N-1}\\big(\\alpha_{k+1}+\\kappa_{4}\\alpha_{2}+\\kappa_{4}\\alpha_{3}+\\kappa_{4}\\alpha_{1}\\big)+\\sum_{k=0}^{N}s_{k+1}}{\\left(x+1\\right)C+\\beta\\sum_{i=1}^{N}\\alpha_{k+1}^{2}}}\\\\ &{=\\frac{(x+1)C+(2\\gamma+\\eta)+\\delta\\sum_{i=1}^{N}s_{k}\\alpha_{1}+1}{ \n$$", "text_format": "latex", "page_idx": 28}, {"type": "equation", "text": "$$\n\\begin{array}{r l}&{\\quad-\\frac{\\left(1-\\beta\\right)\\left[\\left(s_{1}+s_{2}\\right)+\\sum_{k=1}^{x-1}\\left(s_{4k}+s_{4k+1}+s_{4k+2}\\right)+\\left(s_{4x}+s_{4x+1}\\right)\\right]}{\\left(x+1\\right)C+\\beta(x+1)\\left(2\\gamma+\\eta\\right)+\\sum_{k=0}^{x-1}s_{4k+1}}}\\\\ &{\\leq\\frac{\\left(x+1\\right)C+\\sum_{k=0}^{x-1}s_{4k+1}+\\left(x+1\\right)\\left(2\\gamma+\\eta\\right)-\\left(1-\\beta\\right)\\left(x+1\\right)\\left(\\gamma-\\eta\\right)}{\\left(x+1\\right)C+\\beta(x+1)\\left(2\\gamma+\\eta\\right)+\\sum_{k=0}^{x-1}s_{4k+1}}\\quad\\mathrm{(by~(69)~}}\\\\ &{\\leq\\frac{\\left(x+1\\right)C+\\left(x+1\\right)\\left(2\\gamma+\\eta\\right)-\\left(1-\\beta\\right)\\left(x+1\\right)\\left(\\gamma-\\eta\\right)}{\\left(x+1\\right)C+\\beta(x+1)\\left(2\\gamma+\\eta\\right)}\\quad\\mathrm{(since~\\sum_{k=0}^{x}s_{4k+1}\\geq0)}}\\\\ &{=\\frac{C+\\left(2\\gamma+\\eta\\right)-\\left(1-\\beta\\right)\\left(\\gamma-\\eta\\right)}{C+\\beta(2\\gamma+\\eta)}}\\\\ &{=\\frac{2\\gamma+\\left(2-\\beta\\right)\\eta}{\\left(1+\\beta\\right)\\gamma+\\left(\\beta\\right)}.}\\end{array}\n$$", "text_format": "latex", "page_idx": 29}, {"type": "text", "text": "Case II. $\\eta>\\gamma$ . By Lemma 4.3, for each $k=0,...,x-1$ , the total regular cost in the $(4k+3)$ -th time interval (which is in an off phase and has length at most $T$ ) is less than $2\\gamma+\\eta$ ", "page_idx": 29}, {"type": "equation", "text": "$$\ns_{4k+3}<2\\gamma+\\eta.\n$$", "text_format": "latex", "page_idx": 29}, {"type": "text", "text": "On the other hand, the total regular cost in any time interval in an on phase is non-negative. As a result, we have ", "page_idx": 29}, {"type": "equation", "text": "$$\n\\frac{\\mathsf{P F S U M}(\\sigma;[\\tau_{k},\\tau_{k}+T)\\cup[\\mu_{j},\\mu_{j+x}+T))}{\\mathsf{O P T}(\\sigma;[\\tau_{k},\\tau_{k}+T)\\cup[\\mu_{j},\\mu_{j+x}+T))}<\\frac{(x+1)C+(x+1)(2\\gamma+\\eta)}{(x+1)C+\\beta(x+1)(2\\gamma+\\eta)}\n$$", "text_format": "latex", "page_idx": 29}, {"type": "equation", "text": "$$\n=\\frac{(3-\\beta)\\gamma+\\eta}{(1+\\beta)\\gamma+\\beta\\eta}.\n$$", "text_format": "latex", "page_idx": 29}, {"type": "text", "text": "The result follows from (73) and (75). ", "page_idx": 29}, {"type": "text", "text": "A.6.2 Non-Augmented Pattern VI Combined with Pattern MI ", "text_level": 1, "page_idx": 29}, {"type": "text", "text": "Proposition Restated. If OPT purchases $x+2$ Bahncards $(x\\geq0)$ ) starting from the off phase of $E_{l-1}$ , where (i) the first Bahncard has its purchase time $\\tau_{k}$ falling in the off phase of $E_{l-1}$ and its expiry time $\\tau_{k}+T$ falling in the on phase of $E_{l}$ , (ii) for each $p=1,...,x$ the $(p+1)$ -th Bahncard has its purchase time $\\tau_{k+p}$ falling in the on phase of $E_{l+p-1}$ and its expiry time $\\tau_{k+p}+T$ falling in the on phase of $E_{l+p}$ , (ii) the $\\left(x+2\\right)$ -th Bahncard has its purchase time $\\tau_{k+x+1}$ falling in the on phase of $E_{l+x}$ and its expiry time $\\tau_{k+x+1}+T$ falling in the off phase of $E_{l+x}$ , and for some $j\\geq l$ and $i\\geq k$ OPT purchases $y$ Bahncards $(y\\geq0)$ in successive on phases starting from $E_{j+x+1}$ where for each $p=0,...,y-1$ ,the $(p+1)$ -th Bahncard has its purchasing time $\\tau_{i+x+p+2}$ falling in the on phase of $E_{j+x+p+1}$ and its expiry time $\\tau_{i+x+p+2}+T$ falling in the on phase of $E_{j+x+p+2}$ \uff0c and $(v)$ OPT does not purchase any new Bahncard in the on phase of $E_{j+x+y+1}$ , then ", "page_idx": 29}, {"type": "equation", "text": "$$\n\\frac{\\mathsf{P F S U M}\\big(\\sigma;[\\tau_{k},\\tau_{k+x+1}+T)\\cup[\\mu_{j+x+1},\\mu_{j+x+y+1}+T)\\big)}{\\mathsf{O P T}\\big(\\sigma;[\\tau_{k},\\tau_{k+x+1}+T)\\cup[\\mu_{j+x+1},\\mu_{j+x+y+1}+T)\\big)}\\leq\\left\\{\\begin{array}{l l}{\\frac{2\\gamma+(2-\\beta)\\eta}{(1+\\beta)\\gamma+\\beta\\eta}}&{0\\leq\\eta\\leq\\gamma,}\\\\ {\\frac{(3-\\beta)\\gamma+\\eta}{(1+\\beta)\\gamma+\\beta\\eta}}&{\\eta>\\gamma.}\\end{array}\\right.\n$$", "text_format": "latex", "page_idx": 29}, {"type": "text", "text": "Proof. As shown in Figure 22, we divide $[\\tau_{k},\\tau_{k+x+1}{+}T)\\cup[\\mu_{j+x+1},\\mu_{j+x+y+1}{+}T)$ into $4(x{+}y){+}6$ time intervals, where each time intervals starts and ends with the time when OPT or PFSUM purchases a Bahncard or a Bahncard purchased by OPT or PFSUM expires. The first $4x+5$ time intervals, from time $\\tau_{i}$ to $\\tau_{i+x+1}+T$ , are concerned time duration of Pattern IIl. The total regular costs in these intervals are denoted by $s_{-1},s_{0},s_{1},...,s_{4x+3}$ , respectively. $[\\mu_{j+x+1},\\mu_{j+x+y+1}+T)$ is the concerned interval of Pattern VI, which is divided into $4y+1$ time intervals. The total regular costs in these intervals are denoted by $q_{1},...,q_{4y+1}$ , respectively. ", "page_idx": 29}, {"type": "text", "text": "For ease of notation, we introduce $\\theta_{k}\\,:=\\,s_{4k+2}+s_{4k+3}+s_{4k+4}$ ,and $\\delta_{k}\\,:=\\,q_{4k+2}+q_{4k+3}\\,+$ $q_{4k+4}$ . First, we observe that the cost ratio PFSU $\\mathsf{M}(\\sigma;[\\tau_{k},\\tau_{k+x+1}+T)\\cup[\\mu_{j+x+1},\\mu_{j+x+y+1}+$ $T))/\\mathsf{O P T}(\\sigma;[\\tau_{k},\\tau_{k+x+1}+T)\\cup[\\mu_{j+x+1},\\mu_{j+x+y+1}+T)]$ is less than $1/\\beta$ , as shown below: ", "page_idx": 29}, {"type": "image", "img_path": "3cb6pF3Tvf/tmp/df458df57ec39cae8c92a24b96b45481f91292ef6b531a899b4a2248045d43c5.jpg", "img_caption": [], "img_footnote": [], "page_idx": 30}, {"type": "text", "text": "Figure 22: Illustration for Appendix A.6.2. The shaded rectangle is the valid time of a Bahncard purchased by OPT. ", "page_idx": 30}, {"type": "equation", "text": "$$\n\\begin{array}{r l}&{\\quad-\\frac{\\operatorname{PeSm}(a,b,a+z+1)-(1-a)(1\\mu_{2}+\\nu+1\\mu_{1}\\mu_{2}+\\nu+\\nu+1)}{\\operatorname{PeT}(a,b,a+z+1)}}\\\\ &{=\\frac{(1-2)(2-1)\\mu_{1}+\\nu+1+2\\nu)(\\mu_{2}+\\nu+1+2\\mu_{1}+\\nu+\\nu+1)-\\nu}{\\operatorname{PeSm}(a,b,a+z+1)}}\\\\ &{=\\frac{(1-2)(2-1)\\mu_{1}+\\nu+1+2\\nu+1+2\\nu+3\\mu_{1}+\\nu+3\\nu-4\\mu_{1}}{\\operatorname{PeT}(a,b,a+z+1)-2\\nu+1+2\\nu+1}}\\\\ &{\\quad-\\frac{\\operatorname{PeSm}(a,b,a+z+1)-2\\nu+3\\mu_{1}+\\nu+3\\nu+7\\mu_{1}+\\nu+3\\nu+9\\mu_{1}+1}{\\operatorname{PeT}(a,b,a+z+1)-2\\nu+1+2\\nu+1+2\\nu+1}}\\\\ &{=\\beta\\cdot\\frac{(1-2)(1-3)\\mu_{1}-3\\nu+3\\nu-1+2\\nu+3\\mu_{1}+\\nu+3\\nu+3\\nu+5\\nu+3\\nu+\\nu+4\\nu+5\\nu-4\\mu_{1}+5\\nu-1+2\\nu+3\\nu+3\\nu+3\\nu+\\nu+3\\nu-1}{\\operatorname{PeT}(a,b+z+1)-2\\nu+1+2\\nu+1+2\\nu+1+2\\nu+1+2\\nu+1+2\\nu+1+2\\nu+1}}\\\\ &{\\quad-\\beta\\cdot\\frac{(1+2)^{2}-4\\nu+3\\left(\\sum_{l=1}^{\\nu}\\mu_{1}+\\nu+2\\nu+4\\nu_{1}+2\\mu_{1}+\\nu+4\\nu_{1}\\mu_{2}+\\nu+2\\nu+1\\right)+\\nu+1+2\\nu-1+6\\nu+3\\nu}{\\operatorname{PeT}(a,b,a+z+1)-2\\nu+1+2\\nu+1+2\\nu+1+2\\nu+1+2\\nu+1+2\\nu+1}}\\\\ &{=\\frac{(1-\\beta)(a+b+z)-2(1-3)\\mu_{1}-3\\nu+3\\nu+3\\nu-1+2\\nu+3\\nu+3\\nu+3\\nu+1-2\\nu+3\\nu+3\\nu+1}{\\operatorname{PeT}(a,b,a+z+1)-2\\nu+1+2\\nu+1+2\\nu+1+\n$$", "text_format": "latex", "page_idx": 30}, {"type": "text", "text": "Thus, the following inequality always holds: ", "page_idx": 30}, {"type": "equation", "text": "$$\n\\frac{\\mathsf{P F S U M}\\big(\\sigma;[\\tau_{k},\\tau_{k+x+1}+T)\\cup[\\mu_{j+x+1},\\mu_{j+x+y+1}+T)\\big)}{\\mathsf{O P T}\\big(\\sigma;[\\tau_{k},\\tau_{k+x+1}+T)\\cup[\\mu_{j+x+1},\\mu_{j+x+y+1}+T)\\big)}<\\frac{1}{\\beta}.\n$$", "text_format": "latex", "page_idx": 30}, {"type": "text", "text": "Case I. $0\\leq\\eta\\leq\\gamma$ . By Corollary 3.2, the $T$ -future-cost at $\\tau_{i+k}$ is at least $\\gamma$ , i.e., ", "page_idx": 30}, {"type": "equation", "text": "$$\n\\left\\{\\begin{array}{l l}{s_{-5}+s_{-4}\\geq\\gamma,}\\\\ {s_{-2}+s_{-1}\\geq\\gamma,}\\\\ {s_{4k+2}+s_{4k+3}+s_{4k+4}\\geq\\gamma\\quad\\mathrm{for}\\;\\mathrm{each}\\;k=0,...,x-1,}\\\\ {q_{4k+2}+q_{4k+3}+q_{4k+4}\\geq\\gamma\\quad\\mathrm{for}\\;\\mathrm{each}\\;k=0,...,y-1.}\\end{array}\\right.\n$$", "text_format": "latex", "page_idx": 30}, {"type": "text", "text": "By Lemma 4.2, we have ", "page_idx": 30}, {"type": "equation", "text": "$$\n\\left\\{\\begin{array}{l l}{s_{4k}+s_{4k+1}+s_{4k+2}\\geq\\gamma-\\eta}&{\\mathrm{for}\\;\\mathrm{each}\\;k=0,1,...,x.}\\\\ {q_{1}+q_{2}\\geq\\gamma-\\eta}\\\\ {q_{4y}+q_{4y+1}\\geq\\gamma-\\eta}\\\\ {q_{4k}+q_{4k+1}+q_{4k+2}\\geq\\gamma-\\eta}&{\\mathrm{for}\\;\\mathrm{each}\\;k=1,2,...,y-1.}\\end{array}\\right.\n$$", "text_format": "latex", "page_idx": 30}, {"type": "text", "text": "Note that for Pattern II, all the travel requests in the $(4k+2)$ -th( $\\mathrm{for}\\,k=0,...,x)$ and the $(4k+4)$ -th (for $k=-1,...,x-1)$ time intervals are reduced requests of both PFSUM and OPT, similar for Pattern VI. Thus, to maximize the cost ratio in $[\\tau_{k},\\tau_{k+x+1}+T)\\cup[\\mu_{j+x+1},\\mu_{j+x+y+1}+T)$ we ", "page_idx": 30}, {"type": "text", "text": "should minimize these $s_{4k+2}$ 's, $S_{4k+4}$ 's, $q_{4k+2}$ 's, and $q_{4k+4}$ 's. If they are greater than $\\gamma$ , the cost ratio can be increased by decreasing $s_{4k+2}$ or $s_{4k+4}$ to $\\gamma$ without violating (78) and (79). Thus, for the purpose of deriving an upper bound on the cost ratio, we can assume that ", "page_idx": 31}, {"type": "equation", "text": "$$\n\\left\\{\\begin{array}{l l}{s_{4k+2}\\leq\\gamma}&{\\mathrm{for~each~}k=0,...,x,}\\\\ {s_{4k+4}\\leq\\gamma}&{\\mathrm{for~each~}k=-1,...,x-1,}\\\\ {q_{4k+2}\\leq\\gamma}&{\\mathrm{for~each~}k=0,...,y-1,}\\\\ {q_{4k+4}\\leq\\gamma}&{\\mathrm{for~each~}k=0,...,y-1.}\\end{array}\\right.\n$$", "text_format": "latex", "page_idx": 31}, {"type": "text", "text": "It follows from (80) and Lemma 4.4 that, ", "page_idx": 31}, {"type": "equation", "text": "$$\n\\left\\{\\begin{array}{l l}{s_{-1}+s_{0}\\leq2\\gamma+\\eta,}\\\\ {s_{4x+2}+s_{4x+3}\\leq2\\gamma+\\eta,}\\\\ {\\theta_{k}=s_{4k+2}+s_{4k+3}+s_{4k+4}\\leq2\\gamma+\\eta\\quad\\mathrm{for}\\;\\mathrm{each}\\;k=0,...,x-1,}\\\\ {\\delta_{k}=q_{4k+2}+q_{4k+3}+q_{4k+4}\\leq2\\gamma+\\eta\\quad\\mathrm{for}\\;\\mathrm{each}\\;k=0,...,y-1.}\\end{array}\\right.\n$$", "text_format": "latex", "page_idx": 31}, {"type": "text", "text": "As a result, we have ", "text_level": 1, "page_idx": 31}, {"type": "text", "text": "$\\begin{array}{r l}&{\\frac{\\mathrm{PFSISIM}(\\sigma;[\\gamma_{k},\\gamma_{k+x+1}+\\gamma]\\;\\cup\\;[\\mu_{j+x+1},\\mu_{j+x+\\gamma+1}+\\gamma]}{\\mathrm{QPT}(\\sigma;[\\gamma_{k},\\gamma_{k+x+1}+\\gamma]\\;\\cup\\;[\\mu_{j+x+1},\\mu_{j+x+\\gamma+1}+\\gamma]}}\\\\ &{-\\frac{(x+1)C+s_{1}+s_{0}+s_{4}-s_{4}-s_{3}+s_{1}-s_{1}-s_{0}}{(x+2)C+\\beta\\left[s_{-1}+s_{0}+s_{4}+s_{1}+\\gamma_{-1}^{2}\\otimes\\mu_{k+1}-(1-\\beta)\\sum_{k=0}^{x}(s_{4}+s_{4k+1}+s_{2}-s_{1})\\right]}}\\\\ &{-\\frac{(x+1)C+s_{1}-s_{0}+s_{1}-s_{4}+s_{2}+s_{4x+3}+\\sum_{k=0}^{x-1}\\theta_{k}\\Big)+\\sum_{k=0}^{x}s_{4k+1}+y C+\\beta\\sum_{k=0}^{y-1}\\theta_{k}+\\sum_{l=0}^{x}s_{l}-}\\\\ &{+\\frac{(y+1)C+s_{1}-s_{0}+q u_{k+1}+\\sum_{k=0}^{y-1}\\theta_{k}-(1-\\beta)\\Big[q_{1}+q_{2}+q_{1}+q_{3}+q_{4y+1}+\\sum_{k=1}^{y-1}(q_{4}+q_{4k+1}+}\\\\ &{+\\frac{(x+2)C+\\beta\\left[s_{-1}+s_{0}+s_{4x+2}+s_{4x+3}+\\sum_{k=0}^{x-1}\\theta_{k}\\right]+\\sum_{k=0}^{x-1}s_{4k+1}+y C+\\beta\\sum_{k=0}^{y-1}\\theta_{k}+\\sum_{l=0}^{x-1}s_{l}-}\\\\ &{\\leq\\frac{(x+1)(1-\\beta)\\eta+s_{1}-s_{0}+s_{4x+2}+s_{4x+3}+\\sum_{k=0}^{x-1}s_{4k+1}+\\sum_{k=0}^{x-1}s_{4k+1}+\\sum_{k=0}^{x-1}\\theta_{k}}{(x+2)C+\\beta$ 1 + 84k+2) -0 4k+1 q4k+2) =0 94k+1 0 94+-1 =0 94k+1 (by(79)   \n$\\begin{array}{r l}&{\\leq\\frac{(x+1)(1-\\beta)\\eta+s-1+s_{0}+s_{4}+2+s_{4}+s_{3}+\\sum_{k=0}^{x-1}\\theta_{k}+(y+1)(1-\\beta)\\eta+\\sum_{k=0}^{y-1}\\theta_{k}}{(x+2)C+\\beta(s-1+s_{0}+s_{4}+s_{2}+s_{4}+s_{3}+\\sum_{k=0}^{x-1}\\theta_{k})+y C+\\beta\\sum_{k=0}^{y-1}\\theta_{k}}}\\\\ &{\\qquad\\qquad\\qquad\\qquad\\qquad\\qquad\\qquad\\qquad\\qquad\\qquad\\qquad\\qquad\\qquad(\\mathrm{since}\\,\\sum_{s=4+1}^{x}\\ge0,\\sum_{p=0}^{y-1}\\theta_{k+1}\\ge0)}\\\\ &{=\\frac{(x+y+2)(1-\\beta)\\eta+(s_{1}-1+s_{0}+s_{4}+s_{4}+2+s_{4}+s_{3}+\\sum_{k=0}^{x-1}\\theta_{k})+\\sum_{k=0}^{y-1}\\theta_{k}}{(x+y+2)C+\\beta\\left[s-1+s_{0}+s_{4}+2+s_{4}+s_{3}+\\sum_{k=0}^{x-1}\\theta_{k}\\right]+\\sum_{k=0}^{y-1}\\theta_{k}}}\\\\ &{\\leq\\frac{(x+y+2)(1-\\beta)\\eta+(x+y+2)(2\\gamma+\\eta)}{(x+y+2)C+\\beta(x+y+2)(2\\gamma+\\eta)}\\,\\,\\,\\,(\\mathrm{by}\\,(77)\\,\\mathrm{and}\\,\\,\\mathrm{\\&})}\\\\ &{=\\frac{(1-\\beta)\\eta+2\\gamma+\\eta}{(p+2)(\\gamma+\\eta)}}\\\\ &{=\\frac{2\\gamma}{(1+\\beta)(-\\eta)\\eta}}\\\\ &{=\\frac{2\\gamma}{(1+\\beta)(-\\eta)\\eta}}\\end{array}$ ", "page_idx": 31}, {"type": "text", "text": "Case II. $\\eta\\:>\\:\\gamma$ .By Lemma 4.3, for Pattern II, the total regular cost in the $(4k+3)$ -th (for $k=-1,...,x)$ time interval (which is in an off phase and has length at most $T$ ) is less than $2\\gamma+\\eta$ similar for Pattern VI. Thus we have ", "page_idx": 31}, {"type": "equation", "text": "$$\n\\left\\{\\begin{array}{l l}{{s_{4k+3}<2\\gamma+\\eta}}&{{\\mathrm{for}\\;\\mathrm{each}\\;k=-1,...,x,}}\\\\ {{q_{4k+3}<2\\gamma+\\eta}}&{{\\mathrm{for}\\;\\mathrm{each}\\;k=0,1,...,y-1.}}\\end{array}\\right.\n$$", "text_format": "latex", "page_idx": 31}, {"type": "text", "text": "On the other hand, the total regular cost in any time interval in an on phase is non-negative, so it can be minimized to zero. As a result, we have ", "page_idx": 32}, {"type": "equation", "text": "$$\n\\begin{array}{r l}&{\\frac{\\mathrm{PFSUM}\\left(\\sigma;[\\tau_{k},\\tau_{k+x+1}+T)\\;\\cup\\;[\\mu_{j+x+1},\\mu_{j+x+y+1}+T)\\right)}{\\mathrm{OPT}\\left(\\sigma;[\\tau_{k},\\tau_{k+x+1}+T)\\;\\cup\\;[\\mu_{j+x+1},\\mu_{j+x+y+1}+T)\\right)}}\\\\ &{\\quad\\le\\frac{(x+1)C}{(x+2)C}+\\sum_{k=-1}^{x}s_{4k+3}+(y+1)C+\\sum_{k=0}^{y-1}q_{4k+3}}\\\\ &{\\quad<\\frac{(x+1)C+(x+2)(2\\gamma+\\eta)+(y+1)C+y(2\\gamma+\\eta)}{(x+2)C+\\beta(x+2)(2\\gamma+\\eta)+\\tau C+\\eta)}\\;\\;\\mathrm{~(by~(77)~and~}}\\\\ &{\\quad=\\frac{(x+y+2)C+(x+y+2)(2\\gamma+\\eta)}{(x+y+2)C+\\beta(x+y+2)(2\\gamma+\\eta)}}\\\\ &{\\quad=\\frac{(3-\\beta)\\gamma+\\eta}{(1+\\beta)\\gamma+\\beta\\eta}}\\end{array}\n$$", "text_format": "latex", "page_idx": 32}, {"type": "text", "text": "The result follows from (82) and (84). ", "page_idx": 32}, {"type": "text", "text": "A.7Proof of Proposition 4.10 ", "text_level": 1, "page_idx": 32}, {"type": "text", "text": "A.7.1 Non-Augmented Pattern VI Combined with Pattern I ", "text_level": 1, "page_idx": 32}, {"type": "text", "text": "Proposition Restated. If (i) OPT purchases a Bahncard at time $\\tau_{k}$ at the beginning of $E_{l}$ , i.e., $\\tau_{k}=\\mu_{l}$ , (i) there is no Bahncard purchased by OPT expiring in the on phase of $E_{j}$ $(l<j)$ , (ii) OPT purchases $x$ Bahncards $\\left[x\\geq1\\right]$ in successive on phases starting from $E_{j}$ , where for each $k=0,...,x-1$ , the $(k+1)$ -th Bahncard has its purchasing time $\\tau_{i+k}$ falling in the on phase of $E_{j+k}$ and its expiry time $\\tau_{i+k}+T$ falling in the on phase of $E_{j+k+1}$ , and (iv) OPT does not purchase any new Bahncard in the on phase of $E_{j+x}$ , then ", "page_idx": 32}, {"type": "equation", "text": "$$\n\\frac{\\mathsf{P F S U M}\\big(\\sigma;[\\tau_{k},\\tau_{k}+T)\\cup[\\mu_{j},\\mu_{j+x}+T)\\big)}{\\mathsf{O P T}\\big(\\sigma;[\\tau_{k},\\tau_{k}+T)\\cup[\\mu_{j},\\mu_{j+x}+T)\\big)}\\leq\\left\\{\\begin{array}{l l}{\\frac{2\\gamma+(2-\\beta)\\eta}{(1+\\beta)\\gamma+\\beta\\eta}}&{0\\leq\\eta\\leq\\gamma,}\\\\ {\\frac{(3-\\beta)\\gamma+\\eta}{(1+\\beta)\\gamma+\\beta\\eta}}&{\\eta>\\gamma,}\\end{array}\\right.\n$$", "text_format": "latex", "page_idx": 32}, {"type": "text", "text": "where the upper bound is irrelevant with $x$ ", "page_idx": 32}, {"type": "text", "text": "Proof. As shown in Figure 23, we divide $[\\tau_{k},\\tau_{k}+T)\\cup[\\mu_{j},\\mu_{j+x}+T)$ into $4x+2$ time intervals, where each time interval starts and ends with the time when OPT or PFSUM purchases a Bahncard or a Bahncard purchased by OPT or PFSUM expires. Let these intervals be indexed by $-1,1,...,4x{+}1$ and let $s_{-1},s_{1},...,s_{4x+1}$ denote the total regular costs in these intervals respectively. By definition, it is easy to see that for each $k=0,...,x-1$ , the $(4k+3)$ -th time interval, i.e., $[\\mu_{j+k}+T,\\mu_{j+k+1})$ (which is an off phase), is shorter than $T$ since it is within the valid time of a Bahncard purchased by OPT. ", "page_idx": 32}, {"type": "image", "img_path": "3cb6pF3Tvf/tmp/d345941084064cd83753e1aaab5d7589a6becae4d08db300a46906e490a2d612.jpg", "img_caption": [], "img_footnote": [], "page_idx": 32}, {"type": "text", "text": "Figure 23: Mllustration for Appendix A.7.1. The shaded rectangle is the valid time of a Bahncard purchased by OPT. ", "page_idx": 32}, {"type": "text", "text": "First, we observe that the cost ratio PFSL ${\\sf M}\\big({\\sigma};[\\tau_{k},\\tau_{k}+T)\\cup[\\mu_{j},\\mu_{j+x}+T)\\big)/{\\sf O P T}\\big({\\sigma};[\\tau_{k},\\tau_{k}+$ $T)\\cup[\\mu_{j},\\mu_{j+x}+T))$ is less than $1/\\beta$ , as shown below: ", "page_idx": 32}, {"type": "equation", "text": "$$\n\\frac{1}{\\beta}-\\frac{\\mathsf{P F S U M}\\big(\\sigma;[\\tau_{k},\\tau_{k}+T)\\cup[\\mu_{j},\\mu_{j+x}+T)\\big)}{\\mathsf{O P T}\\big(\\sigma;[\\tau_{k},\\tau_{k}+T)\\cup[\\mu_{j},\\mu_{j+x}+T)\\big)}\n$$", "text_format": "latex", "page_idx": 32}, {"type": "equation", "text": "$$\n\\begin{array}{r l}&{\\quad=\\frac{(x+1)C+\\beta\\Big[s-1+\\sum_{k=0}^{x-1}(s_{4k+2}+s_{4k+3}+s_{4k+4})\\Big]+\\sum_{k=0}^{x}s_{4k+1}}{\\beta\\cdot\\mathsf{O P T}(\\sigma;[r_{k},r_{k}+T)\\cup[\\mu_{j},\\mu_{j+x}+T)))}}\\\\ &{\\quad=\\frac{\\beta\\Big[(x+2)C+\\beta\\Big[s-1+\\sum_{k=0}^{x-1}(s_{4k+1}+s_{4k+2}+s_{4k+4})+s_{4k+1}\\Big]+\\sum_{k=0}^{x-1}s_{4k+3}\\Big]}{\\beta\\cdot\\mathsf{O P T}(\\sigma;[r_{k},r_{k}+T)\\cup[\\mu_{j},\\mu_{j+x}+T))\\Big]}}\\\\ &{\\quad=\\frac{(1-\\beta)(x+1)C-\\beta C+\\beta(1-\\beta)\\Big[s-1+\\sum_{k=0}^{x-1}(s_{4k+2}+s_{4k+4})\\Big]+(1-\\beta^{2})\\sum_{k=0}^{x}s_{4k+1}}{\\beta\\cdot\\mathsf{O P T}(\\sigma;[r_{k},r_{k}+T)\\cup[\\mu_{j},\\mu_{j+x}+T))}}\\\\ &{\\quad\\ge\\frac{(1-\\beta)(x+1)C+\\beta(1-\\beta)\\Big[\\sum_{k=0}^{x-1}(s_{4k+2}+s_{4k+4})\\Big]+(1-\\beta^{2})\\sum_{k=0}^{x}s_{4k+1}}{\\beta\\cdot\\mathsf{O P T}(\\sigma;[r_{k},r_{k}+T)\\cup[\\mu_{j},\\mu_{j+x}+T))}}\\\\ &{\\quad=\\frac{(1-\\beta)(x+1)C+\\beta(1-\\beta)\\Big[\\sum_{k=0}^{x-1}(s_{4k+2}+s_{4k+4})\\Big]+(1-\\beta^{2})\\sum_{k=0}^{x}s_{4k+1}}{\\beta\\cdot\\mathsf{O P T}(\\sigma;[r_{k},r_{k}+T)\\cup[\\mu_{j},\\mu_{j+x}+T))}\\quad(\\mathrm{since~}s_{-1}\\ge}\\end{array}\n$$", "text_format": "latex", "page_idx": 33}, {"type": "text", "text": "> 0. (since 0\u2264\u03b2< 1) ", "page_idx": 33}, {"type": "text", "text": "Thus, the following inequality always holds: ", "page_idx": 33}, {"type": "equation", "text": "$$\n\\frac{\\mathsf{P F S U M}(\\sigma;[\\tau_{k},\\tau_{k}+T)\\cup[\\mu_{j},\\mu_{j+x}+T))}{\\mathsf{O P T}(\\sigma;[\\tau_{k},\\tau_{k}+T)\\cup[\\mu_{j},\\mu_{j+x}+T))}<\\frac{1}{\\beta}.\n$$", "text_format": "latex", "page_idx": 33}, {"type": "text", "text": "There are two cases to consider. ", "page_idx": 33}, {"type": "text", "text": "Case I. $0\\leq\\eta\\leq\\gamma$ .By Corollary 3.2, for each $k=0,...,x-1$ , the $T$ -future-cost at $\\tau_{i+k}$ is at least $\\gamma$ ,i.e., ", "page_idx": 33}, {"type": "equation", "text": "$$\ns_{4k+2}+s_{4k+3}+s_{4k+4}\\geq\\gamma.\n$$", "text_format": "latex", "page_idx": 33}, {"type": "text", "text": "By Lemma 4.2, we have ", "page_idx": 33}, {"type": "equation", "text": "$$\n\\left\\{\\begin{array}{l l}{s_{-1}\\geq\\gamma,}\\\\ {s_{1}+s_{2}\\geq\\gamma-\\eta,}\\\\ {s_{4k}+s_{4k+1}+s_{4k+2}\\geq\\gamma-\\eta\\quad\\mathrm{for}\\;\\mathrm{each}\\;k=1,...,x-1,}\\\\ {s_{4x}+s_{4x+1}\\geq\\gamma-\\eta.}\\end{array}\\right.\n$$", "text_format": "latex", "page_idx": 33}, {"type": "text", "text": "Note that for each $k=0,...,x-1$ , all the travel requests in the $(4k+2)$ -th and the $(4k+4)$ -th time intervals are reduced requests of both PFSUM and OPT. Thus, to maximize the cost ratio in $[\\tau_{k},\\tau_{k}+T)\\cup[\\mu_{j},\\mu_{j+x}+T)$ , we should minimize $s_{4k+2}$ and $s_{4k+4}$ . If they are greater than $\\gamma$ the cost ratio can be increased by decreasing $s_{4k+2}$ or $s_{4k+4}$ to $\\gamma$ without violating (87) and (88). Thus, for the purpose of deriving an upper bound on the cost ratio, we can assume that ", "page_idx": 33}, {"type": "equation", "text": "$$\n\\begin{array}{r l r}&{}&{s_{4k+2}\\leq\\gamma,}\\\\ &{}&{s_{4k+4}\\leq\\gamma.}\\end{array}\n$$", "text_format": "latex", "page_idx": 33}, {"type": "text", "text": "It follows from (89), (90) and Lemma 4.4 that, for each $k=0,...,x-1$ ", "page_idx": 33}, {"type": "equation", "text": "$$\ns_{4k+2}+s_{4k+3}+s_{4k+4}\\leq2\\gamma+\\eta.\n$$", "text_format": "latex", "page_idx": 33}, {"type": "text", "text": "As a result, we have ", "page_idx": 33}, {"type": "equation", "text": "$$\n\\begin{array}{r l}&{\\frac{\\mathsf{P F S U M}\\left(\\sigma;\\,[\\tau_{k},\\,\\tau_{k}+T)\\cup\\,[\\mu_{j},\\,\\mu_{j+x}+T)\\right)}{\\mathsf{O P T}\\left(\\sigma;\\,[\\tau_{k},\\,\\tau_{k}+T)\\cup\\,[\\mu_{j},\\,\\mu_{j+x}+T)\\right)}}\\\\ &{=\\frac{(x+2)C+\\beta\\left[s-1+\\sum_{k=0}^{x-1}\\left(s_{4k+1}+s_{4k+2}+s_{4k+4}\\right)+s_{4x+1}\\right]+\\sum_{k=0}^{x-1}s_{4k+3}}{(x+1)C+\\beta\\left[s-1+\\sum_{k=0}^{x-1}\\left(s_{4k+2}+s_{4k+3}+s_{4k+4}\\right)\\right]+\\sum_{k=0}^{x}s_{4k+1}}}\\\\ &{\\leq\\frac{(x+2)C+\\beta\\left[\\gamma+\\sum_{k=0}^{x-1}\\left(s_{4k+1}+s_{4k+2}+s_{4k+4}\\right)+s_{4x+1}\\right]+\\sum_{k=0}^{x-1}s_{4k+3}}{(x+1)C+\\beta\\left[\\gamma+\\sum_{k=0}^{x-1}\\left(s_{4k+2}+s_{4k+3}+s_{4k+4}\\right)\\right]+\\sum_{k=0}^{x-0}s_{4k+1}}\\quad\\mathrm{(b)}.}\\end{array}\n$$", "text_format": "latex", "page_idx": 33}, {"type": "equation", "text": "$$\n\\begin{array}{r l}&{\\begin{array}{r l}&{=\\frac{(x+2)C^{-4}+\\hat{y}+\\hat{y}+\\hat{z}+\\frac{z}{2}\\kappa_{4}+1+\\hat{z}+\\sqrt{\\kappa_{4}+1}}{(z+1)C+\\hat{z}+\\hat{z}+\\kappa_{4}}+\\frac{1-\\kappa_{4}}{4}\\kappa_{4}+\\kappa_{4}+\\kappa_{5}+\\kappa_{6}+\\kappa_{1}}\\end{array}-\\mathrm{i}-\\mathrm{i}-\\mathrm{i}-\\mathrm{i}\\frac{D(z+\\kappa_{5})C-\\hat{z}+\\kappa_{6}}{2}}\\\\ &{\\leq\\frac{(x+2)C^{-4}+\\hat{y}+\\hat{z}+\\hat{z}+\\hat{z}+\\hat{z}}{2},}\\\\ &{\\leq\\frac{(x+2)C^{-4}+\\hat{y}+\\hat{z}+\\hat{z}+\\hat{z}+\\hat{z}+(z+\\hat{z})\\kappa_{5}}{(z+1)C+\\hat{z}+\\hat{z}+\\hat{z}+\\hat{z}+\\hat{z}+\\hat{z}+\\hat{z}+\\hat{z}+\\hat{z}+\\hat{z}}\\\\ &{+\\frac{D(z+\\kappa_{5})C+\\hat{z}+\\hat{z}+(z+\\kappa_{6})C+\\hat{z}+1+\\hat{z}+\\hat{z}+\\hat{z}+\\hat{z}+\\hat{z}+\\kappa_{7}}{(z+1)C+\\hat{z}+\\hat{z}+\\hat{z}+\\hat{z}+\\hat{z}+\\hat{z}+\\hat{z}}\\\\ &{=\\frac{(x+2)C^{-4}+\\hat{y}+\\hat{z}+\\hat{z}+\\hat{z}+\\hat{z}+\\hat{z}+\\hat{z}+\\hat{z}+\\hat{z}+\\hat{z}}{(z+1)C+\\hat{z}+\\hat{z}+\\hat{z}+\\hat{z}+\\hat{z}+\\hat{z}+\\hat{z}+\\hat{z}+\\hat{z}+\\hat{z}+\\hat{z}}\\\\ &{-\\frac{(x+2)C^{-4}+\\hat{y}+\\hat{z}+\\hat{z}+\\hat{z}+\\hat{z}+\\hat{z}+\\hat{z}+\\hat{z}+\\hat{z}+\\hat{z}+\\hat{z}+\\hat{z}}\\\\ &{=\\frac{(x+2)C^{-4}+\\hat{y}+\\hat{z}-\\hat{z}+\\hat{z}+\\hat{z}+\\hat{z}+\\hat{z}+\\hat{z}+\\hat{z}}\\\\ &{-\\frac{(x-2)\\left(\\hat{z \n$$", "text_format": "latex", "page_idx": 34}, {"type": "text", "text": "Case II. $\\eta>\\gamma$ . By Lemma 4.3, for each $k=0,...,x-1$ , the total regular cost in the $(4k+3)$ -th time interval (which is in an off phase and has length at most $T$ ) is less than $2\\gamma+\\eta$ ", "page_idx": 34}, {"type": "equation", "text": "$$\ns_{4k+3}<2\\gamma+\\eta.\n$$", "text_format": "latex", "page_idx": 34}, {"type": "text", "text": "On the other hand, the total regular cost in any time interval in an on phase is non-negative, except for $s_{-1}$ , which is at least $\\gamma$ ", "page_idx": 34}, {"type": "equation", "text": "$$\ns_{-1}\\geq\\gamma.\n$$", "text_format": "latex", "page_idx": 34}, {"type": "text", "text": "As a result, we have ", "page_idx": 34}, {"type": "equation", "text": "$$\n\\begin{array}{r l}{\\frac{\\mathsf{P F S U M}\\left(\\sigma;\\left[\\tau_{k},\\tau_{k}+T\\right)\\cup\\left[\\mu_{j},\\mu_{j+x}+T\\right)\\right)}{\\mathsf{O P T}\\left(\\sigma;\\left[\\tau_{k},\\tau_{k}+T\\right)\\cup\\left[\\mu_{j},\\mu_{j+x}+T\\right)\\right)}<\\frac{(x+2)C+\\beta\\gamma+x(2\\gamma+\\eta)}{(x+1)C+\\beta(\\gamma+x(2\\gamma+\\eta))}}&{}\\\\ {(\\mathrm{by}\\left(86\\right),\\left(93\\right),\\mathrm{and}\\left(\\sigma;\\left[\\tau_{k}+\\sigma_{k}+T\\right]\\right))}&{\\quad}\\\\ {=\\frac{x\\left(C+2\\gamma+\\eta\\right)+\\left(C+\\gamma\\right)}{x\\left(C+\\beta(2\\gamma+\\eta)\\right)+\\gamma}}&{}\\\\ {\\leq\\frac{(3-\\beta)\\gamma+\\eta}{(1+\\beta)\\gamma+\\beta\\eta}.}&{\\mathrm{(since~}x\\geq1\\mathrm{)}}\\end{array}\n$$", "text_format": "latex", "page_idx": 34}, {"type": "text", "text": "The result follows from (92) and (95). ", "page_idx": 34}, {"type": "text", "text": "A.7.2 Non-Augmented Pattern VI Combined with Pattern IV ", "text_level": 1, "page_idx": 34}, {"type": "text", "text": "Proposition Restated. If OPT purchases $x+1$ Bahncards $(x\\geq0)$ ) starting from the off phase of $E_{l-1}$ , where (i) the first Bahncard has its purchase time $\\tau_{k}$ falling in the off phase of $E_{l-1}$ and its expiry time $\\tau_{k}+T$ falling in the on phase of $E_{l}$ , (ii) for each $p=1,...,x$ , the $(p+1)$ -th Bahncard has its purchase time $\\tau_{k+p}$ falling in the on phase of $E_{l+p-1}$ and its expiry time $\\tau_{k+p}+T$ falling in the on phase of $E_{l+p}$ , and for some $j\\geq l$ and $i\\geq k$ , OPT purchases $y$ Bahncards $(y\\geq0,$ in successive on phases starting from $E_{j+x+1}$ , where for each $p=0,...,y-1$ , the $(p+1)$ -th Bahncard has its purchasing time $\\tau_{i+x+p+1}$ falling in the on phase of $E_{j+x+p+1}$ and its expiry time $\\tau_{i+x+p+1}+T$ falling in the on phase of $E_{j+x+p+2}$ , and $(v)$ OPT does not purchase any new Bahncard in the on phase of $E_{j+x+y+1}$ , then ", "page_idx": 34}, {"type": "text", "text": "", "page_idx": 35}, {"type": "equation", "text": "$$\n\\frac{\\mathsf{P F S U M}\\big(\\sigma;[\\tau_{k},\\mu_{l+x+1})\\cup[\\mu_{j+x+1},\\mu_{j+x+y+1}+T)\\big)}{\\mathsf{O P T}\\big(\\sigma;[\\tau_{k},\\mu_{l+x}+T)\\cup[\\mu_{j+x+1},\\mu_{j+x+y+1}+T)\\big)}\\leq\\left\\{\\begin{array}{l l}{\\frac{2\\gamma+(2-\\beta)\\eta}{(1+\\beta)\\gamma+\\beta\\eta}}&{0\\leq\\eta\\leq\\gamma,}\\\\ {\\frac{(3-\\beta)\\gamma+\\eta}{(1+\\beta)\\gamma+\\beta\\eta}}&{\\eta>\\gamma,}\\end{array}\\right.\n$$", "text_format": "latex", "page_idx": 35}, {"type": "text", "text": "where the upper bound is tight (achievable) for any $x$ ", "page_idx": 35}, {"type": "text", "text": "Proof. As shown in Figure 24, we divide $[\\tau_{k},\\mu_{l+x+1})\\cup[\\mu_{j+x+1},\\mu_{j+x+y+1}+T)$ into $4(x+y)+5$ time intervals, where each time intervals starts and ends with the time when OPT or PFSUM purchases a Bahncard or a Bahncard purchased by OPT or PFSUM expires. The first $4x+3$ time intervals, from time $\\tau_{i}$ to $\\mu_{j+x}+T$ , are concerned time duration of Pattern IV. The $(4x+4)$ -th interval is the off phase $[\\mu_{l+x}+T,\\mu_{l+x+1})$ . The total regular costs in these time intervals are denoted by $s_{-1},s_{0},s_{1},...,s_{4x+1},s_{4x+2}$ , respectively. $[\\mu_{j+x+1},\\mu_{j+x+y+1}+T]$ is the concerned interval of Pattern VI, which is divided into $4y+1$ time intervals. The total regular costs in these intervals are denoted by $q_{1},...,q_{4y+1}$ , respectively. ", "page_idx": 35}, {"type": "image", "img_path": "3cb6pF3Tvf/tmp/d9a1f55fc4a539a8a8d8e2c4f3ac8c5ebc01742a32a7fd78d38d4e0cb612e58f.jpg", "img_caption": ["Figure 24: Illustration for Appendix A.7.2. The shaded rectangle is the valid time of a Bahncard purchased by OPT. "], "img_footnote": [], "page_idx": 35}, {"type": "text", "text": "According to Proposition 4.10. In IV of (9), the total cost of travel requests in the last on phase of Pattern IV and the following off phase is at least $\\gamma$ Thuswehave ", "page_idx": 35}, {"type": "equation", "text": "$$\nc(\\sigma;[\\mu_{l+x},\\mu_{l+x+1})=s_{4x}+s_{4x+1}+s_{4x+2}\\geq\\gamma\n$$", "text_format": "latex", "page_idx": 35}, {"type": "text", "text": "First, we observe that the cost ratio $\\mathsf{P F S U M}(\\sigma;[\\tau_{k},\\mu_{l+x+1})\\;\\cup\\;[\\mu_{j+x+1},\\mu_{j+x+y+1}\\;+\\;$ $T)/{\\cal O}\\mathsf{P}\\mathsf{T}\\big(\\sigma;[\\tau_{k},\\mu_{l+x+1})\\cup[\\mu_{j+x+1},\\mu_{j+x+y+1}+T)\\big)$ is less than $1/\\beta$ as shown below: ", "page_idx": 35}, {"type": "equation", "text": "$$\n\\begin{array}{r l}&{\\mathbb{E}\\{\\sum_{j=0}^{R\\leq M(d_{j}\\setminus[r_{j},\\hat{m}_{i},\\hat{m}_{j}+\\hat{t}_{i},\\hat{m}_{j}+\\hat{t}_{i},\\hat{m}_{j}+\\hat{t}_{i}])}+\\mathbb{E}\\}}\\\\ &{:=\\frac{\\left(1+1\\right)C\\cdot\\delta\\left(\\frac{1}{2}\\sqrt{r_{j}(\\hat{\\tau}_{1},\\hat{m}_{i}+1)}+\\frac{\\eta}{2}\\sqrt{\\theta_{1}+\\hat{t}_{i}+\\hat{t}_{i}+\\hat{t}_{i}}+1\\right)+\\sum_{l=0}^{K}\\mu_{l}+\\eta_{l}+\\frac{1}{2}\\sum_{l=0}^{K}\\mu_{l+1}+\\mu_{l+1}}\\\\ &{=\\frac{\\left(1+1\\right)C\\cdot\\delta\\left(\\frac{1}{2}\\sqrt{r_{j}(\\hat{\\tau}_{1},\\hat{m}_{j}+1)}+\\frac{\\eta}{2}\\sqrt{\\theta_{1}+\\hat{t}_{i}+\\hat{t}_{i}+\\hat{t}_{i}}+1\\right)+\\sum_{l=0}^{K}\\mu_{l+1}+\\frac{1}{2}}\\\\ &{+\\frac{3C^{2}}{2}\\frac{\\left(1-1\\right)C^{2}\\left(1\\right)C^{2}\\left(1+1\\right)C^{4}\\left(1+1\\right)C^{4}\\left(1+1\\right)C^{2}\\left(1+1\\right)C^{2}}{\\theta_{1}+\\left(1+1\\right)C\\left(1+1\\right)C^{4}\\left(1+1\\right)C^{2}}}\\\\ &{-\\beta\\cdot\\frac{\\left(\\alpha+1\\right)C\\cdot\\delta\\left(\\frac{1}{2}\\sqrt{r_{j}(\\hat{\\tau}_{1},\\hat{m}_{j}+1)}+\\left(\\mu_{1}+\\eta_{2}+\\frac{1}{2}\\right)+\\left(\\alpha+\\frac{\\eta}{2}\\sqrt{\\theta_{1}+\\hat{t}_{i}+\\hat{t}_{i}}\\right)+\\sum_{l=-1}^{K-1}\\delta\\left(\\alpha+\\frac{1}{2}\\right)}{\\beta\\cdot\\big[\\left(\\eta\\tau_{l}\\left(\\hat{\\tau}_{1},\\hat{\\tau}_{1},\\hat{m}_{l}+1\\right)+1\\right)\\left(\\eta\\hat{\\tau}_{l+1}+1\\right)+\\frac{\\eta}{2}\\sqrt{\\theta_ \n$$", "text_format": "latex", "page_idx": 35}, {"type": "equation", "text": "$$\n\\begin{array}{r l}&{\\geq\\frac{\\big[(x+y)\\big(1-\\beta\\big)+\\big(1-2\\beta\\big)\\big]C+\\beta\\big(1-\\beta\\big)s_{4x}+(1-\\beta^{2})s_{4x+1}+(1-\\beta)s_{4x+2}}{\\beta\\cdot\\big[\\big(\\alpha\\cdot\\big[\\gamma_{k},\\mu_{k+x+1}\\big)\\cup\\big[\\mu_{j+x+1},\\mu_{j+x+1}+\\Gamma\\big]\\big)}}\\\\ &{\\geq\\frac{\\big[(x+y)\\big(1-\\beta\\big)+\\big(1-2\\beta\\big)\\big]C+\\beta\\big(1-\\beta\\big)\\big(s_{4x}+s_{4x+1}+s_{4x+2}\\big)}{\\beta\\cdot\\big[\\big(\\alpha\\cdot\\big[r_{k},\\mu_{k+x+1}\\big)\\cup\\big[\\mu_{j+x+1},\\mu_{j+x+1}+\\Gamma\\big]\\big)\\big]}\\qquad\\mathrm{(since~}0\\leq\\beta<1\\big)}\\\\ &{\\geq\\frac{\\big[(x+y)\\big(1-\\beta)+\\big(1-2\\beta\\big)\\big]C+\\beta\\big(1-\\beta\\big)\\gamma}{\\beta\\cdot\\big[\\big(\\alpha\\cdot\\big[r_{k},\\mu_{k+x+1}\\big)\\cup\\big[\\mu_{j+x+1},\\mu_{j+x+1}+\\Gamma\\big]\\big)\\big]}\\qquad\\mathrm{(by~(97))}}\\\\ &{=\\frac{\\big[(x+y)\\big(1-\\beta)+\\big(1-\\beta\\big)\\big]C}{\\beta\\cdot\\big[\\big(\\alpha\\cdot\\big[r_{k},\\mu_{k+x+1}\\big)\\cup\\big[\\mu_{j+x+1},\\mu_{j+x+\\nu+1}+\\Gamma\\big)\\big)\\big]}}\\\\ &{>0\\cdot\\big[\\mathrm{since~}0\\leq1,C>0\\big]}\\end{array}\n$$", "text_format": "latex", "page_idx": 36}, {"type": "text", "text": "Thus, the following inequality always holds ", "page_idx": 36}, {"type": "equation", "text": "$$\n\\frac{\\mathsf{P F S U M}\\big(\\sigma;[\\tau_{k},\\mu_{l+x+1})\\cup[\\mu_{j+x+1},\\mu_{j+x+y+1}+T)\\big)}{\\mathsf{O P T}\\big(\\sigma;[\\tau_{k},\\mu_{l+x+1})\\cup[\\mu_{j+x+1},\\mu_{j+x+y+1}+T)\\big)}<\\frac{1}{\\beta}\n$$", "text_format": "latex", "page_idx": 36}, {"type": "text", "text": "Case I. $0\\leq\\eta\\leq\\gamma$ .By Corollary 3.2, the $T$ -future-cost at $\\tau_{i+k+1}$ is at least $\\gamma$ i.e., ", "page_idx": 36}, {"type": "equation", "text": "$$\n\\left\\{\\begin{array}{l l}{s_{-1}+s_{0}\\geq\\gamma,}\\\\ {s_{4k+2}+s_{4k+3}+s_{4k+4}\\geq\\gamma}&{\\mathrm{for}\\;\\mathrm{each}\\;k=0,...,x-1,}\\\\ {q_{4k+2}+q_{4k+3}+q_{4k+4}\\geq\\gamma}&{\\mathrm{for}\\;\\mathrm{each}\\;k=0,...,y-1.}\\end{array}\\right.\n$$", "text_format": "latex", "page_idx": 36}, {"type": "text", "text": "By Lemma 4.2, we have ", "page_idx": 36}, {"type": "equation", "text": "$$\n\\left\\{\\begin{array}{l l}{s_{4k}+s_{4k+1}+s_{4k+2}\\geq\\gamma-\\eta}&{\\mathrm{for}\\;\\mathrm{each}\\;k=0,...,x-1,}\\\\ {s_{4x}+s_{4x+1}\\geq\\gamma-\\eta.}\\\\ {q_{1}+q_{2}\\geq\\gamma-\\eta,}\\\\ {q_{4k}+q_{4k+1}+q_{4k+2}\\geq\\gamma-\\eta}&{\\mathrm{for}\\;\\mathrm{each}\\;k=1,...,y-1,}\\\\ {q_{4y}+q_{4y+1}\\geq\\gamma-\\eta.}\\end{array}\\right.\n$$", "text_format": "latex", "page_idx": 36}, {"type": "text", "text": "Note that for Pattern IV, all the travel requests in the $(4k+2)$ -th and the $(4k+4)$ -th (fc ${\\mathfrak{r}}\\,k=0,...,x{-}1)$ time intervals are reduced requests of both PFSUM and $\\mathsf{O P T}$ , similar for Pattern VI. Thus, to maximize the cost ratio in $[\\tau_{k},\\mu_{l+x}+T)\\cup[\\mu_{j+x+1},\\mu_{j+x+y+1}+T)$ we should minimize these $s_{4k+2}$ 's and $s_{4k+4}$ 's. If they are greater than $\\gamma$ , the cost ratio can be increased by decreasing $s_{4k+2}$ or $s_{4k+4}$ to $\\gamma$ without violating (99) and (100). Thus, for the purpose of deriving an upper bound on the cost ratio, we can assume that ", "page_idx": 36}, {"type": "equation", "text": "$$\n\\left\\{\\begin{array}{l l}{s_{4k+2}\\leq\\gamma}&{\\mathrm{for~each~}k=0,...,x,}\\\\ {s_{4k+4}\\leq\\gamma}&{\\mathrm{for~each~}k=-1,...,x-1,}\\\\ {q_{4k+2}\\leq\\gamma}&{\\mathrm{for~each~}k=0,...,y-1,}\\\\ {q_{4k+4}\\leq\\gamma}&{\\mathrm{for~each~}k=0,...,y-1.}\\end{array}\\right.\n$$", "text_format": "latex", "page_idx": 36}, {"type": "text", "text": "It follows from (101) and Lemma 4.4 that, ", "page_idx": 36}, {"type": "equation", "text": "$$\n\\left\\{\\begin{array}{l l}{s_{-1}+s_{0}\\leq2\\gamma+\\eta}\\\\ {s_{4k+2}+s_{4k+3}+s_{4k+4}\\leq2\\gamma+\\eta}&{\\mathrm{for}\\;\\mathrm{each}\\;k=0,...,x-1,}\\\\ {q_{4k+2}+q_{4k+3}+q_{4k+4}\\leq2\\gamma+\\eta}&{\\mathrm{for}\\;\\mathrm{each}\\;k=0,...,y-1}\\end{array}\\right.\n$$", "text_format": "latex", "page_idx": 36}, {"type": "text", "text": "As a result, we have ", "page_idx": 36}, {"type": "text", "text": "$\\begin{array}{r l}&{\\frac{3\\mathsf{F S E}(5|\\mathcal{H}_{1}\\cap\\mathcal{H}_{4+x+1})\\cup\\left[\\mathcal{H}_{j}\\neq\\alpha+1,\\mu_{j+x+y+1}+T\\right)}{\\mathsf{O P T}\\left\\{\\mathcal{F}_{j},\\mu_{k},\\mu_{k+x+1}\\right\\}\\cup\\left[\\mu_{j+x+1},\\mu_{j+x+y+1}+T\\right)}}\\\\ &{=\\frac{(x+1)C+(s-1)\\,s(\\mu_{k})+\\sum_{k=0}^{x-1}\\beta_{k}+\\beta\\sum_{k=0}^{x}s_{4k+1}+s_{4k+2}-(1-\\beta)\\left[\\sum_{k=0}^{x-1}\\delta_{k}+s_{4k+2}\\right]\\cdot}{{\\cal E}(s+1)\\,C+\\beta(s-1+s_{4k+3})+{\\cal E}(s+1)\\,s(\\mu_{k+x+3})}}\\\\ &{=\\frac{(x+1)C+\\,(s)\\,(s-1+s_{0})+\\sum_{k=0}^{x-1}\\beta_{k}}{(x+1)C+\\,\\beta(s-1+s_{0})+\\,k}+\\sum_{k=0}^{x-1}s_{4k+1}+s_{4k+2}+y C+\\beta\\sum_{k=0}^{y-1}\\delta_{k}+\\sum_{k=0}^{x-1}\\theta_{4k+1}}\\\\ &{\\quad+\\,\\frac{(y+1)C+\\,\\sum_{k=0}^{x-1}\\theta_{4k+1}+\\sum_{k=0}^{y-1}\\delta_{k}-(1-\\beta)\\left[\\sum_{k=0}^{y-1}(\\theta_{4k+1}+\\theta_{4k+2}+\\,q_{4k+4})+q_{4k+1}\\right]}{(x+1)C+\\beta(s-1+s_{0})+\\,k}}\\\\ &{\\quad+\\,\\frac{(x+1)C+\\,(s-1+s_{0})+\\sum_{k=0}^{x-1}\\theta_{k}+\\,j\\sum_{k=0}^{x-1}s_{4k+1}+y{\\cal C}+\\beta\\sum_{k=0}^{y-1}\\delta_{k}+\\sum_{k=0}^{y-1}q_{4k+1}}{(x+1)C+\\,\\beta(s-1+s_{0})+\\,k}}\\\\ &{\\leq\\frac{(x+1)C+\\,(s-1+s_{0})+\\sum_{k=0}^{x-1}\\theta_{k}+\\, $ 84.0 +1 (since $s_{4x+2}\\geq0]$   \n$\\begin{array}{c}{{\\displaystyle\\leq\\frac{(x+1)C+(x+1)(2\\gamma+\\eta)+\\sum_{k=0}^{x}s_{4k+1}-(1-\\beta)\\Big[\\sum_{k=0}^{x-1}\\big(s_{4k}+s_{4k+1}+s_{4k+2}\\big)+(s_{4x}+s_{4k+1}+s_{4k+2})\\Big]}{(x+1)C+\\beta(x+1)(2\\gamma+\\eta)+\\sum_{k=0}^{x}s_{4k+1}+y C+\\beta y(2\\gamma+\\eta)+\\sum_{k=0}^{y}q_{4k+1}}}}\\\\ {{\\displaystyle+\\frac{(y+1)C+\\sum_{k=0}^{y}q_{4k+1}+y(2\\gamma+\\eta)-(1-\\beta)\\Big[q_{1}+q_{2}+\\sum_{k=1}^{y-1}\\big(q_{4k}+q_{4k+1}+q_{4k+2}\\big)+q_{4y}\\Big]}{(x+1)C+\\beta(x+1)(2\\gamma+\\eta)+\\sum_{k=0}^{x}s_{4k+1}+y C+\\beta y(2\\gamma+\\eta)+\\sum_{k=0}^{y}q_{4k+1}}}}\\end{array}$ \\$4x+1)] + (4+1 (by (98) and (102))   \n$\\begin{array}{r l}&{~~~~~~~(x+1)C+(x+1)(2\\gamma+\\eta)+\\sum_{k=0}^{x}s_{4k+1}-(1-\\beta)\\Big[x(\\gamma-\\eta)+\\gamma\\Big]}\\\\ &{~~\\le\\frac{(x+1)C+\\beta(x+1)(2\\gamma+\\eta)}{(x+1)C+\\beta(x+1)(2\\gamma+\\eta)+\\sum_{k=0}^{x}s_{4k+1}+y C+\\beta y(2\\gamma+\\eta)+\\sum_{k=0}^{y}q_{4k+1}}}\\\\ &{~~+\\frac{(y+1)C+\\sum_{k=0}^{y}q_{4k+1}+y(2\\gamma+\\eta)-(1-\\beta)(y+1)(\\gamma-\\eta)}{(x+1)C+\\beta(x+1)(2\\gamma+\\eta)+\\sum_{k=0}^{x}s_{4k+1}+y C+\\beta y(2\\gamma+\\eta)+\\sum_{k=0}^{y}q_{4k+1}}}\\end{array}$ (by (97) and (100))   \n$\\begin{array}{r l}&{\\leq\\frac{(x+y+2)C+(x+y+1)(2\\gamma+\\eta)-\\left(1-\\beta\\right)\\left[(x+y+2)\\gamma-(x+y+1)\\eta\\right]}{(x+y+1)C+\\beta(x+y+1)(2\\gamma+\\eta)}}\\\\ &{\\qquad\\qquad\\qquad\\qquad\\qquad\\qquad\\qquad\\qquad\\qquad\\qquad\\qquad\\qquad\\qquad\\qquad\\qquad\\qquad\\qquad\\qquad\\qquad\\qquad\\qquad}\\\\ &{\\qquad\\qquad\\qquad\\qquad\\qquad\\qquad\\qquad\\qquad\\qquad\\qquad\\qquad\\qquad\\qquad(\\mathrm{since}\\,\\sum_{k=0}^{x}s_{k+1}\\geq0,\\displaystyle\\sum_{k=0}^{y}q_{k+1}\\geq0)}\\\\ &{=\\frac{2(x+y+1)\\gamma+(x+y+1)(2-\\beta)\\eta}{(x+y+1)\\left[(1+\\beta)\\gamma+\\beta\\eta\\right]}}\\\\ &{=\\frac{2\\gamma+(2-\\beta)\\eta}{(1+\\beta)\\gamma+\\beta\\eta}.}\\end{array}$ 03) ", "page_idx": 37}, {"type": "text", "text": "Case Il. $\\eta\\:>\\:\\gamma$ .By Lemma 4.3, for Pattern IV, the total regular cost in the $(4k+3)$ -th (for $k=-1,...,x)$ time interval (which is in an off phase and has length at most $T$ ) is less than $2\\gamma+\\eta$ similar for Pattern VI. Thus we have ", "page_idx": 37}, {"type": "equation", "text": "$$\n\\left\\{\\begin{array}{l l}{s_{4k+3}<2\\gamma+\\eta\\quad}&{\\mathrm{for}\\;\\mathrm{each}\\;k=-1,...,x-1,}\\\\ {q_{4k+3}<2\\gamma+\\eta\\quad}&{\\mathrm{for}\\;\\mathrm{each}\\;k=0,...,y-1.}\\end{array}\\right.\n$$", "text_format": "latex", "page_idx": 37}, {"type": "text", "text": "On the other hand, the total regular cost in any time interval in an on phase is non-negative, so it can be minimized to zero, except the last on phase of Pattern IV. As a result, we have ", "page_idx": 37}, {"type": "equation", "text": "$$\n\\begin{array}{r l}&{\\frac{\\mathsf{F S U M}(\\sigma;[\\tau_{k},\\mu_{l+\\tau+1}]\\,\\cup\\,[\\mu_{j+\\tau+1},\\mu_{j+\\tau+\\frac{\\tau}{2}+\\tau+1}+T))}{\\mathsf{O P T}(\\sigma;[\\tau_{k},\\mu_{l+\\tau+1}]\\,\\cup\\,[\\mu_{j+\\tau+1},\\mu_{j+\\tau+1}+T))}}\\\\ &{\\quad\\le\\frac{(x+1)C+\\sum_{k=-1}^{\\infty}s_{k+1}-1}{(x+1)C+\\beta(s-1)+s+\\mu_{k-1}+\\beta_{k+\\tau}}+(y+1)C+\\sum_{k=0}^{p-1}q_{k+3}}\\\\ &{\\quad\\le\\frac{(x+y+2)C+(x+y)(2\\gamma+\\eta)+\\,\\succ\\,q+p}{(x+1)C+\\beta(s+\\eta+1)(2\\gamma+\\eta)}+\\beta C+\\beta\\sum_{k=0}^{p-1}q_{k+3}}\\\\ &{\\quad=\\frac{(x+y+2)C+(x+2)(\\tau+p)+1}{(x+1)C+\\beta(x+y+1)(2\\gamma+\\eta)}}\\\\ &{\\quad=\\frac{(x+y+2)C+(x+y+1)(2\\gamma+\\eta)+(\\beta-1)\\gamma}{(x+\\tau)C+\\beta(x+y+1)(2\\gamma+\\eta)}}\\\\ &{\\quad=\\frac{(x+y+1)C+(x+y+1)(2\\gamma+\\eta)}{(x+y+1)C+\\beta(x+y+1)(2\\gamma+\\eta)}}\\\\ &{\\quad=\\frac{(x-p+1)C+\\eta}{(x+y+1)C+\\eta}}\\\\ &{\\quad\\le\\frac{(3-\\beta)\\gamma+\\eta}{(1+\\beta)\\gamma+\\eta}.}\\end{array}\n$$", "text_format": "latex", "page_idx": 38}, {"type": "text", "text": "The result follows from (103), and (105). ", "page_idx": 38}, {"type": "text", "text": "A.8 More Experimental Results and Discussions ", "text_level": 1, "page_idx": 38}, {"type": "text", "text": "For commuters, Figures 25 to 30 demonstrate the performance of various algorithms under different settings of $\\beta,C$ , and $T$ . Additionally, with the practical significance of these parameters in mind, we increase $C$ or decrease $T$ when $\\beta$ is reduced. In Figure 26, where $C$ is exceptionally high, PFSUM, $\\mathsf{S U M}_{w}$ , and SUM all tend towards not purchasing Bahncards. However, in this scenario, FSUM's competitive ratio escalates due to its complete reliance on predictions with large errors. ", "page_idx": 38}, {"type": "text", "text": "Additional results for occasional travelers are presented in Figures 28 to 30. These figures exhibit a consistent pattern, with PFSUM demonstrating its consistency in scenarios of small prediction error. Furthermore, PFSUM proves its robustness in cases of extremely large prediction errors, particularly evident in Figure 30. Here, while all other prediction-incorporated algorithms have competitive ratios of approximately 1.2 or higher, PFSUM consistently maintains a competitive ratio of less than 1.1. ", "page_idx": 38}, {"type": "image", "img_path": "3cb6pF3Tvf/tmp/1010710e2db1ccacd8e03ac00331913f11887960bdc1d293555f09e662e55b31.jpg", "img_caption": ["Figure 25: The cost ratios for commuters ( $\\beta=0.6$ $T=10$ $C=200)$ .\u201cU\", \u201cN\u201d and \u201cP\u201d represents Uniform, Normal and Pareto ticket price distributions respectively. "], "img_footnote": [], "page_idx": 38}, {"type": "image", "img_path": "3cb6pF3Tvf/tmp/e1e7c87c346af9896454ae40d2730386c73d995976ab24e354faf8ef996111ef.jpg", "img_caption": [], "img_footnote": [], "page_idx": 39}, {"type": "text", "text": "Figure 26: The cost ratios for commuters ( $\\beta=0.6$ $T=10$ $C=2000;$ . \u201cU\", \u201cN\" and \u201cP\" represents Uniform, Normal and Pareto ticket price distributions respectively. ", "page_idx": 39}, {"type": "image", "img_path": "3cb6pF3Tvf/tmp/3a8805ae6c35bd98ac7da9741d9d98b209e7486f2a99a0dcaec6214753b71740.jpg", "img_caption": [], "img_footnote": [], "page_idx": 39}, {"type": "text", "text": "Figure 27: The cost ratios for commuters ( $\\beta=0.2$ $T=10$ $C=400!$ ).\u201cU\", \u201cN\u201d and \u201cP\" represents Uniform, Normal and Pareto ticket price distributions respectively. ", "page_idx": 39}, {"type": "image", "img_path": "3cb6pF3Tvf/tmp/99d6b778d0ea802a3d39429f5138d7fae2f7cb88f8a7a6ec74f64e5bb503fd57.jpg", "img_caption": [], "img_footnote": [], "page_idx": 39}, {"type": "text", "text": "Figure 28: The cost ratios for occasional travelers ( $\\beta=0.6$ $T=10$ $C=200)$ ).\u201cU\",\u201cN\u201dand \u201cP\" represents Uniform, Normal and Pareto ticket price distributions respectively. ", "page_idx": 39}, {"type": "image", "img_path": "3cb6pF3Tvf/tmp/ef6cf36c4137c192f7896fcb3eb0f190c5ccb600bba4157ed793ea935cd43d17.jpg", "img_caption": ["Figure 29: The cost ratios for occasional travelers ( $\\beta=0.6$ $T=10$ $C=2000)$ .\u201cU\",\u201cN\u201dand \u201cP\u201d represents Uniform, Normal and Pareto ticket price distributions respectively. "], "img_footnote": [], "page_idx": 39}, {"type": "image", "img_path": "3cb6pF3Tvf/tmp/f9e45496298e9ab210e3198b15720ee18996688b1e05865d4383ed6018ede94a.jpg", "img_caption": [], "img_footnote": [], "page_idx": 40}, {"type": "text", "text": "Figure 30: The cost ratios for occasional travelers ( $\\beta=0.2$ $T=10$ $C=400^{\\circ}$ ).\u201cU\u201d,\u201cN\u201dand\u201cP\u201d represents Uniform, Normal and Pareto ticket price distributions respectively. ", "page_idx": 40}, {"type": "text", "text": "NeurIPS Paper Checklist ", "text_level": 1, "page_idx": 41}, {"type": "text", "text": "1. Claims ", "text_level": 1, "page_idx": 41}, {"type": "text", "text": "Question: Do the main claims made in the abstract and introduction accurately reflect the paper's contributions and scope? ", "page_idx": 41}, {"type": "text", "text": "Answer: [Yes] ", "text_level": 1, "page_idx": 41}, {"type": "text", "text": "Justification: The abstract and introduction clearly state the contributions made, matching both theoretical and experimental results. ", "page_idx": 41}, {"type": "text", "text": "Guidelines: ", "page_idx": 41}, {"type": "text", "text": "\u00b7 The answer NA means that the abstract and introduction do not include the claims made in the paper.   \n\u00b7 The abstract and/or introduction should clearly state the claims made, including the contributions made in the paper and important assumptions and limitations. A No or NA answer to this question will not be perceived well by the reviewers.   \n\u00b7 The claims made should match theoretical and experimental results, and reflect how much the results can be expected to generalize to other settings.   \n\u00b7 It is fine to include aspirational goals as motivation as long as it is clear that these goals are not attained by the paper. ", "page_idx": 41}, {"type": "text", "text": "2. Limitations ", "text_level": 1, "page_idx": 41}, {"type": "text", "text": "Question: Does the paper discuss the limitations of the work performed by the authors? ", "page_idx": 41}, {"type": "text", "text": "Answer: [No] ", "page_idx": 41}, {"type": "text", "text": "Justification: This paper provides both theoretical and experimental contributions for PFSUM. The theoretical results are derived without strong assumptions, but the experimental results are conducted, although extensively, only on synthesized dataset. Different travel request patterns may influence the advantage of PFSUM over the other algorithms. ", "page_idx": 41}, {"type": "text", "text": "Guidelines: ", "text_level": 1, "page_idx": 41}, {"type": "text", "text": "\u00b7 The answer NA means that the paper has no limitation while the answer No means that the paper has limitations, but those are not discussed in the paper.   \n\u00b7 The authors are encouraged to create a separate \"Limitations\" section in their paper.   \n\u00b7 The paper should point out any strong assumptions and how robust the results are to violations of these assumptions (e.g., independence assumptions, noiseless settings, model well-specification, asymptotic approximations only holding locally). The authors should refect on how these assumptions might be violated in practice and what the implications would be.   \n\u00b7 The authors should refect on the scope of the claims made, e.g., if the approach was only tested on a few datasets or with a few runs. In general, empirical results often depend on implicit assumptions, which should be articulated.   \n\u00b7 The authors should refect on the factors that influence the performance of the approach. For example, a facial recognition algorithm may perform poorly when image resolution is low or images are taken in low lighting. Or a speech-to-text system might not be used reliably to provide closed captions for online lectures because it fails to handle technical jargon.   \n\u00b7 The authors should discuss the computational efficiency of the proposed algorithms and how they scale with dataset size.   \n\u00b7 If applicable, the authors should discuss possible limitations of their approach to address problems of privacy and fairness.   \n\u00b7 While the authors might fear that complete honesty about limitations might be used by reviewers as grounds for rejection, a worse outcome might be that reviewers discover limitations that aren't acknowledged in the paper. The authors should use their best judgment and recognize that individual actions in favor of transparency play an important role in developing norms that preserve the integrity of the community. Reviewers will be specifically instructed to not penalize honesty concerning limitations. ", "page_idx": 41}, {"type": "text", "text": "3. Theory Assumptions and Proofs ", "text_level": 1, "page_idx": 41}, {"type": "text", "text": "Question: For each theoretical result, does the paper provide the full set of assumptions and a complete (and correct) proof? ", "page_idx": 42}, {"type": "text", "text": "Answer: [Yes] ", "text_level": 1, "page_idx": 42}, {"type": "text", "text": "Justification: All the propositions, lemmas, theorems and formulas in the paper are numbered, cross-referenced, and proved. The proof sketches are provided in the main content while the detailed proofs are given in the appendix. ", "page_idx": 42}, {"type": "text", "text": "Guidelines: ", "page_idx": 42}, {"type": "text", "text": "\u00b7 The answer NA means that the paper does not include theoretical results.   \n\u00b7 All the theorems, formulas, and proofs in the paper should be numbered and crossreferenced.   \n\u00b7 All assumptions should be clearly stated or referenced in the statement of any theorems.   \n\u00b7 The proofs can either appear in the main paper or the supplemental material, but if they appear in the supplemental material, the authors are encouraged to provide a short proof sketch to provide intuition.   \n\u00b7 Inversely, any informal proof provided in the core of the paper should be complemented by formal proofs provided in appendix or supplemental material.   \n\u00b7 Theorems and Lemmas that the proof relies upon should be properly referenced. ", "page_idx": 42}, {"type": "text", "text": "4. Experimental Result Reproducibility ", "text_level": 1, "page_idx": 42}, {"type": "text", "text": "Question: Does the paper fully disclose all the information needed to reproduce the main experimental results of the paper to the extent that it affects the main claims and/or conclusions of the paper (regardless of whether the code and data are provided or not)? ", "page_idx": 42}, {"type": "text", "text": "Answer: [Yes] ", "page_idx": 42}, {"type": "text", "text": "Justification: We have released the code and data for reproducibility. With our instructions, others can easily reproduce experimental results that are consistent with the results in the paper. ", "page_idx": 42}, {"type": "text", "text": "Guidelines: ", "page_idx": 42}, {"type": "text", "text": "\u00b7 The answer NA means that the paper does not include experiments.   \n\u00b7 If the paper includes experiments, a No answer to this question will not be perceived well by the reviewers: Making the paper reproducible is important, regardless of whether the code and data are provided or not.   \n\u00b7 If the contribution is a dataset and/or model, the authors should describe the steps taken to make their results reproducible or verifiable.   \n\u00b7 Depending on the contribution, reproducibility can be accomplished in various ways. For example, if the contribution is a novel architecture, describing the architecture fully might suffice, or if the contribution is a specific model and empirical evaluation, it may be necessary to either make it possible for others to replicate the model with the same dataset, or provide access to the model. In general. releasing code and data is often one good way to accomplish this, but reproducibility can also be provided via detailed instructions for how to replicate the results, access to a hosted model (e.g., in the case of a large language model), releasing of a model checkpoint, or other means that are appropriate to the research performed.   \n\u00b7 While NeurIPS does not require releasing code, the conference does require all submissions to provide some reasonable avenue for reproducibility, which may depend on the nature of the contribution. For example (a) If the contribution is primarily a new algorithm, the paper should make it clear how to reproduce that algorithm. (b) If the contribution is primarily a new model architecture, the paper should describe the architecture clearly and fully. (c) If the contribution is a new model (e.g., a large language model), then there should either be a way to access this model for reproducing the results or a way to reproduce the model (e.g., with an open-source dataset or instructions for how to construct thedataset). ", "page_idx": 42}, {"type": "text", "text": "(d) We recognize that reproducibility may be tricky in some cases, in which case authors are welcome to describe the particular way they provide for reproducibility. In the case of closed-source models, it may be that access to the model is limited in some way (e.g., to registered users), but it should be possible for other researchers to have some path to reproducing or verifying the results. ", "page_idx": 43}, {"type": "text", "text": "5. Open access to data and code ", "text_level": 1, "page_idx": 43}, {"type": "text", "text": "Question: Does the paper provide open access to the data and code, with sufficient instructions to faithfully reproduce the main experimental results, as described in supplemental material? ", "page_idx": 43}, {"type": "text", "text": "Answer: [Yes] ", "page_idx": 43}, {"type": "text", "text": "Justification: The code and data can be openly accessed. We provide the instructions to reproduce all the experimental results. ", "page_idx": 43}, {"type": "text", "text": "Guidelines: ", "page_idx": 43}, {"type": "text", "text": "\u00b7 The answer NA means that paper does not include experiments requiring code.   \n\u00b7 Please see the NeurIPS code and data submission guidelines (https: //nips.cc/ public/guides/CodeSubmissionPolicy) for more details.   \n\u00b7 While we encourage the release of code and data, we understand that this might not be possible, so \u201cNo\" is an acceptable answer. Papers cannot be rejected simply for not including code, unless this is central to the contribution (e.g., for a new open-source benchmark).   \n\u00b7 The instructions should contain the exact command and environment needed to run to reproduce the results. See the NeurIPS code and data submission guidelines (https : //nips.cc/public/guides/CodeSubmissionPolicy) for more details.   \n\u00b7 The authors should provide instructions on data access and preparation, including how to access the raw data, preprocessed data, intermediate data, and generated data, etc.   \n\u00b7 The authors should provide scripts to reproduce all experimental results for the new proposed method and baselines. If only a subset of experiments are reproducible, they should state which ones are omitted from the script and why.   \n\u00b7 At submission time, to preserve anonymity, the authors should release anonymized versions (if applicable).   \n\u00b7 Providing as much information as possible in supplemental material (appended to the paper) is recommended, but including URLs to data and code is permitted. ", "page_idx": 43}, {"type": "text", "text": "6. Experimental Setting/Details ", "text_level": 1, "page_idx": 43}, {"type": "text", "text": "Question: Does the paper specify all the training and test details (e.g., data splits, hyperparameters, how they were chosen, type of optimizer, etc.) necessary to understand the results? ", "page_idx": 43}, {"type": "text", "text": "Answer: [Yes] ", "text_level": 1, "page_idx": 43}, {"type": "text", "text": "Justification: The experimental settings are presented in the experiment section and the details are provided with the code. ", "page_idx": 43}, {"type": "text", "text": "Guidelines: ", "page_idx": 43}, {"type": "text", "text": "\u00b7 The answer NA means that the paper does not include experiments. \u00b7 The experimental setting should be presented in the core of the paper to a level of detail that is necessary to appreciate the results and make sense of them. \u00b7 The full details can be provided either with the code, in appendix, or as supplemental material. ", "page_idx": 43}, {"type": "text", "text": "7. Experiment Statistical Significance ", "text_level": 1, "page_idx": 43}, {"type": "text", "text": "Question: Does the paper report error bars suitably and correctly defined or other appropriate information about the statistical significance of the experiments? ", "page_idx": 43}, {"type": "text", "text": "Answer: [Yes] ", "page_idx": 43}, {"type": "text", "text": "Justification: The statistical significance involved in our experiments is divided into two parts: data generation and confidence intervals for the results. For data generation, we have given their distributions as well as parameters, and specific methods of generation in the paper. Additionally, for the results, we have given $95\\%$ confidence intervals for all results of 100 experiments through the shaded area in the figures. ", "page_idx": 43}, {"type": "text", "text": "", "page_idx": 44}, {"type": "text", "text": "Guidelines: ", "page_idx": 44}, {"type": "text", "text": "\u00b7 The answer NA means that the paper does not include experiments.   \n\u00b7 The authors should answer \"Yes\" if the results are accompanied by error bars, confidence intervals, or statistical significance tests, at least for the experiments that support the main claims of the paper.   \n\u00b7 The factors of variability that the error bars are capturing should be clearly stated (for example, train/test split, initialization, random drawing of some parameter, or overall run with given experimental conditions).   \n\u00b7 The method for calculating the error bars should be explained (closed form formula, call to a library function, bootstrap, etc.)   \n\u00b7 The assumptions made should be given (e.g., Normally distributed errors).   \n\u00b7 It should be clear whether the error bar is the standard deviation or the standard error of the mean.   \n\u00b7 It is OK to report 1-sigma error bars, but one should state it. The authors should preferably report a 2-sigma error bar than state that they have a $96\\%$ CI, if the hypothesis of Normality of errors is not verified.   \n\u00b7 For asymmetric distributions, the authors should be careful not to show in tables or figures symmetric error bars that would yield results that are out of range (e.g. negative error rates).   \n\u00b7 If error bars are reported in tables or plots, The authors should explain in the text how they were calculated and reference the corresponding figures or tables in the text. ", "page_idx": 44}, {"type": "text", "text": "8. Experiments Compute Resources ", "text_level": 1, "page_idx": 44}, {"type": "text", "text": "Question: For each experiment, does the paper provide sufficient information on the computer resources (type of compute workers, memory, time of execution) needed to reproduce the experiments? ", "page_idx": 44}, {"type": "text", "text": "Answer: [Yes] ", "page_idx": 44}, {"type": "text", "text": "Justification: We provide sufficient information on the computer resources for the experiments. ", "page_idx": 44}, {"type": "text", "text": "Guidelines: ", "page_idx": 44}, {"type": "text", "text": "\u00b7 The answer NA means that the paper does not include experiments.   \n\u00b7 The paper should indicate the type of compute workers CPU or GPU, internal cluster, or cloud provider, including relevant memory and storage.   \n\u00b7 The paper should provide the amount of compute required for each of the individual experimental runs as well as estimate the total compute.   \n\u00b7 The paper should disclose whether the full research project required more compute than the experiments reported in the paper (e.g., preliminary or failed experiments that didn't make it into the paper). ", "page_idx": 44}, {"type": "text", "text": "9. Code Of Ethics ", "text_level": 1, "page_idx": 44}, {"type": "text", "text": "Question: Does the research conducted in the paper conform, in every respect, with the NeurIPS Code of Ethics https: //neurips.cc/public/EthicsGuidelines? ", "page_idx": 44}, {"type": "text", "text": "Answer: [Yes] ", "page_idx": 44}, {"type": "text", "text": "Justification: We have reviewed the NeurIPs Code of Ethics, and we confirm that the research conducted conforms with the NeurIPS Code of Ethics in every respect. ", "page_idx": 44}, {"type": "text", "text": "Guidelines: ", "page_idx": 44}, {"type": "text", "text": "\u00b7 The answer NA means that the authors have not reviewed the NeurIPS Code of Ethics.   \n\u00b7 If the authors answer No, they should explain the special circumstances that require a deviation from the Code of Ethics.   \n\u00b7 The authors should make sure to preserve anonymity (e.g., if there is a special consideration due to laws or regulations in their jurisdiction). ", "page_idx": 44}, {"type": "text", "text": "10. Broader Impacts ", "text_level": 1, "page_idx": 44}, {"type": "text", "text": "Question: Does the paper discuss both potential positive societal impacts and negative societal impacts of the work performed? ", "page_idx": 45}, {"type": "text", "text": "Answer: [No] ", "page_idx": 45}, {"type": "text", "text": "Justification: This paper presents work to design, analyze and evaluate learning-augmented algorithms for the Bahncard problem. There are some positive potential societal consequences of our work. For example, saving the cost of travelers. But none of them we feel must be specifically highlighted. ", "page_idx": 45}, {"type": "text", "text": "Guidelines: ", "page_idx": 45}, {"type": "text", "text": "\u00b7 The answer NA means that there is no societal impact of the work performed.   \n\u00b7 If the authors answer NA or No, they should explain why their work has no societal impact or why the paper does not address societal impact.   \n\u00b7 Examples of negative societal impacts include potential malicious or unintended uses (e.g., disinformation, generating fake profiles, surveillance), fairness considerations (e.g., deployment of technologies that could make decisions that unfairly impact specific groups), privacy considerations, and security considerations.   \n\u00b7 The conference expects that many papers will be foundational research and not tied to particular applications, let alone deployments. However, if there is a direct path to any negative applications, the authors should point it out. For example, it is legitimate to point out that an improvement in the quality of generative models could be used to generate deepfakes for disinformation. On the other hand, it is not needed to point out that a generic algorithm for optimizing neural networks could enable people to train models that generate Deepfakes faster.   \n\u00b7 The authors should consider possible harms that could arise when the technology is being used as intended and functioning correctly, harms that could arise when the technology is being used as intended but gives incorrect results, and harms following from (intentional or unintentional) misuse of the technology.   \n\u00b7 If there are negative societal impacts, the authors could also discuss possible mitigation strategies (e.g., gated release of models, providing defenses in addition to attacks, mechanisms for monitoring misuse, mechanisms to monitor how a system learns from feedback over time, improving the efficiency and accessibility of ML). ", "page_idx": 45}, {"type": "text", "text": "11. Safeguards ", "text_level": 1, "page_idx": 45}, {"type": "text", "text": "Question: Does the paper describe safeguards that have been put in place for responsible release of data or models that have a high risk for misuse (e.g., pretrained language models, image generators, or scraped datasets)? ", "page_idx": 45}, {"type": "text", "text": "Answer: [NA] ", "page_idx": 45}, {"type": "text", "text": "Justification: The paper poses no such risks. ", "page_idx": 45}, {"type": "text", "text": "Guidelines: ", "page_idx": 45}, {"type": "text", "text": "\u00b7 The answer NA means that the paper poses no such risks.   \n\u00b7 Released models that have a high risk for misuse or dual-use should be released with necessary safeguards to allow for controlled use of the model, for example by requiring that users adhere to usage guidelines or restrictions to access the model or implementing safety filters.   \n\u00b7 Datasets that have been scraped from the Internet could pose safety risks. The authors should describe how they avoided releasing unsafe images.   \n\u00b7 We recognize that providing effective safeguards is challenging, and many papers do not require this, but we encourage authors to take this into account and make a best faith effort. ", "page_idx": 45}, {"type": "text", "text": "12. Licenses for existing assets ", "text_level": 1, "page_idx": 45}, {"type": "text", "text": "Question: Are the creators or original owners of assets (e.g., code, data, models), used in the paper, properly credited and are the license and terms of use explicitly mentioned and properly respected? ", "page_idx": 45}, {"type": "text", "text": "Answer: [NA] ", "page_idx": 45}, {"type": "text", "text": "Justification: The paper does not use existing assets. ", "page_idx": 45}, {"type": "text", "text": "Guidelines: ", "page_idx": 46}, {"type": "text", "text": "\u00b7 The answer NA means that the paper does not use existing assets.   \n\u00b7 The authors should cite the original paper that produced the code package or dataset.   \n\u00b7 The authors should state which version of the asset is used and, if possible, include a URL.   \n\u00b7 The name of the license (e.g., CC-BY 4.0) should be included for each asset.   \n\u00b7 For scraped data from a particular source (e.g., website), the copyright and terms of service of that source should be provided.   \n\u00b7 If assets are released, the license, copyright information, and terms of use in the package should be provided. For popular datasets, paperswithcode . com/datasets has curated licenses for some datasets. Their licensing guide can help determine the license of a dataset.   \n\u00b7 For existing datasets that are re-packaged, both the original license and the license of the derived asset (if it has changed) should be provided.   \n\u00b7 If this information is not available online, the authors are encouraged to reach out to the asset's creators. ", "page_idx": 46}, {"type": "text", "text": "13. New Assets ", "text_level": 1, "page_idx": 46}, {"type": "text", "text": "Question: Are new assets introduced in the paper well documented and is the documentation provided alongside the assets? ", "page_idx": 46}, {"type": "text", "text": "Answer: [Yes] ", "page_idx": 46}, {"type": "text", "text": "Justification: We have provided details of the code in an anonymized manner. ", "page_idx": 46}, {"type": "text", "text": "Guidelines: ", "page_idx": 46}, {"type": "text", "text": "\u00b7 The answer NA means that the paper does not release new assets.   \n\u00b7 Researchers should communicate the details of the dataset/code/model as part of their submissions via structured templates. This includes details about training, license, limitations, etc.   \n\u00b7 The paper should discuss whether and how consent was obtained from people whose asset isused.   \n\u00b7 At submission time, remember to anonymize your assets (if applicable). You can either create an anonymized URL or include an anonymized zip file. ", "page_idx": 46}, {"type": "text", "text": "14. Crowdsourcing and Research with Human Subjects ", "text_level": 1, "page_idx": 46}, {"type": "text", "text": "Question: For crowdsourcing experiments and research with human subjects, does the paper include the full text of instructions given to participants and screenshots, if applicable, as well as details about compensation (if any)? ", "page_idx": 46}, {"type": "text", "text": "Answer: [NA] ", "page_idx": 46}, {"type": "text", "text": "Justification: The paper does not involve crowdsourcing nor research with human subjects. Guidelines: ", "page_idx": 46}, {"type": "text", "text": "\u00b7 The answer NA means that the paper does not involve crowdsourcing nor research with human subjects.   \n\u00b7 Including this information in the supplemental material is fine, but if the main contribution of the paper involves human subjects, then as much detail as possible should be included in the main paper.   \n\u00b7 According to the NeurIPS Code of Ethics, workers involved in data collection, curation, or other labor should be paid at least the minimum wage in the country of the data collector. ", "page_idx": 46}, {"type": "text", "text": "15. Institutional Review Board (IRB) Approvals or Equivalent for Research with Human Subjects ", "page_idx": 46}, {"type": "text", "text": "Question: Does the paper describe potential risks incurred by study participants, whether such risks were disclosed to the subjects, and whether Institutional Review Board (IRB) approvals (or an equivalent approval/review based on the requirements of your country or institution)were obtained? ", "page_idx": 46}, {"type": "text", "text": "Answer: [NA] ", "page_idx": 46}, {"type": "text", "text": "Justification: The paper does not involve crowdsourcing nor research with human subjects. Guidelines: ", "page_idx": 47}, {"type": "text", "text": "\u00b7 The answer NA means that the paper does not involve crowdsourcing nor research with human subjects.   \n\u00b7 Depending on the country in which research is conducted, IRB approval (or equivalent) may be required for any human subjects research. If you obtained IRB approval, you should clearly state this in the paper.   \n\u00b7 We recognize that the procedures for this may vary significantly between institutions and locations, and we expect authors to adhere to the NeurIPs Code of Ethics and the guidelines for their institution.   \n\u00b7 For initial submissions, do not include any information that would break anonymity (if applicable), such as the institution conducting the review. ", "page_idx": 47}]